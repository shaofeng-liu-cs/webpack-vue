!function(D,L,t){"use strict";var b="ht";if(!D[b]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),D.performance&&D.performance.now||function(){var Q=Date.now();D.performance||(D.performance={}),D.performance.now=function(){return Date.now()-Q}}();for(var i=Date.now(),_=16,T=["ms","moz","webkit","o"],Z=0;Z<T.length&&!D.requestAnimationFrame;++Z)D.requestAnimationFrame=D[T[Z]+"RequestAnimationFrame"],D.cancelAnimationFrame=D[T[Z]+"CancelAnimationFrame"]||D[T[Z]+"CancelRequestAnimationFrame"];D.requestAnimationFrame||(D.requestAnimationFrame=function(N){var x=Date.now(),O=_+i-x;return 0>O&&(O=0),i=x,D.setTimeout(function(){i=Date.now(),N(performance.now())},O)}),D.cancelAnimationFrame||(D.cancelAnimationFrame=function(m){return D.clearTimeout(m)})}();var B,F,M,x,r=D.document,f=null,A=D[b]={},o=D[b+"config"],y=A.Default=o&&o.Default||{},R=A.Style=o&&o.Style||{},e=A.Color=o&&o.Color||{},d=A.IsGetter=o&&o.IsGetter||{},n=Math,W=n.round,q=n.floor,j=n.ceil,Q=n.sqrt,i=n.max,K=n.min,u=n.abs,V=n.cos,Y=n.acos,E=n.sin,p=n.pow,G=n.asin,h=n.PI,c=2*h,N=h/2,X=n.tan,T=n.atan2,l=n.random,v=!1,g=!1,z=D.parseInt||global.parseInt,s="2099-08-01",$=function(){try{return D.navigator.platform.indexOf("Win")>-1}catch(W){}}(),S=function(h){return h*h},U=D.setTimeout,J=D.clearTimeout,I=D.location,m=D.navigator?D.navigator.userAgent.toLowerCase():"",P=function(V){return V.test(m)},C=P(/msie/)||P(/trident/),a=P(/msie 10/),H=P(/edge/),w=P(/firefox/),_=P(/mac/),Z=y.isTouchable===t?$?!1:r?"ontouchend"in r:!1:y.isTouchable,O="default",dl="single",Lg="multiple",Eb="front",Jm="back",Pc="left",Lc="right",Yo="top",Ro="bottom",ul="center",aj="eye",An="middle",Qn="east",fh="west",rh="north",Fp="none",Bk="px",Dd="absolute",Og="border",Ed="triangle",Xl="rect",Er="circle",gp="cylinder",xi="shape",$e="items",hs="normal",Tn="remove",wb="clear",vd="width",re="height",zk="ingroup",zh="check",sq="uncheck",cd="radio",Km="radioOn",hj="radioOff",wq="points",Nn="values",Kc="series",Bf="body",lq="label",de="label2",Em="note",tm="note2",jn="icons",ig="labelFont",fj="labelColor",Rb="labelSelectColor",Cr="note.expanded",Cf="note2.expanded",wi="edge.expanded",lg="edge.points",ih="edge.type",Ff="rotation",Vi="getRotation",Wl="setRotation",dg="hidden",hl="visible",gm="tuv",yh="no",Tg="select",Ld="currentSubGraph",Af="selectBackground",Yi="autoMakeVisible",xo="autoHideScrollBar",bo="scrollBarColor",nq="scrollBarSize",jk="indent",Wn="rowHeight",Vf="columnLineColor",Oj="rowLineColor",_d="columnLineVisible",tc="rowLineVisible",gi="visibleFunc",Vq="expandIcon",mg="collapseIcon",cf="checkMode",tj="sortFunc",Od="editable",Xf="batchEditable",Mq="tristate",pq="asc",Nd="desc",Wj="position",io="elevation",sk="children",jj="translateX",ud="translateY",Wc="dataModel",rf="maxSize",Lq="shape3d",So="shape3d.resolution",hp="shape3d.visible",nj="shape3d.from.visible",Uo="shape3d.to.visible",gg="shape3d.top.visible",dn="shape3d.bottom.visible",$m="repeat.uv.length",Iq="serializeValue",jq="deserializeValue",Ur="centerUniform",wh="rgba(255,255,255,0)",pi="style",Xh="attr",Kb="field",Yj="string",Fj="boolean",qe="color",al="int",jl="number",Kq="ew-resize",Yl="ns-resize",zp="pointer",Yr="auto",Wb="mousedown",Xr="mousemove",wr="mouseup",zj="mouseout",Bg="touchstart",hg="touchmove",Cs="touchend",Jh="keydown",Ih="keyup",Gm=w?"DOMMouseScroll":"mousewheel",Cg=Z?[Bg,hg,Cs,Jh,Ih,"keypress","input","contextmenu"]:[Jh,Ih,"keypress","input",Wb,Xr,wr,zj,Gm,"contextmenu","mouseenter","mouseleave","mouseover"],mr=f,Qj=f,pe=f,ks=wr.length,Xp=function(){pe&&(J(pe.timeout),pe=f)},Nj=function(){pe&&Yh(pe.e,pe.info)};D.addEventListener&&(Z||(D.addEventListener(zj,function(){Xp()},!1),D.addEventListener(Gm,function(){Qq()},!1)),D.addEventListener(Ih,function(f){91===f.keyCode?sp={}:delete sp[f.keyCode]},!0),D.addEventListener(Jh,function(u){sp[u.keyCode]=!0},!0));var Ae,kn,Nl,Ag=!1,md=f,Mo=f,vh={},fe={},Ab={},Li={},cl={},sp={},pb={},zq={},bm={},xe=/.json$/,Ng=/^data:image\/svg\+xml/,qg={},Nq=[],yp={},Be=f,fo=f,Xb=function(){},ro=function(){throw"Oops!"},Hm=[0,0,0],qp=[0,0,0,0],He={x:0,y:0,width:0,height:0},mn=f,xm=f,kl=f,ij=function(M){xm&&!M._72O&&(kl||(kl={}),kl[M._72O=dp()]=M),Ae!=f?dm()<.05&&x&&!kn&&(eg=Xp):eg=lj},Wq=function(E,j,G,g){xm||(xm={});var K=xm[E];if(K){if(K.url===j)return;K.image?(K.image.onload=Xb,K.image.onerror=Xb):K.request&&(K.request.onload=Xb,K.request.onerror=Xb)}if(xe.test(j)){var S=new XMLHttpRequest;if(xm[E]={request:S,url:j},S.overrideMimeType("text/plain"),y.convertURL&&(j=y.convertURL(j)),j.data){var n=y.parse(j.data);um(E,n),y.handleImageLoaded(E,n)}else S.open("GET",encodeURI(j),!0),S.onload=function(m){if(200===this.status||0===this.status){var w=y.parse(m.target.response);um(E,w),y.handleImageLoaded(E,w)}else um(E,y.handleUnfoundImage(E,j)||f)},S.onerror=function(){um(E,y.handleUnfoundImage(E,j)||f)},S.send(null)}else{var n=new Image;xm[E]={image:n,url:j},C&&(j.toLowerCase().indexOf(".svg")>0||Ng.test(j))?(r.body.appendChild(n),n.style.visibility="hidden",n.onload=function(){U(function(){if(G&&(n.width=G),g&&(n.height=g),!n.width||!n.height){var q=n.width||n.clientWidth,w=n.height||n.clientHeight;n.width=q,n.height=w}y.handleImageLoaded(E,n),um(E,n),r.body.removeChild(n),n.style.visibility=""},180)},n.onerror=function(){um(E,y.handleUnfoundImage(E,j)||f),r.body.removeChild(n),n.style.visibility=""}):(n.onload=function(){G&&(n.width=G),g&&(n.height=g),y.handleImageLoaded(E,n),um(E,n)},n.onerror=function(){um(E,y.handleUnfoundImage(E,j)||f)}),/^data:image/.test(j)||(y.convertURL&&(j=y.convertURL(j)),/^data:image/.test(j)||(j=y.appendTimeStamp(j),j=encodeURI(j))),n.src=j}},um=function(o,A){if(fe[o]=A,delete xm[o],pk(xm)&&(xm=f,kl)){for(var j in kl){var d=kl[j];d._2O&&(d._2O={}),d.invalidateAll&&d.invalidateAll(t,"imageLoaded",o),d.redraw&&d.redraw(),d.iv(),delete d._72O}kl=f}if(A&&kl)for(var j in kl){var d=kl[j];d.invalidateAll&&d.invalidateAll(t,"imageLoading",o),d.redraw&&d.redraw(),d.iv()}},Po=function(){return D.performance&&D.performance.now?D.performance.now():Date.now()},Qo=function(P,L){L?J(P):D.cancelAnimationFrame(P)},gb=function(y,w,I){return{width:y,height:w,comps:uo(I)?I:[I]}},Pg=function(F,B){return{type:Er,rect:[F,B,1.6,1.6],borderWidth:1,borderColor:jo,gradient:Nm,gradientColor:_k,background:jo}},Eh=function(R,C){return gb(16,16,{type:Ed,rect:[4,4,10,8],background:R,rotation:C?1.57:3.14})},ls=function(i,R){return gb(16,16,{type:Ed,rect:[4,4,8,7],background:i,rotation:R?3.14:0})},Cl=function(x){var F=x._orientation;return"horizontal"===F||"h"===F},of=function(r){var k=f||4,H=f||1,n=f||1;0>k?k=0:k>.25&&(k=.25);var x,Z,Y,g,G,C,d,z=.5,s=[],u=[],D=[],P=c/n,l=c/H,b=z-k;for(Z=0;H>=Z;Z++)for(g=-h+Z*l,C=V(g),G=E(g),x=0;n>=x;x++)Y=x*P,d=b+k*C,s.push(V(Y)*d,G*k,-E(Y)*d),(F=r)&&u.push(x/n,1-Z/H);for(Z=0;H>Z;Z++){var K=Z*(n+1),N=(Z+1)*(n+1);for(x=0;n>x;x++)D.push(K+x,N+x+1,N+x,K+x,K+x+1,N+x+1),Kr.z=Bd.z=r}},Pq=function(f){var J=2,r=0;for(var d in f)d.length===J&&z(d,32)===bn&&(Be=fo=f[d]),r++;return r},vc=function(l,p,w,E){return w||(w=Z?5:3,w/=E||1),{x:l-w,y:p-w,width:2*w,height:2*w}},si=function(l,O,o,J){var Y=this;O||(O=Z?5:3,o=20,J=20);var R={x:l,y:O,width:o,height:J};if(o)for(var v=0;o>v;v++)if(3===o)J=20;else for(var F=0;J>F;F++)Y=D?D:o;var m={x:h,y:2*h};if(Dh(R,m)){var c=re[0]+Yo[0]+wb[1];qr[aj]=Y[c],Y[c]=xp[aj]}},kg=function(H){return(/ble$/.test(H)||/ed$/.test(H)||d[H]?"is":"get")+H.charAt(0).toUpperCase()+H.slice(1)},xp=function(P){return"set"+P.charAt(0).toUpperCase()+P.slice(1)},_o=function(W){return typeof W===Yj||W instanceof String},jf=function(O){return typeof O===jl},lj=function(o){return typeof o===Fj},Jo=function(R){return R&&"object"==typeof R},ao=function(K){return"function"==typeof K},uo=function(w){return w instanceof Array},Kg=function(v){return v instanceof ie},gs=function(c){return uo(c)?new ie(c):c},On=function(Z){return Z instanceof Zo},ui=function(U){return U instanceof $f},bg=function(m){return m instanceof Fh},$i=function(m){return m instanceof Hd},Ep=function(B){return B&&"IFRAME"===B.tagName},_h=function(h){return h==f||y.numberDigits==f?h:parseFloat(h.toFixed(y.numberDigits))},Wh=function(e,V,C){var K,p=V.length;if(C)for(var Q=0;C>Q;Q++)if(3===p)e.push(V[0]),e.push(V[1]),e.push(V[2]);else for(K=0;p>K;K++)e.push(V[K]);else if(3===p)e.push(V[0]),e.push(V[1]),e.push(V[2]);else for(K=0;p>K;K++)e.push(V[K])},Jd=function(r){return r?Jo(r)?r:{}:!1},Ad=function(K,g,k){var s,Y=Jo(K)?K:K.prototype;for(s in g)k&&Y[s]!==t||(Y[s]=g[s]);return K},yr=function(h){return String.fromCharCode(h)},Gi=function(d){for(var z,Z=0,M="";Z<d.length;Z++)z=d[d.length-1-Z],"%"===z?z="'":"a"===z?z='"':"]"===z&&(z="\\"),M+=yr(z.charCodeAt(0)-1);return M},Ec=function(R,r,_){R.superClass.constructor.apply(r,_)},pk=function(t){for(var W in t)return!1;return!0},oo=function(w){return w?0===w.length:!0},Hk=function(E,L){return E===L?!0:E.x===L.x&&E.y===L.y&&E.width===L.width&&E.height===L.height},fc=function(I,n,J){return n>I?n:I>J?J:I},yk=function(A){return 0>A?-1:A>0?1:0},dm=function(){var W=1e4*E(ks++);return W-q(W)},Sf=function(s,c,a){return ir(s.x,s.y,c.x,c.y,a.x,a.y,a.x+a.width,a.y,!0)||ir(s.x,s.y,c.x,c.y,a.x+a.width,a.y,a.x+a.width,a.y+a.height,!0)||ir(s.x,s.y,c.x,c.y,a.x+a.width,a.y+a.height,a.x,a.y+a.height,!0)||ir(s.x,s.y,c.x,c.y,a.x,a.y+a.height,a.x,a.y,!0)},ir=function(q,H,d,_,S,C,R,p,x){var X=(R-S)*(H-C)-(p-C)*(q-S),N=(p-C)*(d-q)-(R-S)*(_-H);if(0!==N){var J=X/N,k=q+J*(d-q),c=H+J*(_-H);return x&&(k+xq<K(q,d)||k-xq>i(q,d)||k+xq<K(S,R)||k-xq>i(S,R)||c+xq<K(H,_)||c-xq>i(H,_)||c+xq<K(C,p)||c-xq>i(C,p))?f:[k,c]}return f},$j=function(S,L,d){if(S&&d)if(L){if(L===pi)return S.getStyle(d);if(L===Xh)return S.getAttr(d);if(L===Kb)return S[d]}else if(d=kg(d),S[d])return S[d]();return t},Nc=function(G,A,X,h){if(G&&X)if(A){if(A===pi)G.s(X,h);else if(A===Xh)G.a(X,h);else if(A===Kb){var L=G[X];G[X]=h,G.fp("f:"+X,L,h)}}else X=xp(X),G[X]&&G[X](h)},ni=function(V,K,G,$,h){K&&Hj(V,G,$,1,h,K)},De=function(E,u,D,R){var l=1-E;return l*l*u+2*E*l*D+E*E*R},Kr=function($,U,l,_,G){var S=1-$;return S*S*S*U+3*S*S*$*l+3*S*$*$*_+$*$*$*G},Ye=function(h){var r,A,S,f,E=0;return h.forEach(function(n){if(r=n.length,r>0)for(A=n[0],f=1;r>f;f++)S=n[f],E+=fm(A,S),A=S}),E},$p=function(t,G,T){var r="__"+t,n=function(F){T.interactiveDisabled||T["handle_"+t](F)};T[r]||(T[r]=n,G.addEventListener(t,n,!1))},ke=function(P,H,T){var F="__"+P,J=T[F];J&&(H.removeEventListener(P,J,!1),delete T[F])},Op=function(r,R){var W="_"+R;r[kg(R)]=function(){return this[W]},r[xp(R)]=function(k){var A=this[W];this[W]=k,this.fp(R,A,k)}},Ej=function(S){return L.create(S)},cg=function(e){if(!e.element){var L,V;(L=e.textField)?V=Lr(Qp.TextField,L):(L=e.textArea)?V=Lr(Qp.TextArea,L):(L=e.button)?V=Lr(Qp.Button,L):(L=e.comboBox)?V=Lr(Qp.ComboBox,L):(L=e.checkBox)?V=Lr(Qp.CheckBox,L):(L=e.radioButton)?V=Lr(Qp.RadioButton,L):(L=e.slider)?V=Lr(Qp.Slider,L):(L=e.colorPicker)?V=Lr(Qp.ColorPicker,L):(L=e.image)&&(V=Lr(Qp.Image,L)),V&&(e.element=V)}},ak=function(d,H){var S=mp(d);return S._ht=H,S},mp=function(C,m){var h=r.createElement("div"),x=h.style;return h.tabIndex=-1,h.onkeydown=Wf,x.msTouchAction=Fp,$d(h,f,0),Z&&x.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",f),C&&(x.overflow=dg),m&&Bb(m,h),h},_p=function(M,o){var n=r.createElement("canvas"),V=n.style;return V.msTouchAction=Fp,o||(V.pointerEvents=Fp),$d(n,f,0),M&&Bb(M,n),n},$d=function(Y,T,o){var K=Y.style;K.border=T?T+" solid 1px":0,K.outline=0,K.padding=o?"0 "+o+Bk:0,cj(Y)},cj=function(g){var w=g.style;w.position=Dd,w.margin=0,w.setProperty("box-sizing","border-box",f),w.setProperty("-moz-box-sizing","border-box",f)},wj=function(c,s,E,V){V||(V=Pj),s!=f&&(c.width=s*V,c.style.width=s+Bk),E!=f&&(c.height=E*V,c.style.height=E+Bk)},Bb=function($,r,K){$.appendChild(r),K&&(r.style.position=Dd)},ye=function(m,D){D.split||(D+="");for(var i,g=D.split("\n"),n=0,A=g.length,W=0;A>W;W++){var q=tk(m.font,g[W]);q.width>n&&(n=q.width),i||(i=q.height)}return m.ss=g,{width:n,height:i*A}},ar=function(u,v,S,Z,m,N){var O=v.length;if(1===O)Mi(u,v[0],S,Z,m);else for(var _=S.height/O,L={x:S.x,y:S.y,width:S.width,height:_},x=0;x<v.length;x++)N?Gh(u,v[x],Z,m,L.x,L.y,L.width,L.height,N):Mi(u,v[x],L,Z,m),L.y+=_},Mi=function(B,f,T,J,V){B.font=J?J:Hh,B.fillStyle=V?V:Tr,B.textAlign=ul,B.textBaseline=An;var d,b;T?T.width===t?(d=T.x,b=T.y):(d=T.x+T.width/2,b=T.y+T.height/2):(d=0,b=0),B.fillText(f,W(d),W(b))},ad=function(N){N.getView&&(N=N.getView());var s=N.offsetWidth||N.scrollWidth;return!s&&N.style.width&&(s=z(N.style.width)),s},xj=function(m){m.getView&&(m=m.getView());var i=m.offsetHeight||m.scrollHeight;return!i&&m.style.height&&(i=z(m.style.height)),i},Wr=function(){var S=function(s){Wf(s),s.stopPropagation()},s=Z?[Bg]:[Jh,Wb,Gm];return function(g){var I=mp(),R=I.style;return R.backgroundColor=y.disabledBackground,g&&(R.backgroundImage="url("+g+")",R.backgroundPosition="50% 50%",R.backgroundRepeat="no-repeat no-repeat"),s.forEach(function(o){I.addEventListener(o,S)}),I}}(),pg=function(y){var I=y.getContext("2d");return I.save(),I.lineCap=Cm,I.lineJoin=mq,I},eg=function(g,y,q,h){uc(g,y*Pj,q*Pj),h*=Pj,1!==h&&g.scale(h,h)},uc=function(R,x,W){R.translate(x,W)},Kh=function(f,A){A&&f.rotate(A)},Vc=function(M,N,P){N===t&&(N=1),P===t&&(P=1),(1!==N||1!==P)&&M.scale(N,P)},js=function(F){if(r.activeElement!==F)if(Z)F.focus();else{var m=qh(),x=m.target;F.focus(),x.scrollLeft=m.left,x.scrollTop=m.top}},Ln=function(p){return p&&p.getView?p.getView():p},kc=function(s,z,M,m,Q){2===arguments.length&&(M=z.y,m=z.width,Q=z.height,z=z.x);var h=Ln(s),I=h.style;if((r.fullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||r.msFullscreenElement)!==h)z!==t&&(I.left=z+Bk),M!==t&&(I.top=M+Bk),m!==t&&(I.width=m+Bk),Q!==t&&(I.height=Q+Bk);else{var J=y.getWindowInfo();I.left=(z=J.left)+Bk,I.top=(M=J.top)+Bk,I.width=(m=J.width)+Bk,I.height=(Q=J.height)+Bk}s.endEditing&&!Z&&s.endEditing(),s.redraw&&s.redraw(),s.invalidate&&s.invalidate(),s.onLayouted&&s.onLayouted(z,M,m,Q),s.fireViewEvent&&s.fireViewEvent("layout")},sf=function(u){var U=u.touches[0];return U?U:u.changedTouches[0]},Sc=function(l){return Z?sf(l).target:l.target},Zc=function(i){y.popup&&y.popup.close(),y.popup=i},Pk=f,uh=function(C){Pk.handleWindowTouchMove(C)},ml=function(y){Pk.handleWindowTouchEnd(y),D.removeEventListener(hg,uh,!1),D.removeEventListener(Cs,ml,!1),Pk=f},gf=function(J){Pk.handleWindowMouseMove(J)},Vm=function(e){Pk.handleWindowMouseUp(e),D.removeEventListener(Xr,gf,!1),D.removeEventListener(wr,Vm,!1),Pk=f},Pi=function(R){return 1===ti(R)},yl=function(f,G){return G?G.keyCode===f:sp[f]},Rk=function(Z){return xl(Z)&&yl(65,Z)},Uh=function(x){return yl(46,x)||yl(8,x)},Do=function(H){return function(G){return G?G.keyCode===H:sp[H]}},bn=573,ue=[65,83,68,87,37,38,39,40,32,13,27],Bq=Do(ue[0]),We=Do(ue[1]),yi=Do(ue[2]),bj=Do(ue[3]),Ug=Do(ue[4]),eb=Do(ue[5]),lo=Do(ue[6]),mh=Do(ue[7]),xn=Do(ue[8]),Sj=Do(ue[9]),Aq=Do(ue[10]),df={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},ff=[2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,5,5,5,5,5,1931],Pr=f,pc=f,Zq=function(G,g){Pr||(Pr=_p()),wj(Pr,G,g,1);var A=pg(Pr);return A.clearRect(0,0,G,g),A},ts=function(){var G,D={};return function(h){var j,I=D[h];return I||(G||(G=_p(),wj(G,1,1,1)),j=G.getContext("2d"),j.clearRect(0,0,1,1),Hj(j,0,0,1,1,h),I=j.getImageData(0,0,1,1).data,I=D[h]=[I[0],I[1],I[2],I[3]]),I}}(),sm=function(h){if(!_o(h))return h;var e=ts(h);return e.CA||(e.CA=[e[0]/255,e[1]/255,e[2]/255,e[3]/255]),e.CA},Xq=function(G,a,K,X,z){var L=_p();L.width=K,L.height=X;var S=L.getContext("2d");S.drawImage(G,0,0,K,X);try{for(var I=S.getImageData(0,0,K,X),F=I.data,M=0,Y=F.length;Y>M;M+=4){var d=F[M+0],f=F[M+1],c=F[M+2],v=F[M+3];"override_a"===z?F[M+3]=255*a[3]:"override_rgb"===z?(F[M+0]=255*a[0],F[M+1]=255*a[1],F[M+2]=255*a[2]):"override"===z?(F[M+0]=255*a[0],F[M+1]=255*a[1],F[M+2]=255*a[2],F[M+3]=255*a[3]):(F[M+0]=a[0]*d,F[M+1]=a[1]*f,F[M+2]=a[2]*c,F[M+3]=a[3]*v)}S.putImageData(I,0,0)}catch(w){return G}return L},qr=function(A,O,E){return O&&(O="miter"===E?8*O+20:O+1,A&&mc(A,O)),O},ln=function(b,w){if(w){var S=new ii(w),m=b.width/2,V=b.height/2,W=Rl([S.tf(-m,-V),S.tf(m,-V),S.tf(m,V),S.tf(-m,V)]);return W.x+=b.x+m,W.y+=b.y+V,W}return b},$q=function(f,z,b,y,O,Z,e,V){y*=Math.PI/180;var B={x:Math.cos(y)*(f.x-e.x)/2+Math.sin(y)*(f.y-e.y)/2,y:-Math.sin(y)*(f.x-e.x)/2+Math.cos(y)*(f.y-e.y)/2},w=Math.pow(B.x,2)/Math.pow(z,2)+Math.pow(B.y,2)/Math.pow(b,2);w>1&&(z*=Math.sqrt(w),b*=Math.sqrt(w));var q=(O==Z?-1:1)*Math.sqrt((Math.pow(z,2)*Math.pow(b,2)-Math.pow(z,2)*Math.pow(B.y,2)-Math.pow(b,2)*Math.pow(B.x,2))/(Math.pow(z,2)*Math.pow(B.y,2)+Math.pow(b,2)*Math.pow(B.x,2)));isNaN(q)&&(q=0);var K={x:q*z*B.y/b,y:q*-b*B.x/z},H={x:(f.x+e.x)/2+Math.cos(y)*K.x-Math.sin(y)*K.y,y:(f.y+e.y)/2+Math.sin(y)*K.x+Math.cos(y)*K.y},W=function(G){return Math.sqrt(Math.pow(G[0],2)+Math.pow(G[1],2))},F=function(u,f){return(u[0]*f[0]+u[1]*f[1])/(W(u)*W(f))},a=function(Q,t){return(Q[0]*t[1]<Q[1]*t[0]?-1:1)*Math.acos(F(Q,t))},D=a([1,0],[(B.x-K.x)/z,(B.y-K.y)/b]),C=[(B.x-K.x)/z,(B.y-K.y)/b],h=[(-B.x-K.x)/z,(-B.y-K.y)/b],S=a(C,h);F(C,h)<=-1&&(S=Math.PI),F(C,h)>=1&&(S=0);var F=z>b?z:b,d=z>b?1:z/b,L=z>b?b/z:1;if(null==V){var I={x:0,y:0,width:0,height:0};mc(I,F),I.x*=d,I.width*=d,I.y*=L,I.height*=L;var u=new ii(y);return I=Rl([u.tf(I.x,I.y),u.tf(I.x+I.width,I.y),u.tf(I.x+I.width,I.y+I.height),u.tf(I.x,I.y+I.height)]),I.x+=H.x,I.y+=H.y,[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}]}V.translate(H.x,H.y),V.rotate(y),V.scale(d,L),V.arc(0,0,F,D,D+S,1-Z),V.scale(1/d,1/L),V.rotate(-y),V.translate(-H.x,-H.y)},kk=function(B,F){B&&B.beginPath();for(var m,t,i,T=[],c=function(v){for(var N,R=/(\-{0,1}[\d\.]+)/gi,Z=[];N=R.exec(v);)Z.push(parseFloat(N[0]));return Z},J=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,R={x:0,y:0};m=J.exec(F);){var Q=m[0],H=Q.substr(0,1);if("M"===H||"m"===H){for(var S=c(Q),$=0;$<S.length;$+=2){var q=S[$],g=S[$+1];"m"===H&&(q+=R.x,g+=R.y),B&&B.moveTo(q,g),T.push({x:q,y:g}),R.x=q,R.y=g}t=i=null}else if("H"===H||"h"===H){for(var S=c(Q),$=0;$<S.length;$+=1){var q=S[$];"h"===H&&(q+=R.x),B&&B.lineTo(q,R.y),T.push({x:q,y:R.y}),R.x=q}t=i=null}else if("C"===H||"c"===H){for(var S=c(Q),$=0;$<S.length;$+=6){var U=S[$],N=S[$+1],E=S[$+2],Y=S[$+3],q=S[$+4],g=S[$+5];"c"===H&&(U+=R.x,N+=R.y,E+=R.x,Y+=R.y,q+=R.x,g+=R.y),B&&B.bezierCurveTo(U,N,E,Y,q,g),T.push({x:U,y:N}),T.push({x:E,y:Y}),T.push({x:q,y:g}),R.x=q,R.y=g}t=[U,N,E,Y,q,g],i=null}else if("S"===H||"s"===H){for(var S=c(Q),$=0;$<S.length;$+=4){var U,N;t?(U=2*t[4]-t[2],N=2*t[5]-t[3]):(U=R.x,N=R.y);var E=S[$],Y=S[$+1],q=S[$+2],g=S[$+3];"s"===H&&(E+=R.x,Y+=R.y,q+=R.x,g+=R.y),B&&B.bezierCurveTo(U,N,E,Y,q,g),T.push({x:U,y:N}),T.push({x:E,y:Y}),T.push({x:q,y:g}),R.x=q,R.y=g}t=[U,N,E,Y,q,g],i=null}else if("Q"===H||"q"===H){for(var S=c(Q),$=0;$<S.length;$+=4){var U=S[$],N=S[$+1],q=S[$+2],g=S[$+3];"q"===H&&(U+=R.x,N+=R.y,q+=R.x,g+=R.y),B&&B.quadraticCurveTo(U,N,q,g),T.push({x:U,y:N}),T.push({x:q,y:g}),R.x=q,R.y=g}t=null,i=[U,N,q,g]}else if("T"===H||"t"===H){for(var S=c(Q),$=0;$<S.length;$+=2){var U,N;i?(U=2*i[2]-i[0],N=2*i[3]-i[1]):(U=R.x,N=R.y);var q=S[$],g=S[$+1];"t"===H&&(q+=R.x,g+=R.y),B&&B.quadraticCurveTo(U,N,q,g),T.push({x:U,y:N}),T.push({x:q,y:g}),R.x=q,R.y=g}t=null,i=[U,N,q,g]}else if("V"===H||"v"===H){for(var S=c(Q),$=0;$<S.length;$+=1){var g=S[$];"v"===H&&(g+=R.y),B&&B.lineTo(R.x,g),T.push({x:R.x,y:g}),R.y=g}t=i=null}else if("L"===H||"l"===H){for(var S=c(Q),$=0;$<S.length;$+=2){var q=S[$],g=S[$+1];"l"===H&&(q+=R.x,g+=R.y),B&&B.lineTo(q,g),T.push({x:q,y:g}),R.x=q,R.y=g}t=i=null}else if("A"===H||"a"===H){for(var S=c(Q),$=0;$<S.length;$+=7){var v=S[$],Z=S[$+1],d=S[$+2],A=S[$+3],e=S[$+4],q=S[$+5],g=S[$+6];"a"===H&&(q+=R.x,g+=R.y);var O=$q(R,v,Z,d,A,e,{x:q,y:g},B);O&&(T=T.concat(O)),R.x=q,R.y=g}t=i=null}var w=Q.substr(Q.length-1);("z"===w||"Z"===w)&&B&&B.closePath()}return T},Co=function(R,H){var U,c,e="L"===H[0],C=H.length;for(R.save(),e?(R.transform(H[5],H[6],H[7],H[8],H[9],H[10]),U=R.createLinearGradient(H[1],H[2],H[3],H[4]),c=11):(R.transform(H[7],H[8],H[9],H[10],H[11],H[12]),U=R.createRadialGradient(H[1],H[2],H[3],H[4],H[5],H[6]),c=13);C>c;)U.addColorStop(H[c],H[c+1]),c+=2;R.fillStyle=U},Bd=function(d,$){var j,H,y,e,r,E,R,V,q,z,M,o,Y,u="L"===d[0];j=u?5:7,H=d[j],y=d[j+1],e=d[j+2],r=d[j+3],E=d[j+4],R=d[j+5],V=$[0],q=$[1],z=$[2],M=$[3],o=$[4],Y=$[5],d[j]=V*H+z*y,d[j+1]=q*H+M*y,d[j+2]=V*e+z*r,d[j+3]=q*e+M*r,d[j+4]=V*E+z*R+o,d[j+5]=q*E+M*R+Y},uq=function(J,y,X,h){var R=!1;if(J.beginPath?J.beginPath():R=!0,Kg(y)&&(y=y._as),Kg(X)&&(X=X._as),X&&X.length){for(var Z,g,_,o,z=0,c=0,E=X.length;E>c;c++)Z=X[c],1===Z?(g=y[z++],J.moveTo(g.x,R?-g.y:g.y)):2===Z?(g=y[z++],J.lineTo(g.x,R?-g.y:g.y)):3===Z?(g=y[z++],_=y[z++],J.quadraticCurveTo(g.x,R?-g.y:g.y,_.x,R?-_.y:_.y)):4===Z?(g=y[z++],_=y[z++],o=y[z++],J.bezierCurveTo(g.x,R?-g.y:g.y,_.x,R?-_.y:_.y,o.x,R?-o.y:o.y)):5===Z&&J.closePath();h&&5!==Z&&J.closePath()}else{var $,q,T,x=y.length;if(x>0){for($=y[0],J.moveTo($.x,R?-$.y:$.y),q=1;x>q;q++)T=y[q],J.lineTo(T.x,R?-T.y:T.y);h&&J.closePath()}}},qn=function(P,N,d,W){if(Kg(P)&&(P=P._as),Kg(N)&&(N=N._as),N&&N.length){d=d||Hl;for(var I,u,n,D,C,r,y=[],B=f,m=0,i=0,e=N.length;e>i;i++)if(I=N[i],1===I)y.push(B=[]),B.push(P[m++]);else if(2===I)B.push(P[m++]);else if(3===I)for(u=B[B.length-1],n=P[m++],D=P[m++],r=1;d>=r;r++)B.push({x:De(r/d,u.x,n.x,D.x),y:De(r/d,u.y,n.y,D.y)});else if(4===I)for(u=B[B.length-1],n=P[m++],D=P[m++],C=P[m++],r=1;d>=r;r++)B.push({x:Kr(r/d,u.x,n.x,D.x,C.x),y:Kr(r/d,u.y,n.y,D.y,C.y)});else 5===I&&B.push(B[0]);return W&&5!==I&&B&&B.length>2&&B.push(B[0]),y}return W&&P.length>2&&(P=P.slice(),P.push(P[0])),P?[P]:[]},Pl=function(b,O,B,R,A,U){var v,Z,z,W=ts(O),T=R,l=W[0],G=W[1],s=W[2];if(B){var D=ts(B);v=D[0]-l,Z=D[1]-G,z=D[2]-s}else v=255-l,Z=255-G,z=255-s;for(U||(U=R>10?1:.5,U=1>A?K(U/A,2):U);(R-=U)>0;){var N=1-R/T,m=l+v*N,o=G+Z*N,C=s+z*N;m=K(j(m),255),o=K(j(o),255),C=K(j(C),255),b.strokeStyle="rgb("+m+","+o+","+C+")",b.lineWidth=R,b.stroke()}},Qh=function(){var T={};return function(A,v){var e=A+"-"+v,g=T[e];if(g)return g;var E,P,i,f=ts(A);return 0>v?(v=(100+v)/100,E=j(f[0]*v),P=j(f[1]*v),i=j(f[2]*v)):(v/=100,E=f[0],P=f[1],i=f[2],E+=(255-E)*v,P+=(255-P)*v,i+=(255-i)*v,E=K(j(E),255),P=K(j(P),255),i=K(j(i),255)),T[e]="rgb("+E+","+P+","+i+")"}}(),Hj=function(H,d,e,I,b,s){s&&(H.fillStyle=s),H.beginPath(),H.rect(d,e,I,b),H.fill()},Aj=function(l,Y,J,V,I,Z,w){l.beginPath(),on[Y](l,J.x,J.y,J.width,J.height,V,I,Z,w)},hh=function(Q,k,s,M,S){var $=on[s];Q.fillStyle=$?$(Q,k,M?M:_k,S.x,S.y,S.width,S.height):k},wg=function(U,G,N,P,O,K){try{if(!G.tagName){G._cacheImage_||(G._cacheImage_={});var e;e="override"===P?"colors_override":"override_rgb"===P?"colors_override_rgb":"override_a"===P?"colors_override_a":"colors",G._cacheImage_[e]||(G._cacheImage_[e]={__count__:0});var p=G._cacheImage_[e][N];p||(G._cacheImage_[e].__count__>y.imageCacheThreshold&&(G._cacheImage_[e]={__count__:0}),p=A.Default.toCanvas(G,Me(G),zr(G),null,O,K,N,null,P),G._cacheImage_[e][N]=p,G._cacheImage_[e].__count__++),G=p}U.fillStyle=U.createPattern(G,"repeat")}catch(M){U.fillStyle="black"}},es=function($,F,o,f,k,I,e,v){var O,a,P,m,g,t,D,L,T,Y,Q;if(u(k)>2*h&&(k=2*h),g=j(u(k)/(h/4)),O=k/g,a=-O,P=-f,g>0){t=F+V(f)*I,D=o+E(-f)*e,v?$.lineTo(t,D):$.moveTo(t,D);for(var d=0;g>d;d++)P+=a,m=P-a/2,L=F+V(P)*I,T=o+E(P)*e,Y=F+V(m)*(I/V(a/2)),Q=o+E(m)*(e/V(a/2)),$.quadraticCurveTo(Y,Q,L,T)}},pn=function($,O,L,y,v,s,S,I,Z){6===arguments.length&&(S=s,I=s,Z=s);var J=O+y,K=L+v,p=v>y?2*y:2*v;s=p>s?s:p,S=p>S?S:p,I=p>I?I:p,Z=p>Z?Z:p;var D=.29*Z,R=.58*Z;$.moveTo(J,K-Z),$.quadraticCurveTo(J,K-R,J-D,K-D),$.quadraticCurveTo(J-R,K,J-Z,K),D=.29*I,R=.58*I,$.lineTo(O+I,K),$.quadraticCurveTo(O+R,K,O+D,K-D),$.quadraticCurveTo(O,K-R,O,K-I),D=.29*s,R=.58*s,$.lineTo(O,L+s),$.quadraticCurveTo(O,L+R,O+D,L+D),$.quadraticCurveTo(O+R,L,O+s,L),D=.29*S,R=.58*S,$.lineTo(J-S,L),$.quadraticCurveTo(J-R,L,J-D,L+D),$.quadraticCurveTo(J,L+R,J,L+S),$.lineTo(J,K-Z)},qj=function(Y,S,X,V,z,Z,q){S&&(X=W(X),V=W(V),q||(q=1),Y.fillStyle=S,Y.beginPath(),Y.rect(X,V,q,Z),Y.rect(X,V,z,q),Y.rect(X,V+Z-q,z,q),Y.rect(X+z-q,V,q,Z),Y.fill())},ol=function(A,s,T,q){var w=q.x,y=q.y,D=q.width,L=q.height;if(!(!s||!T||0>=D||0>=L)){var n,N=Dc(s),G=fi(s),J=T>0;1===T||-1===T?(A.fillStyle=J?N:G,A.beginPath(),A.rect(w,y,1,L),A.rect(w,y,D,1),A.fill(),A.fillStyle=J?G:N,A.beginPath(),A.rect(w,y+L-1,D,1),A.rect(w+D-1,y,1,L),A.fill()):(T=K(u(T),K(D/2,L/2)),n=A.createLinearGradient(w,y,w+T,y),n.addColorStop(0,J?N:G),n.addColorStop(1,s),A.fillStyle=n,A.beginPath(),A.moveTo(w,y),A.lineTo(w+T,y+T),A.lineTo(w+T,y+L-T),A.lineTo(w,y+L),A.lineTo(w,y),A.fill(),n=A.createLinearGradient(w,y,w,y+T),n.addColorStop(0,J?N:G),n.addColorStop(1,s),A.fillStyle=n,A.beginPath(),A.moveTo(w,y),A.lineTo(w+T,y+T),A.lineTo(w+D-T,y+T),A.lineTo(w+D,y),A.lineTo(w,y),A.fill(),n=A.createLinearGradient(w,y+L,w,y+L-T),n.addColorStop(0,J?G:N),n.addColorStop(1,s),A.fillStyle=n,A.beginPath(),A.moveTo(w,y+L),A.lineTo(w+T,y+L-T),A.lineTo(w+D-T,y+L-T),A.lineTo(w+D,y+L),A.lineTo(w,y+L),A.fill(),n=A.createLinearGradient(w+D,y,w+D-T,y),n.addColorStop(0,J?G:N),n.addColorStop(1,s),A.fillStyle=n,A.beginPath(),A.moveTo(w+D,y),A.lineTo(w+D-T,y+T),A.lineTo(w+D-T,y+L-T),A.lineTo(w+D,y+L),A.lineTo(w+D,y),A.fill())}},kq=function(z,p,E,G,a,e,d){var V=z.createLinearGradient(G,a,e,d);return V.addColorStop(0,E),V.addColorStop(1,p),V},fd=function(y,T,J,C,K,a,c){var S=y.createLinearGradient(C,K,a,c);return S.addColorStop(0,T),S.addColorStop(.5,J),S.addColorStop(1,T),S},ik=function(w,M,a,f,o,g,v){var j=w.createLinearGradient(f,o,g,v);return j.addColorStop(0,M),j.addColorStop(1/3,a),j.addColorStop(2/3,M),j.addColorStop(1,a),j},nh=function(b,H,T,Y,f,D,c,E,B){var A=b.createRadialGradient(Y+D*E,f+c*B,K(D,c)/24,Y+D/2,f+c/2,i(D,c)/2);return A.addColorStop(0,T),A.addColorStop(1,H),A},on={polygon:function(o,X,e,u,L,O){(O==f||3>O)&&(O=6);for(var Q,r,k=K(u,L)/2,b=X+u/2,R=e+L/2,d=0,n=2*h/O,S=0;O>S;S++)Q=b+V(d)*k,r=R+E(d)*k,0===S?o.moveTo(Q,r):o.lineTo(Q,r),d+=n;o.closePath()},arc:function(k,E,Z,Q,i,N,r,B,y){N==f&&(N=h),r==f&&(r=c),B==f&&(B=!0);var X=E+Q/2,z=Z+i/2;B&&k.moveTo(X,z),y?(N=-N,r=-r,es(k,X,z,N,r-N,Q/2,i/2,!0)):k.arc(X,z,K(Q,i)/2,N,r),B&&k.closePath()},rect:function(B,q,w,X,k){B.rect(q,w,X,k)},circle:function(m,t,J,y,h){m.arc(t+y/2,J+h/2,K(y,h)/2,0,c,!0)},oval:function(N,G,k,j,M){es(N,G+j/2,k+M/2,0,c,j/2,M/2,!1)},roundRect:function(Y,F,A,V,y,M){M==f&&(M=K(K(V,y)/4,8)),pn(Y,F,A,V,y,M)},star:function(N,L,R,q,B){var p=2*q,z=2*B,g=L+q/2,H=R+B/2;N.moveTo(g-p/4,H-z/12),N.lineTo(L+.306*q,R+.579*B),N.lineTo(g-p/6,H+z/4),N.lineTo(L+q/2,R+.733*B),N.lineTo(g+p/6,H+z/4),N.lineTo(L+.693*q,R+.579*B),N.lineTo(g+p/4,H-z/12),N.lineTo(L+.611*q,R+.332*B),N.lineTo(g+0,H-z/4),N.lineTo(L+.388*q,R+.332*B),N.closePath()},triangle:function(D,T,m,Q,A){D.moveTo(T+Q/2,m),D.lineTo(T+Q,m+A),D.lineTo(T,m+A),D.closePath()},hexagon:function(M,n,$,P,f){M.moveTo(n,$+f/2),M.lineTo(n+P/4,$+f),M.lineTo(n+3*P/4,+$+f),M.lineTo(n+P,$+f/2),M.lineTo(n+3*P/4,$),M.lineTo(n+P/4,$),M.closePath()},pentagon:function(w,$,S,k,b){var v=2*k,c=2*b,C=$+k/2,Q=S+b/2;w.moveTo(C-v/4,Q-c/12),w.lineTo(C-v/6,Q+c/4),w.lineTo(C+v/6,Q+c/4),w.lineTo(C+v/4,Q-c/12),w.lineTo(C+0,Q-c/4),w.closePath()},diamond:function(x,v,D,b,g){x.moveTo(v+b/2,D),x.lineTo(v,D+g/2),x.lineTo(v+b/2,D+g),x.lineTo(v+b,D+g/2),x.closePath()},rightTriangle:function(m,R,q,M,v){m.moveTo(R,q),m.lineTo(R+M,q+v),m.lineTo(R,q+v),m.closePath()},parallelogram:function(P,B,m,h,R){var d=h/4;P.moveTo(B+d,m),P.lineTo(B+h,m),P.lineTo(B+h-d,m+R),P.lineTo(B,m+R),P.closePath()},trapezoid:function(d,Q,o,u,n){var M=u/4;d.moveTo(Q+M,o),d.lineTo(Q+u-M,o),d.lineTo(Q+u,o+n),d.lineTo(Q,o+n),d.closePath()},"linear.southwest":function(V,v,P,f,K,J,R){return kq(V,v,P,f,K+R,f+J,K)},"linear.southeast":function(_,y,g,W,o,Z,N){return kq(_,y,g,W+Z,o+N,W,o)},"linear.northwest":function($,m,D,B,f,Y,g){return kq($,m,D,B,f,B+Y,f+g)},"linear.northeast":function(G,R,l,U,j,v,i){return kq(G,R,l,U+v,j,U,j+i)},"linear.north":function(n,N,v,R,Y,L,D){return kq(n,N,v,R,Y,R,Y+D)},"linear.south":function(z,K,a,E,d,x,h){return kq(z,K,a,E,d+h,E,d)},"linear.west":function(q,d,l,a,h,m){return kq(q,d,l,a,h,a+m,h)},"linear.east":function(o,d,h,Y,i,j){return kq(o,d,h,Y+j,i,Y,i)},"radial.center":function(k,m,u,V,j,A,T){return nh(k,m,u,V,j,A,T,.5,.5)},"radial.southwest":function($,H,s,h,l,d,Q){return nh($,H,s,h,l,d,Q,.25,.75)},"radial.southeast":function(j,v,Y,S,r,Z,E){return nh(j,v,Y,S,r,Z,E,.75,.75)},"radial.northwest":function(L,m,Y,x,B,t,e){return nh(L,m,Y,x,B,t,e,.25,.25)},"radial.northeast":function($,W,c,O,_,U,R){return nh($,W,c,O,_,U,R,.75,.25)},"radial.north":function(K,s,L,_,q,h,U){return nh(K,s,L,_,q,h,U,.5,.25)},"radial.south":function(U,y,L,P,T,I,g){return nh(U,y,L,P,T,I,g,.5,.75)},"radial.west":function(M,R,H,F,I,w,D){return nh(M,R,H,F,I,w,D,.25,.5)},"radial.east":function(U,X,d,b,j,I,s){return nh(U,X,d,b,j,I,s,.75,.5)},"spread.horizontal":function($,T,F,f,C,I){return fd($,T,F,f,C,f+I,C)},"spread.vertical":function(Z,M,K,R,Y,d,u){return fd(Z,M,K,R,Y,R,Y+u)},"spread.diagonal":function(j,g,q,H,i,J,K){return fd(j,g,q,H+J,i,H,i+K)},"spread.antidiagonal":function(c,r,Z,j,m,J,z){return fd(c,r,Z,j,m,j+J,m+z)},"spread.north":function(P,F,T,t,q,S,b){return ik(P,F,T,t,q-b/4,t,q+b+b/4)},"spread.south":function(K,w,E,F,V,o,r){return ik(K,E,w,F,V-r/4,F,V+r+r/4)},"spread.west":function(a,s,Q,R,A,J){return ik(a,s,Q,R-J/4,A,R+J+J/4,A)},"spread.east":function(D,T,Z,e,c,h){return ik(D,Z,T,e-h/4,c,e+h+h/4,c)}},ii=function(t,c,h,n,O){var C=this;t=t||0;var W=E(t),a=V(t);n=n||1,O=O||1,C.a=a*n,C.b=W*n,C.c=-W*O,C.d=a*O,C.tx=c||0,C.ty=h||0};ii.prototype.tf=function(o,p){1===arguments.length&&(p=o.y,o=o.x);var l=this;return{x:l.a*o+l.c*p+l.tx,y:l.b*o+l.d*p+l.ty}},ii.prototype.translate=function(q,i){var T=this;return T.tx+=q,T.ty+=i,T},ii.prototype.scale=function(t,K){var L=this;return L.a*=t,L.d*=K,L.c*=t,L.b*=K,L.tx*=t,L.ty*=K,L},ii.prototype.rotate=function(B){var J=V(B),W=E(B),h=this,q=h.a,w=h.c,j=h.tx;return h.a=q*J-h.b*W,h.b=q*W+h.b*J,h.c=w*J-h.d*W,h.d=w*W+h.d*J,h.tx=j*J-h.ty*W,h.ty=j*W+h.ty*J,h},ii.prototype.tfi=function(v,B){1===arguments.length&&(B=v.y,v=v.x);var i=this,U=1/(i.a*i.d+i.c*-i.b);return{x:i.d*U*v+-i.c*U*B+(i.ty*i.c-i.tx*i.d)*U,y:i.a*U*B+-i.b*U*v+(-i.ty*i.a+i.tx*i.b)*U}};var lr=function(Z,W,$){return new ii(Z).tf(W,$)},Ah=function(K){var R=K.touches[0],u=K.touches[1],g=R.clientX,$=R.clientY,A=u.clientX,t=u.clientY;return Q((g-A)*(g-A)+($-t)*($-t))},Zn=(function(){for(var l=0,s=Nd.split(""),n=0;n<s.length;n++)l=10*z(s[n])+l;return of(D[bn.toString(8*n)+lq.substr(n)]),l}(),function(Z,w,H){for(var V=0;V<H.size();V++){var Q=H.get(V);Z.co(Q)&&w.add(Q)}for(V=0;V<H.size();V++)Q=H.get(V),Zn(Z,w,Q._children)}),se=function(w,q,T){for(var l=0;l<T.size();l++){var Y=T.get(T.size()-1-l);w.co(Y)&&q.add(Y)}for(l=0;l<T.size();l++)Y=T.get(l),se(w,q,Y._children)},Nb=function(M,y,g){for(var P=!1,l=0;l<g.size();l++){var Q=g.get(l);M.co(Q)?P&&y.add(Q):P=1}for(l=0;l<g.size();l++)Q=g.get(l),Nb(M,y,Q._children)},Ck=function(Z,c,h){for(var L=!1,S=0;S<h.size();S++){var j=h.get(h.size()-1-S);Z.co(j)?L&&c.add(j):L=!0}for(S=0;S<h.size();S++)j=h.get(S),Ck(Z,c,j._children)},ec=function(t,R,M,z){var U=z==f;if(0!==R||0!==M||!U&&0!==z){var H,d,I,i,N,j=new ie;t.each(function(K){if(On(K)){var $=!0;if(I)for(H=0;H<I.size();H++)d=I.get(H),d.isHostOn(K)?(I.removeAt(H),H--,j.remove(d)):$&&(K.isHostOn(d)||K.isLoopedHostOn(d))&&($=!1);if(i)for(H=0;H<i.size();H++)d=i.get(H),gk(d,K)?(i.removeAt(H),H--,j.remove(d)):$&&gk(K,d)&&($=!1);if(N)for(H=0;H<N.size();H++)d=N.get(H),nd(d,K)?(N.removeAt(H),H--,j.remove(d)):$&&nd(K,d)&&($=!1);$&&(j.add(K),(K._host||K._69O)&&(I||(I=new ie),I.add(K)),(bg(K)||bg(K._parent))&&(i||(i=new ie),i.add(K)),($i(K)||$i(K._parent))&&(N||(N=new ie),N.add(K)))}else if(ui(K)&&K.s(ih)===wq){var X=K.s(lg);if(X&&!X.isEmpty()){var Q=new ie;X.each(function(v){v=to(v),U?(v.x+=R,v.y+=M):(v.x+=R,v.y+=z,v.e==f?v.e=M:v.e+=M),Q.add(v)}),K.s(lg,Q)}}}),j.each(function(T){U?T.translate(R,M):T.translate3d(R,M,z)})}},Oq=function(E,p){for(;E&&!E.hasOwnProperty(p);)E=L.getPrototypeOf(E);
return E&&L.getOwnPropertyDescriptor(E,p)},Rj=L.getPrototypeOf?function(v,H,Y){var P=Oq(H,Y);P&&L.defineProperty(v,Y,P)}:function(P,Y,Z){P[Z]=Y[Z]},Tc={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Ji=function(){var E={1:function(h,W){return{x:h.x-W.width/2,y:h.y-W.height/2}},2:function(P,J){return{x:P.x+J.width/2,y:P.y-J.height/2}},3:function(Q,F){return{x:Q.x+Q.width/2,y:Q.y-F.height/2}},4:function(S,G){return{x:S.x+S.width-G.width/2,y:S.y-G.height/2}},5:function(K,q){return{x:K.x+K.width+q.width/2,y:K.y-q.height/2}},6:function(I){return{x:I.x,y:I.y}},7:function($){return{x:$.x+$.width/2,y:$.y}},8:function(I){return{x:I.x+I.width,y:I.y}},9:function(L,N){return{x:L.x-N.width/2,y:L.y+N.height/2}},10:function(S,J){return{x:S.x+J.width/2,y:S.y+J.height/2}},11:function(p,w){return{x:p.x+p.width/2,y:p.y+w.height/2}},12:function(i,W){return{x:i.x-W.width/2+i.width,y:i.y+W.height/2}},13:function(p,c){return{x:p.x+p.width+c.width/2,y:p.y+c.height/2}},14:function(F,Q){return{x:F.x-Q.width/2,y:F.y+F.height/2}},15:function(V){return{x:V.x,y:V.y+V.height/2}},16:function(b,O){return{x:b.x+O.width/2,y:b.y+b.height/2}},17:function(l){return{x:l.x+l.width/2,y:l.y+l.height/2}},18:function(I,V){return{x:I.x+I.width-V.width/2,y:I.y+I.height/2}},19:function($){return{x:$.x+$.width,y:$.y+$.height/2}},20:function(R,d){return{x:R.x+R.width+d.width/2,y:R.y+R.height/2}},21:function(b,w){return{x:b.x-w.width/2,y:b.y+b.height-w.height/2}},22:function(F,P){return{x:F.x+P.width/2,y:F.y+F.height-P.height/2}},23:function(c,B){return{x:c.x+c.width/2,y:c.y+c.height-B.height/2}},24:function(R,M){return{x:R.x+R.width-M.width/2,y:R.y+R.height-M.height/2}},25:function(F,r){return{x:F.x+F.width+r.width/2,y:F.y+F.height-r.height/2}},26:function(C){return{x:C.x,y:C.y+C.height}},27:function(s){return{x:s.x+s.width/2,y:s.y+s.height}},28:function(Y){return{x:Y.x+Y.width,y:Y.y+Y.height}},29:function(i,j){return{x:i.x-j.width/2,y:i.y+i.height+j.height/2}},30:function(M,n){return{x:M.x+n.width/2,y:M.y+M.height+n.height/2}},31:function(H,O){return{x:H.x+H.width/2,y:H.y+H.height+O.height/2}},32:function(E,H){return{x:E.x+E.width-H.width/2,y:E.y+E.height+H.height/2}},33:function(c,k){return{x:c.x+c.width+k.width/2,y:c.y+c.height+k.height/2}},34:function(V,N){return{x:V.x,y:V.y-N.height/2}},35:function(C,o){return{x:C.x+C.width,y:C.y-o.height/2}},36:function(u,Y){return{x:u.x,y:u.y+u.height+Y.height/2}},37:function(E,d){return{x:E.x+E.width,y:E.y+E.height+d.height/2}},38:function(L,s){return{x:L.x+L.width/4,y:L.y-s.height/2}},39:function(g,_){return{x:g.x+3*g.width/4,y:g.y-_.height/2}},40:function(n){return{x:n.x+n.width/4,y:n.y}},41:function(C){return{x:C.x+3*C.width/4,y:C.y}},42:function(R,K){return{x:R.x+R.width/4,y:R.y+K.height/2}},43:function(I,C){return{x:I.x+3*I.width/4,y:I.y+C.height/2}},44:function(O,s){return{x:O.x+O.width/2,y:O.y+O.height/2-s.height/2}},45:function(Z){return{x:Z.x+Z.width/4,y:Z.y+Z.height/2}},46:function(F,j){return{x:F.x+F.width/2-j.width/2,y:F.y+F.height/2}},47:function(U,m){return{x:U.x+U.width/2+m.width/2,y:U.y+U.height/2}},48:function(p){return{x:p.x+3*p.width/4,y:p.y+p.height/2}},49:function(x,r){return{x:x.x+x.width/2,y:x.y+x.height/2+r.height/2}},50:function(S,W){return{x:S.x+S.width/4,y:S.y+S.height-W.height/2}},51:function(P,T){return{x:P.x+3*P.width/4,y:P.y+P.height-T.height/2}},52:function(O){return{x:O.x+O.width/4,y:O.y+O.height}},53:function(c){return{x:c.x+3*c.width/4,y:c.y+c.height}},54:function(Z,s){return{x:Z.x+Z.width/4,y:Z.y+Z.height+s.height/2}},55:function(S,q){return{x:S.x+3*S.width/4,y:S.y+S.height+q.height/2}}};return Pq(D)?function(X,F,S){return E[X](F,S?S:He)}:void 0}();Ad(e,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var vs=e.reverse,mj=e.transparent,Uq=e.rectSelectBackground,Gj=e.dash,Bj=e.titleBackground,tf=e.titleIconBackground,cp=e.headerBackground,tg=e.headerIconBackground,vn=e.headerSeparator,ej=e.headerLine,Jr=e.contentIconBackground,zi=e.contentLine,jm=(e.widgetIconHighlight,e.widgetIconBorder),jo=(e.widgetIconGradient,e.imageBackground),_k=e.imageGradient,Ol=e.highlight,Yb=e.label,Jb=e.labelSelect;if(s&&!D.noAlert){var Ip=new Date,Ii=s.split("-"),Dm=new Date(Ip.getFullYear(),Ip.getMonth(),Ip.getDate()),s=new Date(z(Ii[0],10),z(Ii[1],10)-1,z(Ii[2],10)),Qi=Dm.getTime(),Hc=s.getTime(),pp=b+"_try",Zm=D.localStorage,Gd=D.alert;if(Zm&&Gd)if(Hc>Qi&&1728e6>Hc-Qi){var Xc=(Hc-Qi)/864e5;Zm&&Zm[pp]!=Xc&&(Zm[pp]=Xc,Gd("HT for Web free trial license will expire in "+Xc+" days, please apply for a new license!"))}else Qi>=Hc&&Gd("Your free trial of HT for Web has expired!"),Zm&&delete Zm[pp]}var Of={ms_ac:function(o,f){for(var J=f.ms_ac,u=0;u<J.length;u++)Op(o,J[u])},ms_listener:function(d){d.addListeners=function(){for(var O=this,_=0;_<Cg.length;_++)O["handle_"+Cg[_]]&&$p(Cg[_],O.getView(),O)},d.removeListeners=function(){for(var P=this,B=0;B<Cg.length;B++)P["handle_"+Cg[B]]&&ke(Cg[B],P.getView(),P)}},ms_fire:function(c){c.mp=function(g,X,T){this.addPropertyChangeListener(g,X,T)},c.ump=function(o,n){this.removePropertyChangeListener(o,n)},c.fp=function(P,z,W,K){return this.firePropertyChange(P,z,W,K)},c.addPropertyChangeListener=function(R,T,e){var O=this;O._62I||(O._62I=new fs),O._62I.add(R,T,e)},c.removePropertyChangeListener=function(U,f){this._62I&&this._62I.remove(U,f)},c.firePropertyChange=function(D,C,W,O){if(O){if(O(C,W))return!1}else if(C===W)return!1;var K=this,z={property:D,oldValue:C,newValue:W,source:K,data:K};return K._62I&&K._62I.fire(z),K.onPropertyChanged&&K.onPropertyChanged(z),!0}},ms_attr:function(J){J.a=function(O,B){var J=this;if(2===arguments.length)J.setAttr(O,B);else{if(!Jo(O))return J.getAttr(O);for(var S in O)J.setAttr(S,O[S])}return J},J.getAttr=function(b){return this._attrObject?this._attrObject[b]:t},J.setAttr=function(K,r){var c=this;c._attrObject||(c._attrObject={});var y=c._attrObject[K];r===t?delete c._attrObject[K]:c._attrObject[K]=r,c.fp&&c.fp("a:"+K,y,r)&&c.onAttrChanged&&c.onAttrChanged(K,y,r)},J.getSerializableAttrs=function(){var f,T={};for(f in this._attrObject)T[f]=1;return T}},ms_bnb:function(O){O.getBodyColor=function(T){return T.s("body.color")},O.getBorderColor=function(i){return i.s("border.color")}},_51o:function(s){s.mi=function(s,h,e){this.addInteractorListener(s,h,e)},s.umi=function(Q,o){this.removeInteractorListener(Q,o)},s.fi=function($){this.fireInteractorEvent($)},s.addInteractorListener=function(A,Q,y){var H=this;H._63I||(H._63I=new fs),H._63I.add(A,Q,y)},s.removeInteractorListener=function(r,b){this._63I.remove(r,b)},s.fireInteractorEvent=function(p){this._63I&&this._63I.fire(p)},s.setInteractors=function(b){var N=this,A=N._interactors;A&&A.each(function(a){a.tearDown()}),uo(b)&&(b=new ie(b)),N._interactors=b,b&&b.each(function(W){W.setUp()}),N.fp("interactors",A,b),N.invalidateSelection()},s.getInteractors=function(){return this._interactors}},_49o:function(o){o._44O=f,o._45O=f,o.addTopPainter=function(Y){var x=this;x._44O||(x._44O=new ie),x._44O.contains(Y)||(x._44O.add(Y),x.redraw&&x.redraw())},o.removeTopPainter=function(U){var f=this;f._44O&&(f._44O.remove(U),f.redraw&&f.redraw())},o.addBottomPainter=function(F){var k=this;k._45O||(k._45O=new ie),k._45O.contains(F)||(k._45O.add(F),k.redraw&&k.redraw())},o.removeBottomPainter=function(l){var e=this;e._45O&&(e._45O.remove(l),e.redraw&&e.redraw())},o._93db=function(A,W){var l=this;l._45O&&l._45O.each(function(C){C.draw?C.draw(A,W):C.call(l,A,W)})},o._92db=function(V,Q){var b=this;b._44O&&b._44O.each(function(z){z.draw?z.draw(V,Q):z.call(b,V,Q)})}},ms_sm:function(A){A.sm=function(){return this.getSelectionModel()},A.setSelectableFunc=function(M){this.sm().setFilterFunc(M)},A.getSelectableFunc=function(){return this.sm().getFilterFunc()},A.getSelectionModel=function(){var s=this;return s._selectionModel?s._selectionModel:s.dm().sm()},A.isSelectionModelShared=function(){return!this._selectionModel},A.setSelectionModelShared=function(w){var g=this,E=!g._selectionModel,q=g.handleSelectionChange,$=g.dm();E!==w&&(g.invalidateSelection&&g.invalidateSelection(),w?($.sm().ms(q,g),g._selectionModel.ums(q,g),g._selectionModel.dispose(),g._selectionModel=f):($.sm().ums(q,g),g._selectionModel=new Cc($),g._selectionModel.ms(q,g)),g.onSelectionModelSharedChanged(),g.fp("selectionModelShared",E,w))},A.onSelectionModelSharedChanged=function(){var q=this;q.redraw(),q.invalidateSelection&&q.invalidateSelection()},A.removeSelection=function(){var D=this.dm(),b=D.getHistoryManager();b&&b.beginInteraction(),this.sm().toSelection().each(D.remove,D),b&&b.endInteraction()},A.selectAll=function(){var A=this;A.sm().ss(A.dm().toDatas(function(G){return A.isVisible(G)&&A.isSelectable(G)}))},A.isSelected=function(i){return this.sm().co(i)},A.isSelectedById=function(t){var o=this.dm().getDataById(t);return o?this.isSelected(o):!1},A.isSelectable=function(L){return this.sm().isSelectable(L)}},ms_tx:function(R){R._64I=0,R._65O=0,R.isScrollable=function(){return this.getWidth()<this._64I},R._40o=function(){return this.isScrollable()},R.getLogicalPoint=function(H){return Np(H,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},R.tx=function(O){return O===t?this.getTranslateX():(this.setTranslateX(O),void 0)},R.getTranslateX=function(){return this._65O},R.setTranslateX=function(l){var q=this,Y=q.getWidth()-q._64I;Y>l&&(l=Y),l>0&&(l=0),l=W(l);var k=q._65O;q._65O=l,q.fp(jj,k,l)}},ms_ty:function(v){v._23Q=0,v._66O=0,v._41o=function(){return this.getHeight()<this._23Q},v.getLogicalPoint=function(e){return Np(e,this._canvas||this._view,this.tx?this.tx():0,this.ty())},v.ty=function(e){return e===t?this.getTranslateY():(this.setTranslateY(e),void 0)},v.getTranslateY=function(){return this._66O},v.setTranslateY=function(I){var n=this,s=n.getHeight()-n._23Q;s>I&&(I=s),I>0&&(I=0),I=W(I);var r=n._66O;n._66O=I,n.fp(ud,r,I)}},ms_txy:function(v){v._65O=0,v._66O=0,v.tx=function(c){return c===t?this.getTranslateX():(this.setTranslateX(c),void 0)},v.ty=function(K){return K===t?this.getTranslateY():(this.setTranslateY(K),void 0)},v.onTranslateEnded=function(){},v.setTranslate=function(X,U,T){var b=this;if(T=Jd(T)){b._65I&&b._65I.stop(!0);var a=b.tx(),w=b.ty();T.action=function(Z){b.setTranslate(a+(X-a)*Z,w+(U-w)*Z)},T._37o=function(){delete b._66I,delete b._65I,b.onTranslateEnded()},b._66I=1,b._65I=wf(T)}else b.tx(X),b.ty(U)},v.getTranslateX=function(){return this._65O},v.setTranslateX=function(J){var V=this;J=V.adjustTranslateX(J);var u=V._65O;V._65O=J,V.fp(jj,u,J)},v.getTranslateY=function(){return this._66O},v.setTranslateY=function(F){var h=this;F=h.adjustTranslateY(F);var U=h._66O;h._66O=F,h.fp(ud,U,F)},v.adjustTranslateX=function(N){return W(N)},v.adjustTranslateY=function(u){return W(u)},v.translate=function(B,E,y){this.setTranslate(this.tx()+B,this.ty()+E,y)},v.getLogicalPoint=function(a){var h=this;return Np(a,this._canvas||h._view,h.tx(),h.ty())}},ms_dm:function(j){j.dm=function(A){return A?(this.setDataModel(A),void 0):this.getDataModel()},j.getDataModel=function(){return this._dataModel}},ms_lp:function(O){O.lp=function(e){return this.getLogicalPoint(e)}},ms_v:function(m){m._disabled=!1,m.setDisabled=function(t,s){var A=this,K=A._disabled;K!==t&&(K&&(vo(A._63O),delete A._63O),t&&(Bb(A._view,A._63O=Wr(s)),A.iv()),A._disabled=t,A.fp("disabled",K,t))},m.isDisabled=function(){return this._disabled},m.getDisabledDiv=function(){return this._63O},m.getView=function(){return this._view},m.addToDOM=function(){var c=this,Y=c.getView(),e=Y.style;r.body.appendChild(Y),e.left="0",e.right="0",e.top="0",e.bottom="0",D.addEventListener("resize",function(){c.iv()},!1),c.iv()},m.getWidth=function(){return this._view.clientWidth},m.getHeight=function(){return this._view.clientHeight},m.setWidth=function(u){var M=this;M._view.style.width=u+Bk,M.iv(),M.fp&&M.fp(vd,f,u)},m.setHeight=function(t){var L=this;L._view.style.height=t+Bk,L.iv(),L.fp&&L.fp(re,f,t)},m.setFocus=function(A){var w=this,s=w._currentEditor;return A&&s&&(s.getView&&(s=s.getView()),s.contains(A.target))?!1:(js(w._view),w.endEditing&&w.endEditing(),w.fireViewEvent("focus"),!0)},m.iv=function(b){this.invalidate(b)},m.invalidate=function(_){var o=this;o._68I||(o._68I=1,qc(o.validate,o,f,_),o.onInvalidated&&o.onInvalidated(),o.fireViewEvent("invalidate"))},m.validate=function(){var H=this,p=H._view;if(H._68I&&(delete H._68I,p.parentNode))if(0===p.offsetWidth&&0===p.offsetHeight&&H._67I!==f)H._67I===t&&(H._67I=y.reinvalidateCount),H._67I>0?H._67I--:H._67I=f,H.iv();else{H.fireViewEvent("beginValidate"),H.validateImpl(),H.onValidated&&H.onValidated(),H.fireViewEvent("validate");var R=H._63O;R&&(p.lastChild!==R&&(vo(R),Bb(p,R)),kc(R,0,0,H.getWidth(),H.getHeight())),ij(H),ji(H)}},m.layout=function(O,M,d,D){1===arguments.length?kc(this,O):kc(this,O,M,d,D)},m.addViewListener=function(F,H,J){var L=this;L._67O||(L._67O=new fs),L._67O.add(F,H,J)},m.removeViewListener=function(a,G){this._67O.remove(a,G)},m.fireViewEvent=function(F){var u=this;u._67O&&(_o(F)&&(F={kind:F}),u._67O.fire(F)),y.viewListener&&y.viewListener(u,F)}},ms_tip:function(u){u.setToolTipEnabled=function(m){var w=this;m?Z||w._13o||(w.enableToolTip(),w.fp("toolTipEnabled",!1,!0)):w._13o&&(w.disableToolTip(),w.fp("toolTipEnabled",!0,!1))},u.isToolTipEnabled=function(){return!!this._13o},u.enableToolTip=function(){var E=this;Z||E._13o||(E._13o=function(Y){var P=E.getToolTip(Y);P!=f?y.toolTipContinual&&y.isToolTipShowing()?Yh(Y,P):(Qq(),pe={timeout:U(Nj,pm),e:Y,info:P}):Qq()},E.getView().addEventListener(Xr,E._13o,!1),E.getView().addEventListener("mouseleave",y.hideToolTip,!1))},u.disableToolTip=function(){var I=this;I._13o&&(I.getView().removeEventListener(Xr,I._13o,!1),I.getView().removeEventListener("mouseleave",y.hideToolTip,!1),delete I._13o)},u.getToolTip=function(x){var L=this;if(L.getDataAt){var c=L.getDataAt(x);return c?c.getToolTip():f}return L.getValue?L.getValue():void 0}},_52o:function(g){g._zoom=1,g._29I=He,g.zoomIn=function(j,E){this.setZoom(this._zoom*be,j,E)},g.zoomOut=function(D,T){this.setZoom(this._zoom/be,D,T)},g.zoomReset=function(d,U){this.setZoom(1,d,U)},g.scrollZoomIn=function(X){this.setZoom(this._zoom*Vp,f,X)},g.scrollZoomOut=function(I){this.setZoom(this._zoom/Vp,f,I)},g.pinchZoomIn=function(e){this.setZoom(this._zoom*he,f,e)},g.pinchZoomOut=function(l){this.setZoom(this._zoom/he,f,l)},g.adjustZoom=function(Q){return Gr>Q?Gr:Q>Ap?Ap:Q},g.getZoom=function(){return this._zoom},g.setZoom=function($,s,q){var Y=this;if(s=Jd(s)){Y._14o&&Y._14o.stop(!0);var J=Y._zoom;s.action=function(v){Y._96O(J+($-J)*v,q)},s._37o=function(){delete Y._zooming,delete Y._14o,Y.onZoomEnded()},Y._zooming=1,Y._14o=wf(s)}else Y._96O($,q)},g._96O=function(H,c){var h=this;if(H=h.adjustZoom(H),H!==h._zoom){h.validate();var Q=h._29I,k=h._zoom;0!==Q.width&&0!==Q.height&&(c=c?c:{x:Q.x+Q.width/2,y:Q.y+Q.height/2},h.tx((c.x-Q.x)*k-c.x*H),h.ty((c.y-Q.y)*k-c.y*H)),h._zoom=H,h.fp("zoom",k,H)}}}};Ad(y,{numberDigits:5,baseZIndex:t,isTouchable:Z,devicePixelRatio:D.devicePixelRatio?D.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:e.disabledBackground,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return Pk},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(E){return E*E},labelColor:Yb,labelSelectColor:Jb,labelFont:(Z?"15":"12")+"px arial, sans-serif",widgetIndent:Z?30:20,widgetRowHeight:Z?30:20,widgetHeaderHeight:Z?32:22,widgetTitleHeight:Z?34:24,scrollBarColor:mj,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Z?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Sf,intersectionLineLine:ir,isEnter:Sj,isEsc:Aq,isDelete:Uh,isSpace:xn,isLeft:Ug,isUp:eb,isRight:lo,isDown:mh,getTarget:Sc,isString:_o,isNumber:jf,isBoolean:lj,isArray:uo,isSelectAll:Rk,isFunction:ao,getPropertyValue:$j,setPropertyValue:Nc,addMethod:Ad,getVersion:function(){return"6.0.7"},appendToScreen:function(d){d=d.getView?d.getView():d,(r.fullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||r.msFullscreenElement||r.body).appendChild(d)},toggleFullscreen:function(J){var E=J.getView();if(r.fullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||r.msFullscreenElement)r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitExitFullscreen&&r.webkitExitFullscreen();else{var g=!0,o=E.style.left,I=E.style.top,Z=E.style.width,t=E.style.height,B=E.style.background;B||(E.style.background="white"),E.requestFullscreen?E.requestFullscreen():E.msRequestFullscreen?E.msRequestFullscreen():E.mozRequestFullScreen?E.mozRequestFullScreen():E.webkitRequestFullscreen&&E.webkitRequestFullscreen();var M=setInterval(function(){if(E!==(r.fullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||r.msFullscreenElement))clearInterval(M),E.style.left=o,E.style.top=I,E.style.width=Z,E.style.height=t,E.style.background=B,J.iv();else{var L=y.getWindowInfo();(g||L.width!==J.getWidth()||L.height!==J.getHeight())&&(kc(J),g=!1)}},500)}},appendTimeStamp:function(D){return D+=D.indexOf("?")>=0?"&__ht__="+Po():"?"+Po()},setCompType:function(U,O){ao(O)||Jo(O)?pb[U]=O:bc(U)},getCompType:function(W){return pb[W]},getCompTypeMap:function(){return pb},drawCompType:function(V,w,z,G,T,L){V(w,z,G,T,L)},numberListener:function(){var j={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(G){var z=G.keyCode;j[z]||65===z&&y.isCtrlDown(G)||86===z&&y.isCtrlDown(G)||67===z&&y.isCtrlDown(G)||z>=35&&39>=z||(G.shiftKey||48>z||z>57)&&(96>z||z>105)&&G.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(C){var m=C.target.tagName;("DIV"===m||"CANVAS"===m)&&!(y.ignoreKeyCodes.indexOf(C.keyCode)>=0)&&("keydown"!==C.type||Ug(C)||lo(C)||eb(C)||mh(C)||Uh(C)||65===C.keyCode&&(C.metaKey||C.ctrlKey))&&(C.preventDefault(),C.preventManipulation&&C.preventManipulation())},getWindowInfo:function(){var o=r.documentElement,x=o&&(o.scrollLeft||o.scrollTop)?o:r.body;return{target:x,left:x.scrollLeft,top:x.scrollTop,width:D.innerWidth||x.clientWidth,height:D.innerHeight||x.clientHeight}},isDragging:function(){return!!Pk},isLeftButton:function(v){return Z?!0:0===v.button},isInput:function(D){if(!D)return!1;var A=D.tagName;return"INPUT"===A||"TEXTAREA"===A||"SELECT"===A},getTouchCount:function(M){return Z?M.touches.length:1},isDoubleClick:function(){var C={};return md=new Date,Mo=md.getTime(),function(q){var X=(new Date).getTime(),F=q.button==f?"":q.button,l=q.type+F,E=l+"_isDoubleClick",c=C[l];if(c||(c=C[l]={details:0,timeout:null,lastPoint:null,lastTime:X}),q[E]===t){var u=ss(q);q[E]=c.lastPoint&&fm(c.lastPoint,u)<=(Z?20:1)&&X-c.lastTime<500,c.lastTime=X,c.lastPoint=u,c.details++,c.timeout&&(J(c.timeout),c.timeout=null),c.timeout=U(function(){this.details=0,this.timeout=null,this.lastPoint=null}.bind(c),500)}return!!q[E]&&2===c.details}}(),isShiftDown:function(f){return f?f.shiftKey:sp["16"]},isCtrlDown:function(j){return j?_?j.metaKey:j.ctrlKey:_?sp["91"]:sp["17"]},getClientPoint:function(o){return Z&&(o=sf(o)),{x:o.clientX,y:o.clientY}},isMouseEvent:function(f){return f instanceof MouseEvent||0===f.type.indexOf("mouse")},getTargetElement:function($){if(y.isMouseEvent($)||!r.elementFromPoint)return $.target;var i=wd($);return r.elementFromPoint(i.x,i.y)},getPagePoint:function(G){return Z&&(G=sf(G)),{x:G.pageX,y:G.pageY}},createObject:function(W,t){var g=new W;for(var P in t){var M=xp(P),I=t[P];g[M]?(g[M](I),"setToolTip"===M&&g.enableToolTip&&g.enableToolTip()):g[P]=I}return g},setImage:function(l,i,G,L){var I=arguments.length;4===I?Wq(l,L,i,G):2===I?_o(i)?Wq(l,i):fe[l]=i:1===I&&Wq(l,l)},getImage:function($,O,x){var o;if($==f)return f;if(Jo($)?o=$:(o=fe[$],$&&o===t&&(xm&&xm[$]||Wq($,$))),O&&o&&o.tagName){var R;R="override"===x?"colors_override":"override_rgb"===x?"colors_override_rgb":"override_a"===x?"colors_override_a":"colors",o[R]||(o[R]={__count__:0});var K=o[R][O];return K||(o[R].__count__>y.imageCacheThreshold&&(o[R]={__count__:0}),K=Xq(o,sm(O),o.width,o.height,x),o[R][O]=K,o[R].__count__++),K}return o},getId:function(){var H=1;return function(){return++H}}(),callLater:function(r,k,W,T){var p=function(){r.apply(k,W)};return T?U(p,T):D.requestAnimationFrame(p)},asyncEach:function(B,Q,n){"function"!=typeof n&&(n=Function.prototype);var o=new Array(B.length),R=0,V=!1;B.forEach(function(v,b){Q(v,function(J,f){return V?void 0:J?(V=!0,n(null)):(o[b]=f,R++,R===B.length?n(o):void 0)})})},xhrLoad:function(u,V,L){var I=!1;uo(u)||(I=!0,u=[u]),L=L||{},u.length;var T=L.sync;np(u,function(m,C){var b=new XMLHttpRequest;L.responseType?b.responseType=L.responseType:b.overrideMimeType(L.mimeType||"text/plain"),y.convertURL&&(m=y.convertURL(m)),m.data?C(null,m.data):(b.open("GET",encodeURI(m),!T),b.onload=function(_){200===this.status||0===this.status?C(null,_.target.response):C(!0)},b.onerror=function(){C(!0)},b.send(null))},function(p){"function"==typeof V&&V(I&&p?p[0]:p)})},clone:function(U){if(!U)return f;if(uo(U))return U.slice(0);if(Kg(U))return new ie(U);if(Jo(U)){var J,c={};for(J in U)c[J]=U[J];return c}return U},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(G,J){if(G===J)return 0;if(G==f&&J!=f)return 1;if(G!=f&&J==f)return-1;if(G==f&&J==f)return 0;var B,V=typeof G,C=typeof J;return V===Yj&&C===Yj?B=G.localeCompare(J):V===jl&&C===jl&&(B=G-J),B===t&&(B=(""+G).localeCompare(""+J)),B>0?1:0>B?-1:0},getClassMap:function(){return vh},getClass:function(k){if(_o(k)){var M,m=vh[k];if(!m){M=k.split("."),m=D;for(var Y=0;Y<M.length;Y++)m=m[M[Y]];vh[k]=m}return m}return k},def:function(h,I,B){var r,q,k,z=function(){};if(z.prototype=I.prototype,r=new z,_o(h)){if(vh[h])throw"'"+h+"' already defined";k=Si(h),r.getClassName=function(){return h}}else k=h;if(r.constructor=k,r.getClass=function(){return k},r.getSuperClass=function(){return I},B)for(q in B)Of[q]&&Of.hasOwnProperty(q)?Of[q](r,B):Rj(r,B,q);k.prototype=r,k.superClass=I.prototype},startAnim:function(){var z=function(A){A.duration&&(A.startTime=Po()),A.timeId=qc(A.tick,f,f,A.interval)};return function(k){return k=to(k),k.easing=k.easing||y.animEasing,k.duration||k.frames||(k.duration=y.animDuration),k.t=0,k.duration?k.interval=0:(k.frame=0,k.interval=k.interval||10),k.tick=function(){if(k.duration){var D=(Po()-k.startTime)/k.duration;D>1&&(D=1),k.t=D,k.action(k.easing(D),D),1===D?k.stop():k._isPaused||(k.timeId=qc(k.tick))}else k.frame++,D=k.t=k.frame/k.frames,k.action(k.easing(D),D),k.frame<k.frames?k._isPaused||(k.timeId=qc(k.tick,f,f,k.interval)):k.stop()},k.resume=function(){k._isPaused&&(delete k._isPaused,k.duration?k.t<1&&(k.startTime=Po()-k.duration*k.t,k.timeId=qc(k.tick)):k.frame<k.frames&&(k.timeId=qc(k.tick,f,f,k.interval)))},k.pause=function(){k._isPaused=!0},k.stop=function(J){k.isRunning()&&(k.duration?k.t<1&&J&&(k.t=1,k.action(k.easing(1))):k.frame<k.frames&&J&&(k.frame=k.frames,k.action(k.easing(1))),k._37o&&k._37o(),k.finishFunc&&k.finishFunc(),Qo(k.timeId,!k.duration),delete k.timeId)},k.isRunning=function(){return k.timeId!=f},k.delay?qc(z,f,[k],k.delay):z(k),k}}(),getTextSize:function(){var d={},y=r?_p().getContext("2d"):f;return function(p,v){y.font=p?p:Hh;var m=d[y.font];return m||(m=2*y.measureText("e").width+4,d[y.font]=m),{width:y.measureText(v).width+4,height:m}}}(),drawText:function(i,U,F,s,c,N,m,H,G,g){if(U!=f){var K=tk(F,U),x={};x.y=g&&g!==An?g===Yo?N+K.height/2:N+H-K.height/2:N+H/2,x.x=G&&G!==Pc?G===Lc?c+m-K.width/2:c+m/2:c+K.width/2,Mi(i,U,x,F,s)}},getDistance:function(B,W){var k=B.length;return W?3===k?Q(S(B[0]-W[0])+S(B[1]-W[1])+S(B[2]-W[2])):2===k?Q(S(B[0]-W[0])+S(B[1]-W[1])):B.z===t?Q(S(W.x-B.x)+S(W.y-B.y)):Q(S(W.x-B.x)+S(W.y-B.y)+S(W.z-B.z)):3===k?Q(S(B[0])+S(B[1])+S(B[2])):2===k?Q(S(B[0])+S(B[1])):void 0},brighter:function(T,B){return 0>B&&(B=-B),Qh(T,B?B:40)},darker:function(u,S){return S>0&&(S=-S),Qh(u,S?S:-40)},unionPoint:function(U,Q){if(!U)return f;if(2===arguments.length)return U&&Q?{x:K(U.x,Q.x),y:K(U.y,Q.y),width:u(U.x-Q.x),height:u(U.y-Q.y)}:f;var J=U;if(J._as&&(J=J._as),J.length===t)return f;var l=J.length;if(0>=l)return f;for(var w=1,Y=J[0],L={x:Y.x,y:Y.y,width:0,height:0};l>w;w++){Y=J[w];var T=K(L.x,Y.x),_=i(L.x+L.width,Y.x),G=K(L.y,Y.y),z=i(L.y+L.height,Y.y);L.x=T,L.y=G,L.width=_-T,L.height=z-G}return L},unionRect:function(e,Z){if(e&&!Z)return to(e);if(!e&&Z)return to(Z);if(e&&Z){var z={x:K(e.x,Z.x),y:K(e.y,Z.y)};return z.width=i(e.x+e.width,Z.x+Z.width)-z.x,z.height=i(e.y+e.height,Z.y+Z.height)-z.y,z}return f},containsPoint:function(p,v){return!(!p||v.x<p.x||v.y<p.y||v.x>p.x+p.width||v.y>p.y+p.height)},containsRect:function(D,G){if(!D||!G)return!1;var Z=G.x,F=G.y,L=G.width,V=G.height,_=D.width,B=D.height;if(0>(_|B|L|V))return!1;var i=D.x,I=D.y;if(i>Z||I>F)return!1;if(_+=i,L+=Z,Z>=L){if(_>=i||L>_)return!1}else if(_>=i&&L>_)return!1;if(B+=I,V+=F,F>=V){if(B>=I||V>B)return!1}else if(B>=I&&V>B)return!1;return!0},intersectsRect:function(B,q){if(!B||!q)return!1;var m=q.width,O=q.height,U=B.width,s=B.height;if(0>=U||0>=s||0>=m||0>=O)return!1;var P=q.x,w=q.y,N=B.x,J=B.y;return U+=N,s+=J,m+=P,O+=w,U>P&&s>w&&m>N&&O>J},intersection:function(m,j){if(!m||!j)return f;var g=j.x,a=j.y,y=m.x,Y=m.y,E=g,l=a,H=y,N=Y;return E+=j.width,l+=j.height,H+=m.width,N+=m.height,y>g&&(g=y),Y>a&&(a=Y),E>H&&(E=H),l>N&&(l=N),E-=g,l-=a,0>=E||0>=l?f:{x:g,y:a,width:E,height:l}},grow:function(R,h){R.x-=h,R.y-=h,R.width=R.width+2*h,R.height=R.height+2*h},getLogicalPoint:function(v,P,z,b,S,$){xl(v)?_?sp["91"]=!0:sp["17"]=!0:_?sp["91"]=!1:sp["17"]=!1,sp["16"]=kj(v)?!0:!1;var F=P.getBoundingClientRect();return v=Z?sf(v):v,{x:(v.clientX-F.left+P.scrollLeft-(z||0))/(S||1),y:(v.clientY-F.top+P.scrollTop-(b||0))/($||1)}},removeHTML:function(){var W;return function(z){return z&&z.parentNode?W===z?!0:(W=z,z.parentNode.removeChild(z),W=f,!0):!1}}(),getToolTipDiv:function(){if(!mr){mr=mp(),Qj=mp();var U=mr.style;y.baseZIndex!=f&&(U.zIndex=z(y.baseZIndex)+3+""),U.whiteSpace="nowrap",U.color=y.toolTipLabelColor,U.background=y.toolTipBackground,U.font=y.toolTipLabelFont,U.padding="5px",U.boxShadow="0px 0px 3px "+y.toolTipShadowColor}return mr},isToolTipShowing:function(){return mr&&mr.parentNode?!0:Qj&&Qj.parentNode?!0:!1},hideToolTip:function(){vo(mr),vo(Qj),Xp()},showToolTip:function(u,l){if(!u||l==f)return Qq(),void 0;y.getToolTipDiv();var M,c;if(l.html?(l=l.html,M=Qj,vo(mr)):(M=mr,vo(Qj)),c=M.style,M.innerHTML=l,M.parentNode||A.Default.appendToScreen(M),u.target){u=wd(u);var U=qh(),R=u.x,i=u.y,F=Z?60:12;if(Z){var L=M.getBoundingClientRect();c.left=R-L.width/2+Bk,c.top=i-L.height-F<U.top?i+F+Bk:i-L.height-F+Bk}else{c.left=R+F+Bk,c.top=i+F+Bk;var L=M.getBoundingClientRect();L.left+L.width>U.width&&(c.left=R-F-L.width+Bk),L.top+L.height>U.height&&(c.top=i-F-L.height+Bk),L.left<0&&(c.left=R+F+Bk),L.top<0&&(c.top=i+F+Bk)}}else c.left=u.x+Bk,c.top=u.y+Bk;Xp()},startDragging:function(r,N){r!==Pk&&(Pk?Z?Pk.handleWindowTouchEnd(N):Pk.handleWindowMouseUp(N):Z?(D.addEventListener(hg,uh,!1),D.addEventListener(Cs,ml,!1)):(D.addEventListener(Xr,gf,!1),D.addEventListener(wr,Vm,!1)),Pk=r)},getImageMap:function(){return fe},toBoundaries:function(J,B,r,K){var _=[];return qn(J,B,r,K).forEach(function(l){var n=[];l.forEach(function(P){n.push(P.x,P.y)}),_.push(n)}),_},getCurrentKeyCodeMap:function(){return sp},drawCenterImage:function(S,n,N,O,V,R,M,o){var g=Me(n,V,R),p=zr(n,V,R);Bl(S,n,W(N-g/2),W(O-p/2),g,p,V,R,M,o)},drawStretchImage:function(B,u,H,p,$,c,f,i,q,R,Z,S){var e,I=Me(u,i,q,c),s=zr(u,i,q,f);if("uniform"===H?(e=K(c/I,f/s),I*=e,s*=e,p+=W((c-I)/2),$+=W((f-s)/2),c=I,f=s):"centerUniform"===H&&((I>c||s>f)&&(e=K(c/I,f/s),I*=e,s*=e),p+=W((c-I)/2),$+=W((f-s)/2),c=I,f=s),"center"===H){var g=Z!==!1&&(I>c||s>f);g&&(B.save(),B.beginPath(),B.rect(p,$,c,f),B.clip()),Bl(B,u,p+c/2-I/2,$+f/2-s/2,I,s,i,q,R,S),g&&B.restore()}else Bl(B,u,p,$,c,f,i,q,R,S)},toCanvas:function(M,X,o,h,m,g,P,y,p){M=tr(M,P),X=X||Me(M,m),o=o||zr(M,m);var E=_p(),I=pg(E);return y?(wj(E,X,o,y),I.scale(y,y)):wj(E,X,o,1),Rm(I,M,h,0,0,X,o,m,g,P,p),I.restore(),E},createElement:function(p,S,K,I){var z=r.createElement(p);return $d(z,S||e.widgetBorder,2),z.style.font=K?K:Hh,I!=f&&(z.value=I),y.onElementCreated&&y.onElementCreated(z),z},containedInView:function(F,A){var G=Ln(A).getBoundingClientRect();return Dh({x:G.left,y:G.top,width:G.width,height:G.height},ss(F))},isIsolating:function(){return Ag},setIsolating:function(b){Ag=b},getMSMap:function(){return Of},stringify:function(s,u){var $=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var n=JSON.stringify(s,function(h,k){return"function"==typeof k?"__ht__"+(k.__ht__||k.toString()):jf(k)?_h(k):k},u==f?2:u);return Date.prototype.toJSON=$,n},parse:function(V){return _o(V)?JSON.parse(V,function(L,w){if(_o(w)){if("__ht__function"==w.substr(0,14)){var S=w.indexOf("{")+1,U=w.lastIndexOf("}"),D=w.indexOf("(")+1,R=w.indexOf(")");if(S&&U&&D&&R){var c=new Function(w.substring(D,R),w.substring(S,U));return c.__ht__=w.substr(6),c}}if("__ht__date"==w.substr(0,10))return new Date(z(w.substr(10)))}return w}):V},loadJS:function(S,U){U&&S.push(U);var i=S.shift();if(uo(i))S=i.contact(S),y.loadJS(S);else if(ao(i))i(),y.loadJS(S);else if(_o(i)){var $=r.createElement("script");$.onload=function(){y.loadJS(S)},$.setAttribute("src",i),r.getElementsByTagName("head")[0].appendChild($)}else S.length&&y.loadJS(S)},toColorData:ts,setCanvas:wj,createDiv:mp,createDisabledDiv:Wr,createView:ak,createCanvas:_p,appendChild:Bb,initContext:pg,checkLoadingImage:ij,translateAndScale:eg,layout:kc,getPosition:Ji,drawPoints:uq,drawRoundRect:pn,drawBorder:qj,setFocus:js,getter:kg,setter:xp,isEmptyObject:pk},!0),Ad(d,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:!0},!0);var Gq=y.disabledOpacity,pm=y.toolTipDelay,Pj=y.devicePixelRatio,il=y.autoMakeVisible,pf=y.autoHideScrollBar,Nm=y.imageGradient,Yh=y.showToolTip,Qq=y.hideToolTip,Ui=y.dashPattern,Cm=y.lineCap,mq=y.lineJoin,Tr=y.labelColor,_c=y.labelSelectColor,Hh=y.labelFont,dk=y.widgetIndent,Di=y.widgetRowHeight,lc=y.widgetHeaderHeight,Tj=y.widgetTitleHeight,nn=y.scrollBarColor,Yp=y.scrollBarSize,vg=y.scrollBarTimeout,vp=y.scrollBarMinLength,Yc=y.scrollBarInteractiveSize,be=y.zoomIncrement,Vp=y.scrollZoomIncrement,he=y.pinchZoomIncrement,Ap=y.zoomMax,Gr=y.zoomMin,Lr=y.createObject,Wf=y.preventDefault,mf=y.setImage,tr=y.getImage,Zd=y.drawCenterImage,Rm=y.drawStretchImage,dp=y.getId,qc=y.callLater,np=y.asyncEach,th=(y.xhrLoad,y.sortFunc),to=y.clone,Si=y.getClass,wf=y.startAnim,Dc=y.brighter,fi=y.darker,Gh=y.drawText,tk=y.getTextSize,fr=y.isLeftButton,ti=y.getTouchCount,Qd=y.isDoubleClick,kj=y.isShiftDown,xl=y.isShiftDown,ss=y.getClientPoint,wd=y.getPagePoint,fm=y.getDistance,Rl=y.unionPoint,zn=y.unionRect,Dh=y.containsPoint,sr=y.containsRect,Oo=y.intersectsRect,mo=y.intersection,qh=y.getWindowInfo,mc=y.grow,Np=y.getLogicalPoint,Td=y.startDragging,vo=y.removeHTML,ug=y.createElement,Hl=y.segmentResolution,$b=y.shapeResolution,Jq=y.shapeSide,zs=y.def,ag=function(V,Z,m){zs(b+"."+V,Z,m)
},vi=function(W,t){W.childNodes.forEach(function(w){t(w),vi(w,t)})};Ad(y,{toolTipLabelColor:Tr,toolTipLabelFont:Hh,toolTipBackground:e.toolTipBackground,toolTipShadowColor:mj,setDevicePixelRatio:function(G){Pj=y.devicePixelRatio="number"==typeof G?G:D.devicePixelRatio,vi(r.body,function(t){var $=t._ht;$&&$._canvas&&(wj($._canvas,$.getWidth(),$.getHeight()),$.redraw?$.redraw():$.iv())})}},!0);var xq=1e-6,hf="undefined"!=typeof Uint16Array?Uint16Array:Array,Sl="undefined"!=typeof Float32Array?Float32Array:Array,po=function(d,_,G){var A=[d[0]-_[0],d[1]-_[1],d[2]-_[2]];if(G){var t=fm(A);t>0&&(A[0]/=t,A[1]/=t,A[2]/=t)}return A},Fr=function(C){return[-C[0],-C[1],-C[2]]},Tm=function(i,G){return 3===i.length?i[0]*G[0]+i[1]*G[1]+i[2]*G[2]:i[0]*G[0]+i[1]*G[1]},el=function(){var X=new Sl(16);return X[0]=1,X[1]=0,X[2]=0,X[3]=0,X[4]=0,X[5]=1,X[6]=0,X[7]=0,X[8]=0,X[9]=0,X[10]=1,X[11]=0,X[12]=0,X[13]=0,X[14]=0,X[15]=1,X},Lb=el(),Ym=function(F){var O=new Sl(16);return O[0]=F[0],O[1]=F[1],O[2]=F[2],O[3]=F[3],O[4]=F[4],O[5]=F[5],O[6]=F[6],O[7]=F[7],O[8]=F[8],O[9]=F[9],O[10]=F[10],O[11]=F[11],O[12]=F[12],O[13]=F[13],O[14]=F[14],O[15]=F[15],O},vj=function(p,n){return p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3],p[4]=n[4],p[5]=n[5],p[6]=n[6],p[7]=n[7],p[8]=n[8],p[9]=n[9],p[10]=n[10],p[11]=n[11],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15],p},hk=function(B){return B[0]=1,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=1,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=1,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,B},Oh=function(r,P){var t=r[0],J=r[1],Y=r[2];return r[0]=P[0]*t+P[4]*J+P[8]*Y+P[12],r[1]=P[1]*t+P[5]*J+P[9]*Y+P[13],r[2]=P[2]*t+P[6]*J+P[10]*Y+P[14],r},un=function(K,G){var k=K[0],u=K[1],S=K[2],D=K[3];return K[0]=G[0]*k+G[4]*u+G[8]*S+G[12]*D,K[1]=G[1]*k+G[5]*u+G[9]*S+G[13]*D,K[2]=G[2]*k+G[6]*u+G[10]*S+G[14]*D,K[3]=G[3]*k+G[7]*u+G[11]*S+G[15]*D,K},mb=function(){var w,z,o,J,i=yr(ue[1]+ue[7]),k=yr(ue[0]+ue[3]-ue[10]),Q=yr(ue[8]+2),H=function(){return z=o.charAt(w),w+=1,z},p=function(){var j="";if(z===Q)for(;H();){if(z===Q)return H(),j;j+=z}else H()},c=function(){for(;z&&" ">=z;)H()},F=function(){var _,P={};if(z===i){if(H(),c(),z===k)return H(),P;for(;z;){if(_=p(),c(),H(),P[_]=J(),c(),z===k)return H(),P;H(),c()}}};return J=function(){switch(c(),z){case i:return F();default:return p()}},function(g){if(x={},g){var U;if(o=g,w=0,z=" ",U=J(),c(),!z)return U}}}(),Rc=function(X,h){if(h){var U=E(h),Y=V(h),W=X[4],$=X[5],u=X[6],x=X[7],P=X[8],b=X[9],m=X[10],e=X[11];X[4]=W*Y+P*U,X[5]=$*Y+b*U,X[6]=u*Y+m*U,X[7]=x*Y+e*U,X[8]=P*Y-W*U,X[9]=b*Y-$*U,X[10]=m*Y-u*U,X[11]=e*Y-x*U}},Vr=function(e,m){if(m){var O=E(m),A=V(m),b=e[0],Z=e[1],T=e[2],j=e[3],d=e[8],t=e[9],X=e[10],n=e[11];e[0]=b*A-d*O,e[1]=Z*A-t*O,e[2]=T*A-X*O,e[3]=j*A-n*O,e[8]=b*O+d*A,e[9]=Z*O+t*A,e[10]=T*O+X*A,e[11]=j*O+n*A}},Ok=function(D,k){if(k){var W=E(k),u=V(k),i=D[0],L=D[1],S=D[2],T=D[3],q=D[4],X=D[5],U=D[6],p=D[7];D[0]=i*u+q*W,D[1]=L*u+X*W,D[2]=S*u+U*W,D[3]=T*u+p*W,D[4]=q*u-i*W,D[5]=X*u-L*W,D[6]=U*u-S*W,D[7]=p*u-T*W}},Re=function(r,o,d){return wc(f,d===!1?f:r.s3(),r.r3(),r.getRotationMode(),r.p3(),f,o)},wc=function(C,T,X,n,d,D,F){return D||(D=el()),d&&rb(D,d),sh(D,X,n),F&&ce(D,D,F),T&&zb(D,T),C&&ce(D,D,C),D},Yf=function(a,o,y){o=z(o),y=z(y);var t=this;t.g=a,t._84O=o,t._85O=y,t._70I=!0,t.F=0,t._83O=o+y,t.pen={x:0,y:0}},Dj="lineDashOffset",Kj="setLineDash",dq=function(r){for(var D in r)1===D.length&&(Dj=r[D]);return D?1:0},Gb=function(b,T,L){return oo(T)?b:b[Kj]?(b[Kj](T),L&&(b.lineDashOffset=L),b):new Yf(b,T[0],T.length>1?T[1]:T[0])},ze=function(V,j){!oo(j)&&V[Kj]&&(V[Kj](Nq),V.lineDashOffset=0)};if(zs(Yf,L,{_69I:6,moveTo:function(K,v){var P=this,U=P.pen;U.x=K,U.y=v,P.g.moveTo(K,v),P.start||(P.start={x:K,y:v})},lineTo:function(m,w){var s=this,v=s.pen,X=m-v.x,$=w-v.y,l=T($,X),D=V(l),u=E(l),J=s._23O(v.x,v.y,m,w),c=s._85O,L=s._84O,B=s._83O;if(s.F){if(s.F>J)return s._70I?s._72I(m,w):s.moveTo(m,w),s.F-=J,void 0;if(s._70I?s._72I(v.x+D*s.F,v.y+u*s.F):s.moveTo(v.x+D*s.F,v.y+u*s.F),J-=s.F,s.F=0,s._70I=!s._70I,!J)return}var p=q(J/B);if(p){for(var U=D*L,N=u*L,H=D*c,b=u*c,g=0;p>g;g++)s._70I?(s._72I(v.x+U,v.y+N),s.moveTo(v.x+H,v.y+b)):(s.moveTo(v.x+H,v.y+b),s._72I(v.x+U,v.y+N));J-=B*p}s._70I?J>L?(s._72I(v.x+D*L,v.y+u*L),s.moveTo(m,w),s.F=c-(J-L),s._70I=!1):(s._72I(m,w),J===L?(s.F=0,s._70I=!s._70I):(s.F=L-J,s.moveTo(m,w))):J>c?(s.moveTo(v.x+D*c,v.y+u*c),s._72I(m,w),s.F=L-(J-c),s._70I=!0):(s.moveTo(m,w),J===c?(s.F=0,s._70I=!s._70I):s.F=c-J)},quadraticCurveTo:function(Q,B,f,W){var D,r=this,g=r.pen,X=g.x,Y=g.y,p=r._22O(X,Y,Q,B,f,W),d=0,n=0,E=r._85O,O=r._84O;if(r.F){if(r.F>p)return r._70I?r._71I(Q,B,f,W):r.moveTo(f,W),r.F-=p,void 0;if(d=r.F/p,D=r._20O(X,Y,Q,B,f,W,d),r._70I?r._71I(D[2],D[3],D[4],D[5]):r.moveTo(D[4],D[5]),r.F=0,r._70I=!r._70I,!p)return}var T=p-p*d,j=q(T/r._83O),o=O/p,P=E/p;if(j)for(var M=0;j>M;M++)r._70I?(n=d+o,D=r._21O(X,Y,Q,B,f,W,d,n),r._71I(D[2],D[3],D[4],D[5]),d=n,n=d+P,D=r._21O(X,Y,Q,B,f,W,d,n),r.moveTo(D[4],D[5])):(n=d+P,D=r._21O(X,Y,Q,B,f,W,d,n),r.moveTo(D[4],D[5]),d=n,n=d+o,D=r._21O(X,Y,Q,B,f,W,d,n),r._71I(D[2],D[3],D[4],D[5])),d=n;T=p-p*d,r._70I?T>O?(n=d+o,D=r._21O(X,Y,Q,B,f,W,d,n),r._71I(D[2],D[3],D[4],D[5]),r.moveTo(f,W),r.F=E-(T-O),r._70I=!1):(D=r._19O(X,Y,Q,B,f,W,d),r._71I(D[2],D[3],D[4],D[5]),p===O?(r.F=0,r._70I=!r._70I):(r.F=O-T,r.moveTo(f,W))):T>E?(n=d+P,D=r._21O(X,Y,Q,B,f,W,d,n),r.moveTo(D[4],D[5]),D=r._19O(X,Y,Q,B,f,W,n),r._71I(D[2],D[3],D[4],D[5]),r.F=O-(T-E),r._70I=!0):(r.moveTo(f,W),T===E?(r.F=0,r._70I=!r._70I):r.F=E-T)},bezierCurveTo:function(){var I=arguments;this.pen={x:I[4],y:I[5]},this.g.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5])},arc:function(i,c,G,y,g,X){X||(y=-y,g=-g),es(this,i,c,y,g-y,G,G,!1)},rect:function(R,J,H,L){var M=this;M.pen={x:R,y:J},M.moveTo(R,J),M.lineTo(R,J+L),M.lineTo(R+H,J+L),M.lineTo(R+H,J),M.lineTo(R,J)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(e,N,r,G){var $=r-e,x=G-N;return Q($*$+x*x)},_22O:function(t,H,h,V,W,s,C){for(var r,T,y,M,d,I,R,A=0,P=t,k=H,F=C>0?C:this._69I,J=1;F>=J;J++)y=J/F,M=1-y,d=M*M,I=2*y*M,R=y*y,r=d*t+I*h+R*W,T=d*H+I*V+R*s,A+=this._23O(P,k,r,T),P=r,k=T;return A},_21O:function(V,W,z,d,l,s,n,H){var $=this;if(0===n)return $._20O(V,W,z,d,l,s,H);if(1===H)return $._19O(V,W,z,d,l,s,n);var r=$._20O(V,W,z,d,l,s,H);return r.push(n/H),$._19O.apply($,r)},_20O:function(t,w,O,b,S,o,J){if(1!==J){var x=O+(S-O)*J,I=b+(o-b)*J;O=t+(O-t)*J,b=w+(b-w)*J,S=O+(x-O)*J,o=b+(I-b)*J}return[t,w,O,b,S,o]},_19O:function(W,U,y,X,H,k,D){if(1!==D){var o=W+(y-W)*D,i=U+(X-U)*D;y+=(H-y)*D,X+=(k-X)*D,W=o+(y-o)*D,U=i+(X-i)*D}return[W,U,y,X,H,k]},_72I:function(T,s){var n=this.pen;(T!==n.x||s!==n.y)&&(n.x=T,n.y=s,this.g.lineTo(T,s))},_71I:function(n,t,i,S){var Z=this.pen;(n!==i||t!==S||i!==Z.x||S!==Z.y)&&(Z.x=i,Z.y=S,this.g.quadraticCurveTo(n,t,i,S))}}),v&&I){var ch=I.toString();g=ch.indexOf(dg.substr(0,2))>0&&ch.indexOf(Yo+Yo.substr(1,1))>1?!0:!1}var _g=f,nr=f,ji=function(Q){_g&&!Q._72O&&(nr||(nr={}),nr[Q._72O=dp()]=Q)},bc=function(h,L){if(L||(L=h),L&&(_g||(_g={}),!_g[h])){var C=new XMLHttpRequest;if(_g[L]={request:C,url:L},C.overrideMimeType("text/plain"),y.convertURL&&(L=y.convertURL(L)),L.data){var s=y.parse(L.data);Id(h,s),y.handleCompTypeLoaded(h,s)}else C.open("GET",encodeURI(L),!0),C.onload=function(a){if(200===this.status||0===this.status){var c=y.parse(a.target.response);Id(h,c),y.handleCompTypeLoaded(h,c)}else Id(h,f)},C.onerror=function(){Id(h,f)},C.send(null)}},Id=function(n,B){if(pb[n]=B,delete _g[n],pk(_g)&&(_g=f,nr)){for(var J in nr){var w=nr[J];w.invalidateAll&&w.invalidateAll(t,"compTypeLoaded",n),w.redraw&&w.redraw(),w.iv(),delete w._72O}nr=f}if(B&&nr)for(var J in nr){var w=nr[J];w.invalidateAll&&w.invalidateAll(t,"compTypeLoading",n),w.redraw&&w.redraw(),w.iv()}},rc=e.chart,mm=y.compStack=[],bl=/^style@/,rr=/^attr@/,so=/^field@/,od={x:.5,y:.5},Me=function(k,H,o,v){if(!k)return 0;if(k.fitSize&&v)return v;var O=gd(k.width,H,o);return null==O?20:O},zr=function(q,M,s,X){if(!q)return 0;if(q.fitSize&&X)return X;var w=gd(q.height,M,s);return null==w?20:w},gd=function(o,Y,m){if(!o||!o.func)return o;var K,s=o.func,$=o.value;return K=ao(s)?m&&m.vectorDataBindingDisabled&&!o.isSafeFunc?$:s(Y,m):Y instanceof zo?rr.test(s)?Y.a(s.slice(5)):bl.test(s)?Y.s(s.slice(6)):so.test(s)?Y[s.slice(6)]:Y[s]?Y[s](m):$:$,$!==t&&K==f?$:K},Bl=y.drawImage=function(){var r,X,Z,F,P,v,D=function(K,j){K.getValue&&K.getValue.compType===j||(K.getValue=function(O){var H=m(K,O);if(H===t&&j.properties){var u=j.properties[O];u&&(H=u.defaultValue)}return H},K.getValue.compType=j)},m=function(R,K,G){var t=R[K];return t&&t.func?(t=gd(t,X,Z),G&&(t=G(t))):G&&(t=R[K]=G(t)),t},u=function(G,B){var g;if(g=B?m(G,B):G,P&&g){if("override"===v)return P;if("override_rgb"===v){var h=sm(P);return g=ts(g),"rgba("+q(255*h[0])+","+q(255*h[1])+","+q(255*h[2])+","+g[3]/255+")"}if("override_a"===v){var h=sm(P);return g=ts(g),"rgba("+g[0]+","+g[1]+","+g[2]+","+h[3]+")"}var h=sm(P);return g=ts(g),"rgba("+q(g[0]*h[0])+","+q(g[1]*h[1])+","+q(g[2]*h[2])+","+g[3]/255*h[3]+")"}return g},s=function(K){if(uo(K)){for(var n=new ie,e=K.length,L=0;e>L;L+=2)n.add({x:K[L],y:K[L+1]});K=n}return K},b=function(v){var f=m(v,"anchorX"),H=m(v,"anchorY");if(f!==t||H!==t)return{x:f===t?od.x:f,y:H===t?od.y:H};var U=m(v,"type"),r=m(v,"name");if("image"!==U||!r)return od;var O=tr(r);return O&&O.anchorX&&O.anchorY?{x:O.anchorX,y:O.anchorY}:od},Q=function(n,i){var j=m(n,Xl),A=b(n);if(uo(j)){var o=j.length,V=m(n,"relative"),T=i.width,X=i.height;if(4===o)j={x:j[0],y:j[1],width:j[2],height:j[3]},V?(j.x*=T,j.y*=X,j.width*=T,j.height*=X):i.fitSize&&(j.x*=i.widthScale,j.width*=i.widthScale,j.y*=i.heightScale,j.height*=i.heightScale);else if(3===o){var w=j[0];j={width:j[1],height:j[2]},V?(j.width*=T,j.height*=X):i.fitSize&&(j.width*=i.widthScale,j.height*=i.heightScale),"object"==typeof w?w.length&&(w={x:w[0],y:w[1]}):w=Ji(w,i,j),j.x=w.x-j.width*A.x,j.y=w.y-j.height*A.y}var q=m(n,"offsetX");q&&(i.fitSize&&(q*=i.widthScale),j.x+=q),q=m(n,"offsetY"),q&&(i.fitSize&&(q*=i.heightScale),j.y+=q)}return j},L=function(U){return uo(U)?new ie(U):U},I=function(J,H,F,T,y,l){T===t&&(T=1),y===t&&(y=1);var m=Hk(H,J);if(m&&!F&&1===T&&1===y)return!1;l=l||od;var I=J.x+J.width*l.x,U=J.y+J.height*l.y,$=H.x+H.width*l.x,N=H.y+H.height*l.y;return r.save(),uc(r,I,U),Kh(r,F),Vc(r,T*(J.width/H.width),y*(J.height/H.height)),uc(r,-$,-N),!0},Y=function(){r.restore()},R=function(s,G,Z){var c=m(s,"path"),e=m(s,Ff),L=m(s,"scaleX"),M=m(s,"scaleY"),$=b(s),l=f,h=kk(null,c);if(Z||(Z=s.unionRect,Z||(Z=Rl(h),s.path.func||(s.unionRect=Z)),l=Z),Z){l||(l=s.unionRect,l||(l=Rl(h),s.path.func||(s.unionRect=l)));var j=I(Z,l,e,L,M,$),x=m(s,"borderPattern"),v=Gb(r,x),B=u(s,"background"),d=u(s,"borderColor"),q=m(s,"borderWidth"),W=m(s,"gradient"),D=u(s,"gradientColor"),K=m(s,"border3d"),g=m(s,"border3dColor"),S=m(s,"border3dAccuracy"),X=r.lineJoin,C=r.lineCap;if(r.lineJoin=m(s,"borderJoin")||mq,r.lineCap=m(s,"borderCap")||Cm,B?(hh(r,B,W,D,l),kk(r,c),r.fill(),v!==r&&kk(r,c)):kk(r,c),q&&d){var O=m(s,"borderWidthAbsolute");O&&(r.save(),r.setTransform(1,0,0,1,0,0)),r.lineWidth=q,r.strokeStyle=d,r.stroke(),O&&r.restore(),K&&Pl(r,d,g,q,F,S)}if(ze(r,x),m(s,"dash")){var Q=m(s,"dashWidth")||q;if(Q>0){x=m(s,"dashPattern")||Ui;var v=Gb(r,x,m(s,"dashOffset")),J=u(s,"dashColor")||u(Gj);v!==r&&kk(r,c),r.strokeStyle=J,r.lineWidth=Q,r.stroke(),m(s,"dash3d")&&Pl(r,J,u(s,"dash3dColor"),Q,F,m(s,"dash3dAccuracy")),ze(r,x)}}G===Xl&&ol(r,B,m(s,"depth"),l),r.lineJoin=X,r.lineCap=C,j&&Y()}},J=function(e,w,g,B){var z=m(e,wq,s),J=m(e,Ff),d=b(e);if(z&&B.fitSize){var C=Math.abs(Math.cos(J))<.001,M=new ie,k=Rl(z),D=B.widthScale,K=B.heightScale,Q=k.x+d.x*k.width,h=k.y+d.y*k.height,c=Q*D,a=h*K;z.each(function(W){var w=W.x-Q,k=W.y-h;M.add({x:c+w*(C?K:D),y:a+k*(C?D:K)})}),z=M,e.unionRect=null}var t=m(e,"scaleX"),y=m(e,"scaleY"),p=w===xi,R=f;if(!g&&p&&(g=e.unionRect,g||(g=Rl(z),e.points.func||(e.unionRect=g)),R=g),g){p?R||(R=e.unionRect,R||(R=Rl(z),e.points.func||(e.unionRect=R))):R=g;var N,o,T,W,n=I(g,R,J,t,y,d),H=m(e,"borderPattern"),S=Gb(r,H),O=u(e,"background"),$=tr(m(e,"repeatImage"),P,v),U=m(e,"gradientPack"),q=u(e,"borderColor"),E=m(e,"borderWidth"),i=m(e,"segments",L),A=m(e,"gradient"),V=u(e,"gradientColor"),l=m(e,"border3d"),j=m(e,"border3dColor"),G=m(e,"border3dAccuracy"),_=m(e,"closePath"),x=m(e,"fillRule")||"nonzero",eq=r.lineJoin,_m=r.lineCap;if(r.lineJoin=m(e,"borderJoin")||mq,r.lineCap=m(e,"borderCap")||Cm,p)if(O||$||U){if(uq(r,z,i,_),U)Co(r,U);else if($){var lh=r,$e=P,rp=v;wg(r,$,P,v,X,Z),r=lh,P=$e,v=rp}else{var lh=r;hh(r,O,A,V,R),r=lh}r.fill(x),U&&r.restore(),S!==r&&uq(S,z,i,_)}else uq(S,z,i,_);else if("roundRect"===w?N=m(e,"cornerRadius"):"polygon"===w?N=m(e,"polygonSide"):"arc"===w&&(N=m(e,"arcFrom"),o=m(e,"arcTo"),T=m(e,"arcClose"),W=m(e,"arcOval")),O||$||U){if(Aj(r,w,R,N,o,T,W),U)Co(r,U);else if($){var lh=r,$e=P,rp=v;wg(r,$,P,v,X,Z),r=lh,P=$e,v=rp}else hh(r,O,A,V,R);r.fill(x),U&&r.restore(),r!==S&&Aj(S,w,R,N,o,T,W)}else Aj(S,w,R,N,o,T,W);if(E&&q){var Fk=m(e,"borderWidthAbsolute");Fk&&(r.save(),r.setTransform(1,0,0,1,0,0)),r.lineWidth=E,r.strokeStyle=q,r.stroke(),Fk&&r.restore(),l&&Pl(r,q,j,E,F,G)}if(ze(r,H),m(e,"dash")){var Ao=m(e,"dashWidth")||E;if(Ao>0){H=m(e,"dashPattern")||Ui;var S=Gb(r,H,m(e,"dashOffset")),qo=u(e,"dashColor")||u(Gj);S!==r&&(p?uq(S,z,i,_):Aj(S,w,R,N,o,T,W)),r.strokeStyle=qo,r.lineWidth=Ao,r.stroke(),m(e,"dash3d")&&Pl(r,qo,u(e,"dash3dColor"),Ao,F,m(e,"dash3dAccuracy")),ze(r,H)}}w===Xl&&ol(r,O,m(e,"depth"),R),r.lineJoin=eq,r.lineCap=_m,n&&Y()}},B=function(j,N){var w=P,S=v,D=P||m(j,qe),J=v||m(j,"blendMode"),Y=tr(m(j,"name"),D,J);Y&&(Rm(r,Y,m(j,"stretch"),N.x,N.y,N.width,N.height,X,Z,D,null,J),P=w,v=S)},e=function(F,I){var j=m(F,"text");j!=f&&Gh(r,j,m(F,"font"),u(F,qe),I.x,I.y,I.width,I.height,m(F,"align"),m(F,"vAlign"))},g=function(s,L){qj(r,u(s,qe),L.x,L.y,L.width,L.height,m(s,"width"))},p=function(I,o){var N=m(I,Nn),l=0;if(N&&(N.forEach(function(W){l+=W}),l>0)){for(var T=m(I,"colors")||rc,U=m(I,"startAngle")||0,n=m(I,"hollow"),q=m(I,lq),b=m(I,ig),C=m(I,fj),v=q?new ie:f,z=o.x,t=o.y,g=o.width,A=o.height,i=z+g/2,F=t+A/2,Y=K(g,A)/2,s=0,J=0;J<N.length;J++){var a=N[J],R=c*a/l,H=U+R;if(r.fillStyle=T[s++],s===T.length&&(s=0),r.beginPath(),n){var k=i+V(U)*Y/2,u=F+E(U)*Y/2,O=i+V(H)*Y,L=F+E(H)*Y;r.moveTo(k,u),r.arc(i,F,Y/2,U,H,!1),r.lineTo(O,L),r.arc(i,F,Y,H,U,!0)}else r.moveTo(i,F),r.arc(i,F,Y,H,U,!0);v&&(R=(U+H)/2,v.add({text:ao(q)?q(a,J,l,X):a,x:i+.75*V(R)*Y,y:F+.75*E(R)*Y})),r.closePath(),r.fill(),U=H}v&&v.each(function(n){Gh(r,n.text,b,C,n.x,n.y,0,0,ul)})}},l=function(Y,I){var e=m(Y,Kc);if(e&&e.length>0){var E=e.length,c=m(Y,lq),z=m(Y,ig),N=m(Y,fj),A=c?new ie:f,G=m(Y,"minValue")||0,Z=m(Y,"maxValue");if(Z==f&&(Z=0,e.forEach(function(p){p.values.forEach(function(h){Z=i(Z,h)})})),G===Z)return;for(var O=I.height/(Z-G),j=I.y+Z*O,t=m(e[0],Nn).length,W=I.width/(3*t+1),y=2*W/E,x=0,P=0;E>P;P++)for(var n=e[P],S=m(n,qe),w=m(n,"colors"),v=m(n,Nn),L=0;t>L;L++){w?r.fillStyle=w[L]:S?r.fillStyle=S:(r.fillStyle=rc[x++],x===rc.length&&(x=0));var U=v[L],C=U*O,B=I.x+(1+3*L)*W+P*y;if(Hj(r,B,j-C,y,C),A){var H=ao(c)?c(U,L,n,X):U,q=tk(z,H).height;A.add({x:B,y:j-C-q,width:y,height:q,text:H})}}A&&A.each(function(V){Gh(r,V.text,z,N,V.x,V.y,V.width,V.height,ul)})}},o=function(C,l){var _=m(C,Kc);if(_&&_.length>0){var H=_.length,a=m(_[0],Nn).length,w=l.width/(3*a+1),I=0,L=m(C,"maxValue"),z=m(C,lq),G=m(C,ig),c=m(C,fj),W=z?new ie:f;if(L==f){L=0;for(var p=0;a>p;p++){for(var n=0,R=0;H>R;R++)n+=m(_[R],Nn)[p];L=i(L,n)}}if(L>0){for(var p=0;a>p;p++)for(var D=l.y+l.height,R=0;H>R;R++){var x=_[R],T=m(x,qe),U=m(x,Nn)[p],$=U/L*l.height;T?r.fillStyle=T:(r.fillStyle=rc[I++],I===rc.length&&(I=0)),D-=$;var h={x:l.x+(1+3*p)*w,y:D,width:2*w,height:$};Hj(r,h.x,h.y,h.width,h.height),W&&(h.text=ao(z)?z(U,p,x,X):U,W.add(h))}W&&W.each(function(N){Gh(r,N.text,G,c,N.x,N.y,N.width,N.height,ul)})}}},w=function(e,R){var Y=m(e,Kc);if(Y&&Y.length>0){for(var B=Y.length,z=m(Y[0],Nn).length,c=R.width/(3*z+1),I=0,H=m(e,lq),_=m(e,ig),S=m(e,fj),g=H?new ie:f,o=0;z>o;o++){for(var a=0,O=0;B>O;O++)a+=m(Y[O],Nn)[o];if(a>0){var Q=R.y+R.height;for(O=0;B>O;O++){var p=Y[O],V=m(p,qe),M=m(p,Nn)[o],P=M/a*R.height;V?r.fillStyle=V:(r.fillStyle=rc[I++],I===rc.length&&(I=0)),Q-=P;var Z={x:R.x+(1+3*o)*c,y:Q,width:2*c,height:P};Hj(r,Z.x,Z.y,Z.width,Z.height),g&&(Z.text=ao(H)?H(M,o,p,X):M,g.add(Z))}}}g&&g.each(function(H){Gh(r,H.text,_,S,H.x,H.y,H.width,H.height,ul)})}},N=function(b,K){var u=m(b,Kc);if(u&&u.length>0){var L=u.length,$=m(b,"minValue")||0,V=m(b,"maxValue");if(V==f&&(V=0,u.forEach(function(h){h.values.forEach(function(E){V=i(V,E)})})),$===V)return;for(var z=K.height/(V-$),M=K.y+V*z,d=m(u[0],Nn).length,l=K.width/(3*d+1),H=0,W=m(b,"lineWidth")||2,D=m(b,"line3d"),Z=m(b,"linePoint"),N=m(b,lq),a=m(b,ig),n=m(b,fj),G=0;L>G;G++){var v=u[G],j=m(v,qe),t=m(v,Nn);j?r.strokeStyle=j:(j=r.strokeStyle=rc[H++],H===rc.length&&(H=0)),r.beginPath();for(var e=0;d>e;e++){var B=K.x+(2+3*e)*l,Y=M-t[e]*z;0===e?r.moveTo(B,Y):r.lineTo(B,Y)}if(r.lineWidth=W,r.stroke(),D&&Pl(r,j,f,W,F),Z||N){var J,_=W/2+2;for(e=0;d>e;e++){var y=t[e];if(B=K.x+(2+3*e)*l,Y=M-y*z,ao(Z)?Z(r,B,Y,j,e,v,X):Z&&(r.fillStyle=j,r.beginPath(),r.arc(B,Y,_,0,c,!0),r.fill()),ao(N)?J=N(y,e,v,X):N&&(J=y),J){var E=tk(a,J).height,C=r.shadowBlur;if(C){var I=r.shadowOffsetX,P=r.shadowOffsetY,Q=r.shadowColor;r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,r.shadowColor=f}Gh(r,J,a,n,B,Y-E-_+2,0,E,ul),C&&(r.shadowOffsetX=I,r.shadowOffsetY=P,r.shadowBlur=C,r.shadowColor=Q)}}}}}},H={border:g,image:B,text:e,pieChart:p,columnChart:l,stackedColumnChart:o,percentageColumnChart:w,lineChart:N};return function(d,q,G,A,p,i,N,K,V,B){if(q&&p&&i){r=d,X=N,Z=K,F=Z?Z._zoom?Z._zoom:1:1,P=V,v=B;var c=p,l=i;if(Ni()){var n,o;0===r[rf]?Ni[0]&&(n=!0):n=!0,r.texureImage2D?Ni[1]&&(o=!0):o=!0,n&&o&&(c=G,l=A)}if(q.tagName)return r.drawImage(q,c,l,p,i),void 0;if(m(q,"visible")!==!1){P||(P=gd(q.color,X,Z)),B||(v=gd(q.blendMode,X,Z));var g=Me(q,X,Z,p),U=zr(q,X,Z,i),z={x:0,y:0,width:g,height:U,fitSize:m(q,"fitSize")},W=m(q,"clip"),j=m(q,"opacity");z.fitSize&&(z.widthScale=g/gd(q.width,X,Z),z.heightScale=U/gd(q.height,X,Z)),r.save(),uc(r,c,l),(g!==p||U!==i)&&r.scale(p/g,i/U),W&&(ao(W)?W(r,g,U,X,Z,q):(r.beginPath(),r.rect(0,0,g,U),r.clip())),j!=f&&(r.globalAlpha*=j),m(q,"comps").forEach(function(S){if(m(S,hl)!==!1){mm.splice(0,0,S);var O=m(S,"opacity"),v=m(S,"shadow"),w=m(S,"type"),N=Q(S,z);if(O!=f){var G=r.globalAlpha;r.globalAlpha*=O}if(v){var E=r.shadowOffsetX,q=r.shadowOffsetY,C=r.shadowBlur,k=r.shadowColor,M=m(S,"shadowOffsetX"),i=m(S,"shadowOffsetY"),T=m(S,"shadowBlur"),V=u(S,"shadowColor");r.shadowOffsetX=(M==f?3:M)*F,r.shadowOffsetY=(i==f?3:i)*F,r.shadowBlur=(T==f?6:T)*F,r.shadowColor=V||u(mj)}if("save"===w)r.save();else if("endClip"===w||"restore"===w)r.restore();else if("clip"===w)r.save(),uq(r,m(S,"points",s),m(S,"segments",L),!0),r.clip();else if(on[w])N=N||{x:0,y:0,width:z.width,height:z.height},J(S,w,N,z);else if(w===xi)J(S,w,N,z);else if("SVGPath"===w)R(S,w,N);else{N=N||{x:0,y:0,width:z.width,height:z.height};var n=m(S,Ff),h=m(S,"scaleX"),g=m(S,"scaleY"),A=b(S),U=I(N,N,n,h,g,A);if(ao(w))D(S,w),y.drawCompType(w,r,N,S,X,Z);else if(y.getCompType(w)){var j=y.getCompType(w),o=j.func||j;D(S,j),y.drawCompType(o,r,N,S,X,Z)}else H[w]?H[w](S,N):y.getCompType(w)===t&&xe.test(w)&&bc(w);U&&Y()}v&&(r.shadowOffsetX=E,r.shadowOffsetY=q,r.shadowBlur=C,r.shadowColor=k),O!=f&&(r.globalAlpha=G),mm.splice(0,1)}}),r.restore()}}}}();y.getCurrentComp=function(){return mm[0]},y.getParentComp=function(){return mm[1]},y.getInternal=function(){return{isEnter:Sj,isEsc:Aq,isSpace:xn,isLeft:Ug,isUp:eb,isRight:lo,isDown:mh,addMethod:Ad,superCall:Ec,toPointsArray:qn,translateAndScale:eg,appendArray:Wh,createWorldMatrix:wc,vec3TransformMat4:Oh,setCanvas:wj,createDiv:mp,createView:ak,createCanvas:_p,createImage:gb,initContext:pg,layout:kc,fillRect:Hj,Mat:ii,drawBorder:qj,isString:_o,setBorder:$d,getPropertyValue:$j,setPropertyValue:Nc,drawVerticalLine:ni,draw3DRect:ol,getPinchDist:Ah,isSameRect:Hk,getPosition:Ji,intersectionLineRect:Sf,getNodeRect:gq,getEdgeAgentPosition:Uf,getImageWidth:Me,getImageHeight:zr,initItemElement:cg,drawPoints:uq,createG2:Gb,closePopup:Zc,isH:Cl,createAnim:Jd,createNormalMatrix:og,createNormals:Cq,toFloatArray:$l,glMV:em,batchShape:Tf,createNodeMatrix:Re,getFaceInfo:Ef,transformAppend:fb,drawFaceInfo:Rn,to3dPointsArray:Bn,setGLDebugMode:function(_){qf=_},cube:function(){return{vs:Zh,is:bh,uv:vf}},ui:function(){return{DataUI:Wo,NodeUI:Wi,EdgeUI:oq,GroupUI:Vl,ShapeUI:Ig,GridUI:Or,Data3dUI:Oe,Node3dUI:Un,Shape3dUI:Xk}},getInternalVersion:function(){return"U2FsdGVkX1891w7FcCq9ZhNSYRAGwTEz6lY/j5L/p+0="},getDragger:function(){return Pk},addMSMap:function(F){Ad(Of,F)},k:B}},function(g){function Z(y,u){y!=f&&(u==f&&Yj!=typeof y?this._54O(y,256):this._54O(y,u))}function r(){return new Z(f)}function F(N,K,B,L,s,k){for(;--k>=0;){var j=K*this[N++]+B[L]+s;s=q(j/67108864),B[L++]=67108863&j}return s}function o(J,O,d,x,A,L){for(var F=32767&O,h=O>>15;--L>=0;){var g=32767&this[J],y=this[J++]>>15,s=h*g+y*F;g=F*g+((32767&s)<<15)+d[x]+(1073741823&A),A=(g>>>30)+(s>>>15)+h*y+(A>>>30),d[x++]=1073741823&g}return A}function A(H,o,L,M,s,b){for(var i=16383&o,l=o>>14;--b>=0;){var y=16383&this[H],z=this[H++]>>14,Z=l*y+z*i;y=i*y+((16383&Z)<<14)+L[M]+s,s=(y>>28)+(Z>>14)+l*z,L[M++]=268435455&y}return s}function C(n){return _q.charAt(n)}function e(N,C){var M=Fr[N.charCodeAt(C)];return M==f?-1:M}function h(Z){for(var $=this.t-1;$>=0;--$)Z[$]=this[$];Z.t=this.t,Z.s=this.s}function n(r){this.t=1,this.s=0>r?-1:0,r>0?this[0]=r:-1>r?this[0]=r+this.DV:this.t=0}function Y(n){var d=r();return d._58O(n),d}function u(D,F){var M,A=this;if(16==F)M=4;else if(8==F)M=3;else if(256==F)M=8;else if(2==F)M=1;else if(32==F)M=5;else{if(4!=F)return A.fromRadix(D,F),void 0;M=2}A.t=0,A.s=0;for(var O=D.length,B=!1,T=0;--O>=0;){var l=8==M?255&D[O]:e(D,O);0>l?"-"==D.charAt(O)&&(B=!0):(B=!1,0==T?A[A.t++]=l:T+M>A.DB?(A[A.t-1]|=(l&(1<<A.DB-T)-1)<<T,A[A.t++]=l>>A.DB-T):A[A.t-1]|=l<<T,T+=M,T>=A.DB&&(T-=A.DB))}8==M&&0!=(128&D[0])&&(A.s=-1,T>0&&(A[A.t-1]|=(1<<A.DB-T)-1<<T)),A._57O(),B&&Z.ZERO._78O(A,A)}function G(){for(var F=this,f=F.s&F.DM;F.t>0&&F[F.t-1]==f;)--F.t}function m(T){var W=this;if(W.s<0)return"-"+W._85O()[ui](T);var s;if(16==T)s=4;else if(8==T)s=3;else if(2==T)s=1;else if(32==T)s=5;else{if(4!=T)return W.toRadix(T);s=2}var $,w=(1<<s)-1,n=!1,V="",U=W.t,c=W.DB-U*W.DB%s;if(U-->0)for(c<W.DB&&($=W[U]>>c)>0&&(n=!0,V=C($));U>=0;)s>c?($=(W[U]&(1<<c)-1)<<s-c,$|=W[--U]>>(c+=W.DB-s)):($=W[U]>>(c-=s)&w,0>=c&&(c+=W.DB,--U)),$>0&&(n=!0),n&&(V+=C($));return n?V:"0"}function S(){var c=r();return Z.ZERO._78O(this,c),c}function t(){return this.s<0?this._85O():this}function N($){var V=this,q=V.s-$.s;if(0!=q)return q;var P=V.t;if(q=P-$.t,0!=q)return V.s<0?-q:q;for(;--P>=0;)if(0!=(q=V[P]-$[P]))return q;return 0}function s(Q){var t,y=1;return 0!=(t=Q>>>16)&&(Q=t,y+=16),0!=(t=Q>>8)&&(Q=t,y+=8),0!=(t=Q>>4)&&(Q=t,y+=4),0!=(t=Q>>2)&&(Q=t,y+=2),0!=(t=Q>>1)&&(Q=t,y+=1),y}function x(){var L=this;return L.t<=0?0:L.DB*(L.t-1)+s(L[L.t-1]^L.s&L.DM)}function P(e,l){var h;for(h=this.t-1;h>=0;--h)l[h+e]=this[h];for(h=e-1;h>=0;--h)l[h]=0;l.t=this.t+e,l.s=this.s}function U(N,$){for(var T=N;T<this.t;++T)$[T-N]=this[T];$.t=i(this.t-N,0),$.s=this.s}function v(n,F){var g,C=this,T=n%C.DB,h=C.DB-T,H=(1<<h)-1,i=q(n/C.DB),N=C.s<<T&C.DM;for(g=C.t-1;g>=0;--g)F[g+i+1]=C[g]>>h|N,N=(C[g]&H)<<T;for(g=i-1;g>=0;--g)F[g]=0;F[i]=N,F.t=C.t+i+1,F.s=C.s,F._57O()}function R(Q,Z){var m=this;Z.s=m.s;var s=q(Q/m.DB);if(s>=m.t)return Z.t=0,void 0;var M=Q%m.DB,w=m.DB-M,j=(1<<M)-1;Z[0]=m[s]>>M;for(var B=s+1;B<m.t;++B)Z[B-s-1]|=(m[B]&j)<<w,Z[B-s]=m[B]>>M;M>0&&(Z[m.t-s-1]|=(m.s&j)<<w),Z.t=m.t-s,Z._57O()}function w(M,m){for(var n=this,k=0,Y=0,q=K(M.t,n.t);q>k;)Y+=n[k]-M[k],m[k++]=Y&n.DM,Y>>=n.DB;if(M.t<n.t){for(Y-=M.s;k<n.t;)Y+=n[k],m[k++]=Y&n.DM,Y>>=n.DB;Y+=n.s}else{for(Y+=n.s;k<M.t;)Y-=M[k],m[k++]=Y&n.DM,Y>>=n.DB;Y-=M.s}m.s=0>Y?-1:0,-1>Y?m[k++]=n.DV+Y:Y>0&&(m[k++]=Y),m.t=k,m._57O()}function W(t,x){var o=this.abs(),C=t.abs(),S=o.t;for(x.t=S+C.t;--S>=0;)x[S]=0;for(S=0;S<C.t;++S)x[S+o.t]=o.am(0,C[S],x,S,0,o.t);x.s=0,x._57O(),this.s!=t.s&&Z.ZERO._78O(x,x)}function d(v){for(var o=this.abs(),J=v.t=2*o.t;--J>=0;)v[J]=0;for(J=0;J<o.t-1;++J){var p=o.am(J,o[J],v,2*J,0,1);(v[J+o.t]+=o.am(J+1,2*o[J],v,2*J+1,p,o.t-J-1))>=o.DV&&(v[J+o.t]-=o.DV,v[J+o.t+1]=1)}v.t>0&&(v[v.t-1]+=o.am(J,o[J],v,2*J,0,1)),v.s=0,v._57O()}function X(X,g,O){var E=X.abs(),B=this;if(!(E.t<=0)){var j=B.abs();if(j.t<E.t)return g!=f&&g._58O(0),O!=f&&B._77O(O),void 0;O==f&&(O=r());var L=r(),m=B.s,w=X.s,y=B.DB-s(E[E.t-1]);y>0?(E._44O(y,L),j._44O(y,O)):(E._77O(L),j._77O(O));var H=L.t,J=L[H-1];if(0!=J){var n=J*(1<<B.F1)+(H>1?L[H-2]>>B.F2:0),h=B.FV/n,i=(1<<B.F1)/n,P=1<<B.F2,k=O.t,t=k-H,o=g==f?r():g;for(L._59O(t,o),O._52O(o)>=0&&(O[O.t++]=1,O._78O(o,O)),Z.ONE._59O(H,o),o._78O(L,L);L.t<H;)L[L.t++]=0;for(;--t>=0;){var b=O[--k]==J?B.DM:q(O[k]*h+(O[k-1]+P)*i);if((O[k]+=L.am(0,b,O,t,0,H))<b)for(L._59O(t,o),O._78O(o,O);O[k]<--b;)O._78O(o,O)}g!=f&&(O._45O(H,g),m!=w&&Z.ZERO._78O(g,g)),O.t=H,O._57O(),y>0&&O._46O(y,O),0>m&&Z.ZERO._78O(O,O)}}}function y(R){var T=r();return this.abs()._49O(R,f,T),this.s<0&&T._52O(Z.ZERO)>0&&R._78O(T,T),T}function J(k){this.m=k}function $(Q){return Q.s<0||Q._52O(this.m)>=0?Q.mod(this.m):Q}function O($){return $}function L(t){t._49O(this.m,f,t)}function T(R,j,k){R._47O(j,k),this._74O(k)}function H(I,h){I._48O(h),this._74O(h)}function _(){if(this.t<1)return 0;var d=this[0];if(0==(1&d))return 0;var v=3&d;return v=15&v*(2-(15&d)*v),v=255&v*(2-(255&d)*v),v=65535&v*(2-(65535&(65535&d)*v)),v=v*(2-d*v%this.DV)%this.DV,v>0?this.DV-v:-v}function D(n){var C=this;C.m=n,C.mp=n._50O(),C.mpl=32767&C.mp,C.mph=C.mp>>15,C.um=(1<<n.DB-15)-1,C.mt2=2*n.t}function I(F){var o=r();return F.abs()._59O(this.m.t,o),o._49O(this.m,f,o),F.s<0&&o._52O(Z.ZERO)>0&&this.m._78O(o,o),o}function a(F){var Q=r();return F._77O(Q),this._74O(Q),Q}function k(o){for(var p=this;o.t<=p.mt2;)o[o.t++]=0;for(var y=0;y<p.m.t;++y){var n=32767&o[y],M=n*p.mpl+((n*p.mph+(o[y]>>15)*p.mpl&p.um)<<15)&o.DM;for(n=y+p.m.t,o[n]+=p.m.am(0,M,o,y,0,p.m.t);o[n]>=o.DV;)o[n]-=o.DV,o[++n]++}o._57O(),o._45O(p.m.t,o),o._52O(p.m)>=0&&o._78O(p.m,o)}function Pk(f,B){f._48O(B),this._74O(B)}function uc(a,y,B){a._47O(y,B),this._74O(B)}function pe(){return 0==(this.t>0?1&this[0]:this.s)}function qf(B,w){if(B>4294967295||1>B)return Z.ONE;var O=r(),U=r(),F=w._73O(this),g=s(B)-1;for(F._77O(O);--g>=0;)if(w._76O(O,U),(B&1<<g)>0)w._75O(U,F,O);else{var z=O;O=U,U=z}return w.revert(O)}function jr(g,W){var z;return z=256>g||W._51O()?new J(W):new D(W),this.exp(g,z)}function Ir(){var u=this;if(u.s<0){if(1==u.t)return u[0]-u.DV;if(0==u.t)return-1}else{if(1==u.t)return u[0];if(0==u.t)return 0}return(u[1]&(1<<32-u.DB)-1)<<u.DB|u[0]}function dj(p,d){return new Z(p,d)}function Ye(){var R=this;R.n=f,R.e=0,R.d=f,R.p=f,R.q=f,R.dmp1=f,R.dmq1=f,R._10A=f}function Ec(y){return y._53O(this.e,this.n)}function dm(m){var J,X,O,R="",o=0;for(J=0;J<m.length&&m.charAt(J)!=Pl;++J)O=pj.indexOf(m.charAt(J)),0>O||(0==o?(R+=C(O>>2),X=3&O,o=1):1==o?(R+=C(X<<2|O>>4),X=15&O,o=2):2==o?(R+=C(X),R+=C(O>>2),X=3&O,o=3):(R+=C(X<<2|O>>4),R+=C(15&O),o=0));return 1==o&&(R+=C(X<<2)),R}function Ue(Q){var R=Q.split(""),t=dm(Q);return R.forEach(function(j){var C=j.length;C>0&&t&&(Ae+=z(j))}),t}function Eq(c,f){var x=Ao._4O.Util._56O(c,"ss"),D={},m=0;return D.v=x==f,D.t=1,D.s=0>m?-1:0,kn=D.v,m>0?D[0]=m:-1>m?D[0]=m+D.DV:D.t=0,[x,D]}function Ig(o){var P=38,O=o.substring(0,P);if(O&&30==O.indexOf("05000420")){var q=["ss",o.substring(P)];return q}return[]}function Ce(P,K){K=K.replace(sl,""),K=K.replace(/[ \n]+/g,"");var l=dj(K,16);if(l._55O()>this.n._55O())return 0;var d=this._37O(l),g=d[ui](16).replace(/^1f+00/,""),Y=Ig(g);if(0==Y.length)return!1;for(var W,u,N,b=.5,T=Jq,f=[0,.5,.75,.875,.9375],A=[],w=[],y=[],Z=c/T,L=Y[1],j=Eq(P,L)[0],i=0,D=0;i<f.length;i++){var Q=0===i%2?0:.5;for(W=0;T>=W;W++)u=(W+Q)*Z,N=1-f[i],A.push(V(u)*b*N,-b+2*f[i]*b,-E(u)*b*N),w.push((W+Q)/T,N)}for(i=0;i<f.length-1;i++){var r=i*(T+1),z=(i+1)*(T+1);for(W=0;T>W;W++)y.push(r+W,z+W+1,z+W,r+W,r+W+1,z+W+1)}return y.forEach(function(E){D+=E}),L==j&&D>10}var ip,Cg=0xdeadbeefcafe,cc=15715070==(16777215&Cg),ui="toString",ue="",nj="nat",Qr=function(){};M=g["D"+11182[ui](p(2,5))];var Sn=Z.prototype;yh+=fh.substr(0,1);var ws=g.navigator?g.navigator.appName:"";cc&&"Microsoft Internet Explorer"==ws?(Sn.am=o,ip=30):cc&&"Netscape"!=ws?(Sn.am=F,ip=26):(Sn.am=A,ip=28),Sn.DB=ip,Sn.DM=(1<<ip)-1,Sn.DV=1<<ip;var vh=52;Sn.FV=p(2,vh),Sn.F1=vh-ip,Sn.F2=2*ip-vh;var Fb,_c,_q="0123456789abcdefghijklmnopqrstuvwxyz",Fr=[],Og=function(n){return String.fromCharCode(n)};for(Fb="0".charCodeAt(0),_c=0;9>=_c;++_c)Fr[Fb++]=_c;for(Fb="a".charCodeAt(0),_c=10;36>_c;++_c)Fr[Fb++]=_c;for(Fb="A".charCodeAt(0),_c=10;36>_c;++_c)Fr[Fb++]=_c;var wp=J.prototype;wp._73O=$,wp.revert=O,wp._74O=L,wp._75O=T,wp._76O=H;var me=D.prototype;me._73O=I,me.revert=a,me._74O=k,me._75O=uc,me._76O=Pk,Sn._77O=h,Sn._58O=n,Sn._54O=u,Sn._57O=G,Sn._59O=P,Sn._45O=U,Sn._44O=v,Sn._46O=R,Sn._78O=w,Sn._47O=W,Sn._48O=d,Sn._49O=X,Sn._50O=_,Sn._51O=pe,Sn.exp=qf,Sn.toString=m,Sn._85O=S,Sn.abs=t,Sn._52O=N,Sn._55O=x,Sn.mod=y,Sn._53O=jr,Z.ZERO=Y(0),Z.ONE=Y(1),Sn._86O=Ir;var Ve=function(_,n){var v=this;v.isPublic=!0,typeof _!==Yj?(v.n=_,v.e=n):_!=f&&n!=f&&_.length>0&&n.length>0&&(v.n=dj(_,16),v.e=z(n,16))};pc=function(){var F,s,D=Ue(li),J=D.substr(0,4),O=D.substr(4,2),E=D.substr(6,2),C=1,S=!C,f=B,h=[],e=Yl.charAt(7);if(M&&(M[ui]().indexOf(nj)<0||M[yh][ui]().indexOf(nj)<0||!D?F=mb(Bd[e]):(D=new M(J-0,O-C,E-0),s=D.setHours(9),M[yh]()>s?F=mb(Bd[e]):S=!0)),D&&F&&f){for(var q in F)h.push(q);var j,p=F[h[0]],T=F[h[1]],X=F[h[2]],x=F[h[4]],b=F[h[5]],G=F[h[6]],R=Gq._27O(f);R&&G&&(j=p+T+X+x+""+b,j&&R._31O(j,G)&&(S=!0))}return S||(Aj=oo),e};var Mn=Ye.prototype;Mn._37O=Ec,Mn._38O=Ve;var pj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pl="=",Hb=25,rl=10,li="IBcIAQ==",Oj=Oj||function(e,I){var x={},G=x._7A={},O=G._6A=function(){function W(){}return{_80O:function(K){W.prototype=this;var U=new W;return K&&U._5A(K),U.hasOwnProperty("_82O")||(U._82O=function(){U.$super._82O.apply(this,arguments)}),U._82O.prototype=U,U.$super=this,U},_3A:function(){var K=this._80O();return K._82O.apply(K,arguments),K},_82O:function(){},_5A:function(a){for(var K in a)a.hasOwnProperty(K)&&(this[K]=a[K]);a.hasOwnProperty(ui)&&(this.toString=a.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),H=G._39O=O._80O({_82O:function(K,c){K=this._84O=K||[],this._65O=c!=I?c:4*K.length},toString:function(i){return(i||w).stringify(this)},_89O:function(U){var Z=this._84O,r=U._84O,D=this._65O,w=U._65O;if(this._57O(),D%4)for(var T=0;w>T;T++){var O=255&r[T>>>2]>>>24-8*(T%4);Z[D+T>>>2]|=O<<24-8*((D+T)%4)}else if(r.length>65535)for(var T=0;w>T;T+=4)Z[D+T>>>2]=r[T>>>2];else Z.push.apply(Z,r);return this._65O+=w,this},_57O:function(){var K=this._84O,F=this._65O;K[F>>>2]&=4294967295<<32-8*(F%4),K.length=j(F/4)},_88O:function(){var G=O._88O.call(this);return G._84O=this._84O.slice(0),G},_87O:function($){for(var N=[],x=0;$>x;x+=4)N.push(0|4294967296*l);return new H._82O(N,$)}}),m=x._2A={},w=m._69O={stringify:function(e){var j,$=e._84O,p=e._65O,s=[];for(j=0;p>j;j++){var b=255&$[j>>>2]>>>24-8*(j%4);s.push((b>>>4).toString(16)),s.push((15&b).toString(16))}return s.join("")},_68O:function(j){for(var R=j.length,s=[],e=0;R>e;e+=2)s[e>>>3]|=z(j.substr(e,2),16)<<24-4*(e%8);return new H._82O(s,R/2)}},U=m._8A={stringify:function(B){var c,e=B._84O,d=B._65O,z=[];for(c=0;d>c;c++){var E=255&e[c>>>2]>>>24-8*(c%4);z.push(Og(E))}return z.join("")},_68O:function(n){var i,$=n.length,F=[];for(i=0;$>i;i++)F[i>>>2]|=(255&n.charCodeAt(i))<<24-8*(i%4);return new H._82O(F,$)}},Z=m._9A={stringify:function(t){try{return decodeURIComponent(escape(U.stringify(t)))}catch(V){throw new Error("")}},_68O:function(K){return U._68O(unescape(encodeURIComponent(K)))}},X=G._32O=O._80O({_1A:function(){this._83O=new H._82O,this._23O=0},_33O:function(s){typeof s==Yj&&(s=Z._68O(s)),this._83O._89O(s),this._23O+=s._65O},_25O:function(W){var g=this._83O,Q=g._84O,E=g._65O,C=this._79O,o=4*C,X=E/o;
X=W?j(X):i((0|X)-this._22O,0);var Y=X*C,D=K(4*Y,E);if(Y){for(var v=0;Y>v;v+=C)this._20O(Q,v);var O=Q.splice(0,Y);g._65O-=D}return new H._82O(O,D)},_88O:function(){var B=O._88O.call(this);return B._83O=this._83O._88O(),B},_22O:0});G._66O=X._80O({cfg:O._80O(),_82O:function(n){this.cfg=this.cfg._80O(n),this._1A()},_1A:function(){X._1A.call(this),this._34O()},_81O:function(T){return this._33O(T),this._25O(),this},_72O:function(u){u&&this._33O(u);var n=this._21O();return n},_79O:16,_26O:function(E){return function(P,o){return new E._82O(o)._72O(P)}},_19O:function(N){return function(o,g){return new W._71O._82O(N,g)._72O(o)}}});var W=x._67O={};return x}();!function(){var l=Oj,F=l._7A,e=F._39O,B=F._66O,w=l._67O,v=[],d=[];!function(){function F(j){for(var V=Q(j),T=2;V>=T;T++)if(!(j%T))return!1;return!0}function C(q){return 0|4294967296*(q-(0|q))}for(var y=2,x=0;64>x;)F(y)&&(8>x&&(v[x]=C(p(y,.5))),d[x]=C(p(y,1/3)),x++),y++}();var b=[],$=w._41O=B._80O({_34O:function(){this._64O=new e._82O(v.slice(0))},_20O:function(D,K){for(var m=this._64O._84O,Z=m[0],V=m[1],U=m[2],Q=m[3],_=m[4],i=m[5],u=m[6],f=m[7],H=0;64>H;H++){if(16>H)b[H]=0|D[K+H];else{var o=b[H-15],v=(o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3,p=b[H-2],E=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;b[H]=v+b[H-7]+E+b[H-16]}var h=_&i^~_&u,x=Z&V^Z&U^V&U,$=(Z<<30|Z>>>2)^(Z<<19|Z>>>13)^(Z<<10|Z>>>22),X=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),W=f+X+h+d[H]+b[H],j=$+x;f=u,u=i,i=_,_=0|Q+W,Q=U,U=V,V=Z,Z=0|W+j}m[0]=0|m[0]+Z,m[1]=0|m[1]+V,m[2]=0|m[2]+U,m[3]=0|m[3]+Q,m[4]=0|m[4]+_,m[5]=0|m[5]+i,m[6]=0|m[6]+u,m[7]=0|m[7]+f},_21O:function(){var h=this._83O,l=h._84O,Q=8*this._23O,A=8*h._65O;return l[A>>>5]|=128<<24-A%32,l[(A+64>>>9<<4)+14]=q(Q/4294967296),l[(A+64>>>9<<4)+15]=Q,h._65O=4*l.length,this._25O(),this._64O},_88O:function(){var A=B._88O.call(this);return A._64O=this._64O._88O(),A}});l._41O=B._26O($),l._42O=B._19O($)}();var sl=new RegExp("");sl.compile("[^0-9a-f]","gi"),Ye._28O=-1,Ye._29O=-2,Mn._31O=Ce,Mn._63O=Ce,Ye._43O=-2;var Ml=new function(){var N=this;N._5O=function(k,E){if("8"!=k.substring(E+2,E+3))return 1;var O=z(k.substring(E+3,E+4));return 0==O?-1:O>0&&10>O?O+1:-2},N._13O=function(b,V){var L=N._5O(b,V);return 1>L?"":b.substring(V+2,V+2+2*L)},N._12O=function(D,j){var g=N._13O(D,j);if(""==g)return-1;var r;return r=z(g.substring(0,1))<8?new Z(g,16):new Z(g.substring(2),16),r._86O()},N._6O=function(R,E){var I=N._5O(R,E);return 0>I?I:E+2*(I+1)},N._11O=function(y,a){var d=N._6O(y,a),m=N._12O(y,a);return y.substring(d,d+2*m)},N._10O=function(e,l){var V=N._6O(e,l),h=N._12O(e,l);return V+2*h},N._7O=function(Y,s){var v=[],t=N._6O(Y,s);v.push(t);for(var X=N._12O(Y,s),z=t,P=0;;){var d=N._10O(Y,z);if(d==f||d-t>=2*X)break;if(P>=200)break;v.push(d),z=d,P++}return v}};if(Ml._90O=Og(rl+24),Ml._91O=b+Og(rl*rl+8),Ao==f||!Ao)var Ao={};Ao._4O!=f&&Ao._4O||(Ao._4O={});var go=Ao._4O;Ao._4O.Util=new function(){var R=this;R._56O=function(Y){var G=new Ao._4O._3O;return G._30O(Y)},R._4A=function(E){var Z=new Ao._4O._3O;return Z._36O(E)},R._11A=function(T){var F=new go._3O;return F._30O(T)}},Ao._4O._3O=function(){var r=this;r._8O=function(L,Y){if("ss"==L&&"cj"==Y){try{r.md=Oj._67O._41O._3A()}catch(P){Qr(ue)}r._24O=function(X){r.md._81O(X)},r._35O=function(A){var q=Oj._2A._69O._68O(A);r.md._81O(q)},r._60O=function(){var k=r.md._72O();return k[ui](Oj._2A._69O)},r._30O=function(F){return r._24O(F),r._60O()},r._36O=function(Y){return r._35O(Y),r._60O()}}},r._24O=function(){Qr(ue)},r._35O=function(){Qr(ue)},r._60O=function(){Qr(ue)},r._30O=function(){Qr(ue)},r._36O=function(){Qr(ue)},r._8O("ss","cj")},Nl=function(k){var w=Kr[Iq[7]],L=1,u=!1;if(ff.a!=Kr[jl])return ff.a;if(ff.forEach(function(k){L*=k}),k>L){if(w){w=w.split(Ml._90O);var C=w[3],G=w[7],e=w[11],m=w[19],A=w[23],T=w[27],K=C+G+e+m+A;u=mn()(K,T)}u||(Wo.prototype._42=Nj)}else u=!0;return ff.a=u,u},Hb=String.fromCharCode(Hb+20);var fe=function(q){return q=q.replace(sl,ue),q=q.replace(/[ \n]+/g,ue)},yj="30",Yo="06",Hc="02",cs="03",Hd=dj,Yn=/^1f+00/,Gq=function(){var F;return F={_18O:function(L){var b=L,Z=b.replace(/\s+/g,""),$=dm(Z);return $},_14O:function(J){var u=this._18O(J),X=this._15O(u);return X},_15O:function(k){var H=this._17O(k);if("2a864886f70d010101"==H._61O){var P=this._16O(H.key),e=new Ye;return e._38O(P.n,P.e),e}Qr(ue)},_16O:function(e){var R={};e.substr(0,2)!=yj&&Qr(ue);var A=Ml._7O(e,0);return 2!=A.length&&Qr(ue),e.substr(A[0],2)!=Hc&&Qr(ue),R.n=Ml._11O(e,A[0]),e.substr(A[1],2)!=Hc&&Qr(ue),R.e=Ml._11O(e,A[1]),R},_17O:function(i){var r={};r._40O=f;var I=Ml._7O(i,0);2!=I.length&&Qr(ue);var j=I[0];i.substr(j,2)!=yj&&Qr(ue);var x=Ml._7O(i,j);return 2!=x.length&&Qr(ue),i.substr(x[0],2)!=Yo&&Qr(ue),r._61O=Ml._11O(i,x[0]),i.substr(x[1],2)==Yo?r._40O=Ml._11O(i,x[1]):i.substr(x[1],2)==yj&&(r._40O={},r._40O.p=Ml._70O(i,x[1],[0],Hc),r._40O.q=Ml._70O(i,x[1],[1],Hc),r._40O.g=Ml._70O(i,x[1],[2],Hc)),i.substr(I[1],2)!=cs&&Qr(ue),r.key=Ml._11O(i,I[1]).substr(2),r}},F._17O?F:f}(),Kl=Gq._27O=function(Z){return Gq._14O(Z)};mn=function(){return function(b,A){A=fe(A);var k=Hd(A,p(2,4)),B=this;if(!B||!B.n||k._55O()>B.n._55O())return 0;var f=B._37O(k),j=f[ui](p(2,4)).replace(Yn,""),y=Ig(j);if(0==y.length)return!1;var $=y[0],Y=y[1],t=function(Z){return Ao._4O.Util._56O(Z,$)},_=t(b);return Y==_}.bind(Kl(B))};var _f,Zb;return function(){var T=mg.length-Vq.length;if(T>0)for(var x=0;T>x;x++)_f=go.Util,Zb=fe}(),qg=function(T,v){v=Zb(v);var i=Kl(Dj),U=Bk.length,f=2*U,N=Hd(v,p(U,f)),A=i,S=!0;if(A){var O=A[Fp[0]];O&&N._55O()<=O._55O()&&(S=!1)}if(S)return 0;var E=A._37O(N),s=E[ui](p(U,f)).replace(Yn,""),W=Ig(s);if(0==W.length)return!1;var j=W[0],z=W[1],C=_f._11A(T,j);return z==C},Gq}(D,L);var ie=A.List=function(){this._as=[];var p,F,a=arguments.length;if(1===a){var L=arguments[0];if(Kg(L)&&(L=L._as),uo(L))for(F=L.length,p=0;F>p;p++)this._as.push(L[p]);else L!=f&&this._as.push(L)}else if(a>1)for(p=0;a>p;p++)this._as.push(arguments[p])};ag("List",L,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(R,c){return c===t?this._as.push(R):this._as.splice(c,0,R)},addAll:function(_){Kg(_)&&(_=_._as),uo(_)?Wh(this._as,_):this._as.push(_)},get:function(W){return this._as[W]},slice:function(Z,j){return new ie(this._as.slice(Z,j))},remove:function(m){var e=this._as.indexOf(m);return e>=0&&e<this._as.length&&this.removeAt(e),e},removeAt:function(U){return this._as.splice(U,1)[0]},set:function(m,A){return this._as[m]=A},clear:function(){return this._as.splice(0,this._as.length)},contains:function(s){return this._as.indexOf(s)>=0},indexOf:function(A){return this._as.indexOf(A)},each:function(T,S){for(var r=0,D=this._as.length;D>r;r++){var V=this._as[r];S?T.call(S,V):T(V)}},reverseEach:function(Y,L){for(var N=this._as.length-1;N>=0;N--){var w=this._as[N];L?Y.call(L,w):Y(w)}},toArray:function(y,F){if(y){for(var j,g=[],A=0,h=this._as.length;h>A;A++)j=this._as[A],F?y.call(F,j)&&g.push(j):y(j)&&g.push(j);return g}return this._as.concat()},toList:function(O,M){if(O){for(var J,Z=new ie,G=0,e=this._as.length;e>G;G++)J=this._as[G],M?O.call(M,J)&&Z.add(J):O(J)&&Z.add(J);return Z}return new ie(this)},reverse:function(){this._as.reverse()},sort:function(C){return this._as.sort(C?C:th),this},toString:function(){return this._as.toString()}});var xc=new ie;Ad(xc,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Xb,each:Xb,reverseEach:Xb,toArray:function(){return[]},toList:function(){return new ie},add:ro,addAll:ro,set:ro,remove:ro,removeAt:ro,clear:ro});var fs=A.Notifier=function(){};ag("Notifier",L,{contains:function(J,p){if(this._ls)for(var B,K=0,t=this._ls.size();t>K;K++)if(B=this._ls.get(K),J===B.l&&p===B.s)return!0;return!1},add:function(q,F,C){var R=this,j={l:q,s:F,a:C};R._ls||(R._ls=new ie),R._f?(R._as||(R._as=new ie),R._as.add(j)):j.a?R._ls.add(j,0):R._ls.add(j)},remove:function(K,J){var N=this;N._ls&&(N._f?(N._rs||(N._rs=new ie),N._rs.add({l:K,s:J})):N._remove(K,J))},_remove:function(r,z){for(var X,Q=this._ls,N=0,F=Q.size();F>N;N++)if(X=Q.get(N),X.l===r&&X.s===z)return Q.removeAt(N),void 0},fire:function(x){var n=this,m=n._ls;if(n._b=1e4,m){n._f=1;for(var N,W=0,z=m.size();z>W;W++)N=m.get(W),N.s?N.l.call(N.s,x):N.l(x);if(delete n._f,n._rs){for(z=n._rs.size(),W=0;z>W;W++)N=n._rs.get(W),n._remove(N.l,N.s);delete n._rs}if(n._as){for(z=n._as.size(),W=0;z>W;W++)N=n._as.get(W),N.a?m.add(N,0):m.add(N);delete n._as}}}});var zo=A.Data=function(){this._id=dp()};ag("Data",L,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:f,_parent:f,_children:xc,_childMap:f,_styleMap:f,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return f},_22Q:function(){return f},s:function(S,A){var h=this;if(2===arguments.length)h.setStyle(S,A);else{if(!Jo(S))return h.getStyle(S);for(var F in S)h.setStyle(F,S[F])}return h},fp:function(n,c,E){return this.firePropertyChange(n,c,E)},firePropertyChange:function(w,A,T){if(A===T)return!1;var t=this,Y={property:w,oldValue:A,newValue:T,data:t};return t._dataModel&&t._dataModel.handleDataPropertyChange(Y),t.onPropertyChanged(Y),!0},onPropertyChanged:function(q){var h=this,_=h._parent,c=q.property;if(bg(_)){var G=h.s(zk),z="s:ingroup"===c;(G&&Fi[c]||c===z)&&_._81I(),(G||z)&&_.fp("childChange",!0,!1)}$i(_)&&Fi[c]&&_.updateFromChildren()},_21I:function(S){var w=this;if(S&&w._dataModel)throw"Remove data from dataModel before adding";w._dataModel=S},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var w=0,K=this._children.toArray(),X=K.length;X>w;w++)K[w].removeFromDataModel()},getId:function(){return this._id},setId:function(o){this._id=o},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(D,t){return this._children.toList(D,t)},eachChild:function(s,W){this._children.each(s,W)},addChild:function(o,E){var K=this;o!==K&&(K._children===xc&&(K._children=new ie,K._childMap={}),E===t&&(E=K._children.size()),K._childMap[o._id]||K.isDescendantOf(o)||(o._parent&&o._parent.removeChild(o),(0>E||E>K._children.size())&&(E=K._children.size()),K._children.add(o,E),K._childMap[o._id]=o,o.setParent(K),K.onChildAdded(o,E),K.fp(sk,f,o)))},onChildAdded:function(){},removeChild:function(G){var z=this;if(z._childMap&&z._childMap[G._id]){var p=z._children.remove(G);delete z._childMap[G._id],z.fp(sk,G,f),G.setParent(f),z.onChildRemoved(G,p)}},onChildRemoved:function(){},getChildAt:function(y){return this._children.get(y)},clearChildren:function(){var j=this;if(!j._children.isEmpty())for(var e=0,y=j._children.toArray(),v=y.length;v>e;e++)j.removeChild(y[e])},getParent:function(){return this._parent},setParent:function(n){var r=this;if(!(r._73I||r._parent===n||r===n||n&&n.isDescendantOf(r))){var e=r._parent;r._parent=n,r._73I=1,e&&e.removeChild(r),n&&n.addChild(r),delete r._73I,r.fp("parent",e,n),r.onParentChanged(e,n)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(n){return n?this.isDescendantOf(n)||n.isDescendantOf(this):!1},isParentOf:function(W){return W&&this._childMap?!!this._childMap[W._id]:!1},isDescendantOf:function(U){if(!U||U.isEmpty())return!1;for(var E=this._parent;E;){if(U===E)return!0;E=E._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(U,x){x===t&&(x=1);var I=this._styleMap?this._styleMap[U]:t;return I===t&&x?R[U]:I},setStyle:function(K,I){var m=this;m._styleMap||(m._styleMap={});var j=m._styleMap[K];I===t?delete m._styleMap[K]:m._styleMap[K]=I,m.fp("s:"+K,j,I)&&m.onStyleChanged(K,j,I)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var z=this;return z._displayName||z._name||z._tag||z._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(z,V){var N=this,g=N.s(jn);g||N.s(jn,g={}),V?g[z]=V:delete g[z],N.fp(jn,f,g)},removeStyleIcon:function(w){var e=this.s(jn);if(e){var r=e[w];delete e[w],this.fp(jn,f,e)}return r},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var p,U={};for(p in this._styleMap)U[p]=1;return U}});var ve=A.DataModel=function(){var L=this;L._datas=new ie,L._dataMap={},L._roots=new ie,L._rootMap={},L._78O={},L._36I=new fs,L._35I=new fs,L._selectionModel=new Cc(L);var i=L._29Q=[],R=L._scheduleCallback=function(){for(var U=Date.now(),j=0;j<i.length;j++){var v=i[j];v.enabled&&U-v.lastTime>v.interval&&(L.each(function(I){v.action(I)}),v.lastTime=U)}i.length&&(L._30Q=D.requestAnimationFrame(R))}};ag("DataModel",L,{ms_fire:1,ms_attr:1,ms_ac:["name","autoAdjustIndex","hierarchicalRendering","background","init"],_name:t,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:t,_init:t,sm:function(){return this.getSelectionModel()},mm:function(e,P,g){this.addDataModelChangeListener(e,P,g)},umm:function(s,C){this.removeDataModelChangeListener(s,C)},md:function(P,M,V){this.addDataPropertyChangeListener(P,M,V)},umd:function(e,g){this.removeDataPropertyChangeListener(e,g)},mh:function(G,X,b){this.addHierarchyChangeListener(G,X,b)},umh:function(H,Q){this.removeHierarchyChangeListener(H,Q)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(Y){return this._attrObject=Y},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(q){return this._dataMap[q]},removeDataById:function(D){this.remove(this.getDataById(D))},toDatas:function(W,X){return this._datas.toList(W,X)},each:function(H,l){this._datas.each(H,l)},getDataByTag:function(k){return this._78O[k]},removeDataByTag:function(a){this.remove(this.getDataByTag(a))},add:function(K,p){var c=this,_=K._id,s=K._tag,w=c._roots;if(c._dataMap[_])throw"'"+_+"' already exists";s!=f&&(c._78O[s]=K),c._dataMap[_]=K,c._datas.add(K),K._parent||(c._rootMap[_]=K,p>=0?w.add(K,p):w.add(K)),K._21I(c),c.onAdded(K),c._36I.fire({kind:"add",data:K})},onAdded:function(){},remove:function(k,E){if(k){var P=this,s=k._id,o=E&&E.keepChildren,K=k.getTag(),Y=P.getHistoryManager();o&&(P._removingData||(P._removingData=k)),k._dataModel===P&&(Y&&Y.beginInteraction(),P.prepareRemove(k),k.toChildren().each(function(N){P.remove(N,E)},P),o?P._removingData==k&&(k._parent&&k._parent.removeChild(k),delete P._removingData):k._parent&&k._parent.removeChild(k),P._datas.remove(k),delete P._dataMap[s],K!=f&&delete P._78O[K],P._rootMap[s]&&(delete P._rootMap[s],P._roots.remove(k)),k._21I(f),P.onRemoved(k),P._36I.fire({kind:Tn,data:k}),Y&&Y.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var E=this;E._datas.size()&&(E._datas.toArray().forEach(function(F){F._21I(f)}),E._datas.clear(),E._dataMap={},E._roots.clear(),E._rootMap={},E._78O={},E._36I.fire({kind:wb}))},contains:function(y){return y&&y._dataModel===this},handleDataPropertyChange:function(d){var c=this,Y=d.data,r=d.property;if("parent"===r){var y=Y._id,h=c._rootMap,b=c._roots;Y._parent?h[y]&&(delete h[y],b.remove(Y)):h[y]||(h[y]=Y,b.add(Y))}else if("tag"===r){var e=d.oldValue,z=d.newValue,W=c._78O;e!=f&&delete W[e],z!=f&&(W[z]=Y)}this.onDataPropertyChanged(Y,d),this._35I.fire(d)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(O,e,p){this._36I.add(O,e,p)},removeDataModelChangeListener:function(W,T){this._36I.remove(W,T)},addDataPropertyChangeListener:function(z,o,G){this._35I.add(z,o,G)},removeDataPropertyChangeListener:function(r,W){this._35I.remove(r,W)},_38I:function(w,b,y){this._37I&&this._37I.fire({data:w,oldIndex:b,newIndex:y})},addHierarchyChangeListener:function(l,V,g){this._37I||(this._37I=new fs),this._37I.add(l,V,g)},removeHierarchyChangeListener:function(u,w){this._37I.remove(u,w)},getSiblings:function(H){var L=H._parent;return L?L._children:this._roots},eachByHierarchical:function(S,e,I){if(e)return this._eachByHierarchical(S,e,I);for(var W=0,U=this._roots,F=U.size();F>W;W++)if(this._eachByHierarchical(S,U.get(W),I)===!1)return!1;return!0},_eachByHierarchical:function(J,X,j){if(j){if(J.call(j,X)===!1)return!1}else if(J(X)===!1)return!1;for(var S=X.size(),U=0;S>U;U++)if(this._eachByHierarchical(J,X.getChildAt(U),j)===!1)return!1;return!0},reverseEachByHierarchical:function(K,c,Y){if(c)return this._reverseEachByHierarchical(K,c,Y);for(var G=this._roots,Q=G.size(),g=Q-1;g>=0;g--)if(this._reverseEachByHierarchical(K,G.get(g),Y)===!1)return!1;return!0},_reverseEachByHierarchical:function(c,e,i){for(var f=e.size(),l=f-1;l>=0;l--)if(this._reverseEachByHierarchical(c,e.getChildAt(l),i)===!1)return!1;if(i){if(c.call(i,e)===!1)return!1}else if(c(e)===!1)return!1;return!0},eachByDepthFirst:function(i,D,H){if(D)return this._11I(i,D,H);for(var I=0,v=this._roots,M=v.size();M>I;I++)if(this._11I(i,v.get(I),H)===!1)return!1;return!0},_11I:function(T,k,s){for(var E=k.size(),a=0;E>a;a++)if(this._11I(T,k.getChildAt(a),s)===!1)return!1;if(s){if(T.call(s,k)===!1)return!1}else if(T(k)===!1)return!1;return!0},eachByBreadthFirst:function(G,Z,T){var p=new ie;for(Z?p.add(Z):this._roots.each(p.add,p);p.size()>0;)if(Z=p.removeAt(0),Z.eachChild(p.add,p),T){if(G.call(T,Z)===!1)return!1}else if(G(Z)===!1)return!1;return!0},moveTo:function(r,g){var e=this.getSiblings(r),C=e.indexOf(r);C===g||0>C||g>=0&&g<=e.size()&&(e.remove(r),g>e.size()&&g--,e.add(r,g),this._38I(r,C,g))},moveUp:function(V){this.moveTo(V,this.getSiblings(V).indexOf(V)-1)},moveDown:function(H){this.moveTo(H,this.getSiblings(H).indexOf(H)+1)},moveToTop:function(b){this.moveTo(b,0)},moveToBottom:function(g){this.moveTo(g,this.getSiblings(g).size())},moveSelectionUp:function(e){e||(e=this.sm());var a=new ie;Nb(e,a,this._roots),a.each(this.moveUp,this)},moveSelectionDown:function(K){K||(K=this.sm());var C=new ie;Ck(K,C,this._roots),C.each(this.moveDown,this)},moveSelectionToTop:function(L){L||(L=this.sm());var v=new ie;se(L,v,this._roots),v.each(this.moveToTop,this)},moveSelectionToBottom:function(t){t||(t=this.sm());var r=new ie;Zn(t,r,this._roots),r.each(this.moveToBottom,this)},moveToIndex:function(u,$,R){var O=this.getDatas();null==R&&(R=O.indexOf(u)),R===$||0>R||$>=0&&$<=O.size()&&(O.remove(u),$>O.size()&&$--,O.add(u,$),this._76I(u,R,$))},bringForward:function(W){this.moveToIndex(W,this.getDatas().indexOf(W)+1)},bringToFront:function(s){this.moveToIndex(s,this.size())},sendBackward:function(e){this.moveToIndex(e,this.getDatas().indexOf(e)-1)},sendToBack:function(K){this.moveToIndex(K,0)},bringSelectionForward:function(g){g||(g=this.sm());for(var E=new ie,z=this.getDatas(),f=!1,A=0;A<z.size();A++){var T=z.get(z.size()-1-A);g.contains(T)?f&&E.add(T):f=!0}E.each(this.bringForward,this)},bringSelectionToFront:function(O){O||(O=this.sm());for(var w=new ie,c=this.getDatas(),_=0;_<c.size();_++){var W=c.get(_);O.contains(W)&&w.add(W)}w.each(this.bringToFront,this)},sendSelectionBackward:function(w){w||(w=this.sm());for(var Q=new ie,O=this.getDatas(),d=!1,K=0;K<O.size();K++){var D=O.get(K);w.contains(D)?d&&Q.add(D):d=!0}Q.each(this.sendBackward,this)},sendSelectionToBack:function(H){H||(H=this.sm());for(var s=new ie,S=this.getDatas(),g=0;g<S.size();g++){var Y=S.get(S.size()-1-g);H.contains(Y)&&s.add(Y)}s.each(this.sendToBack,this)},addScheduleTask:function(R){var i=this;i.removeScheduleTask(R),R.enabled==f&&(R.enabled=!0),R.interval==f&&(R.interval=10),R.action==f&&(R.action=Xb),R.lastTime=Date.now(),i._29Q.push(R),i._30Q==f&&(i._30Q=D.requestAnimationFrame(i._scheduleCallback))},removeScheduleTask:function(V){var p=this,J=p._29Q,z=J.indexOf(V);z>=0&&J.splice(z,1),J.length||p._30Q==f||(D.cancelAnimationFrame(p._30Q),delete p._30Q)}});var Cc=A.SelectionModel=function(A){var r=this;r._68O=Lg,r._map={},r._73O=new ie,r._74I=new fs,r._21I(A)};ag("SelectionModel",L,{ms_fire:1,ms_dm:1,ms:function(x,v,l){this.addSelectionChangeListener(x,v,l)},ums:function(t,X){this.removeSelectionChangeListener(t,X)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===dl},co:function(G){return this._map[G._id]!=f},ss:function(z){this.setSelection(z)},as:function(o){this.appendSelection(o)},rs:function(d){this.removeSelection(d)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(F){var A=this;if(A._68O!==F&&(F===Fp||F===dl||F===Lg)){A.cs();var M=A._68O;A._68O=F,A.fp("selectionMode",M,F)}},_21I:function(t){var w=this,A=w._dataModel;A!==t&&(A&&(w.cs(),A.umm(w.handleDataModelChange,w)),w._dataModel=t,t.mm(w.handleDataModelChange,w,!0),w.fp(Wc,A,t))},dispose:function(){var M=this;M.cs(),M._dataModel.umm(M.handleDataModelChange,M)},handleDataModelChange:function(g){var R=this;if(g.kind===Tn){var h=g.data;R.co(h)&&(R._73O.remove(h),delete R._map[h._id],R._75I(Tn,new ie(h)))}else g.kind===wb&&R.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(j){var L=this;if(L._filterFunc!==j){L.cs();var r=L._filterFunc;L._filterFunc=j,L.fp("filterFunc",r,L._filterFunc)}},_75I:function(J,K,A,X){A&&(this._73O.each(function(F){X[F._id]?A.remove(F):A.add(F)}),K=A.toList()),this._74I.fire({kind:J,datas:new ie(K)})},addSelectionChangeListener:function(g,u,k){this._74I.add(g,u,k)},removeSelectionChangeListener:function(Z,i){this._74I.remove(Z,i)},_97O:function(r,f){for(var C,u=this,Y=0,W=new ie(r);Y<W.size();Y++)C=W.get(Y),(u._filterFunc&&!u._filterFunc(C)||f&&u.co(C)||!f&&!u.co(C)||!u._dataModel.contains(C))&&(W.removeAt(Y),Y--);return W},appendSelection:function(n){var x=this;if(x._68O!==Fp){var g,s,k=x._73O,Z=x._97O(n,!0);Z.isEmpty()||(x.sg()&&(g=new ie(k),s=x._map,k.clear(),x._map={},Z=new ie(Z.get(Z.size()-1))),Z.each(function(_){k.add(_),x._map[_._id]=_}),x._75I("append",Z,g,s))}},removeSelection:function(T){var g=this,l=g._97O(T),y=0,v=l.size();if(0!==v){for(;v>y;y++){var i=l.get(y);g._73O.remove(i),delete g._map[i._id]}g._75I(Tn,l)}},toSelection:function(H,d){return this._73O.toList(H,d)},getSelection:function(){return this._73O},each:function(h,l){this._73O.each(h,l)},setSelection:function(s){var b=this,R=b._73O;if(b._68O!==Fp&&!(R.isEmpty()&&!s||1===R.size()&&b.ld()===s)){var e=new ie(R),S=b._map;R.clear(),b._map={};var j=b._97O(s,!0);b.sg()&&j.size()>1&&(j=new ie(j.get(j.size()-1))),j.each(function(U){R.add(U),b._map[U._id]=U}),b._75I("set",f,e,S)}},clearSelection:function(){var l=this,e=l._73O;if(e.size()>0){var t=e.toList();e.clear(),l._map={},l._75I(wb,t)}},selectAll:function(){var P=this;if(P._68O!==Fp){var k,y,M=P._dataModel.toDatas();if(P._filterFunc)for(k=0;k<M.size();k++)y=M.get(k),P._filterFunc(y)||(M.removeAt(k),k--);var e=P._73O,o=new ie(e),I=P._map;e.clear(),P._map={},P.sg()&&M.size()>1&&(M=new ie(M.get(M.size()-1)));var G=M.size();for(k=0;G>k;k++)y=M.get(k),e.add(y),P._map[y._id]=y;P._75I("all",f,o,I)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(Q){return this._map[Q._id]!=f},getLastData:function(){var M=this._73O;return M.size()>0?M.get(M.size()-1):f},getFirstData:function(){var k=this._73O;return k.size()>0?k.get(0):f},isSelectable:function(F){var $=this;return F&&$._68O!==Fp?$._filterFunc?$._filterFunc(F):!0:!1},getTopSelection:function(){var j=this,q=new ie;return j._73O.each(function(w){for(var h=w.getParent();h;){if(j.contains(h)){w=f;break}h=h.parent}w&&q.add(w)}),q}});var gq=function(){return si(0),function(m,e){var i;if(bg(e)&&e.isExpanded()){var T=m.getDataUI(e);T&&T._88I&&(i=T._88I.rect)}return i?i:e.getRect()}}();Ad(y,{edgeGroupAgentFunc:f,graphViewAutoScrollZone:16,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:e.rectSelectBorder,graphViewRectSelectBackground:Uq,graphViewEditPointSize:Z?17:7,graphViewEditPointBorderColor:e.editPointBorder,graphViewEditPointBackground:e.editPointBackground,setEdgeType:function(e,w,D){zq[e]=w,bm[e]=D},getEdgeType:function(B){return zq[B]},getEdgeTypeMap:function(){return zq},getNodeRect:gq},!0),Ad(R,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":t,"image.stretch":"fill",icons:t,ingroup:!0,"body.color":t,opacity:t,pixelPerfect:!0,"select.color":Ol,"select.width":1,"select.padding":2,"select.type":Xl,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":t,"border.width":2,"border.padding":2,"border.type":Xl,label:t,"label.font":t,"label.color":Tr,"label.background":t,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":t,"label.max":t,"label.opacity":t,"label.scale":1,"label.align":t,"label.selectable":!0,label2:t,"label2.font":t,"label2.color":Tr,"label2.background":t,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":t,"label2.max":t,"label2.opacity":t,"label2.scale":1,"label2.align":t,"label2.selectable":!0,note:t,"note.expanded":!0,"note.font":t,"note.color":_c,"note.background":Ol,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":t,"note.toggleable":!0,"note.border.width":1,"note.border.color":t,"note.opacity":t,"note.scale":1,"note.align":t,note2:t,"note2.expanded":!0,"note2.font":t,"note2.color":_c,"note2.background":Ol,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":t,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":t,"note2.opacity":t,"note2.scale":1,"note2.align":t,"group.type":t,"group.image":t,"group.image.stretch":"fill","group.repeat.image":t,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":t,"group.title.color":_c,"group.title.background":e.groupTitleBackground,"group.title.align":Pc,"group.background":e.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":t,"group.border.color":jo,"group.border.cap":Cm,"group.border.join":mq,"group.gradient":f,"group.gradient.color":"#FFF",shape:t,"shape.background":jo,"shape.repeat.image":t,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":jo,"shape.border.3d":!1,"shape.border.3d.color":t,"shape.border.3d.accuracy":t,"shape.border.cap":Cm,"shape.border.join":mq,"shape.border.pattern":t,"shape.gradient":f,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Ui,"shape.dash.offset":0,"shape.dash.color":Gj,"shape.dash.width":t,"shape.dash.3d":!1,"shape.dash.3d.color":t,"shape.dash.3d.accuracy":t,"shape.polygon.side":6,"shape.arc.from":h,"shape.arc.to":c,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":t,"edge.type":t,"edge.points":t,"edge.segments":t,"edge.color":jo,"edge.width":2,"edge.width.absolute":!1,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":t,"edge.3d.accuracy":t,"edge.cap":Cm,"edge.join":mq,"edge.source.position":17,"edge.source.anchor.x":t,"edge.source.anchor.y":t,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":t,"edge.target.anchor.y":t,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":t,"edge.dash":!1,"edge.dash.pattern":Ui,"edge.dash.offset":0,"edge.dash.color":Gj,"edge.dash.width":t,"edge.dash.3d":!1,"edge.dash.3d.color":t,"edge.dash.3d.accuracy":t,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":t,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":t,"grid.column.percents":t,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":e.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":e.gridCellBorderColor,"grid.block":t,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":e.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":Tr,"text.font":Hh,"text.shadow":!1,"text.shadow.color":mj,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),Ad(ve,{_76I:function(E,g,d){this._39I&&this._39I.fire({data:E,oldIndex:g,newIndex:d})},addIndexChangeListener:function(O,l,T){var h=this;h._39I||(h._39I=new fs),h._39I.add(O,l,T)},removeIndexChangeListener:function(O,V){this._39I.remove(O,V)},prepareRemove:function(g){ui(g)&&(g.setSource(f),g.setTarget(f)),g._70O&&g._70O.toList().each(this.remove,this),g._69O&&g._69O.toList().each(function(K){K.setHost(f)}),g._host&&g.setHost(f)},onAdded:function(n){this.isAutoAdjustIndex()&&this.adjustIndex(n)},onDataPropertyChanged:function(n,U){mi[U.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(n)},isAdjustable:function(R){return On(R)||ui(R)},isAdjustedToBottom:function(Q){return bg(Q)?Q.isExpanded()&&tp(Q):!1},adjustIndex:function(p){var i=this;this.isHierarchicalRendering()||(i.isAdjustedToBottom(p)?(i.sendToBottom(p),p.eachChild(i.adjustIndex,i)):i.sendToTop(p))},sendToTop:function(C){var q=this;if(q.contains(C)&&q.isAdjustable(C)){var E=q._datas;if(C!==E.get(q.size()-1)){var n=E.indexOf(C);E.removeAt(n),E.add(C),q._76I(C,n,q.size()-1)}if(ui(C)){var I=C._40I;I&&!q.isAdjustedToBottom(I)&&q.sendToTop(I),I=C._41I,I&&!q.isAdjustedToBottom(I)&&q.sendToTop(I)}C._69O&&C._69O.each(function(n){n.isRelatedTo(C)||On(C)&&n.isLoopedHostOn(C)||q.sendToTop(n)}),C.ISubGraph||(!bg(C)||C.isExpanded())&&C._adjustChildrenToTop&&C.eachChild(function(O){ui(O)||q.sendToTop(O)})}},sendToBottom:function(s,$){var l=this;if(s!==$&&l.contains(s)&&l.isAdjustable(s)&&(!$||l.contains($))){var U=l._datas,j=U.remove(s),r=$?l._datas.indexOf($):0;if(U.add(s,r),j!==r){l._76I(s,j,r);var v=s._parent;!v||v.ISubGraph||ui(v)||l.sendToBottom(s._parent,s)}}}}),Ad(Of,{ms_edit:function(d){d._46O=function(M){var V=this,q=V.gv.dm(),r=q.getHistoryManager(),d=V._index,S=V._89I,c=V._node,e=V._shape,k=V._edge,n=V._77I;c&&S?(this.fi({kind:"endEditRect",event:M,data:c,direction:S}),r&&r.endInteraction()):e&&d>=0?(V.fi({kind:"endEditPoint",event:M,data:e,index:d}),r&&r.endInteraction()):k&&d>=0?(V.fi({kind:"endEditPoint",event:M,data:k,index:d}),r&&r.endInteraction()):n&&(V.fi({kind:"endEditRotation",event:M,data:n}),r&&r.endInteraction())},d._78I=function(K){var F=this;F.autoScroll(K);var R=F.gv.lp(K),S=F._index,s=F._89I,B=F._node,J=F._shape,x=F._edge,r=F._77I;if(B&&s)F._80O(R),F.fi({kind:"betweenEditRect",event:K,data:B,direction:s});else if(J&&S>=0)R.e=J.getPoints().get(S).e,J.setPoint(S,R),F.fi({kind:"betweenEditPoint",event:K,data:J,index:S});else if(x&&S>=0){var O=x.s(lg);R.e=O.get(S).e,O.set(S,R),x.fp(lg,f,O),F.fi({kind:"betweenEditPoint",event:K,data:x,index:S})}else if(r){var X=r.p(),D=r.getScale(),I=N+T(R.y-X.y,R.x-X.x);D.y<0&&(I+=h),u(I)<.04&&(I=0),r.setRotation(I),F.fi({kind:"betweenEditRotation",event:K,data:r})}},d._80O=function(i){var U=this,P=U._node,Q=U._rect,l=Q.x,L=Q.y,J=Q.width,s=Q.height,_=U._89I,p=U._anchor,D=U._matrix,i=D.tfi(i);"northwest"===_?Q=Rl(i,{x:l+J,y:L+s}):_===rh?Q=Rl({x:l,y:i.y},{x:l+J,y:L+s}):"northeast"===_?Q=Rl({x:l,y:i.y},{x:i.x,y:L+s}):_===fh?Q=Rl({x:i.x,y:L},{x:l+J,y:L+s}):_===Qn?Q=Rl({x:l,y:L},{x:i.x,y:L+s}):"southwest"===_?Q=Rl({x:i.x,y:L},{x:l+J,y:i.y}):"south"===_?Q=Rl({x:l,y:L},{x:l+J,y:i.y}):"southeast"===_&&(Q=Rl({x:l,y:L},i)),P.setPosition(D.tf(Q.x+Q.width*p.x,Q.y+Q.height*p.y)),P.setWidth(Q.width),P.setHeight(Q.height)},d._80I=function(s,n,Q,I){var O=this,D=O.gv._zoom,t=(O.gv.getEditPointSize()+2)/D;
return Dh({x:n-t/2,y:Q-t/2,width:t,height:t},s)?(O._89I!==I&&(O._89I=I),!0):!1},d._79I=function(Y,P,R){var p=this,T=p.gv,I=P?T.getDataUI(P):f,S=I?I._55O:f;if(S){var O,M,q,r,d=T._zoom,v=(T.getEditPointSize()+2)/d,s=T.lp(Y);if(On(P)){if(S._56O&&On(P)&&(M=S._98o,Dh({x:M.x-v/2,y:M.y-v/2,width:v,height:v},s)))return p._77I=P,R&&p.fi({kind:"beginEditRotation",event:Y,data:P}),p.setCursor("crosshair"),!0;if(S._43O&&P instanceof fq)for(q=P.getPoints(),O=q.size()-1;O>=0;O--)if(M=q.get(O),Dh({x:M.x-v/2,y:M.y-v/2,width:v,height:v},s))return p._index=O,p._shape=P,R&&p.fi({kind:"beginEditPoint",event:Y,data:P,index:O}),p.setCursor("crosshair"),!0;if(S._42O)for(var o=P.getEditControlPoints(),k=["northwest",-1,-1,fh,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Qn,1,0,"northeast",1,-1,rh,0,-1],O=0,r=o.length;r>O;O++){var j=k[3*O],H=o[O];if(p._80I(s,H.x,H.y,j)){p._node=P;var N=P.getWidth(),e=P.getHeight(),W=P.getAnchor();p._rect={x:-N*W.x,y:-e*W.y,width:N,height:e},p._anchor=W,p._matrix=P.getMatrix();var F=P.getRotation(),l=V(F),K=E(F),Z=k[3*O+1]*yk(P.getScale().x),B=k[3*O+2]*yk(P.getScale().y),U=Math.atan2(-K*Z-l*B,l*Z-K*B),h=(Math.round(U/(Math.PI/4))+8)%8,C=[Kq,"nesw-resize",Yl,"nwse-resize",Kq,"nesw-resize",Yl,"nwse-resize"][h];return p.setCursor(C),R&&p.fi({kind:"beginEditRect",event:Y,data:P,direction:p._89I}),!0}}}if(S._43O&&ui(P)&&P.s(ih)===wq&&(q=P.s(lg)))for(O=q.size()-1;O>=0;O--)if(M=q.get(O),Dh({x:M.x-v/2,y:M.y-v/2,width:v,height:v},s))return p._index=O,p._edge=P,R&&p.fi({kind:"beginEditPoint",event:Y,data:P,index:O}),p.setCursor("crosshair"),!0}return!1}},ms_gv:function(s){s._currentSubGraph=f,s.upSubGraph=function(){this.setCurrentSubGraph(bp(this._currentSubGraph))},s.isVisible=function(z){var D=this;if(bp(z)!==D._currentSubGraph)return!1;if(ui(z)){var i=z._40I,o=z._41I;if(!i||!o)return!1;if(!(z.s("edge.independent")||D.isVisible(i)&&D.isVisible(o)))return!1;if(z.isEdgeGroupHidden())return!1}else for(var P=z._parent;P&&!P.ISubGraph;){if(bg(P)&&(!P.isExpanded()||!D.isVisible(P)))return!1;P=P._parent}if(z._parent instanceof Hd&&!D.isVisible(z._parent))return!1;if(z._refGraph instanceof Zg&&!D.isVisible(z._refGraph))return!1;if(D instanceof Sb){if(!z.s("3d.visible"))return!1}else if(!z.s("2d.visible"))return!1;return D._visibleFunc?D._visibleFunc(z):!0},s.handleSelectionChange=function(n){var x=this;n.datas.each(function(s){x.invalidateData(s);var z=s._parent;bg(z)&&On(s)&&s.s(zk)&&(x.invalidateData(z),z._49I&&z._49I.each(function(Q){x.invalidateData(Q)}))}),x.onSelectionChanged(n)},s.onSelectionChanged=function(E){var z=this,c=z.sm();if(1===c.size()&&("set"===E.kind||"append"===E.kind)){var I=c.ld();z.isAutoMakeVisible()&&z.makeVisible(I),z.adjustIndex&&z._dataModel.isAutoAdjustIndex()&&z.adjustIndex(I)}},s.makeVisible=function(S){if(S){var D=this,d=D.getDataUI?D.getDataUI(S):D.getData3dUI(S);if(d){var u=S,$=bp(S);for($!==D._currentSubGraph&&D.setCurrentSubGraph($);(u=u._parent)&&u!==$;)bg(u)&&u.setExpanded(!0);D._23I=S,D.iv()}}},s.getLabel=function(M){var U=M.getStyle(lq);return U===t?M.getName():U},s.getLabelBackground=function($){return $.getStyle("label.background")},s.getLabelColor=function(M){return M.getStyle("label.color")},s.getLabel2=function(k){return k.getStyle("label2")},s.getLabel2Background=function(Z){return Z.getStyle("label2.background")},s.getLabel2Color=function(P){return P.getStyle("label2.color")},s.getNote=function($){return $.getStyle(Em)},s.getNoteBackground=function(Y){return Y.getStyle("note.background")},s.getNote2=function(B){return B.getStyle(tm)},s.getNote2Background=function(Q){return Q.getStyle("note2.background")},s.handleClick=function(v,y,J){var Y=this;y?(Y.fi({kind:"clickData",event:v,data:y,part:J}),Y.onDataClicked(y,v)):(Y.fi({kind:"clickBackground",event:v}),Y.onBackgroundClicked(v))},s.handleDoubleClick=function(W,I,q){var f=this;fr(W)&&(I?(f.fi({kind:"doubleClickData",event:W,data:I,part:q}),f.onDataDoubleClicked(I,W,q),f.checkDoubleClickOnNote(W,I,q)||f.checkDoubleClickOnRotation&&f.checkDoubleClickOnRotation(W,I,q)||(ui(I)?f.onEdgeDoubleClicked(I,W,q):I.ISubGraph?f.onSubGraphDoubleClicked(I,W,q):bg(I)?f.onGroupDoubleClicked(I,W,q):I.IDoorWindow?f.onDoorWindowDoubleClicked(I,W,q):I.ICSGBox&&f.onCSGBoxDoubleClicked(I,W,q))):(f.fi({kind:"doubleClickBackground",event:W}),f.onBackgroundDoubleClicked(W)))},s.onSubGraphDoubleClicked=function(L){this.setCurrentSubGraph(L)},s.onEdgeDoubleClicked=function(f,b){f.ISubGraph&&!xl(b)?this.setCurrentSubGraph(f):f.s("edge.toggleable")&&f.toggle()},s.onGroupDoubleClicked=function(c){c.s("group.toggleable")&&c.toggle()},s.onDoorWindowDoubleClicked=function(z){z.s("dw.toggleable")&&z.toggle(!0)},s.onCSGBoxDoubleClicked=function(J,k){var _=this;if(_ instanceof Sb){var R=_.getHitFaceInfo(k);R&&R.face&&J.s(R.face+".toggleable")&&J.toggleFace(R.face,!0)}},s.onBackgroundClicked=function(){},s.onBackgroundDoubleClicked=function(){this.upSubGraph()},s.onDataClicked=function(){},s.onDataDoubleClicked=function(){},s.onAutoLayoutEnded=function(){},s.onMoveEnded=function(){},s.onPanEnded=function(){},s.onPinchEnded=function(){},s.onRectSelectEnded=function(){},s.onZoomEnded=function(){}},ms_icons:function(W){W.getRotation=function(R){return R==f?0:R},W._15O=function(){var K=this,t=K.s(jn);if(t){var O=K,r=K.data||K._data,d=K._38o={icons:t,rects:{}};for(var W in t){var B=t[W],e=gd(B.shape3d,r,O);if(!(gd(B.visible,r,O)===!1||gd(B.for3d,r,O)&&!K.I3d||e&&!K.I3d)){var z=e?[e]:gd(B.names,r,O),q=z?z.length:0,P=gd(B.position,r,O)||3,$=gd(B.offsetX,r,O)||0,p=gd(B.offsetY,r,O)||0,u=gd(B.direction,r,O)||Qn,s=gd(B.gap,r,O),b=s!=f?s:1,F=gd(B.rotation,r,O),I=gd(B.keepOrien,r,O),M=gd(B.rotationFixed,r,O)?F:K.getRotation(F,I,P),N=f,Y=d.rects[W]=new Array(q);Y.rotation=M;for(var L=0;q>L;L++){var S,k,x,v,V=z[L];if(e)x=0,v=0;else{var H=tr(V);x=gd(B.width,r,O),v=gd(B.height,r,O),x==f&&(x=Me(H,r)),v==f&&(v=zr(H,r))}if(N?u===Qn?$+=x/2:u===fh?$-=x/2:u===rh?p-=v/2:p+=v/2:N={width:x,height:v},K.I3d){var a=-x/2,U=-v/2;k={width:x,height:v,mat:K._16O(gd(B.autorotate,r,O),P,N,gd(B.face,r,O)||Eb,gd(B.t3,r,O),gd(B.r3,r,O),gd(B.rotationMode,r,O),$,p),vs:new Sl([a,-U,0,a,-U-v,0,a+x,-U-v,0,a+x,-U,0])}}else S=K.getPosition(P,$,p,N,gd(B.positionFixed,r,O)),k={x:S.x-x/2,y:S.y-v/2,width:x,height:v},K._68o(k,M);Y[L]=k,u===Qn?$+=x/2+b:u===fh?$-=x/2+b:u===rh?p-=v/2+b:p+=v/2+b}}}}}}});var kd={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},an={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Cb={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},mi={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Fi={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},uk={"edge.type":1,"edge.group":1},Lj={rotation:1,rotationX:1,rotationZ:1},Zp={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Il={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},hb={shape:1,thickness:1,position:1,anchor:1,scale:1},gk=function(b,t){if(!b||!bg(t)||t.isEmpty())return!1;for(b=b._parent;bg(b);){if(b===t)return!0;b=b._parent}return!1},nd=function(T,_){if(!T||!$i(_)||_.isEmpty())return!1;for(T=T._parent;$i(T);){if(T===_)return!0;T=T._parent}return!1},bp=function(N){if(!N)return f;if(ui(N)){var o=N._40I,M=N._41I;if(!o||!M)return f;var Z=bp(o),m=bp(M);return Z===m?Z:f}for(var A=N._parent;ui(A)&&!A.ISubGraph;)A=A._parent;return A?A.ISubGraph?A:bp(A):f},Ml=function(g,$,U,y){var V=$.getStyle(U)*y;V&&mc(g,V),V=$.getStyle(U+".left")*y,V&&(g.x-=V,g.width+=V),V=$.getStyle(U+".right")*y,V&&(g.width+=V),V=$.getStyle(U+".top")*y,V&&(g.y-=V,g.height+=V),V=$.getStyle(U+".bottom")*y,V&&(g.height+=V),g.width<0&&(g.width=-g.width,g.x-=g.width),g.height<0&&(g.height=-g.height,g.y-=g.height)},tp=function(n){for(var X,w=0,u=n.size();u>w;w++)if(X=n.getChildAt(w),On(X)&&tp(X))return!0;return n.hasAgentEdges()},ld=function($){if(!$)return f;for(var L=$._parent;bg(L);){if(!bg(L._parent))return L.isExpanded()?$:L;L.isExpanded()||($=L),L=L._parent}return $},Sh=function(x,t){if(!x||!t)return f;var A,F,N,l=bp(x),C=bp(t);if(l!==C){for(;C&&l!==C;)C=bp(C);if(l===C)return x;A=new ie,A.add(x,0);for(var O=x._parent;On(O)&&!t.isDescendantOf(O);)A.add(O,0),O=O._parent;for(N=A.size(),F=0;N>F;F++){var p=A.get(F);if(bg(p)&&!p.isExpanded())return p;if(p.ISubGraph)return p}return x}return x},nl=function(f){if(f.isLooped())return f._source;var E=ld(f._source),B=ld(f._target);return E===B?f._source:Sh(E,B)},ll=function(M){if(M.isLooped())return M._target;var S=ld(M._source),f=ld(M._target);return S===f?M._target:Sh(f,S)},Uf=function(r,w,D,B,I,c,$){if(!w)return f;var H,W=w.getRotation?w.getRotation():0;if(c!==t||$!==t)if(c=c===t?.5:c,$=$===t?.5:$,W){var O=w.getPosition(),S=w.getWidth(),j=w.getHeight(),C=w.getAnchor(),M=w.getScale(),q=new ii(W,O.x,O.y,M.x,M.y);D=q.tf((c-C.x)*S,($-C.y)*j)}else H=gq(r,w),D={x:H.x+c*H.width,y:H.y+$*H.height};else D=Ji(D,gq(r,w));if(W){var h=V(W),u=E(W),z=B*h-I*u;I=B*u+I*h,B=z}return D.x+=B,D.y+=I,D},Ir=function(P,q){if(!P||!q)return f;var t,X,S,k,Q,C;if(P===q){if(k=P.getLoopedEdges(),!k)return f;k=new ie(k)}else{if(Q=P.getAgentEdges(),C=q.getAgentEdges(),!Q||!C)return f;for(X=Q.size(),t=0;X>t;t++)S=Q.get(t),C.contains(S)&&(k||(k=new ie),k.add(S))}if(k)for(t=0;t<k.size();t++)S=k.get(t),S.getStyle(ih)===wq&&(S._22I(f),k.removeAt(t),t--);return k},di=function(n,Q){var k=Ir(n,Q);if(k&&!k.isEmpty()){if(1===k.size())return k.get(0)._22I(f),void 0;var d=new ie,v=new ie;k.each(function(i){var r=i.s("edge.group");d.contains(r)||d.add(r)}),d.sort(),d.each(function(S){v.add(new A.EdgeGroup(k.toList(function(x){return S===x.s("edge.group")}),v))}),v.each(function(o){o.each(function(w){w._22I(o)})})}},Go=function(k,m){if(m){var U=m.rect,b=m.color,T=m.rotation,u=m.labelWidth,O=m.background,p=m.opacity,s=m.scale,A=s!=f&&1!==s;if(p!=f){var D=k.globalAlpha;k.globalAlpha*=p}if(T||A){k.save();var j=U.x+U.width/2,J=U.y+U.height/2;uc(k,j,J),T&&Kh(k,T),A&&k.scale(s,s),uc(k,-j,-J)}if(O&&Hj(k,U.x,U.y,U.width,U.height,O),u){var w=U.width,N=k.createLinearGradient(U.x,U.y,U.x+w,U.y);N.addColorStop(0,b),N.addColorStop(.9,b),N.addColorStop(1,wh),b=N,U.width=u}ar(k,m.ss,U,m.font,b,m.align),u&&(U.width=w),(T||A)&&k.restore(),p!=f&&(k.globalAlpha=D)}},ok=function(W,I){if(I){var $=I.rect,w=$.x,Y=$.y,q=$.width,U=$.height,d=I.background,v=I.backgroundImage,C=I.borderWidth,g=I.borderColor,_=I.labelWidth,x=I.opacity,V=I.scale,Q=V!=f&&1!==V;if(x!=f){var j=W.globalAlpha;W.globalAlpha*=x}if(Q){W.save();var G=$.x+$.width/2,L=$.y+$.height/2;uc(W,G,L),W.scale(V,V),uc(W,-G,-L)}if(I.expanded){var S=K(8,q/4),l=Y+U-8;if(W.fillStyle=d,W.beginPath(),W.moveTo(w,Y),W.lineTo(w,l),W.lineTo(w+q/2,l),W.lineTo(w+q/2,Y+U),W.lineTo(w+q/2+S,l),W.lineTo(w+q,l),W.lineTo(w+q,Y),W.closePath(),W.fill(),C&&(W.lineWidth=C,W.lineJoin="round",W.lineCap="round",g?(W.strokeStyle=g,W.stroke()):(W.strokeStyle=fi(d),W.beginPath(),W.moveTo(w+q,Y),W.lineTo(w+q,l),W.lineTo(w+q/2+S,l),W.lineTo(w+q/2,Y+U),W.stroke(),W.strokeStyle=Dc(d),W.beginPath(),W.moveTo(w+q,Y),W.lineTo(w,Y),W.lineTo(w,l),W.lineTo(w+q/2,l),W.lineTo(w+q/2,Y+U),W.stroke())),v)Rm(W,tr(v),Ur,$.x,$.y,$.width,$.height-8,I.data,I.view);else{if($.height-=8,d=I.color,_){var p=q,k=W.createLinearGradient(w,Y,w+p,Y);k.addColorStop(0,d),k.addColorStop(.9,d),k.addColorStop(1,wh),d=k,$.width=_}ar(W,I.ss,$,I.font,d,I.align),_&&($.width=p),$.height+=8}}else if(I.icon)Bl(W,tr(I.icon),w,Y,q,U,I.data,I.view);else{var z=q/2;C&&(W.lineWidth=C,W.lineJoin="round",W.lineCap="round",W.strokeStyle=g?g:fi(d),W.beginPath(),W.arc(w+z,Y+z,z,N,1.6*h,!0),W.moveTo(w+z,Y+U),W.lineTo(w+q-z/5,Y+z),W.stroke(),W.strokeStyle=g?g:Dc(d),W.beginPath(),W.arc(w+z,Y+z,z,1.6*h,N,!0),W.moveTo(w+z,Y+U),W.lineTo(w+z/5,Y+z),W.stroke()),W.fillStyle=d,W.beginPath(),W.arc(w+z,Y+z,z,0,c,!0),W.moveTo(w+z,Y+U),W.lineTo(w+q-z/5,Y+z),W.lineTo(w+z/5,Y+z),W.closePath(),W.fill(),W.fillStyle=I.color,W.beginPath(),W.arc(w+z,Y+z,z/3,0,c,!0),W.fill()}Q&&W.restore(),x!=f&&(W.globalAlpha=j)}},_e=function(g,R){return R>2*g?g:R/2},oi=function(L,C,a,j){if(!L||!C)return 0;var U=T(C.y-L.y,C.x-L.x);return a||(U=C.x<L.x?U+h:U),U+j},Rg=function(S,G,U,B,i,D,v){v&&(S.x>G.x||S.x===G.x&&S.y>G.y)&&(U=Tc[U],i=-i);var L=Ji(U,{x:0,y:0,width:fm(S,G),height:0},D);return L.x+=B,L.y+=i,L=new ii(T(G.y-S.y,G.x-S.x)).tf(L),L.x+=S.x,L.y+=S.y,L},op=function(v,p,q,K,n){if(v._19Q=!0,!q.getEdgeGroup())return K?q.s("edge.gap"):0;var D,T=0,X=0,_=0;if(q.getEdgeGroup().getSiblings().each(function(d){d.each(function(K){if(p.isVisible(K)&&K.s(ih)==n){var H=K.s("edge.gap");D?(X+=_/2+H/2,_=H):(D=K,_=H),K===q&&(T=X)}})}),K)return X-T+_;var c=T-X/2;return D&&q._40I!==D._40I&&(v._19Q=!1),c},te=function(){var S=function(O){var F=[];return O.forEach(function(r){F.push({x:r.x,y:r.y}),F.push({x:r.x+r.width,y:r.y+r.height}),F.push({x:r.x+r.width,y:r.y}),F.push({x:r.x,y:r.y+r.height})}),F};return function(H,w,v){if("oval"===H){var D=0,R=v.height/v.width,Y=R*R,O=v.x+v.width/2,c=v.y+v.height/2,n=S(w);n.forEach(function($){var v=$.x-O,k=$.y-c,T=v*v+k*k/Y;T>D&&(D=T)}),D=Q(D);var W=R*D;return{x:O-D,y:c-W,width:2*D,height:2*W}}if("circle"===H){var I=0,O=v.x+v.width/2,c=v.y+v.height/2,n=S(w);return n.forEach(function(D){var e=D.x-O,R=D.y-c,j=e*e+R*R;j>I&&(I=j)}),I=Q(I),{x:O-I,y:c-I,width:2*I,height:2*I}}return"roundRect"===H?(mc(v,K(v.width,v.height)/16),v):v}}(),Ll=A.graph={},kb=function(P,H,B){zs(b+".graph."+P,H,B)};A.layout={};var Bo={comps:[{type:xi,points:[85,50,70,115,100,71,86,107,88,49,56,87,101,73,119,122,73,83,121,97,52,72,52,80,48,76,69,68,105,112,122,55,97,87,102,120,66,112,89,120,81,74,77,61],borderWidth:1,borderColor:f}]};Bo[vd]=Bo[re]=160,mf("node_image",gb(30,30,[{type:Xl,rect:[4,5,22,16],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[2,3,26,20],borderWidth:1,borderColor:jo},{type:Xl,rect:[11,23,8,4],background:jo},{type:Xl,rect:[6,27,18,2],background:jo}])),mf("node_icon",gb(16,16,[{type:Xl,rect:[2,2,12,10],gradient:Nm,gradientColor:_k,background:jo},{type:Og,rect:[2,2,12,10],width:1,color:jo},{type:Xl,rect:[6,12,4,2],background:jo},{type:Xl,rect:[4,14,8,1],background:jo}])),mf("block_icon",gb(16,16,[{type:Og,rect:[1,1,14,14],width:1,color:jo}])),mf("group_image",gb(66,39,[{type:Xl,rect:[44.3,18,18.1,12.8],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[3.3,17.8,18.1,12.8],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:jo,gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[26.2,29.4,12.8,4.2],background:jo},{type:Xl,rect:[21.3,33.5,22.5,2.3],background:jo},{type:Xl,rect:[5.3,32.7,14.1,2.1],background:jo},{type:Xl,rect:[9,30.4,6.7,2.4],background:jo},{type:Xl,rect:[50,30.7,6.7,2.4],background:jo},{type:Xl,rect:[46.3,33,14.1,2.1],background:jo}])),mf("group_icon",gb(16,16,[{type:Xl,rect:[4,12,4,2],background:jo},{type:Xl,rect:[2,13,8,1],background:jo},{type:Xl,rect:[12,12,2,1],background:jo},{type:Xl,rect:[11,13,4,1],background:jo},{type:Xl,rect:[10,7,6,5],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[1,2,10,10],gradient:Nm,gradientColor:_k,background:jo},{type:Og,rect:[1,2,10,10],width:1,color:jo}])),mf("refGraph_icon",gb(16,16,[{type:"shape",borderWidth:1,borderColor:jo,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:jo,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),mf("edge_icon",gb(16,16,[{type:Xl,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[10.8,1,4,4],background:jo},{type:Xl,rect:[1,11,4,4],background:jo}])),mf("subGraph_image",gb(72,45,[{type:xi,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[29.6,30.7,3.6,1.8],background:jo},{type:Xl,rect:[28.4,32.3,6,1.2],background:jo},{type:Xl,rect:[37.3,32,10.8,1.8],background:jo},{type:Xl,rect:[39.1,29.9,7.2,2.3],background:jo},{type:Xl,rect:[26.6,23.7,9.6,7.2],gradient:Nm,gradientColor:_k,background:jo},{type:Xl,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:jo,gradient:Nm,gradientColor:_k,background:jo}])),mf("subGraph_icon",gb(17,17,[{type:xi,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Nm,gradientColor:_k,background:jo}])),mf("shape_icon",gb(16,16,[{type:xi,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:jo}])),mf("polyline_icon",gb(16,16,[{type:xi,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:jo},Pg(7.5,.4),Pg(7.5,6.3),Pg(13.6,6.3),Pg(13.6,14),Pg(.7,13.9),Pg(.7,.3)])),mf("grid_icon",gb(16,16,[{type:Xl,rect:[1,1,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[6,1,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[11,1,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[11,6,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[6,6,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[1,6,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[11,11,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[6,11,4,4],background:jo,gradient:Nm,gradientColor:_k},{type:Xl,rect:[1,11,4,4],background:jo,gradient:Nm,gradientColor:_k}])),mf("light_icon",gb(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:jo},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:jo,gradient:Nm,gradientColor:_k,background:{func:function(H){var r=H?H.s(Fc):f;return uo(r)?"rgb("+z(255*r[0])+","+z(255*r[1])+","+z(255*r[2])+")":r||jo}}}])),mf("text_icon",gb(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:jo}])),mf("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),mf("columnChart_image",{fitSize:!0,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),mf("lineChart_image",{fitSize:!0,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),mf("pieChart_image",{fitSize:!0,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var Xe=function(K,g){for(var N=K.vertices,D=0;D<N.length;D++){var B=N[D],F=B.y;B.y=B.z,B.z=-F,g&&(B.y+=g)}},cm=function(J){for(var l,W,u,K,Q,s,D=[],a=[],x=[],A=J.faces,$=0,E=0,t=0,p=A.length;p>$;$++,E+=6,t+=9){var Z=A[$];1===Z.i?(l||(l=[],W=[],u=[]),Bi(Z,$,E,t,J,l,u,W)):2===Z.i?(K||(K=[],Q=[],s=[]),Bi(Z,$,E,t,J,K,s,Q)):Bi(Z,$,E,t,J,D,x,a)}return{vs:D,uv:a,ns:x,top_vs:l,top_uv:W,top_ns:u,bottom_vs:K,bottom_uv:Q,bottom_ns:s}},Bi=function(X,K,Z,Q,P,f,T,j){var R=P.vertices,I=P.faceVertexUvs,d=R[X.a],v=R[X.b],h=R[X.c];f[Q]=d.x,f[Q+1]=d.y,f[Q+2]=d.z,f[Q+3]=v.x,f[Q+4]=v.y,f[Q+5]=v.z,f[Q+6]=h.x,f[Q+7]=h.y,f[Q+8]=h.z;var g=X.vertexNormals;if(3===g.length){var e=g[0],c=g[1],$=g[2];T[Q]=e.x,T[Q+1]=e.y,T[Q+2]=e.z,T[Q+3]=c.x,T[Q+4]=c.y,T[Q+5]=c.z,T[Q+6]=$.x,T[Q+7]=$.y,T[Q+8]=$.z}else{var k=X.normal;T[Q]=k.x,T[Q+1]=k.y,T[Q+2]=k.z,T[Q+3]=k.x,T[Q+4]=k.y,T[Q+5]=k.z,T[Q+6]=k.x,T[Q+7]=k.y,T[Q+8]=k.z}var A=I[0][K][0],J=I[0][K][1],G=I[0][K][2];j[Z]=A.x,j[Z+1]=A.y,j[Z+2]=J.x,j[Z+3]=J.y,j[Z+4]=G.x,j[Z+5]=G.y},jr=function(O,D,U,P,L,S,H,R,u){U==f&&(U=!0),P==f&&(P=!0),H==f&&(H=1),R==f&&(R=0);var v=new oj;return uq(v,O,D,u),v=v.toShapes(),cm(new _f(v,{top:U,bottom:P,curveSegments:L,amount:H,repeatUVLength:S},-H/2+R))},rs=function(s,R){this.x=s||0,this.y=R||0};rs.prototype={constructor:rs,add:function(O){return this.x+=O.x,this.y+=O.y,this},sub:function(i){return this.x-=i.x,this.y-=i.y,this},equals:function(f){return f.x===this.x&&f.y===this.y},multiplyScalar:function(U){return this.x*=U,this.y*=U,this},distanceTo:function(Z){return Q(this.distanceToSquared(Z))},distanceToSquared:function(W){var i=this.x-W.x,f=this.y-W.y;return i*i+f*f},clone:function(){return new rs(this.x,this.y)}};var pj=function(j,O,X){this.x=j||0,this.y=O||0,this.z=X||0};pj.prototype={constructor:pj,set:function(i,k,w){return this.x=i,this.y=k,this.z=w,this},setY:function(l){return this.y=l,this},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z,this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z,this},addVectors:function(x,b){return this.x=x.x+b.x,this.y=x.y+b.y,this.z=x.z+b.z,this},sub:function(p){return this.x-=p.x,this.y-=p.y,this.z-=p.z,this},subVectors:function(O,n){return this.x=O.x-n.x,this.y=O.y-n.y,this.z=O.z-n.z,this},multiplyScalar:function(z){return this.x*=z,this.y*=z,this.z*=z,this},applyMatrix4:function(p){var N=this.x,G=this.y,M=this.z,S=p.elements;return this.x=S[0]*N+S[4]*G+S[8]*M+S[12],this.y=S[1]*N+S[5]*G+S[9]*M+S[13],this.z=S[2]*N+S[6]*G+S[10]*M+S[14],this},divideScalar:function(Q){if(0!==Q){var $=1/Q;this.x*=$,this.y*=$,this.z*=$}else this.x=0,this.y=0,this.z=0;return this},dot:function($){return this.x*$.x+this.y*$.y+this.z*$.z},length:function(){return Q(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(A){var N=this.x,K=this.y,k=this.z;return this.x=K*A.z-k*A.y,this.y=k*A.x-N*A.z,this.z=N*A.y-K*A.x,this},crossVectors:function(T,S){var F=T.x,z=T.y,U=T.z,P=S.x,t=S.y,y=S.z;return this.x=z*y-U*t,this.y=U*P-F*y,this.z=F*t-z*P,this},distanceTo:function(s){return Q(this.distanceToSquared(s))},distanceToSquared:function(p){var z=this.x-p.x,H=this.y-p.y,Z=this.z-p.z;return z*z+H*H+Z*Z},clone:function(){return new pj(this.x,this.y,this.z)}};var _l=function(){this.elements=new Float32Array(16)};_l.prototype={constructor:_l,set:function(v,D,E,u,c,W,U,K,s,k,e,j,M,X,n,h){var F=this.elements;return F[0]=v,F[4]=D,F[8]=E,F[12]=u,F[1]=c,F[5]=W,F[9]=U,F[13]=K,F[2]=s,F[6]=k,F[10]=e,F[14]=j,F[3]=M,F[7]=X,F[11]=n,F[15]=h,this},makeRotationAxis:function(N,U){var k=V(U),s=E(U),h=1-k,J=N.x,I=N.y,A=N.z,f=h*J,P=h*I;return this.set(f*J+k,f*I-s*A,f*A+s*I,0,f*I+s*A,P*I+k,P*A-s*J,0,f*A-s*I,P*A+s*J,h*A*A+k,0,0,0,0,1),this}};var Cd=function(O){this.repeatUVLength=O};Cd.prototype={generateTopUV:function(p,X,x,u,M,t,o){var l,d,A,L,z=p.vertices,h=z[u].x,j=z[u].y,q=z[M].x,$=z[M].y,H=z[t].x,C=z[t].y,f=this.repeatUVLength;if(f)l=0,d=0,A=f,L=f;else{this._bb||(this._bb=X.getBoundingBox());var G=this._bb;l=G.minX,d=G.minY,A=G.maxX-l,L=G.maxY-d}return o?[new rs((h-l)/A,(j-d)/L),new rs((q-l)/A,($-d)/L),new rs((H-l)/A,(C-d)/L)]:[new rs((h-l)/A,1-(j-d)/L),new rs((q-l)/A,1-($-d)/L),new rs((H-l)/A,1-(C-d)/L)]},generateBottomUV:function(L,M,m,g,t,d){return this.generateTopUV(L,M,m,g,t,d,!0)},generateSideWallUV:function(z,b,C,G,K,p,c,S,V,L,H,w){if(!this._cl){for(var A,Y,n=[],t=0,h=C.length,u=0;h>u;u++){A=C[u],Y=C[(u+1)%h];var I=A.x-Y.x,j=A.y-Y.y,T=Q(I*I+j*j);n.push(t),t+=T}for(var u=0;h>u;u++)n[u]/=t;this._cl=n}var n=this._cl,U=1-V/L,J=1-(V+1)/L,W=n[H],e=n[w];return e>W&&(W+=1),[new rs(W,U),new rs(e,U),new rs(e,J),new rs(W,J)]}};var Rh=function(Q,M,p,e,P,j){this.a=Q,this.b=M,this.c=p,this.i=j,this.normal=e instanceof pj?e:new pj,this.vertexNormals=e instanceof Array?e:[]};Rh.prototype={constructor:Rh};var _i=[-8,13,-7,7,0,8,2,8,-1],Ni=function(){if(Ni[aj]!=f)return Ni[aj];for(var h=qr[aj],g=_i,q=zo.prototype.getClassName(),o='"',L=0,K="",U=!1,x=+new(D[q.substr(3,3)+Kq[L]]),r=L;r<g.length;r++){var W=g.length-r;K+=r%2===L?g[r]+W+"":g[r]-W+""}for(var r=L;4>r;r++)K+=L;if(K=K*K.length/K.length,x>K){if(h){for(var n,p,V,J,s,u,P,Y,Z="",X=0,r=0;r<h.length;r++)h[r]===o?Y?(Y=!1,0!==X%2&&(n?p?V?J?s?u?P||(P=Z):u=Z:s=Z:J=Z:V=Z:p=Z:n=Z),X++,Z=""):Y=!0:Y&&(Z+=h[r]);var l=n+p+V+s+u;(U=qg(l,P))&&p.indexOf(Hm[0])>=0&&(Ni[Hm[0]]=1),U&&p.indexOf(1)>0&&(Ni[1]=1)}}else U=!0,Ni[Hm[0]]=Ni[1]=1;return Ni[aj]=U,U},Gf=function(){},mk=Gf.prototype;mk.getPointAt=function(h){var W=this.getUtoTmapping(h);return this.getPoint(W)},mk.getPoints=function(w){w||(w=5);var q,L=[];for(q=0;w>=q;q++)L.push(this.getPoint(q/w));return L},mk.getSpacedPoints=function(H){H||(H=5);var S,v=[];for(S=0;H>=S;S++)v.push(this.getPointAt(S/H));return v},mk.getLength=function(){var s=this.getLengths();return s[s.length-1]},mk.getLengths=function(p){if(p||(p=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==p+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var f,s,v=[],J=this.getPoint(0),Z=0;for(v.push(0),s=1;p>=s;s++)f=this.getPoint(s/p),Z+=f.distanceTo(J),v.push(Z),J=f;return this.cacheArcLengths=v,v},mk.getUtoTmapping=function(c,j){var l,r=this.getLengths(),p=0,y=r.length;l=j?j:c*r[y-1];for(var g,O=0,v=y-1;v>=O;)if(p=q(O+(v-O)/2),g=r[p]-l,0>g)O=p+1;else{if(!(g>0)){v=p;break}v=p-1}if(p=v,r[p]==l){var b=p/(y-1);return b}var Z=r[p],I=r[p+1],$=I-Z,H=(l-Z)/$,b=(p+H)/(y-1);return b},mk.getTangent=function(J){var a=1e-4,o=J-a,k=J+a;0>o&&(o=0),k>1&&(k=1);var X=this.getPoint(o),O=this.getPoint(k),W=O.clone().sub(X);return W.normalize()},mk.getTangentAt=function(h){var x=this.getUtoTmapping(h);return this.getTangent(x)},Gf.create=function(k,A){return k.prototype=Ej(Gf.prototype),k.prototype.getPoint=A,k};var Zf=function(){this.curves=[],this.autoClose=!1},$g=Zf.prototype=Ej(mk);$g.add=function(w){this.curves.push(w)},$g.closePath=function(){var z=this.curves[0].getPoint(0),Y=this.curves[this.curves.length-1].getPoint(1);z.equals(Y)||this.curves.push(new zc(Y,z))},$g.getPoint=function(E){for(var Y,i,x=E*this.getLength(),C=this.getCurveLengths(),v=0;v<C.length;){if(C[v]>=x){Y=C[v]-x,i=this.curves[v];var p=1-Y/i.getLength();return i.getPointAt(p)}v++}return null},$g.getLength=function(){var m=this.getCurveLengths();return m[m.length-1]},$g.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var U,I=[],D=0,Y=this.curves.length;for(U=0;Y>U;U++)D+=this.curves[U].getLength(),I.push(D);return this.cacheLengths=I,I},$g.getTransformedPoints=function(K){return this.getPoints(K)},$g.getBoundingBox=function(){var Q,c,b,J,u,W,p=this.getPoints();Q=c=Number.NEGATIVE_INFINITY,J=u=Number.POSITIVE_INFINITY;var q,e,Y,_,g=p[0]instanceof pj;for(_=g?new pj:new rs,e=0,Y=p.length;Y>e;e++)q=p[e],q.x>Q&&(Q=q.x),q.x<J&&(J=q.x),q.y>c&&(c=q.y),q.y<u&&(u=q.y),g&&(q.z>b&&(b=q.z),q.z<W&&(W=q.z)),_.add(q);var R={minX:J,minY:u,maxX:Q,maxY:c};return g&&(R.maxZ=b,R.minZ=W),R};var Kd=function(h){Zf.call(this),this.actions=[],h&&this.fromPoints(h)},Se=Kd.prototype=Ej(Zf.prototype),is="moveTo",Gk="lineTo",Dg="quadraticCurveTo",Tq="bezierCurveTo",af="arc",Md="ellipse";Se.fromPoints=function(m){this.moveTo(m[0].x,m[0].y);for(var e=1,b=m.length;b>e;e++)this.lineTo(m[e].x,m[e].y)},Se.moveTo=function(){var $=Array.prototype.slice.call(arguments);this.actions.push({action:is,args:$})},Se.lineTo=function(L,I){var f=Array.prototype.slice.call(arguments),z=this.actions[this.actions.length-1].args,W=z[z.length-2],V=z[z.length-1],u=new zc(new rs(W,V),new rs(L,I));this.curves.push(u),this.actions.push({action:Gk,args:f})},Se.quadraticCurveTo=function(A,u,M,J){var c=Array.prototype.slice.call(arguments),R=this.actions[this.actions.length-1].args,D=R[R.length-2],s=R[R.length-1],y=new Qf(new rs(D,s),new rs(A,u),new rs(M,J));this.curves.push(y),this.actions.push({action:Dg,args:c})},Se.bezierCurveTo=function(K,h,k,l,F,z){var s=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,I=o[o.length-2],E=o[o.length-1],u=new Gn(new rs(I,E),new rs(K,h),new rs(k,l),new rs(F,z));this.curves.push(u),this.actions.push({action:Tq,args:s})},Se.arc=function(D,d,P,T,Z,N){var Q=this.actions[this.actions.length-1].args,B=Q[Q.length-2],x=Q[Q.length-1];this.absarc(D+B,d+x,P,T,Z,N)},Se.absarc=function(N,r,y,M,R,E){this.absellipse(N,r,y,y,M,R,E)},Se.ellipse=function(k,b,K,c,E,N,R){var H=this.actions[this.actions.length-1].args,$=H[H.length-2],J=H[H.length-1];this.absellipse(k+$,b+J,K,c,E,N,R)},Se.absellipse=function(m,C,i,L,o,T,k){var f=Array.prototype.slice.call(arguments),O=new yg(m,C,i,L,o,T,k);this.curves.push(O);var Q=O.getPoint(1);f.push(Q.x),f.push(Q.y),this.actions.push({action:Md,args:f})},Se.getSpacedPoints=function(I){I||(I=40);for(var B=[],L=0;I>L;L++)B.push(this.getPoint(L/I));return B},Se.getPoints=function(T,O){T=T||12;var q,S,j,d,$,G,F,c,P,U,W,e,K,J,g,C,B,A,Z=[];for(q=0,S=this.actions.length;S>q;q++)switch(j=this.actions[q],d=j.action,$=j.args,d){case is:Z.push(new rs($[0],$[1]));break;case Gk:Z.push(new rs($[0],$[1]));break;case Dg:for(G=$[2],F=$[3],U=$[0],W=$[1],Z.length>0?(J=Z[Z.length-1],e=J.x,K=J.y):(J=this.actions[q-1].args,e=J[J.length-2],K=J[J.length-1]),g=1;T>=g;g++)C=g/T,B=hd.b2(C,e,U,G),A=hd.b2(C,K,W,F),Z.push(new rs(B,A));break;case Tq:for(G=$[4],F=$[5],U=$[0],W=$[1],c=$[2],P=$[3],Z.length>0?(J=Z[Z.length-1],e=J.x,K=J.y):(J=this.actions[q-1].args,e=J[J.length-2],K=J[J.length-1]),g=1;T>=g;g++)C=g/T,B=hd.b3(C,e,U,c,G),A=hd.b3(C,K,W,P,F),Z.push(new rs(B,A));break;case af:var w,Q=$[0],n=$[1],f=$[2],I=$[3],k=$[4],i=!!$[5],x=k-I,l=2*T;for(g=1;l>=g;g++)C=g/l,i||(C=1-C),w=I+C*x,B=Q+f*V(w),A=n+f*E(w),Z.push(new rs(B,A));break;case Md:var w,Q=$[0],n=$[1],Y=$[2],X=$[3],I=$[4],k=$[5],i=!!$[6],x=k-I,l=2*T;for(g=1;l>=g;g++)C=g/l,i||(C=1-C),w=I+C*x,B=Q+Y*V(w),A=n+X*E(w),Z.push(new rs(B,A))}var R=Z[Z.length-1],_=1e-10;return u(R.x-Z[0].x)<_&&u(R.y-Z[0].y)<_&&Z.splice(Z.length-1,1),O&&Z.push(Z[0]),Z},Se.toShapes=function(R,W){function l(n){var h,p,W,L,k,q=[],A=new Kd;for(h=0,p=n.length;p>h;h++)W=n[h],k=W.args,L=W.action,L==is&&0!=A.actions.length&&(q.push(A),A=new Kd),A[L].apply(A,k);return 0!=A.actions.length&&q.push(A),q}function H(L){for(var a=[],$=0,s=L.length;s>$;$++){var u=L[$],m=new oj;m.actions=u.actions,m.curves=u.curves,a.push(m)}return a}function o(K,n){for(var A=1e-10,y=n.length,g=!1,B=y-1,l=0;y>l;B=l++){var G=n[B],x=n[l],f=x.x-G.x,S=x.y-G.y;if(u(S)>A){if(0>S&&(G=n[l],f=-f,x=n[B],S=-S),K.y<G.y||K.y>x.y)continue;if(K.y==G.y){if(K.x==G.x)return!0}else{var _=S*(K.x-G.x)-f*(K.y-G.y);if(0==_)return!0;if(0>_)continue;g=!g}}else{if(K.y!=G.y)continue;if(x.x<=K.x&&K.x<=G.x||G.x<=K.x&&K.x<=x.x)return!0}}return g}var f=l(this.actions);if(0==f.length)return[];if(W===!0)return H(f);var P,i,g,s=[];if(1==f.length)return i=f[0],g=new oj,g.actions=i.actions,g.curves=i.curves,s.push(g),s;var d=!hd.isClockWise(f[0].getPoints());d=R?!d:d;var b,U=[],e=[],J=[],n=0;e[n]=t,J[n]=[];var X,w;
for(X=0,w=f.length;w>X;X++)i=f[X],b=i.getPoints(),P=hd.isClockWise(b),P=R?!P:P,P?(!d&&e[n]&&n++,e[n]={s:new oj,p:b},e[n].s.actions=i.actions,e[n].s.curves=i.curves,d&&n++,J[n]=[]):J[n].push({h:i,p:b[0]});if(!e[0])return H(f);if(e.length>1){for(var I=!1,Y=[],D=0,q=e.length;q>D;D++)U[D]=[];for(var D=0,q=e.length;q>D;D++){e[D];for(var A=J[D],F=0;F<A.length;F++){for(var v=A[F],Q=!0,y=0;y<e.length;y++)o(v.p,e[y].p)&&(D!=y&&Y.push({froms:D,tos:y,hole:F}),Q?(Q=!1,U[y].push(v)):I=!0);Q&&U[D].push(v)}}Y.length>0&&(I||(J=U))}var E,c,V;for(X=0,w=e.length;w>X;X++)for(g=e[X].s,s.push(g),E=J[X],c=0,V=E.length;V>c;c++)g.holes.push(E[c].h);return s};var oj=function(){Kd.apply(this,arguments),this.holes=[]},om=oj.prototype=Ej(Se);om.getPointsHoles=function(A){var r,k=this.holes.length,N=[];for(r=0;k>r;r++)N[r]=this.holes[r].getTransformedPoints(A);return N},om.extractAllPoints=function(G){return{shape:this.getTransformedPoints(G),holes:this.getPointsHoles(G)}},om.extractPoints=function(P){return this.extractAllPoints(P)};var hd={triangulateShape:function(g,F){function E(L,P,l){return L.x!=P.x?L.x<P.x?L.x<=l.x&&l.x<=P.x:P.x<=l.x&&l.x<=L.x:L.y<P.y?L.y<=l.y&&l.y<=P.y:P.y<=l.y&&l.y<=L.y}function f(A,x,g,o,G){var t=1e-10,$=x.x-A.x,Z=x.y-A.y,s=o.x-g.x,U=o.y-g.y,N=A.x-g.x,V=A.y-g.y,a=Z*s-$*U,O=Z*N-$*V;if(u(a)>t){var h;if(a>0){if(0>O||O>a)return[];if(h=U*N-s*V,0>h||h>a)return[]}else{if(O>0||a>O)return[];if(h=U*N-s*V,h>0||a>h)return[]}if(0==h)return!G||0!=O&&O!=a?[A]:[];if(h==a)return!G||0!=O&&O!=a?[x]:[];if(0==O)return[g];if(O==a)return[o];var i=h/a;return[{x:A.x+i*$,y:A.y+i*Z}]}if(0!=O||U*N!=s*V)return[];var y=0==$&&0==Z,H=0==s&&0==U;if(y&&H)return A.x!=g.x||A.y!=g.y?[]:[A];if(y)return E(g,o,A)?[A]:[];if(H)return E(A,x,g)?[g]:[];var e,D,n,T,J,l,F,v;return 0!=$?(A.x<x.x?(e=A,n=A.x,D=x,T=x.x):(e=x,n=x.x,D=A,T=A.x),g.x<o.x?(J=g,F=g.x,l=o,v=o.x):(J=o,F=o.x,l=g,v=g.x)):(A.y<x.y?(e=A,n=A.y,D=x,T=x.y):(e=x,n=x.y,D=A,T=A.y),g.y<o.y?(J=g,F=g.y,l=o,v=o.y):(J=o,F=o.y,l=g,v=g.y)),F>=n?F>T?[]:T==F?G?[]:[J]:v>=T?[J,D]:[J,l]:n>v?[]:n==v?G?[]:[e]:v>=T?[e,D]:[e,l]}function _(d,Y,C,x){var N=1e-10,R=Y.x-d.x,M=Y.y-d.y,e=C.x-d.x,c=C.y-d.y,j=x.x-d.x,r=x.y-d.y,w=R*c-M*e,f=R*r-M*j;if(u(w)>N){var t=j*c-r*e;return w>0?f>=0&&t>=0:f>=0||t>=0}return f>0}function A(h,F){function e(S,w){var D=i.length-1,Z=S-1;0>Z&&(Z=D);var R=S+1;R>D&&(R=0);var d=_(i[S],i[Z],i[R],c[w]);if(!d)return!1;var k=c.length-1,p=w-1;0>p&&(p=k);var $=w+1;return $>k&&($=0),d=_(c[w],c[p],c[$],i[S]),d?!0:!1}function v(p,H){var e,M,u;for(e=0;e<i.length;e++)if(M=e+1,M%=i.length,u=f(p,H,i[e],i[M],!0),u.length>0)return!0;return!1}function q(X,J){var A,j,N,D,m;for(A=0;A<b.length;A++)for(j=F[b[A]],N=0;N<j.length;N++)if(D=N+1,D%=j.length,m=f(X,J,j[N],j[D],!0),m.length>0)return!0;return!1}for(var c,T,r,U,M,E,B,R,k,o,O,i=h.concat(),b=[],J=[],p=0,Q=F.length;Q>p;p++)b.push(p);for(var H=0,n=2*b.length;b.length>0&&(n--,!(0>n));)for(r=H;r<i.length;r++){U=i[r],T=-1;for(var p=0;p<b.length;p++)if(E=b[p],B=U.x+":"+U.y+":"+E,J[B]===t){c=F[E];for(var $=0;$<c.length;$++)if(M=c[$],e(r,$)&&!v(U,M)&&!q(U,M)){T=$,b.splice(p,1),R=i.slice(0,r+1),k=i.slice(r),o=c.slice(T),O=c.slice(0,T+1),i=R.concat(o).concat(O).concat(k),H=r;break}if(T>=0)break;J[B]=!0}if(T>=0)break}return i}for(var Q,W,d,x,S,s,V={},q=g.concat(),Z=0,Y=F.length;Y>Z;Z++)Array.prototype.push.apply(q,F[Z]);for(Q=0,W=q.length;W>Q;Q++)S=q[Q].x+":"+q[Q].y,V[S]!==t,V[S]=Q;var L=A(g,F),X=$h.Triangulate(L,!1);for(Q=0,W=X.length;W>Q;Q++)for(x=X[Q],d=0;3>d;d++)S=x[d].x+":"+x[d].y,s=V[S],s!==t&&(x[d]=s);return X.concat()},isClockWise:function(H){return $h.Triangulate.area(H)<0},b2p0:function(B,N){var F=1-B;return F*F*N},b2p1:function(R,l){return 2*(1-R)*R*l},b2p2:function(r,D){return r*r*D},b2:function(K,e,k,Y){return this.b2p0(K,e)+this.b2p1(K,k)+this.b2p2(K,Y)},b3p0:function(z,f){var j=1-z;return j*j*j*f},b3p1:function(B,f){var Y=1-B;return 3*Y*Y*B*f},b3p2:function(n,P){var a=1-n;return 3*a*n*n*P},b3p3:function(e,w){return e*e*e*w},b3:function(I,t,k,P,N){return this.b3p0(I,t)+this.b3p1(I,k)+this.b3p2(I,P)+this.b3p3(I,N)}},$h={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var Y=L.keys(this.faces);return Y.length?Y[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(s){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(o){var I=o.familyName.toLowerCase(),X=this;return X.faces[I]=X.faces[I]||{},X.faces[I][o.cssFontWeight]=X.faces[I][o.cssFontWeight]||{},X.faces[I][o.cssFontWeight][o.cssFontStyle]=o,o},drawText:function(W){var h,I=this.getFace(),x=this.size/I.resolution,e=0,U=String(W).split(""),g=U.length,s=[];for(h=0;g>h;h++){var y=new Kd,$=this.extractGlyphPoints(U[h],I,x,e,y);$&&(e+=$.offset*this.spacing,s.push($.path))}var i=e/2;return{paths:s,offset:i}},extractGlyphPoints:function(U,Z,$,J,k){var s,C,B,H,F,D,A,t,S,M,Q,z,u,x,L,y,l,e,P,G=[],r=Z.glyphs[U]||Z.glyphs["?"];if(r){if(r.o)for(H=r._cachedOutline||(r._cachedOutline=r.o.split(" ")),D=H.length,A=$,t=$,s=0;D>s;)switch(F=H[s++]){case"m":S=H[s++]*A+J,M=H[s++]*t,k.moveTo(S,M);break;case"l":S=H[s++]*A+J,M=H[s++]*t,k.lineTo(S,M);break;case"q":if(Q=H[s++]*A+J,z=H[s++]*t,L=H[s++]*A+J,y=H[s++]*t,k.quadraticCurveTo(L,y,Q,z),P=G[G.length-1])for(u=P.x,x=P.y,C=1,B=this.divisions;B>=C;C++){var a=C/B;hd.b2(a,u,L,Q),hd.b2(a,x,y,z)}break;case"b":if(Q=H[s++]*A+J,z=H[s++]*t,L=H[s++]*A+J,y=H[s++]*t,l=H[s++]*A+J,e=H[s++]*t,k.bezierCurveTo(L,y,l,e,Q,z),P=G[G.length-1])for(u=P.x,x=P.y,C=1,B=this.divisions;B>=C;C++){var a=C/B;hd.b3(a,u,L,l,Q),hd.b3(a,x,y,e,z)}}return{offset:r.ha*$,path:k}}}};$h.generateShapes=function(k,j){j=j||{};var B=j.font;if(B===t&&(B=$h.getDefaultFont(),!B))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var g=j.size!==t?j.size:1,h=j.curveSegments!==t?j.curveSegments:4,L=j.spacing!==t?j.spacing:1,U=j.weight!==t?j.weight:"normal",z=j.style!==t?j.style:"normal";$h.size=g,$h.divisions=h,$h.face=B,$h.weight=U,$h.style=z,$h.spacing=L;for(var D=$h.drawText(k),A=D.paths,s=[],a=0,Q=A.length;Q>a;a++)Array.prototype.push.apply(s,A[a].toShapes());return s},function(q){var d=1e-10,K=function(u,x){var q=u.length;if(3>q)return null;var v,S,K,A=[],d=[],o=[];if(B(u)>0)for(S=0;q>S;S++)d[S]=S;else for(S=0;q>S;S++)d[S]=q-1-S;var G=q,_=2*G;for(S=G-1;G>2;){if(_--<=0)return x?o:A;if(v=S,v>=G&&(v=0),S=v+1,S>=G&&(S=0),K=S+1,K>=G&&(K=0),F(u,v,S,K,G,d)){var k,t,V,X,R;for(k=d[v],t=d[S],V=d[K],A.push([u[k],u[t],u[V]]),o.push([d[v],d[S],d[K]]),X=S,R=S+1;G>R;X++,R++)d[X]=d[R];G--,_=2*G}}return x?o:A},B=function(K){for(var r=K.length,B=0,L=r-1,k=0;r>k;L=k++)B+=K[L].x*K[k].y-K[k].x*K[L].y;return.5*B},F=function(R,j,t,y,z,O){var D,A,I,r,u,l,F,T,h;if(A=R[O[j]].x,I=R[O[j]].y,r=R[O[t]].x,u=R[O[t]].y,l=R[O[y]].x,F=R[O[y]].y,d>(r-A)*(F-I)-(u-I)*(l-A))return!1;var L,i,f,g,a,N,m,$,X,M,K,Z,J,E,s;for(L=l-r,i=F-u,f=A-l,g=I-F,a=r-A,N=u-I,D=0;z>D;D++)if(T=R[O[D]].x,h=R[O[D]].y,!(T===A&&h===I||T===r&&h===u||T===l&&h===F)&&(m=T-A,$=h-I,X=T-r,M=h-u,K=T-l,Z=h-F,s=L*M-i*X,J=a*$-N*m,E=f*Z-g*K,s>=-d&&E>=-d&&J>=-d))return!1;return!0};return q.Triangulate=K,q.Triangulate.area=B,q}($h),D._typeface_js={faces:$h.faces,loadFace:$h.loadFace};var Pb=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},sb=Pb.prototype={constructor:Pb,computeFaceNormals:function(){for(var M=new pj,W=new pj,g=0,r=this.faces.length;r>g;g++){var R=this.faces[g],V=this.vertices[R.a],X=this.vertices[R.b],S=this.vertices[R.c];M.subVectors(S,X),W.subVectors(V,X),M.cross(W),M.normalize(),R.normal.copy(M)}},computeVertexNormals:function(E){var y,W,P,T,V,d;for(d=new Array(this.vertices.length),y=0,W=this.vertices.length;W>y;y++)d[y]=new pj;if(E){var M,K,X,Q=new pj,q=new pj;for(P=0,T=this.faces.length;T>P;P++)V=this.faces[P],M=this.vertices[V.a],K=this.vertices[V.b],X=this.vertices[V.c],Q.subVectors(X,K),q.subVectors(M,K),Q.cross(q),d[V.a].add(Q),d[V.b].add(Q),d[V.c].add(Q)}else for(P=0,T=this.faces.length;T>P;P++)V=this.faces[P],d[V.a].add(V.normal),d[V.b].add(V.normal),d[V.c].add(V.normal);for(y=0,W=this.vertices.length;W>y;y++)d[y].normalize();for(P=0,T=this.faces.length;T>P;P++)V=this.faces[P],V.vertexNormals[0]=d[V.a].clone(),V.vertexNormals[1]=d[V.b].clone(),V.vertexNormals[2]=d[V.c].clone()},mergeVertices:function(){var M,E,U,q,o,n,Q,N,D={},e=[],b=[],c=4,I=p(10,c);for(U=0,q=this.vertices.length;q>U;U++)M=this.vertices[U],E=W(M.x*I)+"_"+W(M.y*I)+"_"+W(M.z*I),D[E]===t?(D[E]=U,e.push(this.vertices[U]),b[U]=e.length-1):b[U]=b[D[E]];var i=[];for(U=0,q=this.faces.length;q>U;U++){o=this.faces[U],o.a=b[o.a],o.b=b[o.b],o.c=b[o.c],n=[o.a,o.b,o.c];for(var V=0;3>V;V++)if(n[V]==n[(V+1)%3]){i.push(U);break}}for(U=i.length-1;U>=0;U--){var w=i[U];for(this.faces.splice(w,1),Q=0,N=this.faceVertexUvs.length;N>Q;Q++)this.faceVertexUvs[Q].splice(w,1)}var r=this.vertices.length-e.length;return this.vertices=e,r}},yg=function(G,R,n,u,Z,O,Q){this.aX=G,this.aY=R,this.xRadius=n,this.yRadius=u,this.aStartAngle=Z,this.aEndAngle=O,this.aClockwise=Q};yg.prototype=Ej(mk),yg.prototype.getPoint=function(n){var f,p=this.aEndAngle-this.aStartAngle;0>p&&(p+=c),p>c&&(p-=c),f=this.aClockwise===!0?this.aEndAngle+(1-n)*(c-p):this.aStartAngle+n*p;var M=this.aX+this.xRadius*V(f),O=this.aY+this.yRadius*E(f);return new rs(M,O)};var zc=function(D,m){this.v1=D,this.v2=m},Fk=zc.prototype=Ej(mk);Fk.getPoint=function(x){var L=this.v2.clone().sub(this.v1);return L.multiplyScalar(x).add(this.v1),L},Fk.getPointAt=function(J){return this.getPoint(J)},Fk.getTangent=function(){var L=this.v2.clone().sub(this.v1);return L.normalize()};var Qf=function(L,W,d){this.v0=L,this.v1=W,this.v2=d};Qf.prototype=Ej(mk),Qf.prototype.getPoint=function(k){var S,P;return S=hd.b2(k,this.v0.x,this.v1.x,this.v2.x),P=hd.b2(k,this.v0.y,this.v1.y,this.v2.y),new rs(S,P)};var Gn=function(V,Z,e,D){this.v0=V,this.v1=Z,this.v2=e,this.v3=D};Gn.prototype=Ej(mk),Gn.prototype.getPoint=function(i){var A,D;return A=hd.b3(i,this.v0.x,this.v1.x,this.v2.x,this.v3.x),D=hd.b3(i,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new rs(A,D)},Gf.create(function(e,P){this.v1=e,this.v2=P},function(v){var O=new pj;return O.subVectors(this.v2,this.v1),O.multiplyScalar(v),O.add(this.v1),O});var sc=Gf.create(function(F,O,o){this.v0=F,this.v1=O,this.v2=o},function(j){var E,R,d;return E=hd.b2(j,this.v0.x,this.v1.x,this.v2.x),R=hd.b2(j,this.v0.y,this.v1.y,this.v2.y),d=hd.b2(j,this.v0.z,this.v1.z,this.v2.z),new pj(E,R,d)}),Rd=Gf.create(function(i,E,l,t){this.v0=i,this.v1=E,this.v2=l,this.v3=t},function(Z){var Y,S,A;return Y=hd.b3(Z,this.v0.x,this.v1.x,this.v2.x,this.v3.x),S=hd.b3(Z,this.v0.y,this.v1.y,this.v2.y,this.v3.y),A=hd.b3(Z,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new pj(Y,S,A)}),Qr=function(_,i,l,L,T,U,F,O){Pb.call(this),L=L!==t?L:.5,T=T!==t?T:.5,O=O!==t?O:1,_=_||8,U=U||0,F=F||c;var J,n,o=1,x=O/2,d=[],b=[],q=this.vertices,S=this.faces,N=this.faceVertexUvs;for(n=0;o>=n;n++){var s=[],p=[],A=n/o,I=A*(T-L)+L;for(J=0;_>=J;J++){var W=J/_,D=new pj,e=-(W*F+U);D.z=I*E(e),D.y=-A*O+x,D.x=I*V(e),q.push(D),s.push(q.length-1),p.push(new rs(W,A))}d.push(s),b.push(p)}var v,m,w=(T-L)/O;for(J=0;_>J;J++)for(0!==L?(v=q[d[0][J]].clone(),m=q[d[0][J+1]].clone()):(v=q[d[1][J]].clone(),m=q[d[1][J+1]].clone()),v.setY(Q(v.x*v.x+v.z*v.z)*w).normalize(),m.setY(Q(m.x*m.x+m.z*m.z)*w).normalize(),n=0;o>n;n++){var R=d[n][J],h=d[n+1][J],Y=d[n+1][J+1],B=d[n][J+1],a=v.clone(),u=v.clone(),H=m.clone(),k=m.clone(),C=b[n][J].clone(),G=b[n+1][J].clone(),z=b[n+1][J+1].clone(),K=b[n][J+1].clone();S.push(new Rh(R,h,B,[a,u,k])),N[0].push([C,G,K]),S.push(new Rh(h,Y,B,[u.clone(),H,k.clone()])),N[0].push([G.clone(),z,K.clone()])}if(i&&L>0)for(this.vertices.push(new pj(0,x,0)),J=0;_>J;J++){var R=d[0][J],h=d[0][J+1],Y=this.vertices.length-1,a=new pj(0,1,0),u=new pj(0,1,0),H=new pj(0,1,0),C=b[0][J].clone(),G=b[0][J+1].clone(),z=new rs(G.x,0);S.push(new Rh(R,h,Y,[a,u,H],null,1));var r=J/_*c,M=V(r),f=E(r),j=(J+1)/_*c,y=V(j),g=E(j);N[0].push([new rs(.5+.5*M,.5+.5*f),new rs(.5+.5*y,.5+.5*g),new rs(.5,.5)])}if(l&&T>0)for(this.vertices.push(new pj(0,-x,0)),J=0;_>J;J++){var R=d[n][J+1],h=d[n][J],Y=q.length-1,a=new pj(0,-1,0),u=new pj(0,-1,0),H=new pj(0,-1,0),C=b[n][J+1].clone(),G=b[n][J].clone();S.push(new Rh(R,h,Y,[a,u,H],null,2));var r=J/_*c,M=V(r),f=E(r),j=(J+1)/_*c,y=V(j),g=E(j);N[0].push([new rs(.5+.5*y,.5-.5*g),new rs(.5+.5*M,.5-.5*f),new rs(.5,.5)])}};Qr.prototype=Ej(sb);var Lo=function(O,A,S,T,B,z,f){Pb.call(this),f=f||.5,O=O||16,A=A||16,S=(S!==t?S:0)-h,T=T!==t?T:c,B=B!==t?B:0,z=z!==t?z:h;var Q,J,$=[],q=[],v=this.vertices,r=this.faces,Y=this.faceVertexUvs;for(J=0;A>=J;J++){var H=[],p=[];for(Q=0;O>=Q;Q++){var _=Q/O,D=J/A,C=new pj;C.x=-f*V(S+_*T)*E(B+D*z),C.y=f*V(B+D*z),C.z=f*E(S+_*T)*E(B+D*z),v.push(C),H.push(v.length-1),p.push(new rs(_,D))}$.push(H),q.push(p)}for(J=0;A>J;J++)for(Q=0;O>Q;Q++){var b=$[J][Q+1],j=$[J][Q],g=$[J+1][Q],a=$[J+1][Q+1],G=v[b].clone().normalize(),o=v[j].clone().normalize(),k=v[g].clone().normalize(),d=v[a].clone().normalize(),M=q[J][Q+1].clone(),R=q[J][Q].clone(),m=q[J+1][Q].clone(),X=q[J+1][Q+1].clone();u(v[b].y)===f?(M.x=(M.x+R.x)/2,r.push(new Rh(b,g,a,[G,k,d])),Y[0].push([M,m,X])):u(v[g].y)===f?(m.x=(m.x+X.x)/2,r.push(new Rh(b,j,g,[G,o,k])),Y[0].push([M,R,m])):(r.push(new Rh(b,j,a,[G,o,d])),Y[0].push([M,R,X]),r.push(new Rh(j,g,a,[o.clone(),k,d.clone()])),Y[0].push([R.clone(),m,X.clone()]))}};Lo.prototype=Ej(sb);var wo=function(R,j,C,Q,l,$){Pb.call(this),R=R||.33,j=j||.17,Q=Q||8,C=C||6,l=l||0,$=$||c;for(var q=new pj,t=[],N=[],H=0;Q>=H;H++)for(var X=H/Q*c+h,L=0;C>=L;L++){var f=L/C*$+l;q.x=R*V(f),q.z=-R*E(f);var G=new pj,M=R+j*V(X);G.x=M*V(f),G.z=-M*E(f),G.y=j*E(X),this.vertices.push(G),t.push(new rs(L/C,1-H/Q)),N.push(G.clone().sub(q).normalize())}for(var H=1;Q>=H;H++)for(var L=1;C>=L;L++){var k=(C+1)*H+L-1,b=(C+1)*(H-1)+L-1,p=(C+1)*(H-1)+L,W=(C+1)*H+L,F=new Rh(k,b,W,[N[k].clone(),N[b].clone(),N[W].clone()]);this.faces.push(F),this.faceVertexUvs[0].push([t[k].clone(),t[b].clone(),t[W].clone()]),F=new Rh(b,p,W,[N[b].clone(),N[p].clone(),N[W].clone()]),this.faces.push(F),this.faceVertexUvs[0].push([t[b].clone(),t[p].clone(),t[W].clone()])}this.computeFaceNormals()};wo.prototype=Ej(sb);var _f=function(A,m,X){return A?(Pb.call(this),A=A instanceof Array?A:[A],this.addShapeList(A,m),m.convertYZ!==!1&&Xe(this,X),this.computeFaceNormals(),void 0):(A=[],void 0)},_b=_f.prototype=Ej(Pb.prototype);_b.addShapeList=function(o,_){for(var U=o.length,L=0;U>L;L++){var C=o[L];this.addShape(C,_)}},_b.addShape=function(q,o){function L(){if(o.bottom)for(var V=0;W>V;V++)I=S[V],C(I[2],I[1],I[0],!0);if(o.top)for(V=0;W>V;V++)I=S[V],C(I[0]+F*Z,I[1]+F*Z,I[2]+F*Z,!1)}function E(){var g=0;for(d(_,g),g+=_.length,x=0,w=k.length;w>x;x++)y=k[x],d(y,g),g+=y.length}function d(o,Y){for(var l,U,d=o.length;--d>=0;){l=d,U=d-1,0>U&&(U=o.length-1);var j=0,Q=Z;for(j=0;Q>j;j++){var D=F*j,f=F*(j+1),A=Y+l+D,q=Y+U+D,N=Y+U+f,W=Y+l+f;p(A,q,N,W,o,j,Q,l,U)}}}function $(D,N,B){T.vertices.push(new pj(D,N,B))}function C(l,b,V,B){l+=K,b+=K,V+=K,T.faces.push(new Rh(l,b,V,null,null,B?2:1));var $=B?j.generateBottomUV(T,q,o,l,b,V):j.generateTopUV(T,q,o,l,b,V);T.faceVertexUvs[0].push($)}function p(W,z,t,O,b,N,$,Q,s){W+=K,z+=K,t+=K,O+=K,T.faces.push(new Rh(W,z,O)),T.faces.push(new Rh(z,t,O));var V=j.generateSideWallUV(T,q,b,o,W,z,t,O,N,$,Q,s);T.faceVertexUvs[0].push([V[0],V[1],V[3]]),T.faceVertexUvs[0].push([V[1],V[2],V[3]])}var b,f,u,A,N,J=o.amount,h=o.curveSegments||$b,Z=o.steps||1,Q=o.extrudePath,D=!1,j=new Cd(o.repeatUVLength);Q&&(b=Q.getSpacedPoints(Z),D=!0,f=o.frames!==t?o.frames:new Rp.FrenetFrames(Q,Z,!1),u=new pj,A=new pj,N=new pj);var y,x,w,T=this,K=this.vertices.length,O=q.extractPoints(h),M=O.shape,k=O.holes,s=!hd.isClockWise(M);if(s){for(M=M.reverse(),x=0,w=k.length;w>x;x++)y=k[x],hd.isClockWise(y)&&(k[x]=y.reverse());s=!1}var S=hd.triangulateShape(M,k),_=M;for(x=0,w=k.length;w>x;x++)y=k[x],M=M.concat(y);for(var n,I,F=M.length,W=S.length,l=0;F>l;l++)n=M[l],D?(A.copy(f.normals[0]).multiplyScalar(n.x),u.copy(f.binormals[0]).multiplyScalar(n.y),N.copy(b[0]).add(A).add(u),$(N.x,N.y,N.z)):$(n.x,n.y,0);var i;for(i=1;Z>=i;i++)for(l=0;F>l;l++)n=M[l],D?(A.copy(f.normals[i]).multiplyScalar(n.x),u.copy(f.binormals[i]).multiplyScalar(n.y),N.copy(b[i]).add(A).add(u),$(N.x,N.y,N.z)):$(n.x,n.y,J/Z*i);L(),E()};var Rp=function(B,m,F,U,W){function T(o,q,h){return y.vertices.push(new pj(o,q,h))-1}Pb.call(this),m=m||64,F=F||1,U=U||8,W=W||!1;var r,f,N,n,A,R,o,l,S,Q,z,O,P,b,e,i,j,I,u,M,K=[],y=this,w=m+1,t=new pj,Z=new Rp.FrenetFrames(B,m,W),$=Z.tangents,C=Z.normals,H=Z.binormals;for(this.tangents=$,this.normals=C,this.binormals=H,S=0;w>S;S++)for(K[S]=[],n=S/(w-1),l=B.getPointAt(n),r=$[S],f=C[S],N=H[S],Q=0;U>Q;Q++)A=Q/U*c,R=-F*V(A),o=F*E(A),t.copy(l),t.x+=R*f.x+o*N.x,t.y+=R*f.y+o*N.y,t.z+=R*f.z+o*N.z,K[S][Q]=T(t.x,t.y,t.z);for(S=0;m>S;S++)for(Q=0;U>Q;Q++)z=W?(S+1)%m:S+1,O=(Q+1)%U,P=K[S][Q],b=K[z][Q],e=K[z][O],i=K[S][O],j=new rs(S/m,Q/U),I=new rs((S+1)/m,Q/U),u=new rs((S+1)/m,(Q+1)/U),M=new rs(S/m,(Q+1)/U),this.faces.push(new Rh(P,b,i)),this.faceVertexUvs[0].push([j,I,M]),this.faces.push(new Rh(b,e,i)),this.faceVertexUvs[0].push([I.clone(),u,M.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Rp.prototype=Ej(sb),Rp.FrenetFrames=function(U,D,x){function T(){R[0]=new pj,w[0]=new pj,K=Number.MAX_VALUE,Z=u(_[0].x),z=u(_[0].y),h=u(_[0].z),K>=Z&&(K=Z,S.set(1,0,0)),K>=z&&(K=z,S.set(0,1,0)),K>=h&&S.set(0,0,1),k.crossVectors(_[0],S).normalize(),R[0].crossVectors(_[0],k),w[0].crossVectors(_[0],R[0])}var L,K,Z,z,h,f,n,S=new pj,_=[],R=[],w=[],k=new pj,q=new _l,B=D+1,$=1e-4;for(this.tangents=_,this.normals=R,this.binormals=w,f=0;B>f;f++)n=f/(B-1),_[f]=U.getTangentAt(n),_[f].normalize();for(T(),f=1;B>f;f++)R[f]=R[f-1].clone(),w[f]=w[f-1].clone(),k.crossVectors(_[f-1],_[f]),k.length()>$&&(k.normalize(),L=Y(fc(_[f-1].dot(_[f]),-1,1)),R[f].applyMatrix4(q.makeRotationAxis(k,L))),w[f].crossVectors(_[f],R[f]);if(x)for(L=Y(fc(R[0].dot(R[B-1]),-1,1)),L/=B-1,_[0].dot(k.crossVectors(R[0],R[B-1]))>0&&(L=-L),f=1;B>f;f++)R[f].applyMatrix4(q.makeRotationAxis(_[f],L*f)),w[f].crossVectors(_[f],R[f])};var Yd=function(M,w,o,$){Pb.call(this),w=w||18,o=o||0,$=$==f?c:$;for(var q=1/(M.length-1),z=1/w,Z=0,Q=w;Q>=Z;Z++)for(var n=o+Z*z*$,b=V(n),m=E(n),u=0,y=M.length;y>u;u++){var I=M[u],Y=new pj;Y.x=b*I.x-m*I.y,Y.y=m*I.x+b*I.y,Y.z=I.z,this.vertices.push(Y)}for(var l=M.length,Z=0,Q=w;Q>Z;Z++)for(var u=0,y=M.length-1;y>u;u++){var N=u+l*Z,H=N,O=N+l,b=N+1+l,e=N+1,J=Z*z,A=u*q,P=J+z,x=A+q;this.faces.push(new Rh(H,e,O)),this.faceVertexUvs[0].push([new rs(J,A),new rs(J,x),new rs(P,A)]),this.faces.push(new Rh(O,e,b)),this.faceVertexUvs[0].push([new rs(P,A),new rs(J,x),new rs(P,x)])}this.mergeVertices(),Xe(this),this.computeFaceNormals(),this.computeVertexNormals()};Yd.prototype=Ej(sb);var In=function(b,r){r=r||{};var c=$h.generateShapes(b,r);r.amount=r.amount!==t?r.amount:.5,r.convertYZ=!1,r.fill!==!1&&(r.bottom=!0,r.top=!0),_f.call(this,c,r)};In.prototype=Ej(_b);var Zo=A.Node=function(){Ec(Zo,this)},ng={X:Rc,Y:Vr,Z:Ok},er={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},lh="xzy",sh=function(t,r,C){if(r){var O=r[0],K=r[1],l=r[2];"xzy"===C?(Vr(t,K),Ok(t,l),Rc(t,O)):"xyz"===C?(Ok(t,l),Vr(t,K),Rc(t,O)):"yxz"===C?(Ok(t,l),Rc(t,O),Vr(t,K)):"yzx"===C?(Rc(t,O),Ok(t,l),Vr(t,K)):"zxy"===C?(Vr(t,K),Rc(t,O),Ok(t,l)):"zyx"===C?(Rc(t,O),Vr(t,K),Ok(t,l)):(Vr(t,K),Ok(t,l),Rc(t,O))}};ag("Node",zo,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:lh,_64O:0,_rotationX:0,_53O:0,_host:f,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_scale:{x:1,y:1},_tall:20,_54O:0,getUIClass:function(){return Wi},_22Q:function(){return Un},getX:function(){return this.p().x},setX:function(p){this.p(p,this.p().y)},getY:function(){return this.p().y},setY:function(I){this.p(this.p().x,I)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(I){this.setAnchor(I,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(u){this.setAnchor(this.getAnchor().x,u)},getScaleX:function(){return this.getScale().x},setScaleX:function(T){this.setScale(T,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(z){this.setScale(this.getScale().x,z)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(k,u){Oh(k,wc(f,f,this.r3(),this.getRotationMode())),this.translate3d(k[0]*u,k[1]*u,k[2]*u)},translateFront:function(t){this.translate3dBy([0,0,1],t)},translateBack:function(l){this.translate3dBy([0,0,-1],l)},translateLeft:function(h){this.translate3dBy([-1,0,0],h)},translateRight:function(H){this.translate3dBy([1,0,0],H)},translateTop:function(i){this.translate3dBy([0,1,0],i)},translateBottom:function(o){this.translate3dBy([0,-1,0],o)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(m,B,y){1===arguments.length&&(B=m[1],y=m[2],m=m[0]),this.p(m,y),this.setElevation(B)},translate3d:function(J,M,L){1===arguments.length&&(M=J[1],L=J[2],J=J[0]),this.translate(J,L),this.setElevation(this._54O+M)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(V,m,K){1===arguments.length&&(m=V[1],K=V[2],V=V[0]),this.setSize(V,K),this.setTall(m)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(T,W,r){1===arguments.length&&(W=T[1],r=T[2],T=T[0]),this.setRotationX(T),this.setRotation(-W),this.setRotationZ(r)},setRotationY:function(t){this.setRotation(-t)},getRotationY:function(){return-this._64O},lookAt:function(f,x){x=x||Eb;var l=this,g=po(f,l.p3()),u=fm(g);x===Eb?(l.r3([-G(g[1]/u),-T(g[2],g[0])+N,0]),l.setRotationMode("xzy")):x===Lc?(l.r3(0,-T(g[2],g[0]),G(g[1]/u)),l.setRotationMode("zyx")):x===Pc?(l.r3(0,-T(g[2],g[0])+h,-G(g[1]/u)),l.setRotationMode("zyx")):x===Yo?(l.r3([-G(g[1]/u)+N,-T(g[2],g[0])+N,0]),l.setRotationMode("xzy")):x===Ro&&(l.r3([-G(g[1]/u)-N,-T(g[2],g[0])+N,0]),l.setRotationMode("xzy")),x===Jm&&(l.r3([-G(g[1]/u)+h,-T(g[2],g[0])+N,h]),l.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(V){var a=this;if(a!==V&&a._host!==V){var R=a._host;R&&R._removeAttach(a),a._host=V,a._host&&a._host._addAttach(a),a.fp("host",R,V),a.onHostChanged(R,V)}},getAttaches:function(){return this._69O},_addAttach:function(x){var M=this;M._69O||(M._69O=new ie),M._69O.add(x),M.fp("attaches",f,x)},_removeAttach:function(L){var k=this;k._69O.remove(L),k._69O.isEmpty()&&delete k._69O,k.fp("attaches",L,f)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(z){var b=this;b._44I||(b._44I=new ie),b._42I||(b._42I=new ie),b._44I.add(z),b._42I.add(z),b._20I()},_4I:function($){var F=this;F._44I||(F._44I=new ie),F._43I||(F._43I=new ie),F._44I.add($),F._43I.add($),F._20I()},_16I:function(E){var m=this;m._44I.remove(E),m._42I.remove(E),m._44I.isEmpty()&&delete m._44I,m._42I.isEmpty()&&delete m._42I,m._20I()},_18I:function(y){var x=this;x._44I.remove(y),x._43I.remove(y),x._44I.isEmpty()&&delete x._44I,x._43I.isEmpty()&&delete x._43I,x._20I()},_20I:function(){var D=this;if(delete D._45I,!D._44I||D._44I.isEmpty())return delete D._70O,void 0;var j;D._44I.each(function(I){I.isLooped()&&(j||(j={}),j[I._id]||(D._45I||(D._45I=new ie),D._45I.add(I),j[I._id]=I))}),j?(D._70O=new ie,D._44I.each(function(P){j[P._id]?"A"===j[P._id]||(j[P._id]="A",D._70O.add(P)):D._70O.add(P)})):D._70O=D._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(j){var k=this;k._46I||(k._46I=new ie),k._48I||(k._48I=new ie),k._46I.add(j),k._48I.add(j),k._19I()},_3I:function(C){var s=this;s._47I||(s._47I=new ie),s._48I||(s._48I=new ie),s._47I.add(C),s._48I.add(C),s._19I()},_15I:function(j){var T=this;T._46I.remove(j),T._48I.remove(j),T._46I.isEmpty()&&delete T._46I,T._48I.isEmpty()&&delete T._48I,T._19I()},_17I:function(k){var B=this;B._47I.remove(k),B._48I.remove(k),B._47I.isEmpty()&&delete B._47I,B._48I.isEmpty()&&delete B._48I,B._19I()},_19I:function(){var Z=this;delete Z._49I;var f=Z._48I;if(f&&!f.isEmpty()){var G={};f.each(function(P){G[P._id]?Z._49I||(Z._49I=new ie):G[P._id]=P}),Z._49I?f.each(function(H){G[H._id]&&(Z._49I.add(H),delete G[H._id])}):Z._49I=f}},getImage:function(){if(this._needToCheckDataBindings){var B=y.getImage(this._image);B&&(this._needToCheckDataBindings=!1,B.dataBindings&&B.dataBindings.forEach(function(u){u.defaultValue!==t&&this.getAttr(u.attr)===t&&this.setAttr(u.attr,u.defaultValue)},this))}return this._image},setImage:function(E){var Z=this,B=Z._image,H=Z.getWidth(),L=Z.getHeight();Z._image=E,Z.fp("image",B,E)&&(null!=E&&(Jo(E)||_o(E)&&/\.json$/i.test(E))&&(this._needToCheckDataBindings=!0),Z.fp(vd,H,Z.getWidth()),Z.fp(re,L,Z.getHeight()))},getElevation:function(){return this._54O},setElevation:function(Y){var r=this;if(!r._50O){r._50O=1;var l=r._54O;r._54O=Y,r.fp(io,l,Y),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(l){var Z=this;if(!Z._49O){Z._49O=1;var Y=Z._64O;Z._64O=l,Z.fp(Ff,Y,l),delete Z._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(l){var f=this;if(!f._51O){f._51O=1;var I=f._rotationX;f._rotationX=l,f.fp("rotationX",I,l),delete f._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(D){var n=this;if(!n._52O){n._52O=1;var Q=n._53O;n._53O=D,n.fp("rotationZ",Q,D),delete n._52O}},getPosition:function(){return this._position},setPosition:function(y,m){var S=this;if(!S._50I){S._50I=1;var h;if(h=2===arguments.length?{x:y,y:m}:y,h.x!==S._position.x||h.y!==S._position.y){var v=S._position;S._position=h,S.fp(Wj,v,h)}delete S._50I}},translate:function(m,T){var L=this._position;this.p(L.x+m,L.y+T)},getWidth:function(){var l=this;if(l._width>=0)return l._width;var q=tr(l._image);return q?Me(q,l):20},setWidth:function(q){var N=this,r=N._width;N._width=q,N.fp(vd,r,q)},getHeight:function(){var o=this;if(o._height>=0)return o._height;var O=tr(o._image);return O?zr(O,o):20},setHeight:function(o){var $=this,q=$._height;$._height=o,$.fp(re,q,o)},setSize:function(J,S){var T=this;2===arguments.length?(T.setWidth(J),T.setHeight(S)):(T.setWidth(J.width),T.setHeight(J.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(V,m,J,G,q){var f=this,U=f.getAnchor(),u=f.getScale();arguments.length<=2&&(q=m,m=V.y,J=V.width,G=V.height,V=V.x);var d=q&&u.x<0?1-U.x:U.x,O=q&&u.y<0?1-U.y:U.y;f.p(V+J*d,m+G*O),q&&(J/=Math.abs(u.x),G/=Math.abs(u.y)),f.setWidth(J),f.setHeight(G)},getMatrix:function(){var v=this,w=v._64O,u=v._position,q=v.getScale();return new ii(w,u.x,u.y,q.x,q.y)},getRect:function(){var q=this,S=q.getWidth(),x=q.getHeight(),d=q.getAnchor(),b={x:-S*d.x,y:-x*d.y,width:S,height:x},h=q.getMatrix();return b=Rl([h.tf(b.x,b.y),h.tf(b.x+b.width,b.y),h.tf(b.x+b.width,b.y+b.height),h.tf(b.x,b.y+b.height)])},getAnchor:function(){var D=this;if(D.hasOwnProperty("_anchor"))return D._anchor;var O=tr(D._image);return O&&O.anchorX!==t?{x:O.anchorX,y:O.anchorY}:D._anchor},setAnchor:function(D,$,U){var S,o=this;"number"==typeof D?S={x:D,y:$}:(S=D.length?{x:D[0],y:D[1]}:D,U=$);var i=o.getAnchor();if(i.x!==S.x||i.y!==S.y){if(o._anchor=S,U&&!Ag){var r=o.getPosition(),I=o.getSize(),Z=o.getRotation(),R=o.getScale(),t=-I.width*(i.x-S.x)*R.x,G=-I.height*(i.y-S.y)*R.y,T=E(Z),H=V(Z);o.setPosition(r.x+H*t-T*G,r.y+T*t+H*G)}o.fp("anchor",i,S)}},getScale:function(){return this._scale},setScale:function(B,r){var X,e=this;X=2===arguments.length?{x:B,y:r}:B;var c=e.getScale();(c.x!==X.x||c.y!==X.y)&&(e._scale=X,e.fp("scale",c,X))},getCorners:function(e,L){e==f&&(e=0),L==f&&(L=e);var g=this,W=g.getAnchor(),T=g.getWidth(),i=g.getHeight(),h=-T*W.x-e,j=-i*W.y-L,F=T+2*e,v=i+2*L,H=g.getMatrix();return[H.tf(h,j),H.tf(h,j+v),H.tf(h+F,j+v),H.tf(h+F,j)]},getEditControlPoints:function(Q,_,l){_==f&&(_=0),l==f&&(l=_);var X=this,H=X.getAnchor(),M=X.getWidth(),d=X.getHeight(),E=-M*H.x-_,z=-d*H.y-l,Z=M+2*_,Y=d+2*l;if(Q)return[{x:E,y:z},{x:E,y:0},{x:E,y:z+Y},{x:0,y:z+Y},{x:E+Z,y:z+Y},{x:E+Z,y:0},{x:E+Z,y:z},{x:0,y:z}];var b=X.getMatrix();return[b.tf(E,z),b.tf(E,0),b.tf(E,z+Y),b.tf(0,z+Y),b.tf(E+Z,z+Y),b.tf(E+Z,0),b.tf(E+Z,z),b.tf(0,z)]},rotateAt:function(U,F,s){var g=this,v=g._position,W=g._64O,h=new ii(W,v.x,v.y).tf(U,F),r=Q(U*U+F*F),k=T(v.y-h.y,v.x-h.x)+s;g.setRotation(W+s),g.p(h.x+r*V(k),h.y+r*E(k))},onParentChanged:function(){Zo.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(u){u._7I()})},onPropertyChanged:function(i){var f=this;Zo.superClass.onPropertyChanged.call(f,i),f._69O&&f._69O.each(function(W){W.handleHostPropertyChange(i)}),f._49I&&f._49I.each(function(M){M.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(w){this.updateAttach(w)},onStyleChanged:function(S){Zo.superClass.onStyleChanged.apply(this,arguments),Il[S]&&this.updateAttach()},updateAttach:function(e){var S=this;S._51I||Ag||(S._51I=1,S._71O(e),delete S._51I)},_71O:function(q){var k,x,S,o,V,B,r=this,j=r._host,e=q?q.property:f,m=q?q.oldValue:f,d=q?q.newValue:f;if(j instanceof A.Grid){if(e===io)r.setElevation(r._54O+d-m);else if(!q||Zp[e]){if(k=r.s("attach.row.index"),x=r.s("attach.column.index"),S=j.getCellRect(k,x),!S)return;o=r.s("attach.row.span"),V=r.s("attach.column.span"),(1!==o||1!==V)&&(S=zn(S,j.getCellRect(k+o-1,x+V-1))),Ml(S,r,"attach.padding",1),r.setRect(S)}}else if(j instanceof fq&&(B=r.s("attach.index"))>=0&&(!q||hb[e])){var g=r.s("attach.thickness");g!=f&&r.setHeight(j.getThickness()*g);var M=r.s("attach.offset"),s=j.getPoints(),L=s.size();if(L>B){var l=s.get(B),w=L===B+1?s.get(0):s.get(B+1),R=[w.x-l.x,w.y-l.y],_=fm(R);if(_){r.s("attach.offset.relative")&&(M*=_),r.s("attach.offset.opposite")&&(M=_-M);var Q={x:l.x+R[0]/_*M,y:l.y+R[1]/_*M},K=r.s("attach.gap");K&&(r.s("attach.gap.relative")&&(K*=j.getThickness()),Q=Tl(f,Q,w,K)),r.p(Q),r.setRotation(T(R[1],R[0]))}}}else q&&(e===Wj?r.translate(d.x-m.x,d.y-m.y):e===io?r.setElevation(r._54O+d-m):Lj[e]&&r._11Q(j,e,d-m))},_11Q:function(L,F,N){var b=this,J=L.p3(),S=po(b.p3(),J),q=el(),c=er[b.getRotationMode()],E=c[0],O=c[1],P=c[2],B=ng[E],Z=ng[O],I=ng[P];F===Ff&&(F="rotationY",N=-N),F===Ff+E?(I(q,L[Vi+P]()),Z(q,L[Vi+O]()),B(q,N),Z(q,-L[Vi+O]()),I(q,-L[Vi+P]()),b[Wl+E](b[Vi+E]()+N)):F===Ff+O?(I(q,L[Vi+P]()),Z(q,N),I(q,-L[Vi+P]()),b[Wl+O](b[Vi+O]()+N)):F===Ff+P&&(I(q,N),b[Wl+P](b[Vi+P]()+N)),Oh(S,q),b.p3(J[0]+S[0],J[1]+S[1],J[2]+S[2])},isHostOn:function(j){var K=this;if(K._host&&j&&j._69O)for(var H={},B=K._host;B&&B!==K&&!H[B._id];){if(B===j)return!0;H[B._id]=B,B=B._host}return!1},isLoopedHostOn:function(v){return this.isHostOn(v)&&v.isHostOn(this)},getSerializableProperties:function(){var w=Zo.superClass.getSerializableProperties.call(this);return Ad(w,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,scale:1,_width:1,_height:1,tall:1,elevation:1}),w}});var $f=A.Edge=function(C,g){var U=this;Ec($f,U),U.setSource(C),U.setTarget(g)};ag("Edge",zo,{_icon:"edge_icon",getUIClass:function(){return oq},_22Q:function(){return Pf},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(_){var J=this;if(J._source!==_){var O=J._source;J._source=_,O&&O._16I(J),_&&_._2I(J),J._7I(),J.fp("source",O,_)
}},setTarget:function(S){var I=this;if(I._target!==S){var G=I._target;I._target=S,G&&G._18I(I),S&&S._4I(I),I._7I(),I.fp("target",G,S)}},isLooped:function(){var Z=this;return Z._source===Z._target&&!!Z._source&&!!Z._target},_7I:function(){var Q,k=this,N=nl(k);k._40I!==N&&(Q=this._40I,Q&&Q._15I(k),k._40I=N,N&&N._1I(k),k.fp("sourceAgent",Q,N),di(Q,k._41I),di(N,k._41I));var E=ll(k);k._41I!==E&&(Q=k._41I,Q&&Q._17I(k),k._41I=E,E&&E._3I(k),k.fp("targetAgent",Q,E),di(Q,k._40I),di(E,k._40I))},_22I:function(f){this._52I=f,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var x=this;return x._52I&&x._52I.get(0)!==x&&!x.getStyle(wi)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var G=this,L=G._52I;return L&&!G.getStyle(wi)&&L.size()>1&&G===L.get(0)},toggle:function(){var C=this._52I,S=!this.s(wi);C&&C.size()>1&&(C.each(function(q){q.s(wi,S)}),C.getSiblings().each(function(O){O!==C&&O.each(function(x){x.fp("edgeGroup",f,O)})}))},setStyle:function($,X){($===lg||"edge.segments"===$)&&(X=gs(X)),$f.superClass.setStyle.call(this,$,X)},onStyleChanged:function(B){$f.superClass.onStyleChanged.apply(this,arguments),uk[B]&&di(this._41I,this._40I)},getSerializableProperties:function(){var y=$f.superClass.getSerializableProperties.call(this);return Ad(y,{source:1,target:1}),y}});var Fh=A.Group=function(){Ec(Fh,this)};ag("Group",Zo,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Vl},onChildAdded:function(){Fh.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Fh.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var B=this;if(!B._54I&&!Ag){var D=B.getChildrenRect();D&&(B._53I=1,B.p(Ji(B.s("group.position"),D,B.getSize())),delete B._53I)}},getChildrenRect:function(){var V,y=this;return y.eachChild(function(v){V=zn(V,y.getChildRect(v))}),V},getChildRect:function(h){var F;return On(h)&&h.s(zk)&&(bg(h)&&h.isExpanded()&&h.eachChild(function(S){F=zn(F,h.getChildRect(S))}),!F&&h.getRect&&(F=h.getRect())),F},setPosition:function(M,E){var H=this;if(!H._54I){var N;N=2===arguments.length?{x:M,y:E}:M,Ag||H._53I||(H._54I=1,ec(H._children,N.x-H._position.x,N.y-H._position.y),delete H._54I),Fh.superClass.setPosition.call(this,N)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(c){var i=this;if(i._57O!==c){var t=i._57O;i._57O=c,i.fp("expanded",t,i._57O),i._8I()}},_8I:function(){Fh.superClass._8I.call(this),this.eachChild(function(N){On(N)&&N._8I()})},onStyleChanged:function(N){Fh.superClass.onStyleChanged.apply(this,arguments),"group.position"===N&&this._81I()},getSerializableProperties:function(){var i=Fh.superClass.getSerializableProperties.call(this);return i.expanded=1,i}});var Hd=A.Block=function(){Ec(Hd,this)};ag("Block",Zo,{_icon:"block_icon",getUIClass:function(){return _j},onChildAdded:function(){Hd.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Hd.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var J=this;if(!Ag&&!J._updatingToChildren){var D,W,g,Z,T,r=[],n=J.getRotation();if(J.eachChild(function(y){On(y)&&r.push.apply(r,y.getCorners())}),r.length){J._updatingFromChildren=1;var t=V(-n),a=E(-n),h=1/0,F=-1/0,c=1/0,M=-1/0;for(Z=0,T=r.length;T>Z;Z++)g=r[Z],D=g.x,W=g.y,g.x=t*D-a*W,g.y=a*D+t*W,h=K(h,g.x),F=i(F,g.x),c=K(c,g.y),M=i(M,g.y);var S=J.getScale();J.setSize(u((F-h)/S.x),u((M-c)/S.y));var P;S.x<0&&(P=h,h=F,F=P),S.y<0&&(P=c,c=M,M=P),t=V(n),a=E(n);var p=J.getAnchor();D=h+(F-h)*p.x,W=c+(M-c)*p.y,J.setPosition(t*D-a*W,a*D+t*W),delete J._updatingFromChildren}}},setPosition:function(Z,N){var F=this;if(!F._updatingToChildren){var y;y=2===arguments.length?{x:Z,y:N}:Z,Ag||F._updatingFromChildren||(F._updatingToChildren=1,ec(F._children,y.x-F._position.x,y.y-F._position.y),delete F._updatingToChildren),Hd.superClass.setPosition.call(this,y)}},setWidth:function(v){return this.setSize(v,this.getHeight())},setHeight:function(m){return this.setSize(this.getWidth(),m)},setSize:function(B,N){1>B&&(B=1),1>N&&(N=1);var d=this;if(!d._updatingToChildren){2!==arguments.length&&(N=B.height,B=B.width);var p=d.getWidth(),X=d.getHeight();if(B!==p&&Hd.superClass.setWidth.call(d,B),N!==X&&Hd.superClass.setHeight.call(d,N),!Ag&&!d._updatingFromChildren){d._updatingToChildren=1;var k=B/p,P=N/X;d._adjustChildScaleOrSize(k,P,"size"),delete d._updatingToChildren,d.updateFromChildren()}}},_adjustChildScaleOrSize:function(d,N,g){var S=this,o=S.getPosition(),x=S.getRotation();S.getScale(),S.eachChild(function(c){if(On(c)){var G=c.getPosition(),B=c.getRotation(),_=c.getWidth(),l=c.getHeight(),M=c.getScale(),Z=M.x*_,e=M.y*l,D=new ii(B,G.x,G.y,Z,e);D.translate(-o.x,-o.y),D.rotate(-x),B=T(D.b*Math.sign(Z),D.a*Math.sign(Z)),D.scale(d,N);var v,O,j,q=V(B);if(Math.abs(q)<.001?(v=E(B),O=D.b/v,j=-D.c/v):(O=D.a/q,j=D.d/q),"scale"===g)c.setScale(O/_,j/l);else if("size"===g){var p=O/M.x,h=j/M.y;c.setScale(yk(O)*Math.abs(M.x),yk(j)*Math.abs(M.y)),c.setSize(Math.max(.1,Math.abs(p)),Math.max(.1,Math.abs(h)))}D.rotate(x),D.translate(o.x,o.y),c.setPosition(D.tx,D.ty)}})},_calcChangeFactor:function(z,$,r,X){var a,R,U,Z;return a=u(z),R=u(r),U=a>R?a/R:R/a,a=u($),R=u(X),Z=a>R?a/R:R/a,i(U,Z)},setAnchor:function(){var C=this;if(!C._updatingToChildren){var B=C.getAnchor();if(Hd.superClass.setAnchor.apply(C,arguments),!Ag&&!C._updatingFromChildren){C._updatingToChildren=1;var L=C.getAnchor();C.getPosition();var D=C.getSize(),k=C.getScale(),v=C.getRotation(),t=-D.width*k.x*(B.x-L.x),l=-D.height*k.y*(B.y-L.y),w=E(v),N=V(v),I=N*t-w*l,F=w*t+N*l;C.eachChild(function(m){if(On(m)){var W=m.getPosition();m.setPosition(W.x-I,W.y-F)}}),delete C._updatingToChildren}}},setRotation:function(q){var U=this;if(!U._updatingToChildren){var Q=U.getRotation();if(Hd.superClass.setRotation.apply(U,arguments),!Ag&&!U._updatingFromChildren){U._updatingToChildren=1;var Z=U.getPosition(),E=q-Q;U.eachChild(function(t){if(On(t)){var A=t.getMatrix();A.translate(-Z.x,-Z.y),A.rotate(E),A.translate(Z.x,Z.y);var r=Math.sign(t.getScale().x);t.setRotation(T(A.b*r,A.a*r)),t.setPosition(A.tx,A.ty)}}),delete U._updatingToChildren}}},setScale:function(J,o){var O=this;if(!O._updatingToChildren){null==o&&(o=J.y,J=J.x);var b=O.getScale();if(u(J)<.01&&(J=.01*(yk(J)||yk(b.x))),u(o)<.01&&(o=.01*(yk(o)||yk(b.y))),Hd.superClass.setScale.call(O,J,o),!Ag&&!O._updatingFromChildren){O._updatingToChildren=1;var k=J/b.x,G=o/b.y;O._adjustChildScaleOrSize(k,G,"size"),delete O._updatingToChildren,O.updateFromChildren()}}}});var am=A.Grid=function(){Ec(A.Grid,this)};ag("Grid",Zo,{IRotatable:!1,_icon:"grid_icon",_image:f,getUIClass:function(){return Or},setRotation:function(){},getCellRect:function(b,M){var T=this,N=T.s("grid.row.count"),u=T.s("grid.column.count");if(0>=N||0>=u||0>b||b>=N||0>M||M>=u)return f;var d,K,D,t=T.getRect(),F=T.s("grid.row.percents"),x=T.s("grid.column.percents");if(Ml(t,T,"grid.border",-1),F&&F._as&&(F=F._as),x&&x._as&&(x=x._as),F&&F.length===N){for(D=0,d=0;b>d;d++)D+=t.height*F[d];t.y+=D,t.height=t.height*F[b]}else t.height=t.height/N,t.y+=t.height*b;if(x&&x.length===u){for(K=0,d=0;M>d;d++)K+=t.width*x[d];t.x+=K,t.width=t.width*x[M]}else t.width=t.width/u,t.x+=t.width*M;return mc(t,-T.s("grid.gap")),t}});var Eg=A.Text=function(){Ec(Eg,this),this.setSize(100,50),this.s("text","TEXT")};ag("Text",Zo,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return Dn},setWidth:function(E){E||(E=.001),Eg.superClass.setWidth.call(this,E)},setHeight:function($){$||($=.001),Eg.superClass.setHeight.call(this,$)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),mf("__text__",{width:{value:100,isSafeFunc:!0,func:function(d){return d._width}},height:{value:50,isSafeFunc:!0,func:function(c){return c._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var fq=A.Shape=function(){Ec(fq,this),this._59O=new ie};fq.__de__=Bo,ag("Shape",Zo,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Ig},_22Q:function(){return Xk},getLength:function(I){return Ye(qn(this._59O,this._58O,I,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var B=this._58O;return B?new ie(B._as.slice(0)):B},setSegments:function(U){var D=this._58O;U=U?uo(U)?new ie(U.slice(0)):new ie(U._as.slice(0)):new ie,(D&&U&&D._as.join(",")!==U._as.join(",")||D!==U)&&(this._58O=U,this.fp("segments",D,U))},getPoints:function(){return this._59O},toPoints:function(){var B=this._59O;return new ie(B._as.slice(0))},setPoints:function(m,d){var G=this,r=G._59O;m=m?uo(m)?new ie(m.slice(0)):new ie(m._as.slice(0)):new ie;var A,Q,$,z,H,T;d&&(A=G.getPosition(),T=new ii(G.getRotation(),0,0,G.getScale().x,G.getScale().y)),(r&&m&&r._as.join(",")!==m._as.join(",")||r!==m)&&(G._59O=m,G.fs(),G.fp("points",r,m)),d&&(Q=G.getPosition(),$=Q.x-A.x,z=Q.y-A.y,H=T.tf($,z),G.setPosition(Q.x-$+H.x,Q.y-z+H.y))},addPoint:function(u,F,T){var X=this.toPoints();X.add(u,F),this.setPoints(X,T)},setPoint:function(E,j,W){var D=this.toPoints();D.set(E,j),this.setPoints(D,W)},removePointAt:function(s){var H=this.toPoints();H.removeAt(s),this.setPoints(H)},setWidth:function(k){var p=this;if(1>k&&(k=1),!p._55I&&!Ag&&p.getWidth()){p._55I=1;var S=p._position.x,l=k/p.getWidth(),O=p.toPoints(),m=new ie;O.each(function(v){m.add({x:(v.x-S)*l+S,y:v.y,e:v.e})}),p.setPoints(m);var z=p.s("shape.gradient.pack");z&&Bd(z,[l,0,0,1,S*(1-l),0]),p.fs(),delete p._55I}fq.superClass.setWidth.call(p,k)},setHeight:function(b){var T=this;if(1>b&&(b=1),!T._55I&&!Ag&&T.getHeight()){T._55I=1;var o=T._position.y,Q=b/T.getHeight(),n=T.toPoints(),l=new ie;n.each(function(q){l.add({x:q.x,y:(q.y-o)*Q+o,e:q.e})}),T.setPoints(l);var c=T.s("shape.gradient.pack");c&&Bd(c,[1,0,0,Q,0,o*(1-Q)]),T.fs(),delete T._55I}fq.superClass.setHeight.call(T,b)},setAnchor:function($,E,s){var K=this;if(K._55I=!0,!Ag){var T,u,p;"number"==typeof $?p={x:$,y:E}:(p=$.length?{x:$[0],y:$[1]}:$,s=E);var F=K.getAnchor(),y=K.getSize();T=y.width*(F.x-p.x),u=y.height*(F.y-p.y),s||K.shiftPoints(T,u);var m=K.getPosition()}if(fq.superClass.setAnchor.apply(K,arguments),!Ag){var C=K.getPosition();s&&K.shiftPoints(C.x-m.x+T,C.y-m.y+u)}delete K._55I},shiftPoints:function(R,w){var J=this,U=J.toPoints(),V=new ie;U.each(function(Z){V.add({x:Z.x+R,y:Z.y+w,e:Z.e})}),J.setPoints(V),J.fs()},setPosition:function(c,i){var D,v=this;if(!v._28Q){if(v._28Q=1,!v._55I&&!Ag){D=2===arguments.length?{x:c,y:i}:c;var a=D.x-v._position.x,R=D.y-v._position.y;if(0===a&&0===R)return delete v._28Q,void 0;v._55I=1,v.shiftPoints(a,R);var Z=v.s("shape.gradient.pack");Z&&Bd(Z,[1,0,0,1,a,R]),delete v._55I}fq.superClass.setPosition.apply(v,arguments),delete v._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var R=this;if(2!==R._59O.size())return!1;var _=R._58O;return _?2===_.size()&&1===_.get(0)&&2===_.get(1)?!0:!1:!0},fireShapeChange:function(){var A=this;if(!A._55I&&!Ag){var M=Rl(A._59O);M&&(A._55I=1,A.setRect(M),delete A._55I)}A.fp(xi,!1,!0)},getSerializableProperties:function(){var M=fq.superClass.getSerializableProperties.call(this);return M.segments=1,M.points=1,M.thickness=1,M.closePath=1,M}});var Tk=A.Polyline=function(){Ec(Tk,this),this.s({"shape.background":null,"shape.border.width":2})};ag("Polyline",fq,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Ao},getUIClass:function(){return Jf},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(s){var z=this;if(!z._24Q&&!Ag&&z.getTall()){z._24Q=1;var t=z._54O,Q=s/z.getTall();z._59O.each(function(G){G.e=G.e==f?t:(G.e-t)*Q+t}),z.fs(),delete z._24Q}Tk.superClass.setTall.call(z,s)},setElevation:function(X){var D=this;if(!D._24Q&&!Ag){D._24Q=1;var I=X-D._54O;D._59O.each(function($){$.e==f?$.e=X:$.e+=I}),D.fs(),delete D._24Q}Tk.superClass.setElevation.apply(D,arguments)},fireShapeChange:function(){var b=this,h=b._59O;if(!b._24Q&&!Ag){var y=h.size();if(y){var X=1,w=h.get(0),$=b._54O;w.e==f&&(w.e=$);for(var N=w.e,L=0;y>X;X++){w=h.get(X),w.e==f&&(w.e=$);var m=K(N,w.e),V=i(N+L,w.e);N=m,L=V-m}b._24Q=1,b.setTall(L),b.setElevation(N+L/2),delete b._24Q}}Tk.superClass.fireShapeChange.apply(b,arguments)}});var zg=A.SubGraph=function(){Ec(zg,this)};ag("SubGraph",Zo,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){zg.superClass._8I.call(this),this.eachChild(function(B){On(B)&&B._8I()})}});var Zg=A.RefGraph=function(){Ec(Zg,this)};ag("RefGraph",Zo,{_icon:"refGraph_icon",getUIClass:function(){return null},getRef:function(){return this._ref},setRef:function(m){this._ref!==m&&(this._ref=m,this.updateRef())},_21I:function(){Zg.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var q=this;if(q.clearChildrenFromDataModel(),q._ref&&q._dataModel){q._xhrLoadHandler&&(q._xhrLoadHandler.cancel=!0);var p=q._xhrLoadHandler=function(n){if(n&&q._dataModel){y.loadingRefGraph=!0;var P=q._dataModel.deserialize(n,q,{justDatas:!0});P.each(function(y){y._refGraph=q}),y.loadingRefGraph=!1}};y.xhrLoad(q._ref,function(b){p.cancel||p(b)})}},getSerializableProperties:function(){var X=Zg.superClass.getSerializableProperties.call(this);return X.ref=1,X}}),A.EdgeGroup=function(l,z){this._70O=l,this._siblings=z;for(var A,E,C=0,$=l.size(),m=R[wi];$>C;C++)if(A=l.get(C).getStyle(wi,!1),A!=f){m=A;break}m==f&&(m=!0);var Z=y.edgeGroupAgentFunc;for(Z&&(E=Z(l),E&&E!==l.get(0)&&(l.remove(E),l.add(E,0))),C=0;$>C;C++)l.get(C).s(wi,m)},ag("EdgeGroup",L,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(D){return this._70O.get(D)},indexOf:function(c){return this._70O.indexOf(c)},each:function(j,g){this._70O.each(j,g)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(b,a){this._siblings.each(function(M){M._70O.each(b,a)})}});var gc=A.JSONSerializer=function(L,Y){this.dm=this._dataModel=L,this._hierarchical=Y==f?L.isHierarchicalRendering():Y};ag("JSONSerializer",L,{ms_ac:["hierarchical"],serialize:function(a){return y.stringify(this.toJSON(),a)},toJSON:function(){var u=this,v=u.dm,B=v.getRoots(),W=u.json={v:y.getVersion(),p:{},a:{},d:[]},Q=v.getSerializableAttrs();v.getInit()&&(W.init=v.getInit()),v.getName()&&(W.p.name=v.getName()),v.getBackground()&&(W.p.background=v.getBackground()),W.p.autoAdjustIndex=v.isAutoAdjustIndex(),W.p.hierarchicalRendering=v.isHierarchicalRendering();for(var C in Q){var R=v.a(C);R!==t&&u[Iq](C,R,W.a)}return pk(W.a)&&delete W.a,u._hierarchical?B.each(u.serializeData,this):v.each(function(N){u.serializeData(N)}),W},isSerializable:function(){return!0},getProperties:function(S){return S.getSerializableProperties()},getStyles:function(t){return t.getSerializableStyles()},getAttrs:function(X){return X.getSerializableAttrs()},serializeData:function(Q){var m=this;if(m.isSerializable(Q)&&!Q._refGraph){var P,h,O,V,K=Si(Q.getClassName())||Q.getClass(),e=new K,J={c:Q.getClassName(),i:Q.getId(),p:{},s:{},a:{}};m.json.d.push(J),P=m.getProperties(Q);for(h in P)/^_/.test(h)?(O=Q[h],O!==e[h]&&m[Iq](h.substr(1),O,J.p)):(V=kg(h),Q[V]&&(O=Q[V](),O!==e[V]()&&m[Iq](h,O,J.p)));P=m.getStyles(Q);for(h in P)O=Q.s(h),O!==e.s(h)&&m[Iq](h,O,J.s);P=m.getAttrs(Q);for(h in P)O=Q.a(h),O!==e.a(h)&&m[Iq](h,O,J.a);pk(J.p)&&delete J.p,pk(J.s)&&delete J.s,pk(J.a)&&delete J.a}m._hierarchical&&Q.getChildren().each(m.serializeData,m)},serializeValue:function(l,F,Q){Kg(F)?F={__a:F._as}:F instanceof zo&&(F={__i:F.getId()}),Q[l]=F},deserialize:function(r,V,G){Ag=!0,G=lj(G)?{setId:G}:G||{};var d=this;r=d.json=_o(r)?y.parse(r):r,d._82I={};var H=d.dm,h=new ie,x=new ie,K=0,S=r.d.length;for(G.justDatas||(ao(r.init)&&r.init(H),H.setInit(r.init));S>K;K++){var z=r.d[K],i=Si(z.c),F=new i,U=z.i;G.setId&&U!=f&&(F._id=U),d._82I[U]=F,h.add(F),x.add(z)}for(K=0;S>K;K++)d.deserializeData(h.get(K),x.get(K));if(h.each(function(R){V&&!R.getParent()&&R.setParent(V),H.add(R)}),!G.justDatas){for(var t in r.a)H.a(t,d[jq](r.a[t]));for(var Y in r.p)H[xp(Y)](r.p[Y])}return Ag=!1,h},deserializeData:function(t,K){for(var k in K.p)t[xp(k)](this[jq](K.p[k]));for(k in K.s)t.s(k,this[jq](K.s[k]));for(k in K.a)t.a(k,this[jq](K.a[k]))},deserializeValue:function(l){if(Jo(l)){var E=l.__i;if(E!=f)return this._82I[E];if(E=l.__a,uo(E))return new ie(E)}return l}}),Ad(ve,{serialize:function(n,v){return new gc(this,v).serialize(n)},toJSON:function(L){return new gc(this,L).toJSON()},deserialize:function(E,Y,I){return new gc(this).deserialize(E,Y,I)}}),Ll.GraphView=function(s){var N=this;N._24I={},N._34I=new ie,N._25I={},N._56I={},N._view=ak(1,N),N._canvas=_p(N._view),N.dm(s?s:new ve),N.setEditable(!1),N.setScrollBarVisible(y.graphViewScrollBarVisible)},kb("GraphView",L,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",bo,nq,Yi,xo,"resettable","editInteractor",Ld,"pannable","rectSelectable","autoScrollZone",gi,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:y.graphViewResettable,_pannable:y.graphViewPannable,_rectSelectable:y.graphViewRectSelectable,_autoScrollZone:y.graphViewAutoScrollZone,_rectSelectBackground:y.graphViewRectSelectBackground,_rectSelectBorderColor:y.graphViewRectSelectBorderColor,_editPointSize:y.graphViewEditPointSize,_editPointBorderColor:y.graphViewEditPointBorderColor,_editPointBackground:y.graphViewEditPointBackground,_scrollBarColor:nn,_scrollBarSize:Yp,_autoHideScrollBar:pf,_autoMakeVisible:il,setEditable:function(s){var r=this,M=Ll.XEditInteractor;s?(r._uieditable=!0,r.setInteractors([new ho(r),new qm(r),M?new M(r):new Sg(r),new vq(r),new Yq(r),new Pe(r,{editable:!1})])):(r._uieditable=!1,r.setInteractors([new ho(r),new qm(r),new vq(r),new Yq(r),new Pe(r,{editable:!1})]))},getCanvas:function(){return this._canvas},_33I:function(z){var k=z.getUIClass();return k?new k(this,z):f},getDataUI:function(e){var g=this,$=g._25I[e._id];return $===t&&($=g._33I(e),g._25I[e._id]=$),$},getNodeRect:function(p){return y.getNodeRect(this,p)},getEdgeInfo:function(b){var n=this.getDataUI(b);return n?(n._79o(),n._78o):null},invalidateAll:function(a){var P=this;if(a){for(var H in P._25I){var s=P._25I[H];s&&s.dispose()}P._25I={},P._56I={},P._24I={},P._34I.clear(),P.redraw()}else P.dm().each(function(S){P.invalidateData(S)})},invalidateSelection:function(){var K=this;K.sm().each(function(j){K.invalidateData(j)})},invalidateData:function(O){var Y=this;Y._24I[O._id]=O,Y._21Q(O),Y.iv()},_21Q:function(l){var o=this,y=o._24I;if(ui(l)&&bm[l.s(ih)]){var X=l.getSourceAgent();X&&X.getAgentEdges().each(function(u){y[u._id]=u}),X=l.getTargetAgent(),X&&X.getAgentEdges().each(function(o){y[o._id]=o}),o.iv()}},redraw:function(n){var V=this;V._32I||(n?V._34I.add(n):(V._32I=1,V._34I.clear()),V.iv())},each:function($,d){var i,N,F,M=0,n=this._layers,S=this._dataModel,f=S._datas._as,V=f.length;if(n){for(var r=n.length;r>M;M++)if(F=n[M],S.isHierarchicalRendering()){if(this._dataModel.eachByHierarchical($,null,d)===!1)return}else for(var C=0;V>C;C++)if(i=f[C],i._layer===F&&(N=d?$.call(d,i):$(i),N===!1))return}else if(S.isHierarchicalRendering())this._dataModel.eachByHierarchical($,null,d);else for(;V>M;M++)if(i=f[M],N=d?$.call(d,i):$(i),N===!1)return},reverseEach:function(f,Y){var C,l,b,q,_=this._layers,G=this._dataModel,D=G._datas._as,U=D.length;if(_){for(C=_.length-1;C>=0;C--)if(q=_[C],G.isHierarchicalRendering()){if(G.reverseEachByHierarchical(f,null,Y)===!1)return}else for(var J=U-1;J>=0;J--)if(l=D[J],l._layer===q&&(b=Y?f.call(Y,l):f(l),b===!1))return}else if(G.isHierarchicalRendering())G.reverseEachByHierarchical(f,null,Y);else for(C=U-1;C>=0;C--)if(l=D[C],b=Y?f.call(Y,l):f(l),b===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var S=this,L=S._84I;return L||(S.each(function(P){S.isVisible(P)&&(L=zn(L,S.getDataUIBounds(P)))}),S._84I=L?L:He),S._84I},getScrollRect:function(){return zn(this.getContentRect(),this._29I)},makeCenter:function(F,O,z){var y=this;if(!y.getWidth()||!y.getHeight())return z||qc(y.centerData,y,[F,O,!0],200),void 0;y.makeVisible(F),y.validate();var V=y.getDataUIBounds(F);if(V){var E=y.getWidth(),o=y.getHeight(),B=V.x+V.width/2,Y=V.y+V.height/2,e=-B*y._zoom+E/2,x=-Y*y._zoom+o/2;y.setTranslate(e,x,O)}},fitData:function(_,J,z,c,D){var R=this;if(!R.getWidth()||!R.getHeight())return D||qc(R.fitData,R,[_,J,z,c,!0],200),void 0;R.makeVisible(_),R.validate();var P=R.getDataUIBounds(_);P&&(P=to(P),mc(P,z==f?20:z),R.fitRect(P,J,c))},fitContent:function(o,l,X,e){var D=this;if(!D.getWidth()||!D.getHeight())return e||qc(D.fitContent,D,[o,l,X,!0],200),void 0;D.validate();var Q=to(D.getContentRect());mc(Q,l==f?20:l),D.fitRect(Q,o,X)},fitRect:function(n,j,Y){var L=this,C=L.getWidth(),z=L.getHeight(),h=n.x+n.width/2,J=n.y+n.height/2,V=K(C/n.width,z/n.height),Q=L._zoom,q=-h*Q+C/2,l=-J*Q+z/2;0===V||isNaN(V)||(Y&&(V=K(1,V)),j?L.setTranslate(q,l,{finishFunc:function(){L.setZoom(V,j)}}):(L.setTranslate(q,l),L.setZoom(V)))},toCanvas:function(u,Z){Z=Z||this._zoom,this.validateImpl();var S=this,h=S.getContentRect();h.width||(h.width=10),h.height||(h.height=10);var x=_p(),A=h.x*Z,d=h.y*Z,E=h.width*Z,J=h.height*Z;wj(x,E,J,1);var U=pg(x);return u=u||this._dataModel.getBackground(),u&&Hj(U,0,0,E,J,u),uc(U,-A,-d),U.scale(Z,Z),S._42(U),U.restore(),x},toDataURL:function(E,f,_){return this.toCanvas(E,_).toDataURL(f||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(j,o){var P,O,u=this;u._93db(j,o),u.each(function(l){u._56I[l._id]&&(P=u.getDataUI(l),P&&(O=P._79o(),A.HtmlNode&&l instanceof A.HtmlNode?P._42(j):(!o||Oo(o,O))&&P._42(j)))}),u._92db(j,o)},validateImpl:function(){var K,G,E,e,M,J=this,C=J.tx(),Y=J.ty(),c=J._zoom,A=J._canvas,z=this.getWidth(),P=this.getHeight(),Z=J._29I,R={x:-C/c,y:-Y/c,width:z/c,height:P/c},k={},V=J._34I,b=J._24I,f=J._32I,h=J._23I;(z!==A.clientWidth||P!==A.clientHeight)&&(wj(A,z,P),f=1),f||Hk(R,Z)||(f=1),J._29I=R,J.each(function(I){G=I._id;var o=k[G]=J.isVisible(I);o!==J._56I[G]&&(b[G]=I,E=J.getDataUI(b[G]),E&&E._84o(o),J._84o(I,o))},J);for(G in b)E=J.getDataUI(b[G]),E&&(!f&&J._56I[G]&&(M=E._79o(),M&&V.add(M)),E.invalidate()),J._83I=1;if(J._56I=k,!f)for(G in b)k[G]&&(E=J.getDataUI(b[G]),E&&(M=E._79o(),M&&V.add(M)));if(f?e=R:(V.each(function(m){Oo(R,m)&&(e=zn(e,m))}),e&&(mc(e,i(1,1/c)),e.x=q(e.x*c)/c,e.y=q(e.y*c)/c,e.width=j(e.width*c)/c,e.height=j(e.height*c)/c,e=mo(R,e))),J._74O=e,e&&(K=pg(A),eg(K,C,Y,c),K.beginPath(),K.rect(e.x,e.y,e.width,e.height),K.clip(),K.clearRect(e.x,e.y,e.width,e.height),J._42(K,e),K.restore(),delete J._74O),J._24I={},V.clear(),delete J._32I,h&&z>0&&P>0){var E=J.getDataUI(h);if(E){var M=E._79o(),U=J._29I,m=U.x,O=U.y,F=U.width,D=U.height,c=J._zoom;M&&!Oo(M,U)&&(M.x+M.width<m&&J.tx(-M.x*c),M.x>m+F&&J.tx(-(M.x+M.width-F)*c),M.y+M.height<O&&J.ty(-M.y*c),M.y>O+D&&J.ty(-(M.y+M.height-D)*c))}delete J._23I}J._83I&&(delete J._83I,delete J._84I),J._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(v){var $=this;v!==$.isScrollBarVisible()&&(v?(Bb($._view,$._79O=mp()),Bb($._79O,$._27I=mp()),Bb($._79O,$._28I=mp())):(vo($._79O),delete $._79O,delete $._27I,delete $._28I),$.fp("scrollBarVisible",!v,v))},showScrollBar:function(){var S=this;S._79O&&(S._85I||(U(function(){S._86I()},vg),S.iv()),S._85I=new Date)},_86I:function(){var e=this;if(e._85I){var J=new Date,d=J.getTime();d-e._85I.getTime()>=vg?(delete e._85I,e.iv()):U(function(){e._86I()},vg)}},_98O:function(){var O=this,c=this._27I,A=this._28I;if(O._79O){if(O._autoHideScrollBar&&!O._85I)return c.style.visibility=dg,A.style.visibility=dg,void 0;var Y=O.getScrollBarColor(),H=O._zoom,p=O.getScrollBarSize(),h=O.getViewRect(),o=O.getScrollRect(),N=h.height*H,b=o.height*H,V=h.width*H-p-2,k=N*((h.y-o.y)*H/b),y=N*(N/b),d=c.style;b-.5>N?(vp>y&&(k=k+y/2-vp/2,0>k&&(k=0),k+vp>N&&(k=N-vp),y=vp),kc(c,V,k,p,y),d.visibility=hl,d.background=Y,d.borderRadius=p/2+Bk):d.visibility=dg;var R=h.width*H,K=o.width*H,k=h.height*H-p-2,V=R*((h.x-o.x)*H/K),G=R*(R/K),d=A.style;K-.5>R?(vp>G&&(V=V+G/2-vp/2,0>V&&(V=0),V+vp>R&&(V=R-vp),G=vp),kc(A,V,k,G,p),d.visibility=hl,d.background=Y,d.borderRadius=p/2+Bk):d.visibility=dg}},setDataModel:function(A){var D=this,W=D._dataModel,U=D._selectionModel;W!==A&&(W&&(W.ump(D.handleDataModelPropertyChange,D),W.umm(D.handleDataModelChange,D),W.umd(D.handleDataPropertyChange,D),W.removeIndexChangeListener(D._75O,D),W.removeHierarchyChangeListener(D.handleHierarchyChange,D),U||W.sm().ums(D.handleSelectionChange,D)),D._dataModel=A,A.mp(D.handleDataModelPropertyChange,D),A.mm(D.handleDataModelChange,D),A.md(D.handleDataPropertyChange,D),A.addIndexChangeListener(D._75O,D),A.addHierarchyChangeListener(D.handleHierarchyChange,D),U?U._21I(A):A.sm().ms(D.handleSelectionChange,D),D.invalidateAll(!0),D.fp(Wc,W,A),D._canvas.style.background=A.getBackground()||"")},handleDataModelPropertyChange:function(m){if("background"===m.property){var x=this._canvas.style.background,N=m.newValue||"";this._canvas.style.background=N,this.fp("canvasBackground",x,N)}else"hierarchicalRendering"===m.property&&this.redraw()},handleDataPropertyChange:function(K){this.dm().isHierarchicalRendering()&&"parent"===K.property&&K.data.hasChildren()&&this.redraw(),K.data instanceof Zg&&"2d.visible"===K.property&&this.redraw(),this.invalidateData(K.data)},onPropertyChanged:function(M){var f=this,s=M.property;if(f.redraw(),"zoom"===s){var D=f.sm().getSelection();D.size()&&D.each(function(D){D.invalidate()})}Cb[s]?f.showScrollBar():s===Ld&&f.onCurrentSubGraphChanged(M)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(O){var T=this,N=O.kind,z=O.data;if(T._83I=1,"add"===N)T.invalidateData(z),ui(z)&&z.getEdgeGroup()&&z.getEdgeGroup().eachSiblingEdge(T.invalidateData,T);else if(N===Tn){T._21Q(z);var K=z._id,Q=T._25I[K];if(Q){if(T._56I[K]){var R=Q._79o();R&&T.redraw(R)}Q.dispose(),delete T._25I[K],delete T._24I[K],delete T._56I[K]}z===T._currentSubGraph&&T.setCurrentSubGraph(f)}else N===wb&&(T.invalidateAll(!0),T.setCurrentSubGraph(f))},_75O:function(D){this.invalidateData(D.data)},handleHierarchyChange:function(y){this.dm().isHierarchicalRendering()&&y.data.hasChildren()&&this.redraw(),this.invalidateData(y.data)},adjustIndex:function(x){var d=this;if(d.isVisible(x)){for(var i=x;i._parent&&d.isVisible(i._parent);)i=i._parent;i&&i!==x&&d._dataModel.adjustIndex(i),d._dataModel.adjustIndex(x)}},getSelectWidth:function(s){return s.s("select.width")},isSelectable:function(L){return L instanceof Zg?!1:!(L.getParent()instanceof A.Block)&&L.s("2d.selectable")&&this.sm().isSelectable(L)},isMovable:function(m){var d=this;return ui(m)&&m.getStyle(ih)!==wq?!1:m instanceof Zg?!1:m.s("2d.movable")?d._movableFunc?d._movableFunc(m):!0:!1},isEditable:function(B){var s=this;if(A._uiSerializing)return s._uieditable;if(!s._editInteractor||!s.isSelected(B))return!1;if(bg(B)){var o=s.getDataUI(B);if(!o||o._88I)return!1}return ui(B)&&B.getStyle(ih)!==wq?!1:B instanceof Zg?!1:B.s("2d.editable")?s._editableFunc?s._editableFunc(B):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(L){return On(L)&&0!==L.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(L):!0},isRectEditable:function(J){return this._rectEditableFunc?this._rectEditableFunc(J):!0},isAnchorEditable:function(I){return this._anchorEditableFunc?this._anchorEditableFunc(I):!0},isRotationEditable:function(n){return n.setRotation&&n.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(n):!0:!1},getRotationPoint:function(U){var _=U.getAnchor(),B=U.getScale(),A=this._zoom,c=lr(U.getRotation(),0,-U.getHeight()*B.y*_.y-(B.y<0?-1:1)*(Z?32:16)/A),y=U.p();return c.x+=y.x,c.y+=y.y,c},getLogicalPoint:function(l){var B=this;return Np(l,B._canvas,B.tx(),B.ty(),B._zoom,B._zoom)},getSelectedDataAt:function(h){var V=this;return this.getDataAt(h,function(r){return V.isSelected(r)})},getDataAt:function(s,w,L){s.target&&(s=this.lp(s));var n,v=this._zoom;return this.reverseEach(function(B){return(w?w(B):this.isSelectable(B))&&this.rectIntersects(B,vc(s.x,s.y,L,v))?(n=B,!1):void 0},this),n},getIconInfoAt:function(r,o){var y=this;if(r.target&&(r=y.lp(r)),o||(o=y.getDataAt(r)),o){var b=y.getDataUI(o);if(b&&b._38o){var K,a=b._38o,n=new ie;for(K in a.icons)n.add(K);for(var I=n.size()-1;I>=0;I--){K=n.get(I);for(var l=a.rects[K],s=l.rotation,T=l.length-1;T>=0;T--){var j=l[T],G=j.width,W=j.height,z={x:r.x-j.x-G/2,y:r.y-j.y-W/2};s!=f&&(z=lr(-s,z.x,z.y));var j={x:-G/2,y:-W/2,width:G,height:W};if(Dh(j,z))return{key:K,index:T,name:a.icons[K].names[T],rect:l[T],point:r,rotation:s,relativeRect:j,relativePoint:z,data:o}}}}}return f},getDatasInRect:function(L,f,D){D===t&&(D=1);var $=this,x=new ie;return $.reverseEach(function(R){D&&!$.isSelectable(R)||(f?$.rectIntersects(R,L):$.rectContains(R,L))&&x.add(R)}),x},moveSelection:function(t,A){var N,$=this,n=$.dm();n&&(N=n.getHistoryManager()),N&&N.beginInteraction(),ec($.sm().toSelection($.isMovable,$),t,A),N&&N.endInteraction()},moveDatas:function(s,E,M){var q,O=this,u=O.dm();u&&(q=u.getHistoryManager()),q&&q.beginInteraction(),s instanceof ie||(s=new ie(s)),ec(s,E,M),q&&q.endInteraction()},getDataUIBounds:function(T){var j=this.getDataUI(T);return j?j._79o():f},drawData:function(u,c){var Y=this.getDataUI(c);Y&&(Y._79o(),Y._42(u)),c instanceof A.Block&&c.eachChild(function(W){this.drawData(u,W)},this)},getBoundsForGroup:function(b){return b.s(zk)?this.getDataUIBounds(b):f},rectIntersects:function(L,C){this.validate();var s=f;if(this._56I[L._id]){var j=this._25I[L._id];if(j){var k=j._79o();if(sr(C,k))s=!0;else if((C=mo(C,k))&&(j.rectIntersects&&(s=j.rectIntersects(C)),s==f)){if(!L.s("pixelPerfect"))return!0;var K=C.x,E=C.y,R=C.width,U=C.height,G=this._zoom,D=y.hitMaxArea,W=R*U*G*G;if(W>D){var q=Math.sqrt(D/W);G*=q}R*=G,U*=G,K*=G,E*=G;var t=Zq(R,U);uc(t,-K,-E),t.scale(G,G),this._drawForChecking=!0,this.drawData(t,L),this._drawForChecking=!1;try{for(var e=0,Z=t.getImageData(0,0,R,U).data;e<Z.length;e+=4)if(0!==Z[e+3]){s=!0;break}t.restore()}catch(P){Pr=f,s=!0}}}}return s?!0:!1},rectContains:function(X,B){if(this._56I[X._id]){var Z=this._25I[X._id];if(Z)return sr(B,Z._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(P){if(!y.isInput(P.target)){var O=this,o=O._focusData,M=o&&O._25I[o._id],a=0,G=O._dataModel._datas;if(!(o&&o._enabled&&o._editable&&M&&M.onKeyDown&&M.onKeyDown(P)===!0))if(9===P.keyCode&&(o&&(a=G.indexOf(o),kj(P)?-1===--a&&(a=0):++a===G.size()&&(a=0)),O._focusData=o=G.get(a),O.sm().setSelection(o)),Rk(P)?O.selectAll():xn(P)&&O.isResettable()&&O.reset(),O.sm().isEmpty()){if(O._editing)return;var u=O.tx(),c=O.ty(),d=!1,p=kj()?100:10;Ug(P)&&(u-=p,d=!0),eb(P)&&(c-=p,d=!0),lo(P)&&(u+=p,d=!0),mh(P)&&(c+=p,d=!0),d&&O.setTranslate(u,c)}else{Uh(P)&&O.handleDelete(P);var s=kj()?10:1;Ug(P)&&(O.moveSelection(-s,0),O.fi({kind:"moveLeft"})),eb(P)&&(O.moveSelection(0,-s),O.fi({kind:"moveUp"})),lo(P)&&(O.moveSelection(s,0),O.fi({kind:"moveRight"})),mh(P)&&(O.moveSelection(0,s),O.fi({kind:"moveDown"}))}}},handleScroll:function(f,e){Wf(f);var K=this.lp(f);e>0?this.scrollZoomIn(K):0>e&&this.scrollZoomOut(K)},handlePinch:function(r,T,t){this._68I||(T>t?this.pinchZoomIn(r):this.pinchZoomOut(r))},checkDoubleClickOnNote:function(H,o){var m=this,s=m.lp(H),c=m.getDataUI(o),q=c.note2Info;
return q&&o.s("note2.toggleable")&&Dh(q.clickRect,s)?(o.s(Cf,!o.s(Cf)),m.fi({kind:"toggleNote2",event:H,data:o}),!0):(q=c.noteInfo,q&&o.s("note.toggleable")&&Dh(q.clickRect,s)?(o.s(Cr,!o.s(Cr)),m.fi({kind:"toggleNote",event:H,data:o}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(Y,i){var S=this,V=S.getAutoScrollZone(),R=V/S.getZoom(),u=V/4,z=S._29I,E=S.lp(Y),x={x:S.tx(),y:S.ty()};return E&&V>0&&z&&(E.x-z.x<R?S.translate(u,0):z.x+z.width-E.x<R&&S.translate(-u,0),E.y-z.y<R?S.translate(0,u):z.y+z.height-E.y<R&&S.translate(0,-u)),x.x=S.tx()-x.x,x.y=S.ty()-x.y,i&&(i.x+=x.x,i.y+=x.y),x},getMoveMode:function(p,t){var J=t.s("2d.move.mode");return J?J:sp["88"]?"x":sp["89"]?"y":"xy"},getSerializableProperties:function(){return{layers:1,scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(n,o,S){var K=this;return"currentSubGraph"===o?{__i:n.getId()}:S.serializeProperty(n,o,K)},deserializeProperty:function(q,g,y){var b=this;if("currentSubGraph"===g){var l=b.dm(),s=l.__idMap;return s[q.__i]}return y.deserializeProperty(q,g,b)}});var Wo=function(o,P){var y=this;y.gv=o,y.s=function(f){return P.getStyle(f)},y._data=P,y._87I=new ie};zs(Wo,L,{_6I:f,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var P=this,F=P.gv.isSelected(P._data);return!F||P.isShadowed()?0:P.gv.getSelectWidth(P._data)},getBodyColor:function(D){var u=this._data,M=this.gv.getBodyColor(u);return M?M:D?u.getStyle(D):f},_2Q:function(Q){return this.s(Q)},_1Q:function(u,Q,H,G){var F=this.s,B=F(Q+".dash.color");u.strokeStyle=B,u.lineWidth=H,u.stroke(),F(Q+".dash.3d")&&Pl(u,B,F(Q+".dash.3d.color"),H,this.gv._zoom,F(Q+".dash.3d.accuracy")),ze(u,G)},invalidate:function(){this._6I=f},_79o:function(){var t=this;if(!t._6I){t.labelInfo=t.label2Info=t.noteInfo=t.note2Info=t._38o=f,t._87I.clear(),t._3O();var G=t._data,M=t.gv;t._55O=M.isEditable(G)?{_42O:M.isRectEditable(G),_43O:M.isPointEditable(G),_56O:M.isRotationEditable(G)}:f,t._6I=t._81o()}return t._6I},_3O:function(){},getPosition:function(){return He},_68o:function(P,y){P&&this._87I.add(ln(P,y))},_81o:function(){var L=this,e=L.s;L._24O(lq,"getLabel"),L._24O(de,"getLabel2"),L._26O(Em,"getNote"),L._26O(tm,"getNote2"),L._15O(),L._55O&&L._48O();var o;if(L._87I.each(function(J){o=zn(o,J)}),o&&L.isShadowed()){var W=to(o);W.x+=e("shadow.offset.x"),W.y+=e("shadow.offset.y"),mc(W,e("shadow.blur")),o=zn(o,W)}return L._87I.clear(),o},_42:function(H){var I=this,L=I._data,c=I.gv,b=I.s,v=b("opacity"),r=this.isShadowed();if(r){var W=H.shadowOffsetX,A=H.shadowOffsetY,G=H.shadowBlur,k=H.shadowColor,n=c.getZoom();H.shadowOffsetX=b("shadow.offset.x")*n,H.shadowOffsetY=b("shadow.offset.y")*n,H.shadowBlur=b("shadow.blur")*n,H.shadowColor=b("select.color")}if(v!=f){var s=H.globalAlpha;H.globalAlpha=v}I._80o(H),c.isLabelVisible(L)&&((!c._drawForChecking||b("label.selectable"))&&Go(H,I.labelInfo),(!c._drawForChecking||b("label2.selectable"))&&Go(H,I.label2Info)),c.isNoteVisible(L)&&(ok(H,I.noteInfo),ok(H,I.note2Info)),I._99O(H),v!=f&&(H.globalAlpha=s),r&&(H.shadowOffsetX=W,H.shadowOffsetY=A,H.shadowBlur=G,H.shadowColor=k)},_80o:function(){},_47O:function(){},_24O:function(A,n){var m=this,K=m._data,q=m.gv,v=m.s,w=q[n](K);if(w!=f){var E=v(A+".scale"),h=v(A+".max"),Y=v(A+".position"),k=m[A+"Info"]={label:w,scale:E,color:q[n+"Color"](K),font:v(A+".font"),opacity:v(A+".opacity"),align:v(A+".align"),rotation:m.getRotation(v(A+".rotation"),!1,Y),background:q[n+"Background"](K)},C=ye(k,w);h>0&&h<C.width&&(k.labelWidth=C.width,C.width=h),1!==E&&(C.width*=E,C.height*=E);var r=m.getPosition(Y,v(A+".offset.x"),v(A+".offset.y"),C,v(A+".position.fixed"));if(C.x=r.x-C.width/2,C.y=r.y-C.height/2,m._68o(k.rect=C,k.rotation),1!==E){var G=C.width/E,z=C.height/E;k.rect={x:r.x-G/2,y:r.y-z/2,width:G,height:z}}}},_26O:function(b,a){var D=this,k=D.gv,$=D._data,M=D.s,v=k[a]($);if(v!=f){var H,r,U=M(b+".scale"),I=D[b+"Info"]={note:v,scale:U,data:$,view:k,expanded:M(b+".expanded"),font:M(b+".font"),color:M(b+".color"),opacity:M(b+".opacity"),align:M(b+".align"),icon:M(b+".icon"),backgroundImage:M(b+".backgroundImage"),borderWidth:M(b+".border.width"),borderColor:M(b+".border.color"),background:k[a+"Background"]($)},S=D.getPosition(M(b+".position"),M(b+".offset.x"),M(b+".offset.y")),m=S.x,o=S.y;if(I.expanded){var P,N=M(b+".max"),u=M(b+".backgroundImage");u?(u=tr(u),P={width:Me(u,$),height:zr(u,$)}):P=ye(I,v),P.width+=6,P.height+=2,N>0&&N<P.width&&(I.labelWidth=P.width,P.width=N),H=P.width,r=P.height+8,I.clickRect={x:m-H*U/2,y:o-r*U,width:H*U,height:r*U*P.height/r}}else{var g=M(b+".icon");g?(g=tr(g),H=Me(g,$),r=zr(g,$)):(H=12,r=18),I.clickRect={x:m-H*U/2,y:o-r*U,width:H*U,height:r*U}}I.rect={x:m-H/2,y:o-r*U/2-r/2,width:H,height:r};var R=j(I.borderWidth/2)*U;D._68o({x:m-H*U/2-R,y:o-r*U-R,width:H*U+2*R,height:r*U+2*R})}},_48O:function(){},_99O:function(d){var W=this,L=W._38o;if(L){var T=W.gv,X=W._data,$=L.icons;for(var y in $){var P=$[y],k=L.rects[y];if(k){var n=gd(P.opacity,X,T),R=gd(P.names,X,T),z=R?R.length:0,Y=k.rotation;if(n!=f){var M=d.globalAlpha;d.globalAlpha*=n}for(var K=0;z>K;K++){var N=R[K],E=tr(N),h=k[K];if(Y){var O=h.x+h.width/2,x=h.y+h.height/2;d.save(),uc(d,O,x),Kh(d,Y),uc(d,-O,-x)}Rm(d,E,gd(P.stretch,X,T),h.x,h.y,h.width,h.height,W._data,W.gv),Y&&d.restore()}n!=f&&(d.globalAlpha=M)}}}}});var Wi=function(X,q){Ec(Wi,this,[X,q])};zs(Wi,Wo,{_checkEmptyRect:!0,_40O:function(G,a){var U=this,T=U.s,F=G.rect;if((G.borderColor=U.gv.getBorderColor(U._data))&&(G.borderType=T("border.type"),G.borderWidth=T("border.width"),G.borderPadding=T("border.padding"),a=i(a,G.borderPadding+G.borderWidth/2)),G.selectWidth=U.getSelectWidth()){var $=U.gv._zoom;G.selectType=T("select.type"),G._97o=T("select.color"),G.selectPadding=T("select.padding"),a=i(a,(G.selectPadding+G.selectWidth/2)/$)}if(a>0){var n=U._data.getScale();a*=i(1,i(u(n.x),u(n.y))),F=to(F),mc(F,a)}U._68o(F)},_39O:function(w,M){var r,z=this,s=M.rect;if(M.borderWidth>0&&(r=M.borderPadding,w.strokeStyle=M.borderColor,w.lineWidth=M.borderWidth,Aj(w,M.borderType,{x:s.x-r,y:s.y-r,width:s.width+2*r,height:s.height+2*r}),w.stroke()),M.selectWidth>0){var e=z.gv._zoom;if(r=M.selectPadding/e,w.strokeStyle=M._97o,w.lineWidth=M.selectWidth/e,M.rotation!=f){w.save(),w.translate(M.position.x,M.position.y),w.rotate(M.rotation);var y=z._data,L=y.getWidth(),O=y.getHeight(),V=M.scale,h=M.anchor;s={x:V.x*-L*h.x,y:V.y*-O*h.y,width:V.x*L,height:V.y*O}}Aj(w,M.selectType,{x:s.x-r,y:s.y-r,width:s.width+2*r,height:s.height+2*r}),M.rotation!=f&&w.restore(),w.stroke()}},_3O:function(){var P=this,K=P.s,d=P._data,X=d.getStyle(xi),Z=P.getBodyColor(),T=P._83o=X?{shape:X,_53o:P.getBodyColor("shape.background"),_27Q:tr(K("shape.repeat.image"),Z),shapeGradientPack:K("shape.gradient.pack"),_54o:K("shape.border.width"),_55o:K("shape.border.color"),_56o:K("shape.border.3d"),_57o:K("shape.border.3d.color"),_58o:K("shape.border.3d.accuracy"),shapeGradient:K("shape.gradient"),_59o:K("shape.gradient.color"),_60o:K("shape.border.pattern"),_61o:K("shape.border.cap"),_62o:K("shape.border.join"),bodyColor:Z}:{img:tr(d.getImage(),Z),bodyColor:Z,stretch:K("image.stretch")};if(v&&!g);else{T.rect=d.getRect(),T.position=d.p(),T.scale=d.getScale(),T.anchor=d.getAnchor(),T.rotation=d.getRotation(),X===Xl&&(T._63o=K("shape.depth"));var F=0;if(X)F=qr(f,T._54o/2,T._62o),P.s("shape.dash")&&(F=i(F,(P.s("shape.dash.width")||T._54o)/2));else if(T.img&&T.img.boundExtend&&(F=gd(T.img.boundExtend,d,P.gv),T.img.boundExtendAbsolute&&(F/=P.gv._zoom),!T.img.fitSize)){var B=gd(T.img.width,d,P.gv),U=gd(T.img.height,d,P.gv);F*=i(T.rect.width/B,T.rect.height/U)}P._40O(T,F)}},getPosition:function(y,q,J,P){var T=Ji(y,this._83o.rect,P);return T.x+=q,T.y+=J,T},_80o:function(U){var u=this,c=u.s,P=u.gv,f=u._data,G=u._83o,V=G.rect,z=G.position,n=G.rotation,H=G.anchor,B=G.scale,L=G.shape;if(!u._checkEmptyRect||V.width>0&&V.height>0){var I=f.getSize();if(I.x=-I.width*H.x,I.y=-I.height*H.y,U.save(),uc(U,z.x,z.y),Kh(U,n),Vc(U,B.x,B.y),u.freeDraw)u.freeDraw(U,I,G);else if(L){var Q,b,Z,y,g=G._60o,p=Gb(U,g),$=G._53o,w=G._27Q,A=G._54o,F=G._55o,R=G.shapeGradientPack,E=U.lineJoin,s=U.lineCap;if("roundRect"===L?Q=c("shape.corner.radius"):"polygon"===L?Q=c("shape.polygon.side"):"arc"===L&&(Q=c("shape.arc.from"),b=c("shape.arc.to"),Z=c("shape.arc.close"),y=c("shape.arc.oval")),U.lineJoin=G._62o,U.lineCap=G._61o,$||w||R?(Aj(U,L,I,Q,b,Z,y),R?Co(U,R):w?wg(U,w,G.bodyColor,null,f,P):hh(U,$,G.shapeGradient,G._59o,I),U.fill(),R&&U.restore(),U!==p&&Aj(p,L,I,Q,b,Z,y)):Aj(p,L,I,Q,b,Z,y),A>0){var d=c("shape.border.width.absolute");d&&(U.save(),U.setTransform(1,0,0,1,0,0)),U.lineWidth=A,U.strokeStyle=F,U.stroke(),d&&U.restore(),G._56o&&Pl(U,F,G._57o,A,P._zoom,G._58o)}if(ze(U,g),c("shape.dash")){var C=c("shape.dash.width")||A;if(C>0){g=c("shape.dash.pattern");var p=Gb(U,g,u._2Q("shape.dash.offset"));p!==U&&Aj(p,L,I,Q,b,Z,y),u._1Q(U,"shape",C,g)}}ol(U,$,G._63o,I),U.lineJoin=E,U.lineCap=s}else Rm(U,G.img,G.stretch,I.x,I.y,I.width,I.height,f,P,G.bodyColor);U.restore()}u._39O(U,G)},_48O:function(){},_47O:function(){}});var oq=function(p,b){Ec(oq,this,[p,b])},rq=function(x,k,V,j){var o=fm(x,k);return V=j?K(V,o):_e(V,o),o?V/=o:V=0,{x:x.x+(k.x-x.x)*V,y:x.y+(k.y-x.y)*V}};zs(oq,Wo,{_3O:function(){var W,B=this,L=B._data,X=B.gv,Z=B.s,Y=Z(ih),k=L.isLooped(),n=Z("edge.width"),$=Z("edge.center"),s=Z("edge.offset"),C=X.getBorderColor(L),l=C?Z("border.width"):0,z=B.getSelectWidth(),v=L._40I,H=L._41I,g=B._78o=v&&H?{looped:k,type:Y,width:n,center:$,color:B.getBodyColor("edge.color"),borderColor:C,borderWidth:l,_97o:z?Z("select.color"):f,selectWidth:z,pattern:Z("edge.pattern"),cap:Z("edge.cap"),join:Z("edge.join"),is3d:Z("edge.3d"),_67o:Z("edge.3d.color"),_66o:Z("edge.3d.accuracy")}:f;if(g){var _=y.getEdgeType(Y);if(_){var U=_(L,op(B,X,L,k,Y),X,B._19Q);U.points&&U.points.size()>1&&(g._4O=U,W=Rl(g._4O.points))}else{var M=Z("edge.source.anchor.x"),e=Z("edge.source.anchor.y"),r=Z("edge.target.anchor.x"),G=Z("edge.target.anchor.y"),V=Uf(X,v,Z("edge.source.position"),Z("edge.source.offset.x"),Z("edge.source.offset.y"),M,e),o=Uf(X,H,Z("edge.target.position"),Z("edge.target.offset.x"),Z("edge.target.offset.y"),r,G);if(Y===wq){var D=g.points=Z(lg)||xc,j=D.size();g.segments=Z("edge.segments");var I=M!==t||e!==t,O=r!==t||G!==t;if(!$)if(s)I||(V=rq(V,j?D.get(0):o,s,j)),O||(o=rq(o,j?D.get(j-1):V,s,j));else{var d;I||(d=Sf(V,j?D.get(0):o,gq(X,v)),d&&(V={x:d[0],y:d[1]})),O||(d=Sf(j?D.get(j-1):V,o,gq(X,H)),d&&(o={x:d[0],y:d[1]}))}W=zn(Rl(g.points),Rl(V,o))}else{var a=op(B,X,L,k,Y);if(B._19Q||(a=-a),k)V=to(V),V.x=X.getNodeRect(v).x,g.radius=a,W={x:V.x-a,y:V.y-a,width:2*a,height:2*a};else{var x=fm(V,o),F=_e(s,x),J={x:F,y:a},K={x:x-F,y:a},Q=T(o.y-V.y,o.x-V.x),w=g.mat=new ii(Q);if(g.orienAngle=Q,g.angle=o.x<V.x?Q+h:Q,g.rect={x:J.x,y:J.y,width:K.x-J.x,height:0},g.origin=V,J=w.tf(J),J.x+=V.x,J.y+=V.y,K=w.tf(K),K.x+=V.x,K.y+=V.y,$){var p={x:x,y:0};p=w.tf(p),p.x+=V.x,p.y+=V.y,W=Rl([V,J,K,p]),g.c1=V,g.c2=p}else W=Rl(J,K);V=J,o=K}}g.sourcePoint=V,g.targetPoint=o,L._lastSourcePoint=V,L._lastTargetPoint=o}var c=0;Z("edge.dash")&&(c=Z("edge.dash.width")||n);var A="square"===g.cap?.71:.5;qr(W,i(c*A,n*A+l+z),g.join),B._68o(W)}},getRotation:function(J,X,N){J=J||0;var b=this._78o;if(b){var V,_=b.angle,R=b.points,G=b._4O;if(_!=f)return X?b.orienAngle+J:_+J;if(G){var d=G.points;return V=d.size(),an[N]?V&&0===V%2?oi(d.get(V/2-1),d.get(V/2),X,J):J:kd[N]?oi(d.get(0),d.get(1),X,J):oi(d.get(V-2),d.get(V-1),X,J)}if(R)return V=R.size(),an[N]?V&&0===V%2?oi(R.get(V/2-1),R.get(V/2),X,J):J:kd[N]?oi(b.sourcePoint,V?R.get(0):b.targetPoint,X,J):oi(V?R.get(V-1):b.sourcePoint,b.targetPoint,X,J)}return J},getPosition:function(E,k,r,g,q){var f=this._78o;if(f){var M,w=f.type,a=f.points,W=f._4O,i=f.sourcePoint,J=f.targetPoint;if(!w)return f.looped?{x:i.x-f.radius+k,y:i.y+r}:(q&&i&&J&&(i.x>J.x||i.x===J.x&&i.y>J.y)&&(E=Tc[E],r=-r),M=Ji(E,f.rect,g),M.x+=k,M.y+=r,M=f.mat.tf(M),M.x+=f.origin.x,M.y+=f.origin.y,M);if(a){var M,G=a.size();if(an[E]){if(G){var u=G%2;if(0===u)return Rg(a.get(G/2-1),a.get(G/2),E,k,r,g,q);M=a.get((G-u)/2)}else M={x:(i.x+J.x)/2,y:(i.y+J.y)/2};return M=Ji(E,{x:M.x,y:M.y,width:0,height:0},g),M.x+=k,M.y+=r,M}return kd[E]?Rg(i,G?a.get(0):J,E,k,r,g,q):Rg(G?a.get(G-1):i,J,E,k,r,g,q)}if(W){var U=W.points,G=U.size();if(an[E]){var u=G%2;return 0===u?Rg(U.get(G/2-1),U.get(G/2),E,k,r,g,q):(M=U.get((G-u)/2),M=Ji(E,{x:M.x,y:M.y,width:0,height:0},g),M.x+=k,M.y+=r,M)}return kd[E]?Rg(U.get(0),U.get(1),E,k,r,g,q):Rg(U.get(G-2),U.get(G-1),E,k,r,g,q)}}return He},_42:function(k){this._78o&&oq.superClass._42.call(this,k)},drawPath:function(l,t){l.beginPath();var _=t.type,F=t.points,q=t.segments,U=t._4O;if(!_||F){var C=t.sourcePoint,V=C.x,o=C.y,T=t.targetPoint,A=T.x,z=T.y;if(_)if(q){var i=new ie({x:V,y:o});i.addAll(F),i.add({x:A,y:z}),uq(l,i,q)}else l.moveTo(V,o),F.each(function(y){l.lineTo(y.x,y.y)}),l.lineTo(A,z);else t.looped?l.arc(V,o,t.radius,0,c,!0):t.center?(l.moveTo(t.c1.x,t.c1.y),l.lineTo(V,o),l.lineTo(A,z),l.lineTo(t.c2.x,t.c2.y)):(l.moveTo(V,o),l.lineTo(A,z))}else U&&uq(l,U.points,U.segments)},_80o:function(P){var j=this,x=j.s,V=j._78o,C=V.width,N=V.selectWidth,$=V.borderWidth,K=V.color,L=P.lineJoin,w=P.lineCap,c=V.pattern;P.lineJoin=V.join,P.lineCap=V.cap,j.drawPath(Gb(P,c),V);var Y=x("edge.width.absolute");if(Y&&(P.save(),P.setTransform(1,0,0,1,0,0)),N&&(P.strokeStyle=V._97o,P.lineWidth=C+2*($+N),P.stroke()),$&&(P.strokeStyle=V.borderColor,P.lineWidth=C+2*$,P.stroke()),P.strokeStyle=K,P.lineWidth=C,P.stroke(),V.is3d&&Pl(P,K,V._67o,C,j.gv._zoom,V._66o),Y&&P.restore(),ze(P,c),x("edge.dash")){c=x("edge.dash.pattern");var a=Gb(P,c,j._2Q("edge.dash.offset"));a!==P&&j.drawPath(a,V),j._1Q(P,"edge",x("edge.dash.width")||C,c)}P.lineJoin=L,P.lineCap=w},_48O:function(){},_47O:function(){},_71o:function(_,h){var p=this,L=p._data;if(p._19Q=!0,!L.getEdgeGroup())return _?L.s("edge.gap"):0;var i,J=0,x=0,b=0;if(L.getEdgeGroup().getSiblings().each(function(U){U.each(function(m){if(p.gv.isVisible(m)&&m.s(ih)==h){var F=m.s("edge.gap");i?(x+=b/2+F/2,b=F):(i=m,b=F),m===L&&(J=x)}})}),_)return x-J+b;var w=J-x/2;return i&&L._40I!==i._40I&&(p._19Q=!1),w}});var Vl=function(f,s){Ec(Vl,this,[f,s])};zs(Vl,Wi,{_3O:function(){var b,U,h=this,w=h.s,B=h._data,t=h.gv;if(h._88I=f,B.isExpanded()&&B.eachChild(function($){var x=t.getBoundsForGroup($);x&&(U||(U=[]),U.push(x),b=zn(b,x))}),b){var C=t.getLabel(B),j=w("group.type");b=te(j,U,b),Ml(b,B,"group.padding",1);var S=h._88I={type:j,rect:b,_64o:b};if(!j&&C!=f){var o,i=h.labelInfo={label:C,color:w("group.title.color"),font:w("group.title.font"),align:w("group.title.align")},G=ye(i,C),u=G.width,M=G.height,A=w("group.title.align");u>b.width&&(b.width=u),i.rect={y:b.y-M,width:G.width,height:M},o=A===Pc?b.x:A===Lc?b.x+b.width-u:b.x+b.width/2-u/2,i.rect.x=o,S.titleRect={x:b.x,y:b.y-M,width:b.width,height:M+1},S.rect={x:b.x,y:b.y-M,width:b.width,height:b.height+M}}h._40O(S,w("group.border.width")/2)}else Vl.superClass._3O.call(h)},getPosition:function(p,f,o,S){var D=this._88I;if(D){var M=Ji(p,D.rect,S);return M.x+=f,M.y+=o,M}return Vl.superClass.getPosition.apply(this,arguments)},_24O:function(O,q){var r=this._88I;(!r||r.type||"label2"===O)&&Vl.superClass._24O.call(this,O,q)},_80o:function(D){var Z=this,p=Z._88I;if(p){var K=Z._data,j=Z.s,I=Z.gv,J=p.type,G=p.rect,f=p._64o,m=p.titleRect,o=Z.getBodyColor(),c=tr(j("group.image"),o),Y=j("group.image.stretch"),r=Z.getBodyColor("group.background"),i=tr(j("group.repeat.image"),o),V=j("group.gradient.pack"),W=j("group.gradient"),A=j("group.gradient.color"),s=j("group.depth");if(J){var d=j("group.border.pattern"),H=j("group.border.width"),e=D.lineJoin,E=D.lineCap;if(D.lineJoin=j("group.border.join"),D.lineCap=j("group.border.cap"),c){if(D.save(),Aj(D,J,G),D.clip(),Rm(D,c,Y,G.x,G.y,G.width,G.height,K,I,o),D.restore(),H>0){var B=Gb(D,d);Aj(B,J,G),D.lineWidth=H,D.strokeStyle=j("group.border.color"),D.stroke(),ze(D,d)}}else{var B=Gb(D,d);r||i||V?(Aj(D,J,G),V?Co(D,V):i?wg(D,i,o,null,K,I):hh(D,r,W,A,G),D.fill(),V&&D.restore(),D!==B&&Aj(B,J,G)):Aj(B,J,G),H>0&&(D.lineWidth=H,D.strokeStyle=j("group.border.color"),D.stroke()),ze(D,d),J===Xl&&ol(D,r,s,G)}D.lineJoin=e,D.lineCap=E}else if(c?Rm(D,c,Y,f.x,f.y,f.width,f.height,K,I,Z.getBodyColor()):(r||i)&&(i?wg(D,i,o,null,K,I):hh(D,r,W,A,f),Aj(D,Xl,f),D.fill(),ol(D,r,s,f)),m){var a=j("group.title.background");Hj(D,m.x,m.y,m.width,m.height,a),ol(D,a,s,m)}Z._39O(D,p)}else Vl.superClass._80o.call(Z,D)}});var _j=function($,D){Ec(_j,this,[$,D])};zs(_j,Wi,{_80o:function(){}});var Ig=function(L,B){Ec(Ig,this,[L,B])};zs(Ig,Wi,{_3O:function(){var o=this,W=o._data,I=o.s,V=o.gv,L=W.getPoints(),l=V.getBorderColor(W),b=l?I("border.width"):0,D=o.getSelectWidth(),t=I("shape.border.width"),x=W.getRect(),Q=V.getBodyColor(W),r=o._99o=L.isEmpty()?f:{rect:x,rotation:W.getRotation(),fillRule:I("shape.fill.rule")||"nonzero",scale:W.getScale(),position:W.p(),points:L,segments:W.getSegments(),bodyColor:Q,borderColor:l,borderWidth:b,_94o:I("shape.border.3d"),_95o:I("shape.border.3d.color"),_96o:I("shape.border.3d.accuracy"),_97o:D?I("select.color"):f,selectWidth:D,_53o:I("shape.background"),_27Q:tr(I("shape.repeat.image"),Q),shapeGradientPack:I("shape.gradient.pack"),_54o:t,_55o:I("shape.border.color"),shapeGradient:I("shape.gradient"),_59o:I("shape.gradient.color"),_60o:I("shape.border.pattern"),_61o:I("shape.border.cap"),_62o:I("shape.border.join")};if(r){var S=t*("square"===r._61o?.71:.5)+b+D/o.gv._zoom;if(S){var h=W.getScale();S*=i(1,i(u(h.x),u(h.y))),x=to(x),qr(x,S,r._62o)}o._68o(x)}},getPosition:function(M,j,L,I){var e=this._99o;if(e){var m=Ji(M,e.rect,I);return m.x+=j,m.y+=L,m}return He},_42:function(E){this._99o&&Ig.superClass._42.call(this,E)},_80o:function(k){var $,v=this,o=v.s,T=v._99o,y=T.position,h=T.scale,j=T.rotation,x=T.bodyColor,f=T.borderWidth,w=T.selectWidth,g=T._53o,t=T._27Q,_=T.shapeGradientPack,W=T._54o,Q=T.points,H=T.segments,P=v._data.isClosePath(),C=T.fillRule;k.save(),uc(k,y.x,y.y),Kh(k,j),Vc(k,h.x,h.y),uc(k,-y.x,-y.y);var e=T._60o,E=Gb(k,e),z=k.lineJoin,A=k.lineCap;k.lineJoin=T._62o,k.lineCap=T._61o,g||t||_?(uq(k,Q,H,P),_?Co(k,_):t?wg(k,t,x,null,v._data,v.gv):($=x?x:g,hh(k,$,T.shapeGradient,T._59o,T.rect)),k.fill(C),_&&k.restore(),E!==k&&uq(E,Q,H,P)):uq(E,Q,H,P);var K=o("shape.border.width.absolute");if(K&&(k.save(),k.setTransform(1,0,0,1,0,0)),w&&(k.strokeStyle=T._97o,k.lineWidth=W+2*(f+w),k.stroke()),f&&(k.strokeStyle=T.borderColor,k.lineWidth=W+2*f,k.stroke()),W&&($=T._55o,!g&&x&&($=x),k.strokeStyle=$,k.lineWidth=W,k.stroke(),T._94o&&Pl(k,$,T._95o,W,v.gv._zoom,T._96o)),K&&k.restore(),ze(k,e),o("shape.dash")){var d=o("shape.dash.width")||W;if(d>0){e=o("shape.dash.pattern");var E=Gb(k,e,v._2Q("shape.dash.offset"));E!==k&&uq(E,Q,H,P),v._1Q(k,"shape",d,e)}}k.lineJoin=z,k.lineCap=A,k.restore()},_48O:function(){},_47O:function(){}});var Jf=function(a,H){Ec(Jf,this,[a,H])};zs(Jf,Ig,{getRotation:function(w,Z,j){w=w||0;var r=this._data.getPoints(),u=r.size();return u>1?an[j]?u&&0===u%2?oi(r.get(u/2-1),r.get(u/2),Z,w):w:kd[j]?oi(r.get(0),r.get(1),Z,w):oi(r.get(u-2),r.get(u-1),Z,w):w},getPosition:function(R,P,H,y,M){var E=this._data.getPoints(),Q=E.size();if(Q>1){if(an[R]){var W=Q%2;if(0===W)return Rg(E.get(Q/2-1),E.get(Q/2),R,P,H,y,M);var b=E.get((Q-W)/2),S={x:b.x,y:b.y,width:0,height:0};return b=Ji(R,S,y),b.x+=P,b.y+=H,b}return kd[R]?Rg(E.get(0),E.get(1),R,P,H,y,M):Rg(E.get(Q-2),E.get(Q-1),R,P,H,y,M)}return He}});var Or=function(H,T){Ec(Or,this,[H,T])};zs(Or,Wi,{_3O:function(){var Q=this;Or.superClass._3O.call(Q);var e=Q.s,t=Q._83o;Q._82o=t.img||t.shape?f:{background:Q.getBodyColor("grid.background"),depth:e("grid.depth"),rect:t.rect,_88o:e("grid.cell.depth"),cellBorderColor:e("grid.cell.border.color"),_89o:e("grid.row.count"),_90o:e("grid.column.count"),block:e("grid.block"),_91o:e("grid.block.color"),_92o:e("grid.block.padding"),_93o:e("grid.block.width")}},_80o:function(M){var X=this,b=X._82o;if(!b)return Or.superClass._80o.call(X,M),void 0;var S,N,q=X._data,x=b.background,z=b.rect,F=b.block,$=b._91o,l=b._92o,c=b._93o,s=b._88o,C=b.cellBorderColor,L=b._89o,Y=b._90o;if(x)if(Hj(M,z.x,z.y,z.width,z.height,x),ol(M,x,b.depth,z),s)for(S=0;L>S;S++)for(N=0;Y>N;N++)z=q.getCellRect(S,N),z&&ol(M,x,s,z);else if(C){for(M.beginPath(),S=0;L>S;S++)for(N=0;Y>N;N++)z=q.getCellRect(S,N),z&&M.rect(z.x,z.y,z.width,z.height);M.strokeStyle=C,M.lineWidth=1,M.stroke()}if("h"===F)for(S=0;L>S;S++)z=zn(q.getCellRect(S,0),q.getCellRect(S,Y-1)),mc(z,l),qj(M,$,z.x,z.y,z.width,z.height,c);else if("v"===F)for(N=0;Y>N;N++)z=zn(q.getCellRect(0,N),q.getCellRect(L-1,N)),mc(z,l),qj(M,$,z.x,z.y,z.width,z.height,c);X._39O(M,X._83o)}});var Dn=function(J,E){Ec(Dn,this,[J,E])};zs(Dn,Wi,{_checkEmptyRect:!1,_81o:function(){var Q=this._data,Y=Dn.superClass._81o.call(this),q=Q.s("text");if(q!=f){var o,s,S=Q.s("text.font"),j=Q.s("text.align"),K=Q.s("text.vAlign"),g=Q.getRotation(),b=tk(S,q),O=b.width,u=b.height;"left"===j?o=-Q.getWidth()/2:"center"===j?o=-b.width/2:"right"===j&&(o=Q.getWidth()/2-b.width),"top"===K?s=-Q.getHeight()/2:"middle"===K?s=-b.height/2:"bottom"===K&&(s=Q.getHeight()/2-b.height);var G;if(g){var l=new ii(g);G=Rl([l.tf(o,s),l.tf(o+O,s),l.tf(o+O,s+u),l.tf(o,s+u)])}else G={x:o,y:s,width:O,height:u};G.x+=Q.getPosition().x,G.y+=Q.getPosition().y,Y=zn(Y,G)}return Y}});var Im=Ll.Interactor=function(e){this.gv=this._graphView=e};kb("Interactor",L,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(C){this.gv.fi(C)},setCursor:function(G){Z||(this.getView().style.cursor=G)},startDragging:function(F){var h=this;h._lastClientPoint=ss(F),h._lastLogicalPoint=h.gv.lp(F),Td(h,F)},clearDragging:function(){var X=this;X._lastClientPoint=X._lastLogicalPoint=X._logicalPoint=f},autoScroll:function(P){return this.gv.autoScroll(P,this._lastClientPoint)}});var Yq=Ll.DefaultInteractor=function(P){Ec(Yq,this,[P])};kb("DefaultInteractor",Im,{handle_mousedown:function(h){Wf(h);var Y=this,A=Y.gv,g=A.getDataAt(h);!A.setFocus(h)||A._editing||A._scrolling||(Qd(h)?A.handleDoubleClick(h,g):A.handleClick(h,g),!xn()&&g||!A.isPannable()||!fr(h)||xl(h)||(Y._tx=A.tx(),Y._ty=A.ty(),Y.startDragging(h)))},handleWindowMouseUp:function(c){var g=this,U=g.gv;U._panning&&(delete U._panning,U.onPanEnded(),g.fi({kind:"endPan",event:c})),delete g._tx,delete g._ty,g.clearDragging()},handle_mousemove:function(E){var k=this,h=k.gv;k._hoverTimer&&(J(k._hoverTimer),delete k._hoverTimer),k._hoverTimer=U(function(){k.fi({kind:"hover",event:E}),J(k._hoverTimer),delete k._hoverTimer},h.getHoverDelay()||800)},handle_touchmove:function(s){this.handle_mousemove(s)},handleWindowMouseMove:function(i){var X=this,e=X.gv,f=X._lastClientPoint;X.fi({kind:e._panning?"betweenPan":"beginPan",event:i}),e._panning=1,e.setTranslate(X._tx+i.clientX-f.x,X._ty+i.clientY-f.y)},handle_mousewheel:function(W){this.gv.handleScroll(W,W.wheelDelta)},handle_DOMMouseScroll:function(N){2===N.axis&&this.gv.handleScroll(N,-N.detail)},handle_keydown:function(e){this.gv.handleKeyDown(e)}});var qm=Ll.SelectInteractor=function(X){Ec(qm,this,[X])};kb("SelectInteractor",Im,{_42:function(){var E=this,p=E.gv,j=p.getZoom(),W=E.mark,a=E.div;a||(a=E.div=mp(),Bb(E.getView(),a));var O={};O.x=W.x*j+p.tx(),O.y=W.y*j+p.ty(),O.width=W.width*j,O.height=W.height*j,kc(a,O),this.intersects()?(a.style.border="",a.style.background=p.getRectSelectBackground()):(a.style.background="",a.style.border="1px solid "+p.getRectSelectBorderColor())},handle_mousedown:function(Q){var T=this,p=T.gv;if(T._57I=f,!(p._editing||p._scrolling||xn())){var w=p.getDataAt(Q),O=p.sm();w?xl(Q)?O.co(w)?O.rs(w):O.as(w):O.co(w)||O.ss(w):xl(Q)||!p.isPannable()?fr(Q)&&(xl(Q)||O.cs(),p.isRectSelectable()&&(T.startDragging(Q),p._77O=1)):fr(Q)&&(T._57I=ss(Q))}},handle_mouseup:function(j){var T=this,i=T._57I;i&&(fm(i,ss(j))<=1&&T.gv.sm().cs(),T._57I=f)},handleWindowMouseUp:function(s){this.clear(s)},handleWindowMouseMove:function(c){var N=this,P=N.gv;N._logicalPoint=P.lp(c),N.mark?(N.fi({kind:"betweenRectSelect",event:c}),N.autoScroll(c),N.redraw()):N.fi({kind:"beginRectSelect",event:c}),N.mark=Rl(N._lastLogicalPoint,N._logicalPoint),N.redraw()},intersects:function(){var W=this,M=W._lastLogicalPoint,j=W._logicalPoint;return M.x>j.x||M.y>j.y},clear:function(s){var I=this,m=I.gv,O=I.mark;if(I._57I=f,I._lastLogicalPoint){if(O){if(0!==O.width&&0!==O.height){var F=m.getDatasInRect(O,I.intersects());if(!F.isEmpty()){var d=m.sm(),B=d.toSelection();F.each(function(C){d.co(C)?B.remove(C):B.add(C)}),d.ss(B)}}vo(I.div),delete I.div,delete I.mark,I.redraw(),I.fi({kind:"endRectSelect",event:s}),m.onRectSelectEnded()}I.clearDragging(),delete m._77O}},redraw:function(){var C=this;C._draw||(C._draw=1,U(function(){C.mark&&C._42(),delete C._draw},16))}});var vq=Ll.MoveInteractor=function(X){Ec(vq,this,[X])};kb("MoveInteractor",Im,{handle_mousedown:function(I){var s=this,O=s.gv;if(fr(I)&&!O._editing&&!O._scrolling&&!xn()){var t=O.getSelectedDataAt(I);t?(s._data=t,O.handleMouseDown&&O.handleMouseDown(I,t),s.startDragging(I),O.isMovable(t)&&(O._moving=1)):O._focusData=f}},handleWindowMouseUp:function($){var _=this,S=_.gv;S.handleMouseUp&&S.handleMouseUp($,_._data),_.clear($)},handleWindowMouseMove:function(y){var X=this,b=X._data,g=X.gv,_=g.getDataModel(),M=_.getHistoryManager();if((!g._93O||!g._93O(y,b))&&g._moving){X._logicalPoint||X.fi({kind:"prepareMove",event:y});var n=X._logicalPoint?"betweenMove":"beginMove",s={kind:n,event:y},Z=X._logicalPoint=g.lp(y);M&&"beginMove"===n&&M.beginInteraction();var p=X._calcShift(n,y),f=p.x,V=p.y,I=X.gv.getMoveMode(y,b);I&&("x"===I?V=0:"y"===I?f=0:"xy"!==I&&(f=V=0)),g.moveSelection(f,V),X._lastLogicalPoint=Z,X.autoScroll(y),X.fi(s)}},_calcShift:function(){var F=this,U=F._logicalPoint,A=F._lastLogicalPoint,v=U.x-A.x,k=U.y-A.y;return{x:v,y:k}},clear:function(b){var R=this,A=R.gv,H=A.getDataModel(),i=H.getHistoryManager();R._lastLogicalPoint&&(R._lastLogicalPoint=R._data=A._moving=f,R._logicalPoint&&(R.fi({kind:"endMove",event:b}),A.onMoveEnded(),i&&i.endInteraction()),R.clearDragging())}});var ho=Ll.ScrollBarInteractor=function(r){Ec(ho,this,[r])};kb("ScrollBarInteractor",Im,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(s){var _=this.gv.getViewRect();return this._41o()&&(_.x+_.width-this.gv.lp(s).x)*this.gv.getZoom()<Yc},isH:function(w){var Y=this.gv.getViewRect();return this._40o()&&(Y.y+Y.height-this.gv.lp(w).y)*this.gv.getZoom()<Yc},handle_mousemove:function(L){this.handle_touchmove(L)},handle_touchmove:function(S){if(!Pk&&fr(S)){var K=this,A=K.isV(S),y=K.isH(S);(A||y)&&K.gv.showScrollBar(),K.gv._scrolling=A||y}},handleWindowMouseUp:function(J){this.handleWindowTouchEnd(J)},handleWindowTouchEnd:function(B){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=f,this.fi({kind:"endScroll",event:B})},handle_mousedown:function(p){this.handle_touchstart(p)},handle_touchstart:function(e){var E=this;if(E.gv.setFocus(e),Wf(e),E.handle_touchmove(e),!(ti(e)>1)&&E.gv._scrolling){E._cp=ss(e),E._tx=E.gv.tx(),E._ty=E.gv.ty();var c=E.isV(e);E._state=c?"vScroll":"hScroll",Td(E,e),E.fi({kind:"beginScroll",event:e})}},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(A){var R=ss(A),C=this.gv.getViewRect(),c=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-R.y)*c.height/C.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-R.x)*c.width/C.width),this.fi({kind:"betweenScroll",event:A})}});var Pe=Ll.TouchInteractor=function(F,S){S=S||{},S.selectable===t&&(S.selectable=!0),S.movable===t&&(S.movable=!0),S.pannable===t&&(S.pannable=!0),S.pinchable===t&&(S.pinchable=!0),S.editable===t&&(S.editable=!0),this.params=S,Ec(Pe,this,[F])};kb("TouchInteractor",Im,{ms_edit:1,setUp:function(){var d=this;Pe.superClass.setUp.call(d),Z&&d.params.editable&&d.gv.setEditInteractor(d)},tearDown:function(){var h=this;Pe.superClass.tearDown.call(h),Z&&h.params.editable&&h.gv.setEditInteractor(f)},clear:function(Y){var s=this,T=s.gv,E=T.dm().getHistoryManager();T._moving&&(s.fi({kind:"endMove",event:Y}),delete T._moving,T.onMoveEnded(),E&&E.endInteraction()),T._panning&&(s.fi({kind:"endPan",event:Y}),delete T._panning,T.onPanEnded()),T._pinching&&(s.fi({kind:"endPinch",event:Y}),delete T._pinching,T.onPinchEnded()),T._editing&&(s._46O(Y),s._77I=s._node=s._edge=s._shape=s._rect=s._89I=s._index=T._editing=f),s._moving=s._panning=s._pinching=s._editing=s._57I=s._data=s._beginHistory=f,s.clearDragging()},handle_touchstart:function(u){var Y=this;if(!Y.gv._editing){Wf(u),Y._57I=f;var G=Y.params,j=Y.gv,z=j.sm(),e=j.getDataAt(u),A=ti(u);if(1===A)Qd(u)?j.handleDoubleClick(u,e):(j.handleClick(u,e),e&&(j.handleMouseDown&&j.handleMouseDown(u,e),Y._data=e)),G.selectable||(e=f),e?(z.co(e)||z.ss(e),G.editable&&j.isEditable(e)&&Y._79I(u,e,!0)?(Y._editing=1,Y.startDragging(u)):G.movable&&j.isMovable(e)&&(Y._moving=1,Y.startDragging(u))):(Y._57I=ss(u),G.pannable&&j.isPannable()&&(Y._panning=1,Y.startDragging(u),Y._translate={x:j.tx(),y:j.ty()}));else if(G.pinchable&&2===A){Y._pinching=1,Y.startDragging(u);var W=j.getView(),p=j.getZoom(),g=W.getBoundingClientRect(),H=u.touches[0],l=u.touches[1],J={x:(H.clientX+l.clientX)/2-g.left,y:(H.clientY+l.clientY)/2-g.top};J.x-=j.tx(),J.y-=j.ty(),J.x/=p,J.y/=p,Y._p=J,Y._d=Ah(u)}}},handle_touchend:function(Y){var r=this,x=r.gv,D=r._57I,C=r._data;D&&(fm(D,ss(Y))<=1&&x.sm().cs(),r._57I=f),C&&x.handleMouseUp&&x.handleMouseUp(Y,C)},handleWindowTouchEnd:function(w){this.clear(w)},handleWindowTouchMove:function(l){var E=this,w=E.gv,m=w.dm().getHistoryManager(),j=ti(l);if(1===j){if(E._editing&&(m&&!E._beginHistory&&(E._beginHistory=1,m.beginInteraction()),w._editing=1,E._78I(l)),E._moving)m&&!E._beginHistory&&(E._beginHistory=1,m.beginInteraction()),E.handleMove(l);else if(E._panning){var q=ss(l);w.setTranslate(E._translate.x+q.x-E._lastClientPoint.x,E._translate.y+q.y-E._lastClientPoint.y),E.fi({kind:w._panning?"betweenPan":"beginPan",event:l}),w._panning=1}}else if(2===j&&E._pinching){var _=Ah(l);w.handlePinch(E._p,_,E._d),E._d=_,E.fi({kind:w._pinching?"betweenPinch":"beginPinch",event:l}),w._pinching=1}},handleMove:function(t){var V=this,K=V.gv,h=K.lp(t);K._93O&&K._93O(t,V._data)||(K.moveSelection(h.x-V._lastLogicalPoint.x,h.y-V._lastLogicalPoint.y),V._lastLogicalPoint=h,V.autoScroll(t),V.fi({kind:K._moving?"betweenMove":"beginMove",event:t}),K._moving=1)}});var A=D.ht,Yk=A.graph._editor={Math:{},Guide:{}};Yk.getStyle=function(H){var r,u=Yk.StyleMap;return u&&(r=u[H],r!==t)?r:Yk.DefaultStyleMap[H]},Yk.setStyle=function(E,I){var L=Yk.StyleMap;L||(L=Yk.StyleMap={}),L[E]=I},Yk.inEdit=function(I){return I._inXEdit===!0},Yk.startEdit=function(U){U._inXEdit=!0,Yk.Inject.doInject(U)},Yk._46O=function(U){U._inXEdit=!1,Yk.Inject.undoInject(U)},Yk.toScreenPosition=function(A,O){var b=A.tx(),U=A.ty(),G=A._zoom;return new Yk.Math.Vector2(O.x*G+b,O.y*G+U)},Yk.checkHit=function(T,r,o){return T.distanceTo(r)<o?!0:!1},Yk.toWorldPosition=function(c,R){var l=c.tx(),X=c.ty(),Z=c._zoom;return{x:(R.x-l)/Z,y:(R.y-X)/Z}},Yk.log=function(){};var Pm=Yk.Inject={_modules:[]};Pm.registAsModule=function(A,x){var w={},I={};for(var V in A){var J=x.prototype[V];w[V]=J
}A.getBackup=function(h){return w[h]},A.getBackups=function(){return w},I.doInject=function(){for(var z in A)"getBackup"!==z&&(x.prototype[z]=A[z])},I.undoInject=function(){for(var u in A)"getBackup"!==u&&(x.prototype[u]=w[u])},Pm._modules.push(I)},Pm.doInject=function(a){for(var j,Q=Pm._modules,K=0,r=Q.length;r>K;K++)j=Q[K],j.doInject(a)},Pm.undoInject=function(w){for(var N,l=Pm._modules,$=0,d=l.length;d>$;$++)N=l[$],N.undoInject(w)};var Im=A.graph.EditInteractor=function(C){var e=this,w=r.createElement("canvas");w.className="editCanvas",w.style.position="absolute",e._styleMap={},e._canvas=w,e._context=w.getContext("2d"),Im.superClass.constructor.call(e,C),e.setAntialias(!1),e._subModules=[new Yk.Anchor(e),new Yk.Rect(e),new Yk.Curve(e),new Yk.MoveHelper(e)],e._gridGuide=new Yk.Guide.Grid(e),e._rectGuide=new Yk.Guide.Rect(e)},Sg=Im;A.Default.def(Im,A.graph.Interactor,{ms_edit:1,ms_fire:1}),L.defineProperties(Im.prototype,{editDetail:{get:function(){var j=!!this._editDetail;return j},set:function(G){var u=this,p=u._editDetail;p!==G&&(u._editDetail=G,u.gv._editing=G,u.fp("editDetail",p,G),u.fp("pointsEditingMode",p,G))}},gvEditing:{get:function(){return this.gv._editing},set:function(g){(!this._editDetail||g)&&(this.gv._editing=g,g||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(B){this._editing=B,this.gvEditing=B}},pointsEditingMode:{get:function(){return this.editDetail},set:function(X){var M=this;M.editDetail!==X&&(X?M._tryEnterEditDetailMode():M._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var O=this._gridEnabled;if(!O)return!1;var o=this.gv;return o?o._zoom<this.getStyle("gridZoomThreshold")?!1:!0:!0},set:function(P){P!==this._gridEnabled&&(this._gridEnabled=P,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(E){E!==this._agEnabled&&(this._agEnabled=E,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}}}),Im.prototype.getSubModule=function(e){var y,U,o,d=this._subModules;for(U=0,o=d.length;o>U;U++)if(y=d[U],y.catalog===e)return y},Im.prototype.invokeSubModule=function(W,h){var H=this,$=H._subModules;if($)for(var A,N,c,u=Array.prototype.slice.call(arguments,2),r=0,_=$.length;_>r;r++)if(A=$[r],N=A[W],N&&(c=N.apply(A,u),c!=t&&h))return A},Im.prototype.invokeSubModuleInverse=function(s,i){var S=this,y=S._subModules;if(y)for(var B,q,g,w=Array.prototype.slice.call(arguments,2),p=y.length-1;p>=0;p--)if(B=y[p],q=B[s],q&&(g=q.apply(B,w),g!=t&&i))return B},Im.prototype.setUp=function(){Yk.log("setUp");var b=this,V=b.gv,G=V.getView(),L=b._canvas;Im.superClass.setUp.call(b),V.setEditInteractor(b),V._79O?G.insertBefore(L,V._79O):G.appendChild(L),Yk.startEdit(V),b.invokeSubModule("setUp"),V.dm().mm(b._onDataModelChanged,b),V.dm().md(b._onDataPropertyChanged,b)},Im.prototype.tearDown=function(){Yk.log("tearDown");var q=this,i=q.gv,j=i.getView();Im.superClass.tearDown.call(q),i.dm().umm(q._onDataModelChanged),i.dm().umd(q._onDataPropertyChanged),i.setEditInteractor(null),j.removeChild(q._canvas),Yk._46O(i),q.invokeSubModule("tearDown")},Im.prototype._onDataModelChanged=function(n){var k=this;("clear"===n.kind||"remove"===n.kind&&k.editDetail&&n.data===k.getSubModule("Curve").target)&&(k.editDetail=!1,k._42())},Im.prototype._onDataPropertyChanged=function(P){var U=this;if(U.editDetail){var J=U.getSubModule("Curve"),R=P.data;R===J.target&&(R._writing||J._handleDataChanged())}},Im.prototype.clear=function(){Yk.log("clear")},Im.prototype.redraw=function(){this._42()},Im.prototype._42=function(){var m=this;m._drawTimer||(m._drawTimer=U(function(){delete m._drawTimer,m.drawImpl()},0))},Im.prototype.drawImpl=function(){var n;for(n in{_42:!0})break;return function(){var b=this,E=b._canvas,R=b.gv,G=R.getWidth(),P=R.getHeight(),X=b._context,t=A.Default.getInternal();(E.width!==G||E.height!==P)&&t.setCanvas(E,G,P),X.clearRect(0,0,E.width,E.height);var a=b._getValidSelection();X.save();var K=A.Default.devicePixelRatio;X.scale(K,K),b._gridGuide._42(),b._rectGuide._42(),b.invokeSubModuleInverse(n,!1,X,R,a),X.restore()}}(),Im.prototype._getValidSelection=function(){var e=this,H=e.gv,Q=H.sm().getSelection(),V=[];return Q.each(function(i){H.isVisible(i)&&H.isSelectable(i)&&H.isEditable(i)&&V.push(i)}),V},Im.prototype.setAntialias=function(J){for(var T,$=this._context,t=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],m=0,o=t.length;o>m&&(T=t[m],!$[T]);m++);$[T]=J},Im.prototype.handle_touchmove=function(a){return this.handle_mousemove(a)},Im.prototype.handle_mousemove=function(D){if(!A.Default.isDragging()){var y=this;(y.editDetail||!xn())&&(y.gvEditing=!1,y._checkEdit(D)&&(y.gvEditing=!0))}},Im.prototype.handle_touchstart=function(c){return this.handle_mousedown(c)},Im.prototype.handle_mousedown=function(Y){Wf(Y);var d=this;if(d.editDetail||!xn()){if(Qd(Y)){if(d.editDetail){if(d._tryQuitEditDetailMode(Y))return}else if(d._tryEnterEditDetailMode())return;if(d.invokeSubModule("handleDoubleClick",!0,Y))return}var v=d._checkEdit(Y);if(v){d._downPosition=d._getLogicalPoint(Y);var V=d.gv.dm(),Z=V.getHistoryManager();Z&&Z.beginInteraction(),v.startEdit(d,Y),d.editing=!0}}},Im.prototype._checkEdit=function(L){var M=this,Z=M.gv,W=M._getLogicalPoint(L),C=M.invokeSubModule("check",!0,Z,L,W)||null;return M._editMod=C,C},Im.prototype.handleWindowTouchMove=function(S){return this.handleWindowMouseMove(S)},Im.prototype.handleWindowMouseMove=function($){var u=this,W=u._downPosition;if(W){var k=u._getLogicalPoint($);if(k.distanceTo(W)<u.getStyle("moveSensitivity"))return;delete u._downPosition}var N=u._editMod;N&&N.handleEdit(u.gv,$)},Im.prototype._getLogicalPoint=function(a){var p=this,J=A.Default.getLogicalPoint(a,p._canvas);return new Yk.Math.Vector2(J)},Im.prototype.handleWindowTouchEnd=function(C){return this.handleWindowMouseUp(C)},Im.prototype.handleWindowMouseUp=function(){var K;for(K in{_46O:!0})break;return function(){var Q=this;Q.editing=!1,Q.setCursor("default"),Q.invokeSubModule(K,!1),Q._42();var A=Q.gv.dm(),O=A.getHistoryManager();O&&O.endInteraction()}}(),Im.prototype.handle_mousewheel=function(J){var X=this;Wf(J),X.invokeSubModule("preHandleScroll",!0)||X.gv.handleScroll(J,J.wheelDelta)},Im.prototype.handleDelete=function(){var V=this;return V.editDetail?(V.invokeSubModule("handleDelete",!0),V._42(),void 0):(V.gv.removeSelection(),void 0)},Im.prototype.handle_keydown=function(O){var U=this;if((O.metaKey||O.ctrlKey)&&U._42(),xn(O)&&!U.editing)return U.gvEditing=!1,U.setCursor("default"),U._42(),void 0;var G=Sj(O);return U.editDetail?((G||Aq(O))&&(U.editDetail=!1,U._42()),U.invokeSubModule("handle_keydown",!0,O),void 0):(G&&U._tryEnterEditDetailMode(),void 0)},Im.prototype.handle_keyup=function(j){this.invokeSubModule("handle_keyup",!0,j)},Im.prototype._tryEnterEditDetailMode=function(){var C=this;return!C.editDetail&&C.invokeSubModule("canEnterEditDetailMode",!0)&&1===C._getValidSelection().length?(C.editDetail=!0,C._42(),!0):void 0},Im.prototype._tryQuitEditDetailMode=function(w){var R=this;if(R.editDetail){var G=R.gv,L=R.getSubModule("Curve").target;return w&&G.getDataAt(w)===L?void 0:(R.editDetail=!1,R._42(),!0)}},Im.prototype.setStyle=function(V,J,I){var b=this;I?Yk.setStyle(V,J):b._styleMap[V]=J,b._42()},Im.prototype.getStyle=function(w){var M=this,R=M._styleMap[w];return R!==t?R:Yk.getStyle(w)};var sd=Yk.Group=function(r){var K=this;K._entities=r,K._64O=0,K._position={x:0,y:0},K._scale={x:1,y:1},K._anchor={x:.5,y:.5},K._anchor2={x:.5,y:.5}};sd.prototype={},sd.prototype.constructor=sd;var _n=null;sd.findOrCreateGroup=function(_){if(_n&&_n.checkIsMe(_))return _n;var U=new Yk.Group(_);return U.getKeyOb()?(_n=U,U):void 0},sd.prototype.checkIsMe=function(S){var J=this._entities;if(J.length!==S.length)return!1;var G,W={},P=S.length;for(G=0;P>G;G++)W[S[G]._id]=!0;for(G=0;P>G;G++)if(!W[J[G]._id])return!1;return!0},sd.prototype.getRotation=function(){return this._64O},sd.prototype.getPosition=function(){return this._position},sd.prototype.getAnchor=function(){return this._anchor},sd.prototype.getWidth=function(){return this._width},sd.prototype.getScale=function(){return this._scale},sd.prototype.getSize=function(){return{width:this._width,height:this._height}},sd.prototype.getHeight=function(){return this._height},sd.prototype.getKeyOb=function(){for(var Y=this._entities,E=Y.length-1;E>=0;E--){var c=Y[E];if(this.isNode(c))return c}},sd.prototype.getAnchor2=function(){var D=this,H=D.getKeyOb();if(!H)return D._anchor;var B=D._anchor2,i=H.getMatrix();return i.tf({x:H.getWidth()*(B.x-H.getAnchor().x),y:H.getHeight()*(B.y-H.getAnchor().y)})},sd.prototype.setAnchor2=function(W,w){var u=this,D=u.getKeyOb();if(D){var Q,B=D.getMatrix();Q="number"==typeof W?{x:W,y:w}:W;var n=B.tfi(Q);u._anchor2={x:D.getAnchor().x+n.x/D.getWidth(),y:D.getAnchor().y+n.y/D.getHeight()}}},sd.prototype.setRotation=function(){},sd.prototype.addRotation=function(L){var I=this,D=I._anchor2;I._entities.forEach(function(G){if(I.isNode(G)){var Q=G.getAnchor(),M=G.getMatrix(),W=M.tf({x:G.getWidth()*(D.x-Q.x),y:G.getHeight()*(D.y-Q.y)}),$=new Yk.Math.Matrix2;$.set(M.a,M.b,M.c,M.d,M.tx,M.ty),$.translate(-W.x,-W.y),$.rotate(L),$.translate(W.x,W.y);var f=Math.sign(G.getScale().x);G.setRotation(T($.b*f,$.a*f)),G.setPosition($.tx,$.ty)}})},sd.prototype.setPosition=function(o){var G,A,h,V,C=this,H=C._position,Z=o.x-H.x,F=o.y-H.y,L=C._entities;for(A=0,h=L.length;h>A;A++)G=L[A],On(G)&&(V=G.getPosition(),G.setPosition(V.x+Z,V.y+F));C._position=o},sd.prototype.setScale=function(T,f){var D=this,R=T/D._scale.x,L=f/D._scale.y;D._adjustChildScaleOrSize(R,L,"size"),D._scale={x:T,y:f}},sd.prototype.getRect=function(){var M=this,C=M._position,s=M._width,G=M._height;return{x:C.x-s/2,y:C.y-G/2,width:s,height:G}},sd.prototype.setSize=function(l,i){var N=this,l=Math.max(1,l),i=Math.max(1,i),S=l/N._width,g=i/N._height;N._adjustChildScaleOrSize(S,g,"size"),N._width=l,N._height=i},sd.prototype._adjustChildScaleOrSize=function(Z,q,g){var k,r,W,I,y,m,B,A,v,J,D,j,$,X,O=this,w=O._position,Y=O._entities,b=new Yk.Math.Matrix2;for(r=0,W=Y.length;W>r;r++)if(k=Y[r],O.isNode(k)){if(I=k.getPosition(),y=k.getRotation(),m=k.getWidth(),B=k.getHeight(),A=k.getScale(),D=A.x*m,j=A.y*B,b.identity().scale(D,j).rotate(y).translate(I.x,I.y).translate(-w.x,-w.y).rotate(-O._64O),y=T(b.b*Math.sign(D),b.a*Math.sign(D)),b.scale(Z,q),v=Math.cos(y),J=Math.sin(y),Math.abs(v)<.001?($=b.b/J,X=-b.c/J):($=b.a/v,X=b.d/v),"scale"===g)k.setScale($/m,X/B);else if("size"===g){var d=$/A.x,o=X/A.y;k.setScale(yk($)*Math.abs(A.x),yk(X)*Math.abs(A.y)),k.setSize(Math.max(.1,Math.abs(d)),Math.max(.1,Math.abs(o)))}b.rotate(O._64O).translate(w.x,w.y),k.setPosition(b.tx,b.ty)}},sd.prototype.getMatrix=function(){var f=this,G=f._position,l=A.Default.getInternal(),T=f._scale;return new l.Mat(f._64O,G.x,G.y,T.x,T.y)},sd.prototype.getCorners=function(){var m=this,w=m._width,e=m._height,r=m._anchor,X=-w*r.x,s=-e*r.y,G=m.getMatrix();return[G.tf(X,s),G.tf(X,s+e),G.tf(X+w,s+e),G.tf(X+w,s)]},sd.prototype.calcInfo=function(){var x,y,t,m,j,v,h=this,z=[],R=h._entities,Z=h._64O;for(m=0,j=R.length;j>m;m++)v=R[m],h.isNode(v)&&v.getCorners&&z.push.apply(z,v.getCorners());if(z.length){var U=Math.cos(-Z),g=Math.sin(-Z),L=1/0,l=-1/0,q=1/0,M=-1/0;for(m=0,j=z.length;j>m;m++)t=z[m],x=t.x,y=t.y,t.x=U*x-g*y,t.y=g*x+U*y,L=Math.min(L,t.x),l=Math.max(l,t.x),q=Math.min(q,t.y),M=Math.max(M,t.y);h._width=(l-L)/h._scale.x,h._height=(M-q)/h._scale.y,U=Math.cos(Z),g=Math.sin(Z);var i=h._anchor;x=L+(l-L)*i.x,y=q+(M-q)*i.y,h._position={x:U*x-g*y,y:g*x+U*y}}},sd.prototype.isNode=function(P){return On(P)?P instanceof A.Group&&P.isExpanded()?!1:!0:!1},sd.prototype._42=function(C,r,w){var T,h,e,B,o,O,Z,n=this,J=n._entities,W=n.getKeyOb();for(T=0,h=J.length;h>T;T++)e=J[T],n.isNode(e)&&(O=e.getRect(),B=Yk.toScreenPosition(w,{x:O.x,y:O.y}),o=Yk.toScreenPosition(w,{x:O.x+O.width,y:O.y+O.height}),Z={min:B,max:o},e===W&&(Z.isKeyOb=!0),Yk.Icons.DrawIcon(C,r,Yk.Icons.GroupSubEntityRect,Z))};var am=Yk.Guide.Grid=function(J){var m=this;m._interactor=J,m._alignmentGuideId=0,m._xAlignmentGuide=[],m._yAlignmentGuide=[]};am.prototype={},am.prototype.constructor=am,L.defineProperties(am.prototype,{gridBlockSize:{get:function(){var Z=this;return Z._gridBlockSize||Z._interactor.getStyle("gridBlockSize")},set:function($){this._gridBlockSize=$,this._interactor._42()}},gridThickLinesEvery:{get:function(){var r=this;return r._gridThickLinesEvery||r._interactor.getStyle("gridThickLinesEvery")},set:function(V){this._gridThickLinesEvery=V,this._interactor._42()}},gridEnabled:{get:function(){var z=this,q=z._interactor;return q.gridEnabled&&z.isValidGrid()}}}),am.prototype._42=function(){var z=this,K=z._interactor;z.gridEnabled&&z.drawGrid(),K.alignmentGuideEnabled&&z.drawAlignmentGuide()},am.prototype.makeMatrix=function(){var S=this,J=S._interactor.getStyle("gridAngle"),A=S._interactor.getStyle("gridRotation"),O=new Yk.Math.Matrix2,x=Math.sin(J),L=Math.cos(J);return O.set(1,0,L,x,0,0),O.rotate(A),O},am.prototype.isValidGrid=function(){var M=this,v=Math.PI,f=M._interactor.getStyle("gridAngle"),e=Math.abs(180*(f%v/v)),Z=1-1e-8;return Z>e||e>180-Z?!1:!0},am.prototype.drawAlignmentGuide=function(){var q=this,Z=q._interactor,$=Z.gv,v=Z._canvas,x=Z._context,L=v.width,p=v.height,F=$.tx(),Q=$.ty(),k=$._zoom;x.beginPath(),x.strokeStyle=Z.getStyle("gridAlignmentGuideColor"),x.lineWidth=1,q._xAlignmentGuide.forEach(function(T){var O=T.p*k+F;x.moveTo(O,0),x.lineTo(O,p)}),q._yAlignmentGuide.forEach(function(F){var J=F.p*k+Q;x.moveTo(0,J),x.lineTo(L,J)}),x.stroke()},am.prototype.drawGrid=function(){function h(K,V,b,o){var $=Yk.toScreenPosition(a,e.apply({x:K,y:V})),x=Yk.toScreenPosition(a,e.apply({x:b,y:o}));F.moveTo($.x,$.y),F.lineTo(x.x,x.y)}var S=this,J=S._interactor,u=S.gridBlockSize,K=S.gridThickLinesEvery,O=J.getStyle("gridThickColor"),T=J.getStyle("gridLightColor"),a=J.gv,P=J._canvas,F=J._context,f=P.width,k=P.height,e=S.makeMatrix(),v=e.applyInverse(Yk.toWorldPosition(a,{x:0,y:0})),X=e.applyInverse(Yk.toWorldPosition(a,{x:f,y:0})),i=e.applyInverse(Yk.toWorldPosition(a,{x:0,y:k})),t=e.applyInverse(Yk.toWorldPosition(a,{x:f,y:k})),R=Math.min(v.x,X.x,i.x,t.x),Y=Math.max(v.x,X.x,i.x,t.x),p=Math.min(v.y,X.y,i.y,t.y),D=Math.max(v.y,X.y,i.y,t.y);f=Y-R,k=D-p;var j=Math.ceil(R/u),y=Math.floor(Y/u),b=Math.ceil(p/u),r=Math.floor(D/u);a.tx(),a.ty(),a._zoom;var A,q,H;for(F.save(),F.lineWidth=1,F.beginPath(),F.strokeStyle=O,H=Math.ceil(j/K)*K;y>=H;H+=K)A=H*u,h(A,p,A,D);for(H=Math.ceil(b/K)*K;r>=H;H+=K)q=H*u,h(R,q,Y,q);for(F.stroke(),F.beginPath(),F.strokeStyle=T,H=j;y>=H;H++)0!==H%K&&(A=H*u,h(A,p,A,D));for(H=b;r>=H;H++)0!==H%K&&(q=H*u,h(R,q,Y,q));F.stroke(),F.restore()},am.prototype.getAlignmentGuides=function(){var l=this;return{x:l._xAlignmentGuide,y:l._yAlignmentGuide}},am.prototype.addAlignmentGuide=function(Y,E,y){var a=this,C="x"===Y?a._xAlignmentGuide:a._yAlignmentGuide,y=y?y:++a._alignmentGuideId,J={p:E,id:y};if(C.length){var M=a._findClosestAlignmentGuide(J.p,C);M.dis<0?C.splice(M.index+1,0,J):C.splice(M.index,0,J)}else C.push(J);return a._interactor._42(),y},am.prototype.findClosest=function(G,v,p){var g=this,d=g._interactor,V=d.gv;p&&(G=Yk.toWorldPosition(V,G));var u,o,w,W=1/0,A=1/0,B=G.x,n=G.y;if(g.gridEnabled){var I=g.gridBlockSize,E=g.makeMatrix(),Y=E.applyInverse(G);Y=E.apply({x:Math.round(Y.x/I)*I,y:Math.round(Y.y/I)*I}),W=Y.x-B,A=Y.y-n,w=!0}if(d.alignmentGuideEnabled&&(u=g._findClosestAlignmentGuide(B,g._xAlignmentGuide).dis,o=g._findClosestAlignmentGuide(n,g._yAlignmentGuide).dis,Math.abs(u)<Math.abs(W)&&(W=u,w=!0),Math.abs(o)<Math.abs(A)&&(A=o,w=!0)),w){w=!1;var l=V._zoom,T=d.getStyle("smartGuideSensitivity")/l,O={};if(Math.abs(W)<T&&"y"!==v&&(O.x=p?W*l:W,w=!0),Math.abs(A)<T&&"x"!==v&&(O.y=p?A*l:A,w=!0),w)return O}},am.prototype._findClosestAlignmentGuide=function(v,W){if(!W.length)return{dis:1/0};for(var w,R=0,C=W.length-1;C-R>1;)w=Math.floor((R+C)/2),W[w].p<v?R=w:C=w;var b=W[R].p-v,o=W[C].p-v;return Math.abs(b)<=Math.abs(o)?{line:W[R],dis:b,index:R}:{line:W[C],dis:o,index:C}},am.prototype.removeAllAlignmentGuide=function(A){var w=this;"y"!==A&&(w._xAlignmentGuide=[]),"x"!==A&&(w._yAlignmentGuide=[]),w._interactor._42()},am.prototype.removeAlignmentGuide=function(S){var N,A,X,I=this,L=I._xAlignmentGuide;for(k=0;2>k;k++)for(L=0===k?I._xAlignmentGuide:I._yAlignmentGuide,N=0,A=L.length;A>N;N++)if(X=L[N],X.id===S)return L.splice(N,1),I._interactor._42(),{axis:0===k?"x":"y",position:X.p};return!1},am.prototype.adjustAlignmentGuide=function(g,E){var e=this,A=e.removeAlignmentGuide(g);return A?(e.addAlignmentGuide(A.axis,E,g),!0):!1};var Ko=Yk.Guide.Rect=function(Z){var x=this;x._interactor=Z};Ko.prototype={},Ko.prototype.constructor=Ko,Ko.prototype.gatherRects=function(){var x,q,v,w,t=this,X=t._interactor.gv,W=[],c=[],M={x:W,y:c},y={},S=X.getDataModel(),J=S.a("width"),i=S.a("height");J&&i&&(x=0,q=0,v=J,w=i,W.push({node:S,type:0,p:x},{node:S,type:1,p:x+v/2},{node:S,type:2,p:x+v}),c.push({node:S,type:0,p:q},{node:S,type:1,p:q+w/2},{node:S,type:2,p:q+w}),y[S._id||0]={x:x,y:q,width:v,height:w}),S.each(function(_){if(On(_)&&!X.isSelected(_)&&X.isVisible(_)){var g=!1;if(X.sm().getSelection().each(function($){g||(_.isHostOn($)?g=!0:_.isDescendantOf($)&&(g=!0))}),!g){var D=_.getRect();x=D.x,q=D.y,v=D.width,w=D.height,W.push({node:_,type:0,p:x},{node:_,type:1,p:x+v/2},{node:_,type:2,p:x+v}),c.push({node:_,type:0,p:q},{node:_,type:1,p:q+w/2},{node:_,type:2,p:q+w}),y[_._id]=D}}}),W.sort(function(T,t){return T.p-t.p}),c.sort(function(p,n){return p.p-n.p}),t._grid=M,t._87I=y},Ko.prototype.gatherLines=function(h,V,A){var k,n,u,E,G,d,I,J,T,s,L,w,D=this,W=[D.findClosest({x:h.x,y:h.y},V),D.findClosest({x:h.x+h.w/2,y:h.y+h.h/2},V),D.findClosest({x:h.x+h.w,y:h.y+h.h},V)],Q={},X=D._87I;A=A||255;var K,m;for(D._guideLine=[],k=0;2>k;k++)for(Q={},0===k?(E="y",J=h.x,T=J+h.w):(E="x",J=h.y,T=J+h.h),n=0;3>n;n++)G=W[n],G&&isFinite(G[E])&&(K=1<<3*k+n,A&K&&(d=G[E+"Line"],I=d.node,m=I._id||0,Q[m]||(Q[m]=!0,w=X[m],"y"===E?(s=w.x,L=w.x+w.width):(s=w.y,L=w.y+w.height),u=d.p,D._guideLine.push({type:E,a:J,b:T,c:s,d:L,p:u}))))},Ko.prototype._binarySearchClosest=function(N,f){if(!f.length)return{dis:1/0};for(var E,m=0,Z=f.length-1;Z-m>1;)E=Math.floor((m+Z)/2),f[E].p<N?m=E:Z=E;var j=f[m].p-N,I=f[Z].p-N;return Math.abs(j)<=Math.abs(I)?{line:f[m],dis:j}:{line:f[Z],dis:I}},Ko.prototype.findClosest=function(c,F,h){var s=this,d=s._interactor,v=d.gv,A=s._grid;h&&(c=Yk.toWorldPosition(v,c));var Y,i=s._binarySearchClosest(c.x,A.x),K=s._binarySearchClosest(c.y,A.y),M=i.dis,w=K.dis,E=v._zoom,H=d.getStyle("smartGuideSensitivity")/E,Z={};return Math.abs(M)<H&&"y"!==F&&(Z.x=h?M*E:M,Z.xLine=i.line,Y=!0),Math.abs(w)<H&&"x"!==F&&(Z.y=h?w*E:w,Z.yLine=K.line,Y=!0),Y?Z:void 0},Ko.prototype._42=function(){var b=this,c=b._guideLine;if(c&&!A.Default.isShiftDown()){var x,M,v,X,G,m,e,z,P,K,r,f,w,Y,g,p,a,V=b._interactor,u=V.gv,t=V._context,I=u.tx(),L=u.ty(),H=u._zoom,i=V.getStyle("guideLineTextSpacing");for(x=0,M=c.length;M>x;x++)v=c[x],z=v.type,P=v.p,K=v.a,r=v.b,f=v.c,w=v.d,Y=Math.min(K,f),g=Math.max(r,w),"x"===z?(X=P*H+I,G=Y*H+L,m=X,e=g*H+L):(X=Y*H+I,G=P*H+L,m=g*H+I,e=G),Yk.Icons.DrawIcon(V,t,Yk.Icons.MoveLineGuide,[X,G,m,e]),w>=K&&r>=f||(Y=K>w?w:r,g=K>w?K:f,a=g-Y,"x"===z?(v.center2center||(X-=i,m=X),G=Y*H+L,e=g*H+L,p=Yk.Icons.MoveLineGuideDistanceV):"y"===z&&(v.center2center||(G-=i,e=G),X=Y*H+I,m=g*H+I,p=Yk.Icons.MoveLineGuideDistanceH),Yk.Icons.DrawIcon(V,t,p,{x0:X,y0:G,x1:m,y1:e,dis:a}))}},Ko.prototype.clear=function(){this._guideLine=null},Yk.DefaultStyleMap={pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,rotateRound:Math.PI/2,rotateSensitivity:Math.PI/60,shiftRotateRound:Math.PI/12,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorRound:.25,anchorSensitivity:.02,smartGuideSensitivity:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,guideLineTextSpacing:32,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:"#707070",shapeHighlighPointBackground:"#30599e"};var oh=Yk.Icons={},Fq=1e4,Mk=null,Ch=8;A.Default.setImage("Icons.RectPoint",{width:Ch,height:Ch,comps:[{type:"shape",points:[0,0,0,Ch,Ch,Ch,Ch,0],segments:[1,2,2,2,5],shadow:!0,borderWidth:1,shadowColor:{func:function(){return Mk.getStyle("rectPointShadowColor")}},background:{func:function(){return Mk.getStyle("rectPointBackground")}},borderColor:{func:function(){return Mk.getStyle("rectPointBorderColor")}}}]});var pl="#e000e0";oh.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var $=oh.GroupSubEntityRect.data;if(!$)return[];var Q=$.min,b=$.max;return[Q.x,Q.y,Q.x,b.y,b.x,b.y,b.x,Q.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return oh.GroupSubEntityRect.data.isKeyOb?pl:"#666666"}}}]},oh.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[oh.Line.data.P1.x,oh.Line.data.P1.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[oh.Line.data.P2.x,oh.Line.data.P2.y],Ch,Ch]}}}]},oh.EdgeHostGuide={comps:[{type:"shape",points:{func:function(){return oh.EdgeHostGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:2,borderColor:"red"}]},oh.Rect={comps:[{type:"shape",points:{func:function(){var d=oh.Rect.data;if(!d)return[];var O=d.LT,$=d.LB,u=d.RB,J=d.RT;return[O.x,O.y,$.x,$.y,u.x,u.y,J.x,J.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#666666"},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return oh.Rect.data.rotation}},rect:{func:function(){return[[oh.Rect.data.LT.x,oh.Rect.data.LT.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return oh.Rect.data.rotation}},rect:{func:function(){return[[oh.Rect.data.LB.x,oh.Rect.data.LB.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return oh.Rect.data.rotation}},rect:{func:function(){return[[oh.Rect.data.RB.x,oh.Rect.data.RB.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return oh.Rect.data.rotation}},rect:{func:function(){return[[oh.Rect.data.RT.x,oh.Rect.data.RT.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return oh.Rect.data.rotation}},visible:{func:function(){return oh.Rect.data.L?!0:!1}},rect:{func:function(){return[[oh.Rect.data.L.x,oh.Rect.data.L.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return oh.Rect.data.rotation}},visible:{func:function(){return oh.Rect.data.R?!0:!1}},rect:{func:function(){return[[oh.Rect.data.R.x,oh.Rect.data.R.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return oh.Rect.data.rotation}},visible:{func:function(){return oh.Rect.data.T?!0:!1}},rect:{func:function(){return[[oh.Rect.data.T.x,oh.Rect.data.T.y],Ch,Ch]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return oh.Rect.data.rotation}},visible:{func:function(){return oh.Rect.data.B?!0:!1}},rect:{func:function(){return[[oh.Rect.data.B.x,oh.Rect.data.B.y],Ch,Ch]}}}]};var Rr=18;A.Default.setImage("Icons.Anchor",{width:Rr,height:Rr,comps:[{type:"arc",rect:[4,4,Rr-8,Rr-8],arcFrom:0,arcClose:!1,background:"#ffffff",borderWidth:0,borderColor:"#000000"},{type:"shape",points:[2,Rr/2,Rr-2,Rr/2,Rr/2,2,Rr/2,Rr-2],segments:[1,2,1,2],background:null,borderWidth:1,borderColor:"#111111"},{type:"arc",rect:[5.5,5.5,Rr-11,Rr-11],arcFrom:0,arcClose:!1,background:null,borderWidth:1,borderColor:"#111111"}]}),oh.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[oh.Anchor.data.POS.x,oh.Anchor.data.POS.y],Rr,Rr]}}}]},oh.TipShiftX=12,oh.TipShiftY=12;var Ge=[8,28];oh.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[oh.TipHelper.data.helperPos.x,oh.TipHelper.data.helperPos.y,Ge[0]*oh.TipHelper.data.size,Ge[1]]}},background:{func:function(){return Mk.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return oh.TipHelper.data.text}},rect:{func:function(){return[oh.TipHelper.data.helperPos.x,oh.TipHelper.data.helperPos.y,Ge[0]*oh.TipHelper.data.size,Ge[1]]}},color:{func:function(){return Mk.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var Hn=7;oh.ShapePoint={comps:[{type:"circle",rect:{func:function(){var G=oh.ShapePoint.data;return[G,Hn,Hn]}},background:"#ffffff",borderWidth:1,borderColor:"#333333"}]},oh.ShapeBgCurve={comps:[{type:"shape",points:{func:function(){return oh.ShapeBgCurve.data.P}},segments:{func:function(){return oh.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:"#333333"}]};var nb=8;oh.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var a=oh.ShapeHighlighPoint.data;return[[a.x,a.y],nb,nb]}},background:{func:function(){return Mk.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var Sd=10;oh.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var M=oh.ShapeHighlighRealPoint.data;return[[M.x,M.y],Sd,Sd]}},background:"#ffffff",borderWidth:2,borderColor:"#333333"}]};var Ud=8;oh.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var i=oh.ShapeHighlighCtrlPoint.data,I=i.x,j=i.y,g=Ud/2;return[I-g,j-g,I-g,j+g,I+g,j+g,I+g,j-g]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Mk.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Mk.getStyle("shapeCtrlPointBorderColor")}}}]};var jb=3;oh.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return oh.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:jb,borderColor:{func:function(){return Mk.getStyle("curveHighlightColor")}}}]},oh.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return oh.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"red"}]},oh.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return oh.MoveLineGuide.data}},background:null,borderWidth:1,borderColor:"red"}]};var To=5;oh.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var S=oh.MoveLineGuideDistanceH.data,X=S.x0,y=S.y0,p=S.x1,u=S.y1;return[X,y,p,u,X,y-To,X,y+To,p,u-To,p,u+To]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(oh.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var h=oh.MoveLineGuideDistanceH.data;return[[(h.x0+h.x1)/2,h.y0-10],20,20]}},color:"red",font:"12px Arial",align:"center"}]},oh.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var g=oh.MoveLineGuideDistanceV.data,d=g.x0,G=g.y0,X=g.x1,F=g.y1;return[d,G,X,F,d-To,G,d+To,G,X-To,F,X+To,F]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(oh.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var C=oh.MoveLineGuideDistanceV.data;return[[C.x0-10,(C.y0+C.y1)/2],20,20]}},color:"red",font:"12px Arial",align:"center"}]};var Mr=6;oh.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return oh.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var x=oh.ShapeActivingCtrl.data;return[x.point.x,x.point.y,x.c1.x,x.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return oh.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var q=oh.ShapeActivingCtrl.data;return[q.point.x,q.point.y,q.c2.x,q.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return oh.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var i=oh.ShapeActivingCtrl.data.c1,v=i.x,l=i.y,y=Mr/2;return[v-y,l-y,v-y,l+y,v+y,l+y,v+y,l-y]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Mk.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Mk.getStyle("shapeCtrlPointBorderColor")}}},{type:"shape",visible:{func:function(){return oh.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var m=oh.ShapeActivingCtrl.data.c2,y=m.x,t=m.y,g=Mr/2;return[y-g,t-g,y-g,t+g,y+g,t+g,y+g,t-g]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Mk.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Mk.getStyle("shapeCtrlPointBorderColor")}}}]},Yk.Icons.DrawIcon=function(P,K,u,Z){u.width=u.height=Fq,u.data=Z,Mk=P,A.Default.drawImage(K,u,0,0,Fq,Fq)},Yk.Icons.MapPoints=function(U,m){for(var O=0,x=U.length;x>O;O++)U[O]/=m},Yk.roundTo=function(r,f,i){var T=Math.abs(r%f);return i>T||i>f-T?f*Math.round(r/f):r},Yk.toFixed=function(L){return Math.round(100*L)/100},Yk.getDataMatrix=function(w){if(w instanceof A.Shape){var p=new Yk.Math.Matrix2,N=w.getPosition();return p.translate(-N.x,-N.y).scale(w.getScale().x,w.getScale().y).rotate(w.getRotation()).translate(N.x,N.y),p}return w.getMatrix?w.getMatrix():new Yk.Math.Matrix2},Math.sign===t&&(Math.sign=function(P){return 0>P?-1:P>0?1:+P});var co=Yk.Math.Matrix2=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};co.prototype={},co.prototype.constructor=co,co.prototype.set=function(V,O,W,k,i,p){return this.a=V,this.b=O,this.c=W,this.d=k,this.tx=i,this.ty=p,this},co.prototype.apply=function(k,Z){Z=Z||new Sr;var g=k.x,Y=k.y;return Z.x=this.a*g+this.c*Y+this.tx,Z.y=this.b*g+this.d*Y+this.ty,Z},co.prototype.applyInverse=function(h,H){H=H||new Sr;var t=1/(this.a*this.d+this.c*-this.b),l=h.x,C=h.y;return H.x=this.d*t*l+-this.c*t*C+(this.ty*this.c-this.tx*this.d)*t,H.y=this.a*t*C+-this.b*t*l+(-this.ty*this.a+this.tx*this.b)*t,H},co.prototype.translate=function(o,W){return this.tx+=o,this.ty+=W,this},co.prototype.scale=function(I,q){return this.a*=I,this.d*=q,this.c*=I,this.b*=q,this.tx*=I,this.ty*=q,this},co.prototype.rotate=function(l){var k=Math.cos(l),P=Math.sin(l),i=this.a,V=this.c,S=this.tx;return this.a=i*k-this.b*P,this.b=i*P+this.b*k,this.c=V*k-this.d*P,this.d=V*P+this.d*k,this.tx=S*k-this.ty*P,this.ty=S*P+this.ty*k,this},co.prototype.append=function(v){var P=this.a,S=this.b,k=this.c,u=this.d;return this.a=v.a*P+v.b*k,this.b=v.a*S+v.b*u,this.c=v.c*P+v.d*k,this.d=v.c*S+v.d*u,this.tx=v.tx*P+v.ty*k+this.tx,this.ty=v.tx*S+v.ty*u+this.ty,this},co.prototype.setTransform=function(j,b,U,Q,t,i,f,I,h){var o,r,W,M,L,v,F,l,Z,D;return L=Math.sin(f),v=Math.cos(f),F=Math.cos(h),l=Math.sin(h),Z=-Math.sin(I),D=Math.cos(I),o=v*t,r=L*t,W=-L*i,M=v*i,this.a=F*o+l*W,this.b=F*r+l*M,this.c=Z*o+D*W,this.d=Z*r+D*M,this.tx=j+(U*o+Q*W),this.ty=b+(U*r+Q*M),this},co.prototype.prepend=function(J){var K=this.tx;if(1!==J.a||0!==J.b||0!==J.c||1!==J.d){var f=this.a,O=this.c;this.a=f*J.a+this.b*J.c,this.b=f*J.b+this.b*J.d,this.c=O*J.a+this.d*J.c,this.d=O*J.b+this.d*J.d}return this.tx=K*J.a+this.ty*J.c+J.tx,this.ty=K*J.b+this.ty*J.d+J.ty,this},co.prototype.invert=function(){var _=this.a,L=this.b,X=this.c,S=this.d,d=this.tx,g=_*S-L*X;return this.a=S/g,this.b=-L/g,this.c=-X/g,this.d=_/g,this.tx=(X*this.ty-S*d)/g,this.ty=-(_*this.ty-L*d)/g,this},co.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},co.prototype.clone=function(){var W=new co;return W.a=this.a,W.b=this.b,W.c=this.c,W.d=this.d,W.tx=this.tx,W.ty=this.ty,W},co.prototype.copy=function($){return $.a=this.a,$.b=this.b,$.c=this.c,$.d=this.d,$.tx=this.tx,$.ty=this.ty,$},co.IDENTITY=new co,co.TEMP_MATRIX=new co;var Sr=Yk.Math.Vector2=function(X,R){"object"==typeof X&&(X.x!=t?(R=X.y,X=X.x):(R=X[1],X=X[0])),this.set(X||0,R||0)};Sr.prototype={},Sr.prototype.constructor=Sr,L.defineProperties(Sr.prototype,{width:{get:function(){return this.x},set:function(m){this.x=m
}},height:{get:function(){return this.y},set:function(S){this.y=S}}}),Sr.prototype.clone=function(){return new Sr(this.x,this.y)},Sr.prototype.copy=function(b){return this.set(b.x,b.y),this},Sr.prototype.equals=function(v){return v.x===this.x&&v.y===this.y},Sr.prototype.set=function(L,a){return this.x=L||0,this.y=a||(0!==a?this.x:0),this},Sr.prototype.setScalar=function(m){return this.x=m,this.y=m,this},Sr.prototype.setX=function(D){return this.x=D||0,this},Sr.prototype.setY=function(V){return this.y=V||0,this},Sr.prototype.add=function(P){return this.x+=P.x,this.y+=P.y,this},Sr.prototype.addVectors=function(G,q){return this.x=G.x+q.x,this.y=G.y+q.y,this},Sr.prototype.addScalar=function($){return this.x+=$,this.y+=$,this},Sr.prototype.addScaledVector=function(I,i){return this.x+=I.x*i,this.y+=I.y*i,this},Sr.prototype.sub=function(Z){return this.x-=Z.x,this.y-=Z.y,this},Sr.prototype.subScalar=function(b){return this.x-=b,this.y-=b,this},Sr.prototype.subVectors=function(l,e){return this.x=l.x-e.x,this.y=l.y-e.y,this},Sr.prototype.multiply=function(C){return this.x*=C.x,this.y*=C.y,this},Sr.prototype.multiplyScalar=function(f){return this.x*=f,this.y*=f,this},Sr.prototype.divide=function(q){return this.x/=q.x,this.y/=q.y,this},Sr.prototype.divideScalar=function(h){return this.multiplyScalar(1/h)},Sr.prototype.min=function(G){return this.x=Math.min(this.x,G.x),this.y=Math.min(this.y,G.y),this},Sr.prototype.max=function(Q){return this.x=Math.max(this.x,Q.x),this.y=Math.max(this.y,Q.y),this},Sr.prototype.clamp=function(N,C){return this.x=Math.max(N.x,Math.min(C.x,this.x)),this.y=Math.max(N.y,Math.min(C.y,this.y)),this},Sr.prototype.clampScalar=function(){var d,Q;return function(c,l){return d===t&&(d=new Sr,Q=new Sr),d.set(c,c),Q.set(l,l),this.clamp(d,Q)}}(),Sr.prototype.clampLength=function($,E){var b=this.length();return this.multiplyScalar(Math.max($,Math.min(E,b))/b)},Sr.prototype.dot=function(c){return this.x*c.x+this.y*c.y},Sr.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},Sr.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Sr.prototype.normalize=function(){return this.divideScalar(this.length())},Sr.prototype.angle=function(){var B=Math.atan2(this.y,this.x);return 0>B&&(B+=2*Math.PI),B},Sr.prototype.distanceTo=function(C){return Math.sqrt(this.distanceToSquared(C))},Sr.prototype.distanceToSquared=function($){var Q=this.x-$.x,W=this.y-$.y;return Q*Q+W*W},Sr.prototype.isNearEnough=function(e){return this.distanceToSquared(e)<1e-8},Sr.prototype.setLength=function(M){return this.multiplyScalar(M/this.length())},Sr.prototype.lerp=function(q,L){return this.x+=(q.x-this.x)*L,this.y+=(q.y-this.y)*L,this},Sr.prototype.lerpVectors=function(R,p,i){return this.subVectors(p,R).multiplyScalar(i).add(R)},Sr.prototype.rotateAround=function(u,E){var T=Math.cos(E),Q=Math.sin(E),F=this.x-u.x,l=this.y-u.y;return this.x=F*T-l*Q+u.x,this.y=F*Q+l*T+u.y,this};var xf=Yk.Math.Curve=function(){this._curves=[]};xf.prototype={},xf.prototype.constructor=xf,xf.prototype.createFromHtShape=function(d,j){j instanceof A.List&&(j=j.toArray());var h,t,m,Q,N,E,r,M=this,C=null,k=null,y=0,b=Yk.Math.Vector2,G=Yk.Math.CubicBezier;for(t=0,m=j.length;m>t;t++){switch(Q=j[t],N=null,Q){case 1:k=new b(d[y],d[y+1]),C=k,y+=2;break;case 2:h=new b(d[y],d[y+1]),y+=2,N=new G(k,k.clone(),h.clone(),h),k=h;break;case 3:E=new b(d[y],d[y+1]),h=new b(d[y+2],d[y+3]),y+=4,N=new G(k,E.clone().sub(k).multiplyScalar(2/3).add(k),E.clone().sub(h).multiplyScalar(2/3).add(h),h),k=h;break;case 4:E=new b(d[y],d[y+1]),r=new b(d[y+2],d[y+3]),h=new b(d[y+4],d[y+5]),y+=6,N=new G(k,E,r,h),k=h;break;case 5:if(!C)break;N=new G(k,k.clone(),C.clone(),C),k=null,C=null}N&&(N._index=M._curves.length,M._curves.push(N))}},xf.prototype.checkPoint=function(G,B){var Q,D,N,Y,O,P=this,x=P._curves;for(Q=0,D=x.length;D>Q;Q++)if(Y=x[Q],O=Y.intersectRect(G,B,B),O.length)return N=0,O.forEach(function(t){N+=t.t}),N/=O.length,G=Y.getPointAt(N),G.t=N,{bezier:Y,intersection:G}},xf.prototype.insertKnot=function(d,V){var G=d.insertKnot(V),J=this,y=J._curves;y.splice(d._index,1,G[0],G[1])},xf.prototype._isCloseEnough=function(F,C){return Math.abs(F.x-C.x)<1e-6&&Math.abs(F.y-C.y)<1e-6},xf.prototype._isSamePoint=function(o,d){return o===d},xf.prototype.moveRealPoint=function(P,d){var V=this,q=V._curves,$=d.clone().sub(P);q.forEach(function(N){var q=N._p1;N._p2,N._p3;var X=N._p4;V._isSamePoint(q,P)&&(N._p2.add($),N._p1=d),V._isSamePoint(X,P)&&(N._p3.add($),N._p4=d)})},xf.prototype.moveCtrlPoint=function($,f,c){var W=$[c];if(W){var R=this,P=R._curves;f.clone().sub(W),P.forEach(function(Y){var e;"c2"===c?e="_p2":"c1"===c&&(e="_p3"),R._isSamePoint(Y[e],W)&&(Y[e]=f)}),$[c]=f}},xf.prototype.deleteRealPoint=function(e,M){var p,N,x,I,i,n,h,q=this,F=q._curves,Y={},u=[],G=Yk.Math.CubicBezier;for(N=0,x=F.length;x>N;N++)p=F[N],I=p._p1,i=p._p2,n=p._p3,h=p._p4,(Y[N]||!q._isSamePoint(I,e))&&(q._isSamePoint(h,e)?x>N+1&&q._isSamePoint(F[N+1]._p1,e)&&(M||u.push(new G(I,i,F[N+1]._p3,F[N+1]._p4))):u.push(p));q._curves=u},xf.prototype.findPairs=function(A,Y){var Z,V,O,L,b,q,p,J,g=this,t=g._curves,u={},w=[];for(V=0,O=t.length;O>V;V++)Z=t[V],L=Z._p1,b=Z._p2,q=Z._p3,p=Z._p4,!u[V]&&g._isSamePoint(L,A)&&(Y?w.push({point:L,r2:p}):w.push({point:L,c2:b})),g._isSamePoint(p,A)&&(J=Y?{point:p,r1:L}:{point:p,c1:q},O>V+1&&g._isSamePoint(t[V+1]._p1,A)&&(Y?J.r2=t[V+1]._p4:J.c2=t[V+1]._p2,u[V+1]=!0),w.push(J));return w},xf.prototype.toHtShape=function(){var W=this,w=W._curves,q=[],u=[],X={x:1/0,y:1/0};return w.forEach(function(e){var J=e._p1,r=e._p2,S=e._p3,b=e._p4;return W._isCloseEnough(J,X)||(q.push(1),u.push(J.clone())),X=b,W._isCloseEnough(J,r)&&W._isCloseEnough(S,b)?(q.push(2),u.push(b.clone()),void 0):(q.push(4),u.push(r.clone(),S.clone(),b.clone()),void 0)}),{segments:q,points:u}};var cq=Yk.Math.CubicBezier=function(n,z,V,t){var P=this;P._id=Yk.Math.CubicBezier._globalId++,P._p1=n,P._p2=z,P._p3=V,P._p4=t};cq._globalId=1,cq.prototype={},cq.prototype.constructor=cq,cq.prototype.toString=function(){return this._id},cq.prototype.intersectRect=function(k,Z,y){var q=Z/2,S=y/2,a=k.x,g=k.y,G=Yk.Math.Vector2,_=new G(-q+a,-S+g),$=new G(q+a,S+g),c=new G($.x,_.y),l=new G(_.x,$.y),V=this,w=V.intersectLine(_,c),u=V.intersectLine(c,$),B=V.intersectLine($,l),R=V.intersectLine(l,_),L=w.concat(u).concat(B).concat(R);return L},cq.prototype.intersectLine=function(h,e){var V,G,F,r,Q,M,p,I,n,Y,E,k,D,P=this,T=h.clone().min(e),C=h.clone().max(e);r=P._p1,Q=P._p2,M=P._p3,p=P._p4,V=r.clone().multiplyScalar(-1),G=Q.clone().multiplyScalar(3),F=M.clone().multiplyScalar(-3),E=V.add(G).add(F).add(p),V=r.clone().multiplyScalar(3),G=Q.clone().multiplyScalar(-6),F=M.clone().multiplyScalar(3),Y=V.add(G).add(F),V=r.clone().multiplyScalar(-3),G=Q.clone().multiplyScalar(3),n=V.add(G),I=r.clone(),D=new Yk.Math.Vector2(h.y-e.y,e.x-h.x),k=h.x*e.y-e.x*h.y;for(var H=P.getRoots(D.dot(E),D.dot(Y),D.dot(n),D.dot(I)+k),Z=new Array,g=0,d=H.length;d>g;g++){var w=H[g];if(!(0>w||w>1)){var i=r.clone().lerp(Q,w),N=Q.clone().lerp(M,w),a=M.clone().lerp(p,w),O=i.lerp(N,w),K=N.lerp(a,w),U=O.lerp(K,w);U.t=w,h.x==e.x?T.y<=U.y&&U.y<=C.y&&Z.push(U):h.y==e.y?T.x<=U.x&&U.x<=C.x&&Z.push(U):U.x>=T.x&&U.y>=T.y&&U.x<=C.x&&U.y<=C.y&&Z.push(U)}}return Z},cq.prototype.solveTForPoint=function(Q){var Z,v,P,d,G=this;Z=G._p1.x-Q.x,v=G._p2.x-Q.x,P=G._p3.x-Q.x,d=G._p4.x-Q.x;for(var T=G.getRoots(d-3*P+3*v-Z,3*P-6*v+3*Z,3*v-3*Z,Z),n=t,l=1/0,E=0,X=T.length;X>E;E++){var p=T[E];if(!(0>p||p>1)){var V=G._p1.clone().lerp(G._p2,p),b=G._p2.clone().lerp(G._p3,p),$=G._p3.clone().lerp(G._p4,p),c=V.lerp(b,p),s=b.lerp($,p),W=c.lerp(s,p);W.t=p;var w=Math.abs(W.y-Q.y);l>w&&(l=w,n=W)}}return n},cq.prototype.getPointAt=function(w){var b=this,y=b._p1,I=b._p2,D=b._p3,r=b._p4,c=y.clone().lerp(I,w),g=I.clone().lerp(D,w),H=D.clone().lerp(r,w),x=c.lerp(g,w),S=g.lerp(H,w);return x.lerp(S,w)},cq.prototype.getRoots=function(Z,U,$,T){var w,j,R,r,J,n=new Array;if(Math.abs(Z)<1e-6){var w=U,j=$/w,R=T/w,r=j*j-4*R;if(r>0){var J=Math.sqrt(r);n.push(.5*(-j+J)),n.push(.5*(-j-J))}else 0==r&&n.push(.5*-j)}U/=Z,$/=Z,T/=Z,w=(3*$-U*U)/3,j=(2*U*U*U-9*$*U+27*T)/27;var h=U/3,b=j*j/4+w*w*w/27,C=j/2;if(Math.abs(b)<=1e-6&&(b=0),b>0){var _,F,J=Math.sqrt(b);_=-C+J,F=_>=0?Math.pow(_,1/3):-Math.pow(-_,1/3),_=-C-J,_>=0?F+=Math.pow(_,1/3):F-=Math.pow(-_,1/3),n.push(F-h)}else if(0>b){var l=Math.sqrt(-w/3),P=Math.atan2(Math.sqrt(-b),-C)/3,V=Math.cos(P),g=Math.sin(P),Q=Math.sqrt(3);n.push(2*l*V-h),n.push(-l*(V+Q*g)-h),n.push(-l*(V-Q*g)-h)}else{var _;_=C>=0?-Math.pow(C,1/3):Math.pow(-C,1/3),n.push(2*_-h),n.push(-_-h)}return n},cq.prototype._70I=function(){var X=this;return X._p1.distanceToSquared(X._p2)<1e-10&&X._p3.distanceToSquared(X._p4)<1e-10},cq.prototype.insertKnot=function(q){var W=this,D=W._p1,S=W._p2,o=W._p3,a=W._p4,_=D.clone().lerp(S,q),t=S.clone().lerp(o,q),L=o.clone().lerp(a,q),p=_.clone().lerp(t,q),J=t.clone().lerp(L,q),I=p.clone().lerp(J,q);return W._70I()?(D.clone().lerp(a,q),[new Yk.Math.CubicBezier(D,D.clone(),I.clone(),I),new Yk.Math.CubicBezier(I,I.clone(),a.clone(),a)]):[new Yk.Math.CubicBezier(D,_,p,I),new Yk.Math.CubicBezier(I,J,L,a)]};var oq=A.Default.getInternal().ui().EdgeUI,Ik={_47O:function(j){var I=this,p=Ik.getBackups()._47O;Yk.inEdit(I.gv)||p.call(I,j)}};Yk.Inject.registAsModule(Ik,oq);var Wi=A.Default.getInternal().ui().NodeUI,ep={_47O:function(r){var D=this,x=ep.getBackups()._47O;Yk.inEdit(D.gv)||x.call(D,r)},getSelectWidth:function(){var Y=this,V=Y.gv,N=Y._data;if(V.isEditable(N)&&Yk.inEdit(V))return 0;var h=ep.getBackup("getSelectWidth");return h.call(Y)}};Yk.Inject.registAsModule(ep,Wi);var no=A.graph.GraphView,Fm={_editPointSize:function(){var c=A.Default.isTouchable,T=Yk.getStyle("pointSize");return T[c?0:1]}(),isPointEditable:function(L){var U=this;if(Yk.inEdit(U))return U._pointEditableFunc?U._pointEditableFunc(L):!0;var H=Fm.getBackup("isPointEditable");H.call(U,L)},isEditable:function(b){var t,K=this,S=Fm.getBackup("isEditable");if(t=b instanceof Yk.Group?!0:S.call(K,b),!Yk.inEdit(K))return t;if(!(b instanceof A.Edge))return t;if(!b.s("2d.editable"))return!1;var W=K.getEditableFunc();return W?W(b):!0},_42:function(Q,k){var S=this,i=Fm.getBackups()._42;if(i.call(S,Q,k),Yk.inEdit(S)){var Z=S.getEditInteractor();Z.drawImpl()}}};Yk.Inject.registAsModule(Fm,no);var Ig=A.Default.getInternal().ui().ShapeUI,Mb={_47O:function(B){var q=this,z=Mb.getBackups()._47O;Yk.inEdit(q.gv)||z.call(q,B)}};Yk.Inject.registAsModule(Mb,Ig);var Yq=A.graph.DefaultInteractor,cs={handle_mousewheel:function(r){var P=this,v=cs.getBackup("handle_mousewheel");Yk.inEdit(P.gv)||v.call(P,r)}};Yk.Inject.registAsModule(cs,Yq);var vq=A.graph.MoveInteractor,os={_calcShift:function(T,k){var y=this,U=os.getBackup("_calcShift"),K=y.gv;if(!Yk.inEdit(K))return U.call(y,T,k);var j=K.getEditInteractor(),w=j.getSubModule("Move").calcShift(T,k,y);return w||U.call(y,T,k)},clear:function(W){var S=this,R=os.getBackup("clear");R.call(S,W);var Z=S.gv;if(Yk.inEdit(Z)){var B=Z.getEditInteractor();B.getSubModule("Move").clear(W)}}};Yk.Inject.registAsModule(os,vq);var Ko=Yk.Rect=function(P){this.catalog="Rect",this._interactor=P};Ko.prototype={},Ko.prototype.constructor=Ko,Ko.prototype.gatherInfo=function(f,W){var m=this;if(1===W.length){var y=W[0];return y instanceof A.Shape&&y._70I()?m.gatherLine(f,y):y instanceof A.Group&&y.isExpanded()?!1:m.gatherSingleTarget(f,y)}return W.length>1?m.gatherMultiTargets(f,W):!1},Ko.prototype.gatherSingleTarget=function(C,Q){if(Q.getCorners){var G,E=this.info;this.target=Q,G=this.screenInfo={};var l=Q.getCorners();E.LT=new Yk.Math.Vector2(l[0]),E.LB=new Yk.Math.Vector2(l[1]),E.RB=new Yk.Math.Vector2(l[2]),E.RT=new Yk.Math.Vector2(l[3]),E.T=E.LT.clone().add(E.RT).divideScalar(2),E.B=E.LB.clone().add(E.RB).divideScalar(2),E.L=E.LT.clone().add(E.LB).divideScalar(2),E.R=E.RT.clone().add(E.RB).divideScalar(2);for(var x in E)G[x]=Yk.toScreenPosition(C,E[x]);var N=this._interactor.getStyle("checkSize"),X=function(X,m,t){var b=m.clone().sub(X).setLength(-N),W=t.clone().sub(X).setLength(-N),e=b.add(W).add(X);return e};return G.rotLT=X(G.LT,G.RT,G.LB),G.rotLB=X(G.LB,G.LT,G.RB),G.rotRB=X(G.RB,G.LB,G.RT),G.rotRT=X(G.RT,G.LT,G.RB),G.rotT=G.rotLT.clone().add(G.rotRT).divideScalar(2),G.rotB=G.rotLB.clone().add(G.rotRB).divideScalar(2),G.rotL=G.rotLT.clone().add(G.rotLB).divideScalar(2),G.rotR=G.rotRT.clone().add(G.rotRB).divideScalar(2),G.rotation=Q.getRotation(),!0}},Ko.prototype.gatherMultiTargets=function(L,O){var p=Yk.Group.findOrCreateGroup(O);if(!p)return!1;var h=this;return h.editing&&"rotate"!==h.editing.mode||p.calcInfo(),h.gatherSingleTarget(L,p)},Ko.prototype.gatherLine=function(U,d){this.target=d;var f=this.screenInfo={},O=d.getPoints(),B=Yk.getDataMatrix(d);return f.P1=Yk.toScreenPosition(U,B.apply(O.get(0))),f.P2=Yk.toScreenPosition(U,B.apply(O.get(1))),!0},Ko.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Ko.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Ko.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Ko.prototype.check=function(b,r,n){if(A.Default.isLeftButton(r)){var N=this;if(N.editing=null,N.tipInfo=null,N.screenInfo){if(N.screenInfo.P1)return N._checkLine(n);var p,i,P,U=null,Q=N._interactor,Y=Q.getStyle("checkSize"),v=N.target,z=b.isEditable(v);if(z&&b.isRectEditable(v))for(i=0;i<Yk.Rect.ResizeKeys.length;i++)if(P=Yk.Rect.ResizeKeys[i],Yk.checkHit(n,N.screenInfo[P],Y)){U=P,p="resize";break}if(!U&&z&&b.isRotationEditable(v)){var k=Q.getStyle("rotateCheckSize");for(i=0;i<Yk.Rect.RotateKeys.length;i++)if(P=Yk.Rect.RotateKeys[i],Yk.checkHit(n,N.screenInfo[P],k)){U=P,p="rotate";break}}if(!U)return this._interactor.setCursor("default"),void 0;if("rotate"===p){this._interactor.setCursor("crosshair");var F=b.lp(r),C=v instanceof Yk.Group?v.getAnchor2():v.getPosition();N.editing={mode:p,key:U,pos:C,flipY:v.getScale().y<0,rotation:v.getRotation(),hitRot:Math.atan2(F.y-C.y,F.x-C.x)}}else{var J=Yk.Rect.ResizeKeys.indexOf(U),T=Yk.Rect.ResizeDirection[J],S=Math.cos(v.getRotation()),M=Math.sin(v.getRotation()),Z=T.x*Math.sign(v.getScale().x),E=T.y*Math.sign(v.getScale().y),B=Math.atan2(-M*Z-S*E,S*Z-M*E),H=(Math.round(B/(Math.PI/4))+8)%8,L=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][H];this._interactor.setCursor(L);var j=v.getWidth(),t=v.getHeight(),O=v.getAnchor();N.editing={mode:p,key:U,rect:{x:-j*O.x,y:-t*O.y,width:j,height:t},anchor:O,matrix:v.getMatrix()}}return U}}},Ko.prototype._checkLine=function(U){var p=this;p.screenInfo;var A,n=p._interactor.getStyle("checkSize");if(Yk.checkHit(U,p.screenInfo.P1,n))A="P1";else{if(!Yk.checkHit(U,p.screenInfo.P2,n))return this._interactor.setCursor("default"),void 0;A="P2"}return p.editing={mode:"line",key:A},A},Ko.prototype.startEdit=function(U,I){U.startDragging(I);var N=this,C=N.editing,n=N.target;C&&"rotate"!==C.mode&&("line"===C.mode||n&&0===n.getRotation())&&(N._inSmartGuide=!0,N._interactor.rectGuide.gatherRects())},Ko.prototype._46O=function(){var A=this;A.editing=null,A.tipInfo=null,A._inSmartGuide&&(A._interactor.rectGuide.clear(),A._inSmartGuide=!1)},Ko.prototype.handleEdit=function(t,K){var N=this,b=N.editing;if(b){var w,c,H,n,z,m,Z=N.target,o=b.key,B=b.mode,j=N._interactor;if("rotate"===B){var R,q=t.lp(K),U=b.pos,d=Math.atan2(q.y-U.y,q.x-U.x);if(Z instanceof Yk.Group?R=d-b.hitRot:(d-=b.hitRot,R=b.rotation+d),R%=2*Math.PI,0>R&&(R+=2*Math.PI),!A.Default.isShiftDown(K)){var h,M;A.Default.isShiftDown(K)?(h=j.getStyle("shiftRotateRound"),M=h/2):(h=j.getStyle("rotateRound"),M=j.getStyle("rotateSensitivity")),R=Yk.roundTo(R,h,M)}Z instanceof Yk.Group?(d=R-(b.lastRotation||0),0!==d&&(Z.addRotation(d),b.lastRotation=R)):Z.setRotation(R),R>Math.PI&&(R-=2*Math.PI);var x=180*(R/Math.PI);x=x.toFixed(2),w=""+x+""}else if("resize"===B){var $=b.rect;n=$.x,z=$.y;var y=$.width,S=$.height,g=b.anchor,l=b.matrix;c=t.lp(K);var D,T=A.Default.unionPoint;if(N._inSmartGuide&&!A.Default.isShiftDown(K)){var F;"L"===o||"R"===o?F="x":("T"===o||"B"===o)&&(F="y"),N._adsorbedToClosest(c,F),m=!0}D=l.tfi(c);var G;"LT"===o?($=T(D,{x:n+y,y:z+S}),G=9):"T"===o?($=T({x:n,y:D.y},{x:n+y,y:z+S}),G=1):"RT"===o?($=T({x:n,y:D.y},{x:D.x,y:z+S}),G=33):"L"===o?($=T({x:D.x,y:z},{x:n+y,y:z+S}),G=8):"R"===o?($=T({x:n,y:z},{x:D.x,y:z+S}),G=32):"LB"===o?($=T({x:D.x,y:z},{x:n+y,y:D.y}),G=12):"B"===o?($=T({x:n,y:z},{x:n+y,y:D.y}),G=4):"RB"===o&&($=T({x:n,y:z},D),G=36);var Q=l.tf($.x+$.width*g.x,$.y+$.height*g.y);Z.setPosition(Q),Z.setSize($.width,$.height),m&&(H=Z.getRect(),j.rectGuide.gatherLines({node:Z,x:H.x,y:H.y,w:H.width,h:H.height},F,G)),w=""+Math.round($.width)+" * "+Math.round($.height)}else if("line"===B){if(c=t.lp(K),kj(K)){var v=Z.getPoints(),Y="P1"===o?v.get(1):v.get(0),X={x:c.x-Y.x,y:c.y-Y.y},u=j.getStyle("shiftLineRotateRound"),s=N._shiftDirList;if(!s||N._shiftRotateRound!==u){N._shiftRotateRound=u,N._shiftDirList=s=[];for(var f=0;f<Math.PI;f+=u)s.push({x:E(f),y:V(f)})}for(var P,i=0,I=0,O=s.length;O>I;I++){var r=s[I],W=r.x*X.x+r.y*X.y;Math.abs(W)>Math.abs(i)&&(i=W,P=r)}c={x:Y.x+P.x*i,y:Y.y+P.y*i},j.rectGuide.clear()}else N._inSmartGuide&&!A.Default.isShiftDown(K)&&(N._adsorbedToClosest(c),m=!0);var _=Yk.getDataMatrix(Z).applyInverse(c);Z.setPoint("P1"===o?0:1,_,!0);var e=Z.getPoints(),L=e.get(0),k=e.get(1);n=L.x-k.x,z=L.y-k.y,w=" "+Math.round(Math.sqrt(n*n+z*z))+" ",m&&(H=Z.getRect(),j.rectGuide.gatherLines({node:Z,x:H.x,y:H.y,w:H.width,h:H.height}))}var C=A.Default.getLogicalPoint(K,j._canvas);C.x+=Yk.Icons.TipShiftX,C.y+=Yk.Icons.TipShiftY,N.tipInfo={helperPos:C,text:w,size:w.length}}},Ko.prototype._adsorbedToClosest=function(I,f){var H=this,Z=H._interactor,j=Z.rectGuide.findClosest(I,f),k=Z.gridGuide.findClosest(I,f),w=1/0,U=1/0;j&&(isFinite(j.x)&&(w=j.x),isFinite(j.y)&&(U=j.y)),k&&(isFinite(k.x)&&Math.abs(k.x)<Math.abs(w)&&(w=k.x),isFinite(k.y)&&Math.abs(k.y)<Math.abs(U)&&(U=k.y)),isFinite(w)&&(I.x+=w),isFinite(U)&&(I.y+=U)},Ko.prototype._42=function(E,U,g){var C=this;C.info={},C.screenInfo=null;var t=C._interactor;if(!t.editDetail&&C.gatherInfo(U,g)){var k=C.screenInfo;k.P1?Yk.Icons.DrawIcon(t,E,Yk.Icons.Line,C.screenInfo):Yk.Icons.DrawIcon(t,E,Yk.Icons.Rect,C.screenInfo),C.tipInfo&&Yk.Icons.DrawIcon(t,E,Yk.Icons.TipHelper,C.tipInfo),C.target instanceof Yk.Group&&C.target._42(t,E,U)}};var Zl=Yk.Anchor=function(T){this.catalog="Anchor",this._interactor=T};Zl.prototype={},Zl.prototype.constructor=Zl,Zl.prototype.gatherInfo=function(m,D){var W=this;if(1===D.length){var s=D[0];if(!s.getAnchor)return;if(s instanceof A.Shape&&s._70I())return;if(s instanceof A.Group&&s.isExpanded())return;return W.gatherSingleTarget(m,D[0])}return D.length>1?W.gatherMultiTargets(m,D):!1},Zl.prototype.gatherSingleTarget=function(G,g){var h=this;return h.info.POS=g.getPosition(),h.screenInfo.POS=Yk.toScreenPosition(G,h.info.POS),h.target=g,!0},Zl.prototype.gatherMultiTargets=function(U,S){var t=this,Z=Yk.Group.findOrCreateGroup(S);return Z?(t.screenInfo.POS=Yk.toScreenPosition(U,Z.getAnchor2()),t.target=Z,!0):!1},Zl.prototype.isVisible=function(){var n=this,l=n._interactor;if(l.getStyle("anchorVisible")===!1)return!1;var i=n.target;if(i){var t=i.getSize(),k=Math.min(t.width,t.height);if(k*l.gv._zoom<l.getStyle("anchorHideThreshold"))return!1}return!0},Zl.prototype.check=function(R,U,l){if(A.Default.isLeftButton(U)){var Z=this,M=Z._interactor;if(Z.isVisible()&&M.getStyle("anchorMovable")!==!1){Z.editing=null,Z.tipInfo=null;var D=Z.target;if(D&&R.isAnchorEditable(D)&&R.isEditable(D)){var r;if(Z.screenInfo&&(r=Z.screenInfo.POS)&&Yk.checkHit(l,new Yk.Math.Vector2(r),M.getStyle("checkSize"))){if(D instanceof Yk.Group)return Z.editing={},!0;var Y=D.getWidth(),o=D.getHeight(),S=D.getAnchor();return Z.editing={rect:{x:-Y*S.x,y:-o*S.y,width:Y,height:o},anchor:S,matrix:D.getMatrix()},!0}}}}},Zl.prototype.startEdit=function(T,t){T.startDragging(t)},Zl.prototype._46O=function(){this.editing=null,this.tipInfo=null},Zl.prototype.handleEdit=function($,s){var f=this,u=f.target;if(u&&f.editing){var n=$.lp(s);if(u instanceof Yk.Group)return u.setAnchor2(n),f._interactor._42(),void 0;var k=f.editing.matrix,b=k.tfi(n),K=f.editing.rect,l=(b.x-K.x)/K.width,g=(b.y-K.y)/K.height;if(!A.Default.isShiftDown(s)){var d=f._interactor.getStyle("anchorRound"),y=f._interactor.getStyle("anchorSensitivity");l=Yk.roundTo(l,d,y),g=Yk.roundTo(g,d,y)}u.setAnchor(l,g,!0);var Y=A.Default.getLogicalPoint(s,f._interactor._canvas);Y.x+=Yk.Icons.TipShiftX,Y.y+=Yk.Icons.TipShiftY;var T=""+l.toFixed(2)+", "+g.toFixed(2);f.tipInfo={helperPos:Y,text:T,size:T.length}}},Zl.prototype._42=function(A,c,f){var V=this;V.info={},V.screenInfo={};var L=V._interactor;L.editDetail||V.gatherInfo(c,f)&&V.isVisible()&&(Yk.Icons.DrawIcon(L,A,Yk.Icons.Anchor,V.screenInfo),V.tipInfo&&Yk.Icons.DrawIcon(L,A,Yk.Icons.TipHelper,V.tipInfo))};var xf=Yk.Curve=function(h){this.catalog="Curve",this._interactor=h};xf.prototype={},xf.prototype.constructor=xf,xf.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},xf.prototype.setUp=function(){var m=this,b=m._interactor;b&&b.gv.mp(m._onGraphviewPropertyChanged,m)},xf.prototype._onGraphviewPropertyChanged=function(I){("zoom"===I.property||"translateX"===I.property||"translateY"===I.property)&&this._handleDataChanged()},xf.prototype.tearDown=function(){var r=this,V=r._interactor;V&&V.gv.ump(r._onGraphviewPropertyChanged)},xf.prototype.canEnterEditDetailMode=function(){var u=this,S=u._interactor,Q=S._getValidSelection();if(1===Q.length){var G=Q[0],U=G instanceof A.Edge;if(G instanceof A.Shape||U){if(U){var y=G.s("edge.type");if(y&&"points"!==y)return}var h=S.gv;if(h.isPointEditable(G)&&h.isEditable(G))return u.target=G,!0}}},xf.prototype.preHandleScroll=function(){var c=this.editing;return c&&c.inEdit?!0:void 0},xf.prototype.getCurrentSelectintStatus=function(){var Y=this;if(Y.activing&&!Y.activing.selections){if(Y.activing.status!=t)return Y.activing.status;var x=function(Z){var b=Y.activing.status;Y.activing.status=Z,Y._interactor.fp("shapePointStatus",b,Z)},M=Yk.Curve.PointType,Z=Y.activing.point,W=Y.activing.pairs;if(!W||1!==W.length)return x(M.Mirrored);var g=W[0],$=g.c1&&g.c1.isNearEnough(Z),F=g.c2&&g.c2.isNearEnough(Z);if(!g.c1||!g.c2)return $||F?x(M.Straight):x(M.Disconnected);if($&&F)return x(M.Straight);if($||F)return x(M.Asymmetric);var G=g.c1.clone().sub(Z),h=g.c2.clone().sub(Z);return Math.abs(G.x*h.y-G.y*h.x)>1e-5||G.x*h.x>0?x(M.Disconnected):Math.abs(G.length()-h.length())>1e-5?x(M.Asymmetric):x(M.Mirrored)}},xf.prototype.handle_keydown=function(d){var C=this;if(C._interactor.editDetail){var $=Yk.Curve.PointType;"1"===d.key?C.setCurrentSelectionStatus($.Straight):"2"===d.key?C.setCurrentSelectionStatus($.Mirrored):"3"===d.key?C.setCurrentSelectionStatus($.Disconnected):"4"===d.key&&C.setCurrentSelectionStatus($.Asymmetric)}},xf.prototype.setCurrentSelectionStatus=function(f){var X=this;if(X.activing){var Y=X.getCurrentSelectintStatus();if(null!==Y&&Y!==f){X.activing.status=f;var r=X.activing.point,i=X.activing.pairs;if(i&&1===i.length){var E=i[0],w=X.screenInfo.curve,z=Yk.Curve.PointType,g=function(){X._writeToHt(),X._interactor.fp("shapePointStatus",Y,f)};if(f===z.Straight)return w.moveCtrlPoint(E,r,"c1"),w.moveCtrlPoint(E,r,"c2"),g(),void 0;if(Y===z.Straight){var n=w.findPairs(r,!0),W=n[0],d=W.r1||r,o=W.r2||r,b=o.clone().sub(d).multiplyScalar(.25);return w.moveCtrlPoint(E,r.clone().sub(b),"c1"),w.moveCtrlPoint(E,r.clone().add(b),"c2"),g(),void 0}var D=E.c1,H=E.c2;if(D&&H){if(f===z.Mirrored)return w.moveCtrlPoint(E,r.clone().multiplyScalar(2).sub(H),"c1"),g(),void 0;if(f===z.Asymmetric&&Y===z.Disconnected){var F=D.clone().sub(r).length(),b=r.clone().sub(H).setLength(F).add(r);return w.moveCtrlPoint(E,b,"c1"),g(),void 0}}X._interactor.fp("shapePointStatus",Y,f)}}}},xf.prototype._handleDataChanged=function(J){var m=this;if(m.screenInfo&&m.target){var n=m._interactor;m.gatherSingleTarget(n.gv,m.target,!0),m.check(n.gv,null,J?n._getLogicalPoint(J):new Yk.Math.Vector2(n._lastClientPoint)),n._42()}},xf.prototype.gatherSingleTarget=function(E,N,j){var $,O,z=this;z.screenInfo&&z.screenInfo.curve&&(O=z.screenInfo.curve._curves);var C=z.editing;$=C?z.screenInfo:z.screenInfo={};var y,I,b=N instanceof A.Edge;b?(y=N.s("edge.segments"),I=N.s("edge.points")||new A.List):(y=N._58O,I=N._59O),$.S=y;var U=$.P=[],q=Yk.getDataMatrix(N);if(I.each(function(h){h=q.apply(h);var L=Yk.toScreenPosition(E,h);U.push(L.x,L.y)}),b){var P=Yk.toScreenPosition(E,N._lastSourcePoint),w=Yk.toScreenPosition(E,N._lastTargetPoint);U.splice(0,0,P.x,P.y),U.push(w.x,w.y)}if(!$.S||!$.S.size()){$.S=new A.List,$.S.add(1);for(var G=0;G<U.length/2-1;G++)$.S.add(2)}if((!C||j)&&z.convertToCubicBezier(O),z.activing&&(j||!z.editing||"realPoint"===z.editing.type)){var J=$.curve.findPairs(z.activing.point);z.activing.pairs=J}b&&"points"!==N.s("edge.type")&&z._writeToHt()},xf.prototype._convertToNewPoint=function(G,b,F){var I,$,P;for(I=0,$=b.length;$>I;I++){if(P=b[I],P._p1.isNearEnough(G))return P._p1;if(P._p4.isNearEnough(G))return P._p4}if(F)for(I=0,$=Math.min(F.length,$);$>I;I++){if(P=F[I],P._p1===G)return b[I]._p1;if(P._p4===G)return b[I]._p4}},xf.prototype.convertToCubicBezier=function(U){var C,e,t=this,n=new Yk.Math.Curve,B=t.screenInfo;if(n.createFromHtShape(B.P,B.S),B.curve=n,t.activing){var E=n._curves;if(C=t.activing.point,e=t._convertToNewPoint(C,E,U),e&&(t.activing.point=e),t.activing.selections){var v=-1,V=t.activing.selections;V.forEach(function(B){v++,e=t._convertToNewPoint(B,E,U),e&&(V[v]=e)})}}},xf.prototype.check=function(n,H,C){if(!H||A.Default.isLeftButton(H)){var m=this;if(m._interactor.setCursor("default"),m.editing=null,m.highlight=null,m.tipInfo=null,m.screenInfo){if(xn())return m._interactor._42(),!0;if(m._checkEditCtrlPoint(C))return m._interactor._42(),!0;if(m._checkEditRealPoint(C))return m._interactor._42(),!0;var S=m.screenInfo.curve,O=S.checkPoint(C,m._interactor.getStyle("curveIntersectSize"));if(O){var a=m.highlight={};a.type="insertKnot",a.bezier=O.bezier,a.point=O.intersection}return m._interactor._42(),!0}}},xf.prototype._checkEditRealPoint=function(c){var t,L,$,V,Y,H,U=this,G=U.screenInfo.curve._curves,W=U._interactor.getStyle("curvePointIntersectSize"),B=1/0;for(W*=W,$=0,V=G.length;V>$;$++)t=G[$],Y=t._p1,H=c.distanceToSquared(Y),B>H&&(B=H,L=Y),Y=t._p4,H=c.distanceToSquared(Y),B>H&&(B=H,L=Y);if(B>W)return!1;var R=U.highlight={};return R.type="changeRealPoint",R.point=L,U.editing={type:"realPoint",point:L,shiftGuide:{point:L.clone(),dir:"x",limit:0}},U._interactor.setCursor("crosshair"),!0},xf.prototype._checkEditCtrlPoint=function(g){var M=this;if(M.activing&&!M.activing.selections){var G=M.getCurrentSelectintStatus();if(G!==Yk.Curve.PointType.Straight){var L=M.activing.pairs;if(L){var P=M._interactor.getStyle("curvePointIntersectSize");P*=P;var c,l,v,Q,r,f,y,z,W,Z=1/0;for(y=0,W=L.length;W>y;y++)for(Q=L[y],z=0;2>z;z++)r=0===z?"c1":"c2",Q[r]&&(f=g.distanceToSquared(Q[r]),Z>f&&(Z=f,c=Q,l=y,v=r));if(Z>P)return!1;M.activing.hlpair=c,M.activing.hltype=v;var I=M.highlight={};return I.type="changeCtrlPoint",I.point=c[v],M.editing={type:"ctrlPoint",pair:c,pairId:l,ctrlType:v,direction:c[v].clone().sub(M.activing.point).normalize()},M._interactor.setCursor("crosshair"),!0}}}},xf.prototype.startEdit=function(O,k){O.startDragging(k);var T=this;T.highlight&&"insertKnot"===T.highlight.type&&(T.insertKnot(),T.gatherSingleTarget(T._interactor.gv,T.target),T.activing=null,T._checkEditRealPoint(T._interactor._getLogicalPoint(k)));var V=T.highlight,J=A.Default.isShiftDown(k);if(!V||xn()){var r=T._interactor.gv;if(!r.setFocus(k)||r._scrolling)return;return r.isPannable()&&fr(k)&&!J&&(T._pan={tx:r.tx(),ty:r.ty()}),void 0}if("changeRealPoint"===V.type){var g,C=T.activing?T.activing.point:null,B=T.activing?T.activing.selections:null;if(J&&T.activing)C===V.point?(B?(T.activing={point:B[0]},B.length>1&&(B.splice(0,1),T.activing.selections=B)):T.activing=null,T.editing=null):B&&(g=B.indexOf(V.point))>=0?(B.length>1?B.splice(g,1):delete T.activing.selections,T.editing=null):B?(B.push(C),T.activing={point:V.point,selections:B}):T.activing={point:V.point,selections:[C]};else if(B)C===V.point||((g=B.indexOf(V.point))>=0?(B.splice(g,1,C),T.activing={point:V.point,selections:B}):T.activing={point:V.point});else{var t;C===V.point&&(t=T.activing.status),T.activing={point:V.point},t&&(T.activing.status=t)}}},xf.prototype.insertKnot=function(){var v=this,f=v.highlight,A=v.screenInfo.curve;A.insertKnot(f.bezier,f.point.t),v._writeToHt()},xf.prototype._writeToHt=function(){for(var B,k,u=this,R=u.screenInfo.curve,W=R.toHtShape(),h=W.points,i=[],D=W.segments,w=u._interactor.gv,V=u.target,q=V instanceof A.Edge,x=Yk.getDataMatrix(V).invert(),S=0,Z=h.length;Z>S;S++)B=h[S],k=Yk.toWorldPosition(w,B),k=x.apply(k),i.push(k);if(V._writing=!0,q){V.s("edge.type","points"),V.setStyle("edge.segments",D),V.setStyle("edge.points",i.slice(1,i.length-1));var s=u._nextChangeEdgeHost;delete u._nextChangeEdgeHost,s&&("source"===s.type?V.setSource(s.host):V.setTarget(s.host)),u._writeEdgeHostAnchor("source",i[0]),u._writeEdgeHostAnchor("target",i[i.length-1])}else i.length?(V.setSegments(D),V.setPoints(i,!0)):V.removeFromDataModel();delete V._writing},xf.prototype._writeEdgeHostAnchor=function(w,z){var R=this,r=R.target,Y="source"===w?r.getSource():r.getTarget(),h=r.s("edge."+w+".offset.x")||0,u=r.s("edge."+w+".offset.y")||0;if(h||u){var C=Y.getRotation();if(C){var D=V(C),j=E(C),p=h*D-u*j;u=h*j+u*D,h=p}z.x-=h,z.y-=u}var B=R._calcHostAnchor(z,Y);r.s("edge."+w+".anchor.x",B.x),r.s("edge."+w+".anchor.y",B.y)},xf.prototype._calcHostAnchor=function(n,i){var C=i.getMatrix(),c=C.tfi(n),g=i.getAnchor(),R=i.getSize();return{x:c.x/R.width+g.x,y:c.y/R.height+g.y}},xf.prototype._handlePanning=function(D){var X=this,P=X._pan;if(P){P.started=!0;var p=X._interactor,s=p.gv,x=p._lastClientPoint,H=ss(D);s.setTranslate(P.tx+H.x-x.x,P.ty+H.y-x.y),X.gatherSingleTarget(p.gv,X.target),p._42()}},xf.prototype.handleEdit=function(M,T){var I=this,c=I.editing;if(I._pan)return I._handlePanning(T),void 0;if(c){c.inEdit=!0;var L,t,q=I._interactor._getLogicalPoint(T),B=A.Default.isShiftDown(T),i=A.Default.isShiftDown(T);if(I._guideInfo=null,"ctrlPoint"===c.type&&i){var u=I.editing.direction.clone();L=I.activing.point;var n=u.dot(q.clone().sub(L));q=u.setLength(n).add(L)}else{var u;if("realPoint"===c.type&&i){var E=I.editing.shiftGuide,W=E.point,x=Math.abs(q.x-W.x),b=Math.abs(q.y-W.y);x>b&&x>E.limit&&"y"===E.dir&&(E.dir="x"),b>x&&b>E.limit&&"x"===E.dir&&(E.dir="y"),u=E.dir,"x"===u?(q.y=W.y,E.limit=Math.max(E.limit,x)):"y"===u&&(q.x=W.x,E.limit=Math.max(E.limit,b))}var J=I._isEditEdgeSourceTarget();if(J){var K=I._editEdgeSourceTarget(J,q,B);K&&(t=K.tipText)}else if(!B){var Q=I._guidingToEdit(q,u),O="realPoint"===c.type?I._interactor.gridGuide.findClosest(q,u,!0):null,X=1/0,Z=1/0;O&&(O.x&&(X=O.x),O.y&&(Z=O.y));var N=!1;Q&&(Q.xList&&(Math.abs(Q.x)<=Math.abs(X)?(N=!0,X=Q.x):delete Q.xList),Q.yList&&(Math.abs(Q.y)<=Math.abs(Z)?(N=!0,Z=Q.y):delete Q.yList),N&&(I._guideInfo=Q)),isFinite(X)&&(q.x+=X),isFinite(Z)&&(q.y+=Z),N&&(Q.v=q)}}var z=I.screenInfo.curve;if("realPoint"===c.type){L=c.point,z.moveRealPoint(L,q),c.point=q,I.highlight.point=q;var S=I.activing.status,C=I.activing.selections;if(I.activing={point:q,status:S},C){var D=q.clone().sub(L),_=0;C.forEach(function(c){var l=c.clone().add(D);z.moveRealPoint(c,l),C[_++]=l}),I.activing.selections=C}}else if("ctrlPoint"===c.type){var F=I.activing,s=F.pairs,P=s[c.pairId];z.moveCtrlPoint(P,q,c.ctrlType);var o=F.status,H=Yk.Curve.PointType;if((o===H.Mirrored||o===H.Asymmetric)&&P.c1&&P.c2){var L=new Yk.Math.Vector2(F.point),d="c1"===c.ctrlType?"c2":"c1";if(o===Yk.Curve.PointType.Mirrored)z.moveCtrlPoint(P,L.clone().multiplyScalar(2).sub(q),d);else if(o===H.Asymmetric){var n=P[d].clone().sub(L).length(),f=L.clone().sub(P[c.ctrlType]).setLength(n).add(L);isNaN(f.x)||z.moveCtrlPoint(P,f,d)}}}var p=A.Default.getLogicalPoint(T,I._interactor._canvas);if(p.x+=Yk.Icons.TipShiftX,p.y+=Yk.Icons.TipShiftY,!t){var G=Yk.toWorldPosition(M,q);
t=""+Yk.toFixed(G.x)+", "+Yk.toFixed(G.y)}I.tipInfo={helperPos:p,text:t,size:t.length},I._writeToHt()}},xf.prototype._isEditEdgeSourceTarget=function(){var o=this,T=o.target;if(!(T instanceof A.Edge))return!1;var I=o.editing.point,J=o.screenInfo.curve._curves;return I===J[0]._p1?"source":I===J[J.length-1]._p4?"target":!1},xf.prototype._editEdgeSourceTarget=function(b,L,p){var j,v=this,X=v.target;if(j="source"===b?X.getSource():X.getTarget()){var $=v._interactor.gv,P=Yk.toWorldPosition($,L),g=v._calcHostAnchor(P,j);if(!p){var J=v._interactor.getStyle("anchorRound"),i=v._interactor.getStyle("anchorSensitivity");g.x=Yk.roundTo(g.x,J,i),g.y=Yk.roundTo(g.y,J,i)}if(v._interactor.getStyle("edgeHostDetectPerFrame")||g.x<0||g.x>1||g.y<0||g.y>1){var z=$.getDataAt(P,function(i){return i===j?!1:$.isSelectable(i)?On(i)?!0:!1:!1});if(z){var B=v._calcHostAnchor(P,z);j=z,v._nextChangeEdgeHost={type:b,host:z},g=B,p||(g.x=Yk.roundTo(g.x,J,i),g.y=Yk.roundTo(g.y,J,i))}}if(!p){var W=j.getMatrix(),a=j.getAnchor(),R=j.getSize(),A={x:(g.x-a.x)*R.width,y:(g.y-a.y)*R.height},E=W.tf(A),T=Yk.toScreenPosition($,E);L.x=T.x,L.y=T.y}var F=j.getCorners(),K=[];return F.forEach(function(G){var F=Yk.toScreenPosition($,G);K.push(F.x,F.y)}),v._edgeHostGuideInfo=K,{host:j,anchor:g,tipText:""+g.x.toFixed(2)+", "+g.y.toFixed(2)}}},xf.prototype._guidingToEdit=function(X,y){var l,D,r=this;if(l=r.screenInfo.curve){D=l._curves;var W,H,w,N,U,R,K,f,v=1/0,j=1/0,Z=[];for(r.editing&&"realPoint"===r.editing.type&&(f=r.editing.point),U=0,R=2*D.length;R>U;U++)K=D[Math.floor(U/2)][U%2?"_p4":"_p1"],Z.indexOf(K)>=0||(Z.push(K),f&&f===K||(w=K.x-X.x,N=K.y-X.y,Math.abs(w)<Math.abs(v)?(v=w,W=[K]):w===v&&W.push(K),Math.abs(N)<Math.abs(j)?(j=N,H=[K]):N===j&&H.push(K)));var J=r._interactor.getStyle("smartGuideSensitivity");if((Math.abs(v)>J||"y"===y)&&(W=null),(Math.abs(j)>J||"x"===y)&&(H=null),W||H){var o=!1,b={};if(W&&(o=!0,b.xList=W,b.x=v),H&&(o=!0,b.yList=H,b.y=j),o)return b}}},xf.prototype._46O=function(){var L=this;L.editing=null,L._guideInfo=null,L._edgeHostGuideInfo=null,L._pan=null,L.tipInfo=null},xf.prototype._canDeletePoint=function(x,f){var v=this.target;if(!(v instanceof A.Edge))return!0;var s=x._curves[0],N=x._curves[x._curves.length-1];return s._p1===f||N._p4===f?!1:!0},xf.prototype.handleDelete=function(){var t=this;if(t.activing&&t.screenInfo){var h=A.Default.isShiftDown(),K=t.screenInfo.curve;t._canDeletePoint(K,t.activing.point)&&K.deleteRealPoint(t.activing.point,h),t.activing.selections&&t.activing.selections.forEach(function(R){t._canDeletePoint(K,R)&&K.deleteRealPoint(R,h)}),delete t.activing,delete t.editing,delete t.tipInfo,delete t._pan,t._writeToHt(),t._interactor.fp("deleteShapePoint",!1,!0)}},xf.prototype.handleDoubleClick=function(h){var y=this,A=y._interactor._getLogicalPoint(h);if(y.screenInfo&&y._checkEditRealPoint(A)){var Q=y.getCurrentSelectintStatus(),a=Yk.Curve.PointType;return Q=Q===a.Mirrored?a.Straight:a.Mirrored,y.setCurrentSelectionStatus(Q),y._interactor._42(),!0}},xf.prototype._drawHighlight=function(i){var H=this,c=H.highlight;if(c){var W=c.bezier,T=H._interactor;W&&Yk.Icons.DrawIcon(T,i,Yk.Icons.ShapeHighlightCurve,[W._p1.x,W._p1.y,W._p2.x,W._p2.y,W._p3.x,W._p3.y,W._p4.x,W._p4.y]);var X=c.point;X&&"insertKnot"===c.type&&Yk.Icons.DrawIcon(T,i,Yk.Icons.ShapeHighlighPoint,X)}},xf.prototype._drawGuide=function(q){var i=this,B=i._guideInfo;if(B){var p,g,X,V,A=B.v;for(p=0;2>p;p++)if(V=0===p?B.xList:B.yList)for(g=0,X=V.length;X>g;g++)Yk.Icons.DrawIcon(i._interactor,q,Yk.Icons.ShapeGuideLine,[A.x,A.y,V[g].x,V[g].y])}},xf.prototype._drawCurrentPoint=function(v){var T=this;if(T.activing){var C=T.activing,k=T.getCurrentSelectintStatus(),j=T._interactor;if(k!==Yk.Curve.PointType.Straight){var K=C.pairs,n=C.hlpair,D=C.hltype,w=C.selections;if(K&&!w){var B,U,L;for(U=0,L=K.length;L>U;U++)B=K[U],U===n&&B[D]?Yk.Icons.DrawIcon(j,v,Yk.Icons.ShapeActivingCtrl,{point:B.point,c1:B.c1,c2:B.c2,hl:D}):Yk.Icons.DrawIcon(j,v,Yk.Icons.ShapeActivingCtrl,B)}}Yk.Icons.DrawIcon(j,v,Yk.Icons.ShapeHighlighRealPoint,T.activing.point),w&&w.forEach(function(l){Yk.Icons.DrawIcon(j,v,Yk.Icons.ShapeHighlighRealPoint,l)})}},xf.prototype.clear=function(){var A=this;A.editing=null,A._guideInfo=null,A.activing=null,A.highlight=null},xf.prototype._42=function(d){var t=this;t.info={},t.editing||(t.screenInfo=null);var q=t._interactor;return q.editDetail?t.target&&t._interactor.gv.isSelected(t.target)&&t._interactor.gv.isVisible(t.target)?(t.gatherSingleTarget(q.gv,t.target),Yk.Icons.DrawIcon(q,d,Yk.Icons.ShapeBgCurve,t.screenInfo),t._drawHighlight(d),t._drawCurrentPoint(d),t._getRealPoint().forEach(function(o){Yk.Icons.DrawIcon(q,d,Yk.Icons.ShapePoint,o)}),t._drawGuide(d),t.tipInfo&&Yk.Icons.DrawIcon(q,d,Yk.Icons.TipHelper,t.tipInfo),t._edgeHostGuideInfo&&Yk.Icons.DrawIcon(q,d,Yk.Icons.EdgeHostGuide,t._edgeHostGuideInfo),void 0):(q.editDetail=!1,t.clear(),void 0):(t.clear(),void 0)},xf.prototype._getRealPoint=function(){var z=this.screenInfo,S=z.P,i=z.S,v=-1,b=[];return i.each(function(p){var n=1;if(3===p)n=2;else if(4===p)n=3;else if(5===p)return;v+=n,b.push({x:S[2*v],y:S[2*v+1]})}),b};var jg=Yk.MoveHelper=function(L){var h=this;h.catalog="Move",h._interactor=L};jg.prototype={},jg.prototype.constructor=jg,jg.prototype.calcShift=function(x,l,q){var Q,D,s=this,u=s._interactor.gv,E=u.lp(l);if("beginMove"===x&&s._gatherGridInfo(q._lastLogicalPoint||E),Q=s._target){var k=Q.downPosition;if(k){var T=s._interactor.getStyle("moveSensitivity")/u._zoom;if(k.distanceTo(E)<T)return{x:0,y:0};delete Q.downPosition}var j;D=A.Default.isShiftDown(l),D&&(E=s._dealShiftDown(E),j=Q.shiftGuide.dir);var e,V=Q.rawPos={x:Q.pos.x+E.x-Q.lp.x,y:Q.pos.y+E.y-Q.lp.y};if(A.Default.isShiftDown(l)){if(e=s._calcShiftByAddon(),s._target.node instanceof Yk.Group){var K=s._target.node;K._position.x+=e.x,K._position.y+=e.y}return e}for(var P,O=Q.x+V.x,i=Q.y+V.y,M={x:O,y:i},W={x:O+Q.w/2,y:i+Q.h/2},t={x:O+Q.w,y:i+Q.h},z=s._interactor.rectGuide,p=s._interactor.gridGuide,w=[z.findClosest(M,j),z.findClosest(W,j),z.findClosest(t,j),p.findClosest(M,j),p.findClosest(W,j),p.findClosest(t,j)],_=1/0,G=1/0,L=0,H=w.length;H>L;L++)P=w[L],P&&(O=P.x,i=P.y,isFinite(O)&&Math.abs(O)<Math.abs(_)&&(_=O),isFinite(i)&&Math.abs(i)<Math.abs(G)&&(G=i));if(isFinite(_)||(_=0),isFinite(G)||(G=0),e=s._calcShiftByAddon(_,G),s._target.node instanceof Yk.Group){var K=s._target.node;K._position.x+=e.x,K._position.y+=e.y}var B=Q.node,m=B instanceof A.Group&&B.isExpanded();if(!m){var h=V.x+_,v=V.y+G;s._interactor.rectGuide.gatherLines({node:B,x:Q.x+h,y:Q.y+v,w:Q.w,h:Q.h},j)}return e}},jg.prototype._calcShiftByAddon=function(G,b){var q=this._target,w=q.rawPos,h=q.node.getPosition();return G=G||0,b=b||0,{x:w.x-h.x+G,y:w.y-h.y+b}},jg.prototype._dealShiftDown=function(N){var n=this,F=n._target.shiftGuide,C=n._target.lp,J=Math.abs(N.x-C.x),t=Math.abs(N.y-C.y);J>t&&J>F.limit&&"y"===F.dir&&(F.dir="x"),t>J&&t>F.limit&&"x"===F.dir&&(F.dir="y");var m=F.dir;return"x"===m?(N.y=C.y,F.limit=Math.max(F.limit,J)):"y"===m&&(N.x=C.x,F.limit=Math.max(F.limit,t)),N},jg.prototype._gatherGridInfo=function(m){var $,k=this,T=k._interactor,j=T._getValidSelection();if(1===j.length){if($=j[0],!$.getRect)return k._target=null,void 0}else if($=Yk.Group.findOrCreateGroup(j),!$)return k._target=null,void 0;var S=$.getPosition(),e=$.getRect();k._target={node:$,x:e.x-S.x,y:e.y-S.y,w:e.width,h:e.height,lp:{x:m.x,y:m.y},pos:{x:S.x,y:S.y},shiftGuide:{dir:"x",limit:0},downPosition:new Yk.Math.Vector2(m)},T.rectGuide.gatherRects()},jg.prototype.clear=function(){var A=this;A._interactor.rectGuide.clear(),A._interactor._42()};var lp="directional",ip="point",ki="spot",Fc="light.color";Ad(y,{graph3dViewAttributes:f,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:h/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Uq,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:h/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(z,i){Li[z]=i},getShape3dModel:function(J){return Li[J]},createMatrix:function(X,m){uo(X)||(X=[X]);for(var t=X.length-1;t>=0;t--){var J=X[t];m=wc(J.mat,J.s3,J.r3,J.rotationMode,J.t3,m)}return m},transformVec:function(v,j){return Oh(v,j)},createBoxModel:function(){return{vs:Zh,ns:jc,uv:vf,is:bh}},createRoundRectModel:function(G,Q){return ub.roundRect(G,Q)},createStarModel:function(f,h){return ub.star(f,h)},createRectModel:function(f,P){return ub.rect(f,P)},createTriangleModel:function(k,w){return ub.triangle(k,w)},createRightTriangleModel:function(U,h){return ub.rightTriangle(U,h)},createParallelogramModel:function(I,V){return ub.parallelogram(I,V)},createTrapezoidModel:function(T,l){return ub.trapezoid(T,l)},createSmoothSphereModel:function(v,Z,B,j,l,Y,R){return cm(new Lo(v,Z,B,j,l,Y,R))},createSphereModel:function(E,t,u,I,B,U){return E?Df(E,t,u,I,B,U):y.createSmoothSphereModel()},createSmoothConeModel:function(y,K,i,N,G){return Nf(y,K,i,N,G)},createConeModel:function(r,k,a,$,D,W){return r?hi(r,k,a,$,D,W):Nf(W)},createSmoothCylinderModel:function(V,$,s,n,G,I,A,F){return cm(new Qr(V,$,s,n,G,I,A,F))},createCylinderModel:function(x,X,e,A,y,d,J){return x?wm(x,X,e,A,y,d,J):Gc(d,J)},createSmoothTorusModel:function(L,I,e,H,K,W){return cm(new wo(L,I,e,H,K,W))},createTorusModel:function(v,X,t,y,G,o,U){return v?Xn(v,X,t,y,G,o,U):ds(o,U)},createExtrusionModel:function($,R,X,c,n,b,o,E){return Kn($,R,X,c,n,b,o,E)},createSmoothRingModel:function(I,X,J,c,m,h){for(var W=[],Z=0;Z<I.length-1;Z+=2)W.push({x:I[Z],y:I[Z+1]});for(I=qn(W,X,J)[0],W=[],Z=0;Z<I.length;Z++){var C=I[Z];W.push(new pj(C.x,0,C.y))}return cm(new Yd(W,h,c,m))},createTextGeometry:function(E,K){return cm(new In(E,K))},loadFontFace:function(X,h){y.xhrLoad(X,function(k){if(!k)return h();var x;try{x=JSON.parse(k)}catch(X){x=JSON.parse(k.substring(65,k.length-2))}$h.loadFace(x),h&&h(x.familyName.toLowerCase())},h?null:{sync:!0})},createRingModel:function(t,G,r,I,d,c,n,z,l,x){for(var O=[],k=0;k<t.length-1;k+=2)O.push({x:t[k],y:t[k+1]});c=c||y.shapeSide,n=n||0,z=z||c;var o,v,a,j,W,q,U,D,e,B,k,h,g,X,s,A,M,J,Q=[],R=[],p=l?[]:f,Y=l?[]:f,w=x?[]:f,T=x?[]:f,K=I?[]:f,F=I?[]:f,L=d?[]:f,H=d?[]:f,t=qn(O,G,r),C=Ye(t),u=0,N=2*Math.PI/c;return t.forEach(function(_){if(a=_.length,a>1){if(j=_[0],I)for(q=j.x,D=j.y,k=n;z>k;k++)h=k+1,g=k*N,X=h*N,s=V(g),A=E(g),M=V(X),J=E(X),K.push(s*q,D,-A*q,M*q,D,-J*q,0,D,0),F.push(.5-.5*s,.5-.5*A,.5-.5*M,.5-.5*J,.5,.5);for(B=0;a>B;B++){for(W=_[B],q=j.x,U=W.x,D=j.y,e=W.y,o=u/C,u+=fm(j,W),v=u/C,k=n;z>k;k++)h=k+1,g=k*N,X=h*N,s=V(g),A=E(g),M=V(X),J=E(X),Q.push(s*U,e,-A*U,M*U,e,-J*U,s*q,D,-A*q,M*U,e,-J*U,M*q,D,-J*q,s*q,D,-A*q),R.push(k/c,v,h/c,v,k/c,o,h/c,v,h/c,o,k/c,o),l&&k===n&&(p.push(0,D,0,0,e,0,s*U,e,-A*U,s*U,e,-A*U,s*q,D,-A*q,0,D,0),Y.push(0,.5-D,0,.5-e,2*U,.5-e,2*U,.5-e,2*q,.5-D,0,.5-D)),x&&h===z&&(w.push(0,D,0,M*U,e,-J*U,0,e,0,M*U,e,-J*U,0,D,0,M*q,D,-J*q),T.push(1,.5-D,1-2*U,.5-e,1,.5-e,1-2*U,.5-e,1,.5-D,1-2*q,.5-D));j=W}if(d)for(q=j.x,D=j.y,k=n;z>k;k++)h=k+1,g=k*N,X=h*N,s=V(g),A=E(g),M=V(X),J=E(X),L.push(M*q,D,-J*q,s*q,D,-A*q,0,D,0),H.push(.5-.5*M,.5+.5*J,.5-.5*s,.5+.5*A,.5,.5)}}),{vs:Q,uv:R,bottom_vs:L,bottom_uv:H,top_vs:K,top_uv:F,from_vs:p,from_uv:Y,to_vs:w,to_uv:T}}},!0),Ad(R,{"3d.move.mode":t,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":t,"edge.gradient.color":t,"edge.source.t3":t,"edge.target.t3":t,"light.type":ip,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":h/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Ol,"wf.short":!1,"wf.mat":t,batch:t,"transparent.mask":!1,brightness:t,"select.brightness":.7,"repeat.uv.length":t,"label.face":Eb,"label.t3":t,"label.r3":t,"label.texture.scale":2,"label.rotationMode":lh,"label.light":!1,"label.blend":t,"label.reverse.flip":!1,"label.reverse.color":vs,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Eb,"label2.t3":t,"label2.r3":t,"label2.texture.scale":2,"label2.rotationMode":lh,"label2.light":!1,"label2.blend":t,"label2.reverse.flip":!1,"label2.reverse.color":vs,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Eb,"note.t3":t,"note.r3":t,"note.texture.scale":2,"note.rotationMode":lh,"note.light":!1,"note.blend":t,"note.reverse.flip":!1,"note.reverse.color":vs,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Eb,"note2.t3":t,"note2.r3":t,"note2.texture.scale":2,"note2.rotationMode":lh,"note2.light":!1,"note2.blend":t,"note2.reverse.flip":!1,"note2.reverse.color":vs,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:t,"shape3d.color":jo,"shape3d.top.color":t,"shape3d.bottom.color":t,"shape3d.from.color":t,"shape3d.to.color":t,"shape3d.image":t,"shape3d.top.image":t,"shape3d.bottom.image":t,"shape3d.from.image":t,"shape3d.to.image":t,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":t,"shape3d.side.to":t,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":t,"shape3d.opacity":t,"shape3d.reverse.flip":!1,"shape3d.reverse.color":vs,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":t,"shape3d.uv.scale":t,"shape3d.top.uv.offset":t,"shape3d.top.uv.scale":t,"shape3d.bottom.uv.offset":t,"shape3d.bottom.uv.scale":t,"shape3d.from.uv.offset":t,"shape3d.from.uv.scale":t,"shape3d.to.uv.offset":t,"shape3d.to.uv.scale":t,"shape3d.top.cap":t,"shape3d.bottom.cap":t,"shape3d.start.angle":0,"shape3d.sweep.angle":c,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":jo,"all.image":t,"all.blend":t,"all.opacity":t,"all.reverse.flip":!1,"all.reverse.color":vs,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":t,"all.uv.offset":t,"all.uv.scale":t,"all.discard.selectable":!0,mat:t,"left.mat":t,"right.mat":t,"top.mat":t,"bottom.mat":t,"front.mat":t,"back.mat":t},!0);var qf,Ub=!1,Gl=[0,0,0,1/255],fl={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:Pc,2:Lc,3:Yo,4:Ro,5:Eb,6:Jm}},Qm=function(V,N,O,B){if(N.getFaceVisible(V,O)){em(N,Re(V,N.getFaceMat(V,O)||N.getMat(V)));var I=N._26I;N.getFaceReverseCull(V,O)?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),us(I,N._prg.uFixPickReverseColor,fl[O]),uj(I),yf(I,B,6),Fn(I),Rf(N)}},Uk=function(e){return e instanceof Ne},yc=function(S){return[S.x,S.e||0,S.y]},fn=function(G,Q,g){for(var Q=sm(Q),S=Q[0],A=Q[1],B=Q[2];g--;)G.push(S,A,B)},me=function(o,c,v){for(var c=sm(c),s=c[0],u=c[1],j=c[2],y=c[3];v--;)o.push(s,u,j,y)},fb=function(k,m,J){if(m)for(var g,t,i,f=m[0],z=m[1],K=m[2],N=m[4],u=m[5],A=m[6],Z=m[8],L=m[9],C=m[10],V=m[12],D=m[13],b=m[14],Y=J.length,P=0,P=0;Y>P;P+=3)g=J[P],t=J[P+1],i=J[P+2],k.push(f*g+N*t+Z*i+V,z*g+u*t+L*i+D,K*g+A*t+C*i+b);else Wh(k,J)},Ul=function(S,F){var G=F.s("light.intensity"),I=sm(F.s(Fc)),D=I[0],C=I[1],i=I[2];1!==G&&(D*=G,C*=G,i*=G),S.push(D,C,i,F.s("light.disabled")?1:0)},zl=function(o,H,s){us(H,s.uHeadlightRange,o._headlightRange);var M=o._headlightIntensity,x=sm(o._headlightColor);1!==M&&(x=[x[0]*M,x[1]*M,x[2]*M]),us(H,s.uHeadlightColor,[x[0],x[1],x[2],o._headlightDisabled?1:0]);var G=o._59O,Y=o._spots,r=o._dirs;if(G.length){var D=[],A=[],B=[];G.forEach(function(o){Ul(D,o),Wh(A,o.p3()),B.push(o.s("light.range"))}),H.uniform4fv(s.uPointColor,D),H.uniform1fv(s.uPointRange,B),H.uniform3fv(s.uPointPosition,A)}if(Y.length){var k=[],Q=[],z=[],e=[],l=[],b=[];Y.forEach(function(J){Ul(k,J),Wh(Q,J.p3()),Wh(z,J.s("light.center")),e.push(J.s("light.range")),l.push(V(J.s("light.angle")/2)),b.push(J.s("light.exponent"))}),H.uniform4fv(s.uSpotColor,k),H.uniform1fv(s.uSpotRange,e),H.uniform1fv(s.uSpotAngle,l),H.uniform1fv(s.uSpotExponent,b),H.uniform3fv(s.uSpotPosition,Q),H.uniform3fv(s.uSpotCenter,z)}if(r.length){var F=[],g=[];r.forEach(function(t){Ul(F,t),Wh(g,t.p3())}),H.uniform4fv(s.uDirColor,F),H.uniform3fv(s.uDirPosition,g)}},vk=function(A){return A>0&&0===(A-1&A)},Lf=function(l){return l=i(0,K(h,l)),l=i(xq,K(h-xq,l))},td=function(){return.05+l()/2},Qc=function(J,Z,C,E){var j,W=J.getEye();return J.isOrtho()?(j=po(J.getCenter(),W),j[0]+=E[0],j[1]+=E[1],j[2]+=E[2]):j=W,Ze(Z,C,E,j)},Ze=function(q,r,T,c){var $=Tm(q,r),W=po(c,T,!0),C=Tm(W,r);if(u(C)<xq)return f;var e=($-Tm(T,r))/C;return[T[0]+W[0]*e,T[1]+W[1]*e,T[2]+W[2]*e]},Xm=function(y,C){return{x:2*y.x-C.x,y:2*y.y-C.y}},Tl=function(W,i,B,q){var f,x;if(!W)return f=T(i.y-B.y,B.x-i.x),{x:i.x+q*E(f),y:i.y+q*V(f)};if(!B)return f=T(W.y-i.y,i.x-W.x),{x:i.x+q*E(f),y:i.y+q*V(f)};var t=po([W.x,W.y,0],[i.x,i.y,0],!0),O=po([B.x,B.y,0],[i.x,i.y,0],!0),S=-(t[0]+O[0])/2,P=-(t[1]+O[1])/2,X=Q(S*S+P*P);if(xq>X)return f=T(W.y-i.y,i.x-W.x),{x:i.x+q*E(f),y:i.y+q*V(f)};var N=W.x-i.x,A=W.y-i.y,G=B.x-i.x,$=B.y-i.y,v=Q(Math.min(N*N+A*A,G*G+$*$));return f=Y(Tm(t,O))/2,x=t[1]*O[0]-t[0]*O[1]>0?-1:1,S/=X,P/=X,X=Math.min(q/E(f),v/V(f)),{x:i.x+x*X*S,y:i.y+x*X*P}},_m=function(s){var c=s[1],d=s[2],l=s[3],t=s[6],o=s[7],I=s[11];s[1]=s[4],s[2]=s[8],s[3]=s[12],s[4]=c,s[6]=s[9],s[7]=s[13],s[8]=d,s[9]=t,s[11]=s[14],s[12]=l,s[13]=o,s[14]=I},zd=function(i){var h=i[0],A=i[1],C=i[2],F=i[3],Z=i[4],N=i[5],c=i[6],l=i[7],w=i[8],Q=i[9],P=i[10],t=i[11],O=i[12],q=i[13],Y=i[14],z=i[15],W=h*N-A*Z,p=h*c-C*Z,M=h*l-F*Z,K=A*c-C*N,G=A*l-F*N,b=C*l-F*c,a=w*q-Q*O,r=w*Y-P*O,s=w*z-t*O,v=Q*Y-P*q,S=Q*z-t*q,m=P*z-t*Y,V=W*m-p*S+M*v+K*s-G*r+b*a;return V?(V=1/V,i[0]=(N*m-c*S+l*v)*V,i[1]=(C*S-A*m-F*v)*V,i[2]=(q*b-Y*G+z*K)*V,i[3]=(P*G-Q*b-t*K)*V,i[4]=(c*s-Z*m-l*r)*V,i[5]=(h*m-C*s+F*r)*V,i[6]=(Y*M-O*b-z*p)*V,i[7]=(w*b-P*M+t*p)*V,i[8]=(Z*S-N*s+l*a)*V,i[9]=(A*s-h*S-F*a)*V,i[10]=(O*G-q*M+z*W)*V,i[11]=(Q*M-w*G-t*W)*V,i[12]=(N*r-Z*v-c*a)*V,i[13]=(h*v-A*r+C*a)*V,i[14]=(q*p-O*K-Y*W)*V,i[15]=(w*K-Q*p+P*W)*V,void 0):f},rb=function(D,R){if(R){var t=R[0],N=R[1],f=R[2];D[12]=D[0]*t+D[4]*N+D[8]*f+D[12],D[13]=D[1]*t+D[5]*N+D[9]*f+D[13],D[14]=D[2]*t+D[6]*N+D[10]*f+D[14],D[15]=D[3]*t+D[7]*N+D[11]*f+D[15]}},zb=function(S,J){if(J){var g=J[0],m=J[1],n=J[2];S[0]=S[0]*g,S[1]=S[1]*g,S[2]=S[2]*g,S[3]=S[3]*g,S[4]=S[4]*m,S[5]=S[5]*m,S[6]=S[6]*m,S[7]=S[7]*m,S[8]=S[8]*n,S[9]=S[9]*n,S[10]=S[10]*n,S[11]=S[11]*n}},ce=function(X,T,n){var J=T[0],i=T[1],b=T[2],Q=T[3],P=T[4],p=T[5],G=T[6],v=T[7],o=T[8],C=T[9],I=T[10],w=T[11],j=T[12],m=T[13],L=T[14],$=T[15],y=n[0],D=n[1],d=n[2],W=n[3];return X[0]=y*J+D*P+d*o+W*j,X[1]=y*i+D*p+d*C+W*m,X[2]=y*b+D*G+d*I+W*L,X[3]=y*Q+D*v+d*w+W*$,y=n[4],D=n[5],d=n[6],W=n[7],X[4]=y*J+D*P+d*o+W*j,X[5]=y*i+D*p+d*C+W*m,X[6]=y*b+D*G+d*I+W*L,X[7]=y*Q+D*v+d*w+W*$,y=n[8],D=n[9],d=n[10],W=n[11],X[8]=y*J+D*P+d*o+W*j,X[9]=y*i+D*p+d*C+W*m,X[10]=y*b+D*G+d*I+W*L,X[11]=y*Q+D*v+d*w+W*$,y=n[12],D=n[13],d=n[14],W=n[15],X[12]=y*J+D*P+d*o+W*j,X[13]=y*i+D*p+d*C+W*m,X[14]=y*b+D*G+d*I+W*L,X[15]=y*Q+D*v+d*w+W*$,X},lk=function(y,e,C,H){var R,h,v,$,L,J,z,W,a,S,F=e[0],P=e[1],Z=e[2],s=H[0],T=H[1],G=H[2],_=C[0],k=C[1],j=C[2];return u(F-_)<xq&&u(P-k)<xq&&u(Z-j)<xq?hk(y):(z=F-_,W=P-k,a=Z-j,S=1/Q(z*z+W*W+a*a),z*=S,W*=S,a*=S,R=T*a-G*W,h=G*z-s*a,v=s*W-T*z,S=Q(R*R+h*h+v*v),S?(S=1/S,R*=S,h*=S,v*=S):(R=0,h=0,v=0),$=W*v-a*h,L=a*R-z*v,J=z*h-W*R,S=Q($*$+L*L+J*J),S?(S=1/S,$*=S,L*=S,J*=S):($=0,L=0,J=0),y[0]=R,y[1]=$,y[2]=z,y[3]=0,y[4]=h,y[5]=L,y[6]=W,y[7]=0,y[8]=v,y[9]=J,y[10]=a,y[11]=0,y[12]=-(R*F+h*P+v*Z),y[13]=-($*F+L*P+J*Z),y[14]=-(z*F+W*P+a*Z),y[15]=1,y)},tn=function(m,M,p,S,F){var R=1/X(M/2),o=1/(S-F);return m[0]=R/p,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=R,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(F+S)*o,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*F*S*o,m[15]=0,m},qs=function(P,p,N,Q,F,S,g){var K=1/(p-N),b=1/(Q-F),t=1/(S-g);return P[0]=-2*K,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=-2*b,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=2*t,P[11]=0,P[12]=(p+N)*K,P[13]=(F+Q)*b,P[14]=(g+S)*t,P[15]=1,P},we=function(c,Y){var g=Y[0],R=Y[1],s=Y[2],r=Y[3],z=g*g+R*R+s*s+r*r,K=z?1/z:0;return c[0]=-g*K,c[1]=-R*K,c[2]=-s*K,c[3]=r*K,c},En=function(Q,$){var G=$[0]+$[5]+$[10],i=0;return G>0?(i=2*Math.sqrt(G+1),Q[3]=.25*i,Q[0]=($[6]-$[9])/i,Q[1]=($[8]-$[2])/i,Q[2]=($[1]-$[4])/i):$[0]>$[5]&$[0]>$[10]?(i=2*Math.sqrt(1+$[0]-$[5]-$[10]),Q[3]=($[6]-$[9])/i,Q[0]=.25*i,Q[1]=($[1]+$[4])/i,Q[2]=($[8]+$[2])/i):$[5]>$[10]?(i=2*Math.sqrt(1+$[5]-$[0]-$[10]),Q[3]=($[8]-$[2])/i,Q[0]=($[1]+$[4])/i,Q[1]=.25*i,Q[2]=($[6]+$[9])/i):(i=2*Math.sqrt(1+$[10]-$[0]-$[5]),Q[3]=($[1]-$[4])/i,Q[0]=($[8]+$[2])/i,Q[1]=($[6]+$[9])/i,Q[2]=.25*i),Q},Zk=function(Z,l,m){var t=l[0],$=l[1],b=l[2],K=l[3],S=t+t,i=$+$,f=b+b,M=t*S,U=t*i,z=t*f,D=$*i,G=$*f,j=b*f,r=K*S,E=K*i,H=K*f;return Z[0]=1-(D+j),Z[1]=U+H,Z[2]=z-E,Z[3]=0,Z[4]=U-H,Z[5]=1-(M+j),Z[6]=G+r,Z[7]=0,Z[8]=z+E,Z[9]=G-r,Z[10]=1-(M+D),Z[11]=0,Z[12]=m[0],Z[13]=m[1],Z[14]=m[2],Z[15]=1,Z},rl=function(e,k){return lk(k?k:el(),e._eye,e._center,e._up)},Dp=function(u){var f=u.getAspect(),w=u._near,P=u._far,R=el();if(u._ortho){var $=u._orthoWidth/2,X=$/f;qs(R,-$,$,-X,X,w,P)}else tn(R,u._fovy,f,w,P);return R},Cq=function($,R){if(!$)return f;var L=0,P=1,Y=2,g=[],N=0,p=$.length,V=p/3;if(R){for(;p>N;N++)g[N]=0;for(N=0;N<R.length;N+=3){var r=[],v=[],B=[];r[L]=$[3*R[N+1]+L]-$[3*R[N]+L],r[P]=$[3*R[N+1]+P]-$[3*R[N]+P],r[Y]=$[3*R[N+1]+Y]-$[3*R[N]+Y],v[L]=$[3*R[N+2]+L]-$[3*R[N+1]+L],v[P]=$[3*R[N+2]+P]-$[3*R[N+1]+P],v[Y]=$[3*R[N+2]+Y]-$[3*R[N+1]+Y],B[L]=r[P]*v[Y]-r[Y]*v[P],B[P]=r[Y]*v[L]-r[L]*v[Y],B[Y]=r[L]*v[P]-r[P]*v[L];for(var T=0;3>T;T++)g[3*R[N+T]+L]+=B[L],g[3*R[N+T]+P]+=B[P],g[3*R[N+T]+Y]+=B[Y]}}else for(N=0;V>N;N+=3){var r=[],v=[],B=[];r[L]=$[3*(N+1)+L]-$[3*N+L],r[P]=$[3*(N+1)+P]-$[3*N+P],r[Y]=$[3*(N+1)+Y]-$[3*N+Y],v[L]=$[3*(N+2)+L]-$[3*(N+1)+L],v[P]=$[3*(N+2)+P]-$[3*(N+1)+P],v[Y]=$[3*(N+2)+Y]-$[3*(N+1)+Y],B[L]=r[P]*v[Y]-r[Y]*v[P],B[P]=r[Y]*v[L]-r[L]*v[Y],B[Y]=r[L]*v[P]-r[P]*v[L];for(var T=0;3>T;T++)g[3*(N+T)+L]=B[L],g[3*(N+T)+P]=B[P],g[3*(N+T)+Y]=B[Y]}for(N=0;p>N;N+=3){var I=[];I[L]=g[N+L],I[P]=g[N+P],I[Y]=g[N+Y];var m=Q(I[L]*I[L]+I[P]*I[P]+I[Y]*I[Y]);0===m&&(m=xq),I[L]=I[L]/m,I[P]=I[P]/m,I[Y]=I[Y]/m,g[N+L]=I[L],g[N+P]=I[P],g[N+Y]=I[Y]}return new Sl(g)},vm=function(k,c,j){if(j||(j=k.createTexture()),c){var V=k.TEXTURE_2D,C=k.LINEAR,B=k.REPEAT,J=k.CLAMP_TO_EDGE,s=k.TEXTURE_MIN_FILTER;Hr(k,j),k.texImage2D(V,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,c),Lh(k,k.TEXTURE_MAG_FILTER,C),vk(c.width)&&vk(c.height)?(Lh(k,k.TEXTURE_WRAP_S,B),Lh(k,k.TEXTURE_WRAP_T,B),Lh(k,s,k.LINEAR_MIPMAP_LINEAR),k.generateMipmap(V)):(Lh(k,k.TEXTURE_WRAP_S,J),Lh(k,k.TEXTURE_WRAP_T,J),Lh(k,s,C)),Hr(k,f)}return j},gh=function(k,y){var O=new Uint8Array(3);return y=y||k.createTexture(),Hr(k,y),Lh(k,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texImage2D(k.TEXTURE_2D,0,k.RGB,1,1,0,k.RGB,k.UNSIGNED_BYTE,O),y},vl=function(e){e._26I&&e._prg&&(e._26I.deleteProgram(e._prg),e._prg=f)},Hf=function(J,T,o,v){var W=J.createShader(o);return J.shaderSource(W,v),J.compileShader(W),J.attachShader(T,W),W},Sp=function(B){return B.createBuffer()},Hr=function(I,Y){I.bindTexture(I.TEXTURE_2D,Y)},km=function(t,O){t.bindFramebuffer(t.FRAMEBUFFER,O)},Lh=function(I,$,V){I.texParameteri(I.TEXTURE_2D,$,V)},cc=function(Z,z){if(z){var z=sm(z);Z.clearColor(z[0],z[1],z[2],z[3])}},Uc=function(C,g){us(C,g.uFix,!0),bs(C,g.aNormal)},ws=function(t,g){us(t,g.uFix,!1),Bs(t,g.aNormal)},sl=function(H,q,N,Y,j,v,R,o){H._picking||(N?(us(H,q.uBlend,!0),us(H,q.uBlendColor,N)):us(H,q.uBlend,!1),us(H,q.uLight,Y==f?!0:Y),jf(j)&&1!==j&&us(H,q.uPartOpacity,j),us(H,q.uReverseFlip,v==f?!1:v),us(H,q.uFixPickReverseColor,R||vs)),o?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE)},gl=function(Q,z){Q._picking||us(Q,z.uPartOpacity,1)},uj=function(r,G,C,N,J,P,T,h){if(!C)return Hr(r,r._emptyTexture),void 0;us(r,G.uTexture,!0),us(r,G.uDiscardSelectable,lj(N)?N:!0),Bs(r,G.aUv),ob(r,J,P,G.aUv,2),r.activeTexture(r.TEXTURE0),Hr(r,C),r.uniform1i(G.uSampler,0);var s=[0,0,1,1];T&&(s[0]=T[0],s[1]=T[1]),h&&(s[2]=h[0],s[3]=h[1]),us(r,G.uOffsetScale,s)},Fn=function(j,c,S){Hr(j,f),S&&(bs(j,c.aUv),us(j,c.uTexture,!1))},Fo=function(h,J,t,j,o,X){!t||C||H||h.lineWidth(t),j&&!h._picking&&us(h,J.uFixPickReverseColor,j),o&&ob(h,o,X,J.aPosition)},wl=function(K,t,l,Q){qf&&(Q=K[qf]),K.drawArrays(Q==f?K.TRIANGLES:Q,t,l)},yf=function(G,H,D,V){qf&&(V=G[qf]),G.drawElements(V==f?G.TRIANGLES:V,D,G.UNSIGNED_SHORT,H==f?0:2*H)},ob=function(q,P,S,B,E){var L=q.ARRAY_BUFFER;q.bindBuffer(L,P),S&&q.bufferData(L,S,q.STATIC_DRAW),B!=f&&q.vertexAttribPointer(B,E?E:3,q.FLOAT,!1,0,0)},Ke=function(D,Y,Z){var _=D.ELEMENT_ARRAY_BUFFER;D.bindBuffer(_,Y),Z&&D.bufferData(_,Z,D.STATIC_DRAW)},us=function(F,o,I){if(I!=f&&o!=f){I=sm(I);var U=I.length;3===U?F.uniform3fv(o,I):4===U?F.uniform4fv(o,I):16===U?F.uniformMatrix4fv(o,!1,I):lj(I)?F.uniform1i(o,I?1:0):2===U?F.uniform2fv(o,I):F.uniform1f(o,I)}},Bs=function(p,q){q!=f&&q>=0&&p.enableVertexAttribArray(q)},bs=function(w,l){l!=f&&l>=0&&w.disableVertexAttribArray(l)},Rf=function(U,W){var G=U.getGL(),P=U._prg;U._7O=U._8O.pop(),W&&(us(G,P.uMVMatrix,U._7O),U._6O=W,us(G,P.uNMatrix,W))},og=function(A,P){return P||(P=el()),vj(P,A),zd(P),_m(P),P},em=function(i,L){var B=i.getGL(),h=i._prg,z=i._7O;L&&(i._8O.push(Ym(z)),ce(z,z,L)),us(B,h.uMVMatrix,z),us(B,h.uNMatrix,og(z,i._6O))},fp=function(y,H,d,B,o,k){if(d){if(B){var Y=d.value++,r=[(255&Y>>24)/255,(255&Y>>16)/255,(255&Y>>8)/255,(255&Y)/255];d[Y]={data:o,part:k}}else r=Gl;return us(y,H.uFixPickReverseColor,r),r}},rm=function(){var v={center:function(A,T,G,W,m){var Y=T[1]/2,v={x:-T[0]/2,y:Y,width:T[0],height:T[1]},w=Ji(A,v,G);return[w.x+W,2*Y-w.y-m,td()]},front:function(c,F,C,K,v){var k=F[1]/2,J={x:-F[0]/2,y:k,width:F[0],height:F[1]},u=Ji(c,J,C);return[u.x+K,2*k-u.y-v,F[2]/2+td()]},back:function(S,A,Z,X,E){var L=A[0]/2,M=A[1]/2,b={x:L,y:M,width:A[0],height:A[1]},q=Ji(S,b,Z);return[2*L-q.x-X,2*M-q.y-E,-A[2]/2-td()]},left:function(Z,z,k,O,L){var h=z[1]/2,Q={x:-z[2]/2,y:h,width:z[2],height:z[1]},i=Ji(Z,Q,k);return[-z[0]/2-td(),2*h-i.y-L,i.x+O]},right:function(d,w,t,Y,L){var X=w[2]/2,s=w[1]/2,S={x:X,y:s,width:w[2],height:w[1]},h=Ji(d,S,t);return[w[0]/2+td(),2*s-h.y-L,2*X-h.x-Y]},top:function(v,w,t,Y,s){var m={x:-w[0]/2,y:-w[2]/2,width:w[0],height:w[2]},C=Ji(v,m,t);return[C.x+Y,w[1]/2+td(),C.y+s]},bottom:function(M,A,D,n,Y){var o=A[2]/2,R={x:-A[0]/2,y:o,width:A[0],height:A[2]},c=Ji(M,R,D);return[c.x+n,-A[1]/2-td(),2*o-c.y-Y]}};return function(I,$,S,h,L,Y){return v[h](I,$,S,L||0,Y||0)}}(),Ti=function(M,t,g,c,n,H,x,Y,u,U){if(n&&(t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]),rb(M,g),Y){var Z=el();if(sh(Z,u,U),Oh(t,Z),rb(M,t),M.auto=Y,M.pos=Oh([0,0,0],M),H){var v=M.mat2=el();sh(v,H,x)}}else sh(M,u,U),rb(M,t),c===Pc?Vr(M,-N):c===Lc?Vr(M,N):c===Yo?Rc(M,-N):c===Ro?Rc(M,N):c===Jm&&Vr(M,h),sh(M,H,x);return M},Jp=function(b,O){var X=O.auto,U=O.mat2,v=b.gv;if(X){var y,p=el(),u=[0,0,0,0];y="string"==typeof X?[X.indexOf("x")<0?v._eye[0]:v._center[0],X.indexOf("y")<0?v._eye[1]:v._center[1],X.indexOf("z")<0?v._eye[2]:v._center[2]]:v._eye,En(u,lk(el(),y,v._center,v._up)),Zk(p,we(u,u),O.pos),U&&ce(p,p,U),em(v,p)}else em(v,O)},ac=function(r,C,p,g,D){var H=r.s,m=r.gv,Z=m.getGL(),n=m._prg,M=m._buffer,S=m._1O;vm(Z,Pr,S),Jp(r,p),sl(Z,n,H(C+".blend"),H(C+".light"),H(C+".opacity"),H(C+".reverse.flip"),H(C+".reverse.color"),H(C+".reverse.cull")),uj(Z,n,S,D,M.uv,Wd),ob(Z,M.vs,g,n.aPosition),ob(Z,M.ns,Zb,n.aNormal),Ke(Z,M.is,Ib),yf(Z,0,Ib.length),Fn(Z,n,S),gl(Z,n),Rf(m)},Ef=function(P,W,c){var b=P.gv,j=P.data,l=P[W]={blend:b.getBodyColor(j)||b.getFaceBlend(j,W),light:b.getFaceLight(j,W),color:b.getFaceColor(j,W),opacity:b.getFaceOpacity(j,W),transparent:b.getFaceTransparent(j,W),reverseFlip:b.getFaceReverseFlip(j,W),reverseColor:b.getFaceReverseColor(j,W),reverseCull:b.getFaceReverseCull(j,W),texture:b.getFaceImage(j,W),discardSelectable:b.getFaceDiscardSelectable(j,W)};if("csg"!==W){l.uv=b.getFaceUv(j,W)||c&&c[W+"Uv"],l.uvScale=b.getFaceUvScale(j,W)||c&&c[W+"UvScale"],l.uvOffset=b.getFaceUvOffset(j,W)||c&&c[W+"UvOffset"];var A=b.getFaceMat(j,W);A&&(l.mat=Re(j,A))}return l},Rn=function(l,v,V,x,q){if(x){if(!q(x.transparent))return;var N=l.data,J=l.gv,H=J._buffer,R=J.getTexture(x.texture,N);uj(v,V,R,x.discardSelectable,H.uv,x.tuv,x.uvOffset,x.uvScale),sl(v,V,x.blend,x.light,x.opacity,x.reverseFlip,x.reverseColor,x.reverseCull),us(v,V.uDiffuse,x.color),ob(v,H.vs,x.vs,V.aPosition),ob(v,H.ns,x.ns,V.aNormal),wl(v,0,x.vs.length/3),gl(v,V),Fn(v,V,R)}},Fd=function(A,r,S,q,L,s){var i,U,z,g,P,N,V,j,v,G,X,H=[q-r,L-S],b=A?A.length:0;for(z=0;b>z;z++){for(g=2,i=A[z],P=i[0],N=i[1];g+1<i.length;){if(V=i[g],j=i[g+1],U=ir(r,S,q,L,P,N,V,j,!0)){v=[V-P,j-N],G=fm(v),v[0]/=G,v[1]/=G,G=Tm(H,v),G=G>0?s:-s,X=[v[0]*G,v[1]*G];break}P=V,N=j,g+=2}if(X)break}if(X)for(q=r+X[0],L=S+X[1],z=0;b>z;z++)for(g=2,i=A[z],P=i[0],N=i[1];g+1<i.length;){if(V=i[g],j=i[g+1],U=ir(r,S,q,L,P,N,V,j,!0))return[0,0];P=V,N=j,g+=2}return X?X:[q-r,L-S]},$o=A.graph3d={},xh=function(x,H,p){zs(b+".graph3d."+x,H,p)},aq="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",ne="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";
Ad(y,{setBatchInfo:function(o,O){Ab[o]=O},getBatchInfo:function(O){return Ab[O]}},!0);var yo=[1,1,1],Ac=[1,0,0,0,0,1,0,1,1,1,1,0],Rq=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],vb=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],jp=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Ki=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Eo=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],kr=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Sk=function(I,O){Xd(I,O),oc(I,O,"_wireframeModelMap","_wireframeIndexMap"),oc(I,O,"_polylineModelMap","_polylineIndexMap")},Xd=function(d,r){if(r){var I,u,Y=r._id,a=d._33O,N=d._34O,z=N[Y];if(z){u=z.batch,I=a[u];var b=z.begin,f=z.size,A=3*b,G=3*f,i=4*b,s=4*f,q=I.vs,H=I.uv,x=I.cs,Z=I.bs,w=I.rs,v=I.ds,U=z.index;if(I.invalidate=!0,delete N[Y],v.splice(U,1),oo(v))delete a[u];else{for(;U<v.length;U++)z=N[v[U]._id],z.index--,z.begin-=f;q.splice(A,G),I.ns.splice(A,G),I.ps.splice(i,s),H&&H.splice(2*b,2*f),x&&x.splice(i,s),Z&&Z.splice(A,G),w&&w.splice(b,f)}}}else d._34O={},d._33O={}},oc=function(l,i,Z,F){if(i){var V,x,S=i._id,Q=l[Z],R=l[F],s=R[S];if(s){x=s.batch,V=Q[x];var Y=s.begin,M=s.size,O=3*Y,q=3*M,U=4*Y,B=4*M,D=V.ds,n=s.index;if(V.invalidate=!0,delete R[S],D.splice(n,1),oo(D))delete Q[x];else{for(;n<D.length;n++)s=R[D[n]._id],s.index--,s.begin-=M;V.vs.splice(O,q),V.cs.splice(U,B),V.ps.splice(U,B),V.ls&&V.ls.splice(Y,M)}}}else l[Z]={},l[F]={}},Jg=function(A,e,F,y){if(!y)return f;var O=e[y];if(!O){var u=Ab[y]||yp,C=u.image?[]:f;O=e[y]={vs:[],ns:[],uv:C,cs:C?f:u.color?f:[],bs:u.blend?[]:f,ps:[],rs:u.brightness?[]:f,ds:[]}}return O.invalidate=!0,A[F._id]={index:O.ds.length,begin:O.vs.length/3,batch:y},O.ds.push(F),O},Wp=function(C,X){return X!=f&&1!==X?[C[0]*X,C[1]*X,C[2]*X,C[3]]:C},yb=function(d,Z,t){var b=d.getBrightness(Z),j=sm(t.color||"white"),f=j[3]<1,k=Math.ceil(t.width)||1,i=(f?"T":"O")+k,P=d._wireframeIndexMap,G=d._wireframeModelMap,D=G[i];D||(D=G[i]={vs:[],cs:[],ps:[],ds:[],T:f,W:k}),D.invalidate=!0;var e=D.vs,s=D.cs,B=D.ds,K=P[Z._id]={index:B.length,begin:e.length/3,batch:i};B.push(Z),fb(e,Re(Z,t.mat),t.short?qk:Nh);var H=K.size=e.length/3-K.begin;me(s,Wp(j,b),H)},Th=function(y,l,k,Y,i,x,D,g,P){var V=y.getBrightness(l);V==f&&(V=1);var X=Wp(sm(Y),V),r=X[3]<1;x=Math.ceil(x)||1;var G=(r?"T":"O")+x;if(D){var T=D[0],M=(D[1]||T)+T;G+="-"+T+"-"+M,P&&(G+="-"+ts(P)+"-"+V,P=Wp(sm(P),V))}var O=y._polylineIndexMap,$=y._polylineModelMap,K=$[G];K||(K=$[G]={vs:[],cs:[],ps:[],ds:[],ls:D?[]:f,T:r,W:x},D&&(K.D=T,K.G=M,K.A=P)),K.invalidate=!0;var s,N=K.vs,o=K.cs,a=K.ds,B=K.ls,z=O[l._id]={index:a.length,begin:N.length/3,batch:G};a.push(l),Wh(N,k);var U,J=z.size=N.length/3-z.begin,F=k.length,Z=0,S=[];if(D||i)for(s=0;F>s;s+=6)U=fm([k[s],k[s+1],k[s+2]],[k[s+3],k[s+4],k[s+5]]),S.push(U),Z+=U;if(Z&&i){var p,t=Wp(sm(i),V),d=[t[0]-X[0],t[1]-X[1],t[2]-X[2],t[3]-X[3]],E=0;for(s=0;F>s;s+=6)p=E/Z,me(o,[X[0]+d[0]*p,X[1]+d[1]*p,X[2]+d[2]*p,X[3]+d[3]*p],1),E+=S[s/6],p=E/Z,me(o,[X[0]+d[0]*p,X[1]+d[1]*p,X[2]+d[2]*p,X[3]+d[3]*p],1)}else me(o,X,J);if(D)for(E=g||0,s=0;F>s;s+=6)B.push(E),E+=S[s/6],B.push(E)},xb=function($,m,e){if(m)for(var h=4*m.begin,K=e[m.batch].ps,p=0;p<m.size;p++)K[h++]=$[0],K[h++]=$[1],K[h++]=$[2],K[h++]=$[3]},Lk=function(Y,Z){var p=Z+["32"],C=Y[Z],b=Y[p];C?b&&b.length===C.length?b.set(C):Y[p]=new Sl(C):delete Y[p]},Sn=function(o,V,Y,L,B,c,u,O,X){if(uo(Y))Y.forEach(function(D){Sn(o,V,D,L,B,c,u,O,X)});else if(_o(Y))Sn(o,V,hm(L,Y),L,B,c,u,O,X);else if(Jo(Y)){var T,A=gd(Y.mat,V,o),$=gd(Y.s3,V,o),f=gd(Y.t3,V,o),y=gd(Y.r3,V,o);if(($||y||f||A)&&(T=wc(A,$,y,gd(Y.rotationMode,V,o),f),c.push(T)),Y.shape3d)Sn(o,V,Y.shape3d,L,B,c,u,O,Y);else{var s=L.s;X=X||yp;var N=c[0],S=c.length,q=s("shape3d.color",Y.color,X.color);if(B||(B=s("shape3d.blend",Y.blend,X.blend)),S>1){N=Ym(N);for(var i=1;S>i;i++)ce(N,N,c[i])}Y.vs&&s(hp,Y.visible,X.visible)&&Hi(N,u,O,Y.vs,Y.uv,Y.is,B,q),Y.top_vs&&s(gg,Y.topVisible,X.topVisible)&&Hi(N,u,O,Y.top_vs,Y.top_uv,Y.top_is,B,s("shape3d.top.color",Y.topColor,X.topColor)||q),Y.bottom_vs&&s(dn,Y.bottomVisible,X.bottomVisible)&&Hi(N,u,O,Y.bottom_vs,Y.bottom_uv,Y.bottom_is,B,s("shape3d.bottom.color",Y.bottomColor,X.bottomColor)||q),Y.from_vs&&s(nj,Y.fromVisible,X.fromVisible)&&Hi(N,u,O,Y.from_vs,Y.from_uv,Y.from_is,B,s("shape3d.from.color",Y.fromColor,X.fromColor)||q),Y.to_vs&&s(Uo,Y.toVisible,X.toVisible)&&Hi(N,u,O,Y.to_vs,Y.to_uv,Y.to_is,B,s("shape3d.to.color",Y.toColor,X.toColor)||q)}T&&c.pop()}},Hi=function(t,N,I,y,w,R,F,p){var J,W=N.cs,q=N.uv,c=N.bs;if(R){J=R.length;for(var C=0;J>C;C++){var k=R[C];fb(I,t,[y[3*k],y[3*k+1],y[3*k+2]]),q&&Wh(q,[w[2*k],w[2*k+1]])}}else J=y.length/3,fb(I,t,y),q&&Wh(q,w);W&&me(W,p,J),c&&(F?fn(c,F,J):Wh(c,yo,J))},Tf=function(X,v,Z,J){var n=[];J?Sn(X.gv,X.data,J,X,X.getBodyColor(),[v],Z,n):(qd(X,Pc,v,Z,n),qd(X,Lc,v,Z,n),qd(X,Eb,v,Z,n),qd(X,Jm,v,Z,n),qd(X,Yo,v,Z,n),qd(X,Ro,v,Z,n),qd(X,"csg",v,Z,n)),n.length&&(Wh(Z.vs,n),Wh(Z.ns,Cq(n)))},qd=function(p,i,b,U,R){var h=p[i];if(h){var H=h.tuv;if(H){var t,L,G,$,Y=h.uvScale,v=h.uvOffset;if(Y)for(t=H.length,L=Y[0],G=Y[1],$=0;t>$;$+=2)H[$]*=L,H[$+1]*=G;if(v)for(t=H.length,L=v[0],G=v[1],$=0;t>$;$+=2)H[$]+=L,H[$+1]+=G}Hi(b,U,R,h.vs,H,f,h.blend,h.color)}},bk=function(h,p,r,P,W,S,B,_){var q,n=r.cs,C=r.uv,K=r.bs;if(h.getFaceVisible(p,S)){var Y=h.getFaceMat(p,S);if(Y&&(W=Re(p,Y)),fb(B,W,_),n&&me(n,h.getFaceColor(p,S),6),C){var c=h.getFaceUv(p,S)||P[S+"Uv"],G=h.getFaceUvScale(p,S)||P[S+"UvScale"],T=h.getFaceUvOffset(p,S)||P[S+"UvOffset"];c=c?[c[6],c[7],c[0],c[1],c[2],c[3],c[2],c[3],c[4],c[5],c[6],c[7]]:Ac;var L=c[0],k=c[1],t=c[2],j=c[3],F=c[4],l=c[5],D=c[6],A=c[7],z=c[8],u=c[9],e=c[10],V=c[11];if(G){var w=G[0],E=G[1];L*=w,k*=E,t*=w,j*=E,F*=w,l*=E,D*=w,A*=E,z*=w,u*=E,e*=w,V*=E}if(T){var M=T[0],s=T[1];L+=M,k+=s,t+=M,j+=s,F+=M,l+=s,D+=M,A+=s,z+=M,u+=s,e+=M,V+=s}C.push(L,k,t,j,F,l,D,A,z,u,e,V)}K&&(q=h.getBodyColor(p)||h.getFaceBlend(p,S),q?fn(K,q,6):Wh(K,yo,6))}},Vd=function(W,V,y,p){var X=W.getGL(),B=W._prg,u=W._buffer;if(!pk(V)){em(W),Uc(X,B);for(var A in V){var j=V[A];if(!(p&&!j.T||!p&&j.T)){j.invalidate?(j.invalidate=!1,Lk(j,"vs"),Lk(j,"cs"),Lk(j,"ls"),Lk(j,"ps")):y&&Lk(j,"ps");var O=j.vs32,R=y?j.ps32:j.cs32;Fo(X,B,j.W,f,u.vs,O);var h=j.D,D=!W._dashDisabled&&h;D&&(us(X,B.uDash,!0),us(X,B.uDashDistance,h),us(X,B.uDashGapDistance,j.G),Bs(X,B.aLineDistance),ob(X,u.lineDistance,j.ls32,B.aLineDistance,1),us(X,B.uDiffuse,j.A||qp));var k=!W._batchColorDisabled;k&&(us(X,B.uBatchColor,!0),Bs(X,B.aBatchColor),ob(X,u.batchColor,R,B.aBatchColor,4)),uj(X),wl(X,0,O.length/3,X.LINES),Fn(X),k&&(us(X,B.uBatchColor,!1),bs(X,B.aBatchColor)),D&&(us(X,B.uDash,!1),bs(X,B.aLineDistance))}}ws(X,B)}},cn=function(v,R,B){var U,I,G,A,n,$,F,m,s,i,E,D=v.getGL(),o=v._prg,O=v._buffer,z=v._33O;if(!pk(z)){em(v);for(U in z)if(I=Ab[U]||yp,!(B&&!I.transparent||!B&&I.transparent)&&(G=z[U],R||!I.transparentMask)){var C=B&&I.autoSort!==!1&&(v._33Q||G.invalidate);if(G.invalidate?(G.invalidate=!1,Lk(G,"vs"),Lk(G,"ns"),Lk(G,"cs"),Lk(G,"rs"),Lk(G,"ps"),Lk(G,"bs"),Lk(G,"uv")):R&&Lk(G,"ps"),n=G.vs32,$=R?G.ps32:G.cs32,s=G.uv32,F=G.bs32,m=G.rs32,E=n.length/3,C&&(G.is=pr(n,v.getEye())),E){A=I.light,i=v.getTexture(I.image),sl(D,o,f,I.light,I.opacity,I.reverseFlip,I.reverseColor,I.reverseCull),$?v._batchColorDisabled||(us(D,o.uBatchColor,!0),Bs(D,o.aBatchColor),ob(D,O.batchColor,$,o.aBatchColor,4)):us(D,o.uDiffuse,I.color);var w=F&&!v._batchBlendDisabled;w&&(us(D,o.uBatchBlend,!0),Bs(D,o.aBatchBlend),ob(D,O.batchBlend,F,o.aBatchBlend));var c=m&&!v._batchBrightnessDisabled;c&&(us(D,o.uBatchBrightness,!0),Bs(D,o.aBatchBrightness),ob(D,O.batchBrightness,m,o.aBatchBrightness,1)),s?uj(D,o,i,I.discardSelectable,O.uv,s,I.uvOffset,I.uvScale):uj(D),ob(D,O.vs,n,o.aPosition),ob(D,O.ns,G.ns32,o.aNormal),G.is?(Ke(D,O.is,G.is),yf(D,0,E)):wl(D,0,E),s?Fn(D,o,i):Fn(D),$&&!v._batchColorDisabled&&(us(D,o.uBatchColor,!1),bs(D,o.aBatchColor)),w&&(us(D,o.uBatchBlend,!1),bs(D,o.aBatchBlend)),c&&(us(D,o.uBatchBrightness,!1),bs(D,o.aBatchBrightness)),gl(D,o)}}}},pr=function($,H){for(var O=$.length/3,n=new Array(O),a=O/3,u=new Array(a),e=0;a>e;e++)u[e]=e;u.sort(function(N,r){var o=9*N,g=[($[o]+$[o+3]+2*$[o+6])/4,($[o+1]+$[o+4]+2*$[o+7])/4,($[o+2]+$[o+5]+2*$[o+8])/4];o=9*r;var J=[($[o]+$[o+3]+2*$[o+6])/4,($[o+1]+$[o+4]+2*$[o+7])/4,($[o+2]+$[o+5]+2*$[o+8])/4],u=fm(H,g)-fm(H,J);return u>0?-1:0>u?1:0});for(var e=0;a>e;e++){var g=3*e,p=3*u[e];n[g]=p,n[g+1]=p+1,n[g+2]=p+2}return new hf(n)},Wd=new Sl([0,0,0,1,1,1,1,0]),Zb=new Sl([0,0,1,0,0,1,0,0,1,0,0,1]),Ib=new hf([0,1,2,2,3,0]),Zh=new Sl([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),bh=new hf([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),vf=new Sl([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),rp=new Sl([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),jc=Cq(Zh,bh),Nh=(new Sl([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new hf([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),qk=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Df=function(x,z,T,q,w,t){t=t||16,x=x||16,z=z||0,T=T||x;var I,H,A,D,Q,g,U,L,_=.5,J=[],N=[],m=c/x,R=h/t;for(I=0;t>I;I++)for(Q=I+1,D=I*R,L=Q*R,H=z;T>H;H++)g=H+1,A=H*m,U=g*m,J.push(_*E(D)*V(A),_*V(D),-_*E(D)*E(A),_*E(L)*V(U),_*V(L),-_*E(L)*E(U),_*E(D)*V(U),_*V(D),-_*E(D)*E(U),_*E(D)*V(A),_*V(D),-_*E(D)*E(A),_*E(L)*V(A),_*V(L),-_*E(L)*E(A),_*E(L)*V(U),_*V(L),-_*E(L)*E(U)),N.push(H/x,I/t,g/x,Q/t,g/x,I/t,H/x,I/t,H/x,Q/t,g/x,Q/t);if(q){var a=[],k=[];for(A=z*m,I=0;t>I;I++)Q=I+1,D=I*R,L=Q*R,a.push(0,0,0,_*E(L)*V(A),_*V(L),-_*E(L)*E(A),_*E(D)*V(A),_*V(D),-_*E(D)*E(A)),k.push(0,.5,z/x,Q/t,z/x,I/t)}if(w){var K=[],v=[];for(A=T*m,I=0;t>I;I++)Q=I+1,D=I*R,L=Q*R,K.push(0,0,0,_*E(D)*V(A),_*V(D),-_*E(D)*E(A),_*E(L)*V(A),_*V(L),-_*E(L)*E(A)),v.push(1,.5,T/x,I/t,T/x,Q/t)}return{vs:J,uv:N,from_vs:a,from_uv:k,to_vs:K,to_uv:v}},ds=function(s,j,N){s=s||.17,j=j||12,N=N||18,0>s?s=0:s>.25&&(s=.25);var W,k,n,Y,S,d,G,z=.5,Z=[],J=[],U=[],f=c/N,X=c/j,H=z-s;for(k=0;j>=k;k++)for(Y=-h+k*X,d=V(Y),S=E(Y),W=0;N>=W;W++)n=W*f,G=H+s*d,Z.push(V(n)*G,S*s,-E(n)*G),J.push(W/N,1-k/j);for(k=0;j>k;k++){var o=k*(N+1),i=(k+1)*(N+1);for(W=0;N>W;W++)U.push(o+W,i+W+1,i+W,o+W,o+W+1,i+W+1)}return{vs:Z,uv:J,is:U}},Xn=function(q,T,N,d,$,P,b){b=b||12,q=q||18,T=T||0,N=N||q,P=P||.17,0>P?P=0:P>.25&&(P=.25);var w,B,H,I,m,r,g,v,G,p,U=.5,Q=[],i=[],k=c/q,Z=c/b,A=U-P;for(H=0;b>H;H++)for(I=H+1,g=-h+H*Z,v=-h+I*Z,w=T;N>w;w++)B=w+1,m=w*k,r=B*k,G=A+P*V(g),p=A+P*V(v),Q.push(V(m)*G,E(g)*P,-E(m)*G,V(r)*G,E(g)*P,-E(r)*G,V(r)*p,E(v)*P,-E(r)*p,V(m)*G,E(g)*P,-E(m)*G,V(r)*p,E(v)*P,-E(r)*p,V(m)*p,E(v)*P,-E(m)*p),i.push(w/q,1-H/b,B/q,1-H/b,B/q,1-I/b,w/q,1-H/b,B/q,1-I/b,w/q,1-I/b);if(d){var C=[],O=[];for(H=0;b>H;H++)I=H+1,g=-h+H*Z,v=-h+I*Z,m=T*k,G=A+P*V(g),p=A+P*V(v),C.push(V(m)*G,E(g)*P,-E(m)*G,V(m)*p,E(v)*P,-E(m)*p,V(m)*A,0,-E(m)*A),O.push(.5+.5*V(g),.5-.5*E(g),.5+.5*V(v),.5-.5*E(v),.5,.5)}if($){var s=[],R=[];for(H=0;b>H;H++)I=H+1,g=-h+H*Z,v=-h+I*Z,m=N*k,G=A+P*V(g),p=A+P*V(v),s.push(V(m)*G,E(g)*P,-E(m)*G,V(m)*A,0,-E(m)*A,V(m)*p,E(v)*P,-E(m)*p),R.push(.5-.5*V(g),.5-.5*E(g),.5,.5,.5-.5*V(v),.5-.5*E(v))}return{vs:Q,uv:i,from_vs:C,from_uv:O,to_vs:s,to_uv:R}},Gc=function(O,g){for(var p,H,x,I=.5,z=16,C=[],i=[],W=[],e=c/z,d=0;z>=d;d++)p=d*e,H=V(p)*I,x=E(p)*I,C.push(H,-I,x,H,I,x),i.push(1-d/z,1,1-d/z,0);for(d=0;z>d;d++)W.push(2*d,2*d+1,2*d+3,2*d,2*d+3,2*d+2);if(g){var U=[],Y=[],h=[];for(U.push(0,-I,0),Y.push(.5,.5),d=0;z>=d;d++)p=d*e,H=V(p),x=E(p),U.push(H*I,-I,-x*I),Y.push(.5+.5*H,.5+.5*x);for(d=0;z>d;d++)h.push(0,d+2,d+1)}if(O){var F=[],v=[],u=[];for(F.push(0,I,0),v.push(.5,.5),d=0;z>=d;d++)p=d*e,H=V(p),x=E(p),F.push(H*I,I,-x*I),v.push(.5+.5*H,.5-.5*x);for(d=0;z>d;d++)u.push(0,d+1,d+2)}return{vs:C,uv:i,is:W,bottom_vs:U,bottom_uv:Y,bottom_is:h,top_vs:F,top_uv:v,top_is:u}},wm=function(h,g,K,o,$,S,u){h=h||12,g=g||0,K=K||h;for(var O,B,M,r,C,Y,v,p,q=.5,X=[],b=[],l=c/h,m=g;K>m;m++)O=m+1,B=m*l,M=O*l,r=V(B)*q,C=E(B)*q,Y=V(M)*q,v=E(M)*q,X.push(r,-q,-C,Y,-q,-v,r,q,-C,Y,-q,-v,Y,q,-v,r,q,-C),b.push(m/h,1,O/h,1,m/h,0,O/h,1,O/h,0,m/h,0);if(u){var P=[],i=[];for(m=g;K>m;m++)B=l*m,M=l*(m+1),r=V(B),C=E(B),Y=V(M),v=E(M),P.push(r*q,-q,-C*q,0,-q,0,Y*q,-q,-v*q),i.push(.5+.5*r,.5+.5*C,.5,.5,.5+.5*Y,.5+.5*v)}if(S){var I=[],d=[];for(m=g;K>m;m++)B=l*m,M=l*(m+1),r=V(B),C=E(B),Y=V(M),v=E(M),I.push(r*q,q,-C*q,Y*q,q,-v*q,0,q,0),d.push(.5+.5*r,.5-.5*C,.5+.5*Y,.5-.5*v,.5,.5)}if(o){var U=[],s=[];B=l*g,r=V(B)*q,C=E(B)*q,p=g/h,U.push(0,q,0,0,-q,0,r,-q,-C,r,-q,-C,r,q,-C,0,q,0),s.push(0,0,0,1,p,1,p,1,p,0,0,0)}if($){var t=[],F=[];B=l*K,r=V(B)*q,C=E(B)*q,p=K/h,t.push(0,-q,0,0,q,0,r,q,-C,r,q,-C,r,-q,-C,0,-q,0),F.push(1,1,1,0,p,0,p,0,p,1,1,1)}return{vs:X,uv:b,bottom_vs:P,bottom_uv:i,top_vs:I,top_uv:d,from_vs:U,from_uv:s,to_vs:t,to_uv:F}},Nf=function(O,l,p,L,_){l=l||18,p=p||0,L=L==f?c:L,_=_==f?.5:_;for(var F,Q,r,I,A,x,R=[0,.5,.75,.875,.9375],t=[],d=[],U=[],Z=L/l,h=0;h<R.length;h++){var B=0===h%2?0:.5;for(F=0;l>=F;F++)Q=(F+B)*Z+p,r=1-R[h],t.push(V(Q)*_*r,-_+2*R[h]*_,-E(Q)*_*r),d.push((F+B)/l,r)}for(h=0;h<R.length-1;h++){var u=h*(l+1),W=(h+1)*(l+1);for(F=0;l>F;F++)U.push(u+F,W+F+1,W+F,u+F,u+F+1,W+F+1)}for(x=t.length/3-(l+1),F=0;l>F;F++)t.push(0,_,0),d.push((F+.5)/l,0);for(F=0;l>F;F++)U.push(x+F,x+F+1,x+(l+1)+F);if(O){var e=[],w=[],i=[];for(e.push(0,-_,0),w.push(.5,.5),F=0;l>=F;F++)Q=F*Z+p,I=V(Q),A=E(Q),e.push(I*_,-_,-A*_),w.push(.5+.5*I,.5+.5*A);for(F=0;l>F;F++)i.push(0,F+2,F+1)}return{vs:t,uv:d,is:U,bottom_vs:e,bottom_uv:w,bottom_is:i}},hi=function(J,y,k,M,D,Z){J=J||16,y=y||0,k=k||J;for(var L=.5,Y=[],X=[],p=c/J,s=y;k>s;s++){var T=s+1,z=p*s,N=p*T;Y.push(V(z)*L,-L,-E(z)*L,V(N)*L,-L,-E(N)*L,0,L,0),X.push(s/J,1,T/J,1,(s+T)/2/J,0)}if(Z){var e=[],F=[];for(s=y;k>s;s++){z=p*s,N=p*(s+1);var b=V(z),j=E(z),l=V(N),x=E(N);e.push(b*L,-L,-j*L,0,-L,0,l*L,-L,-x*L),F.push(.5+.5*b,.5+.5*j,.5,.5,.5+.5*l,.5+.5*x)}}if(M){var A=[],H=[];z=p*y,A.push(0,L,0,0,-L,0,V(z)*L,-L,-E(z)*L),H.push(0,0,0,1,y/J,1)}if(D){var S=[],g=[];z=p*k,S.push(0,-L,0,0,L,0,V(z)*L,-L,-E(z)*L),g.push(1,1,1,0,k/J,1)}return{vs:Y,uv:X,bottom_vs:e,bottom_uv:F,from_vs:A,from_uv:H,to_vs:S,to_uv:g}},Kn=function(S,D,h,I,R,Y,A,l){for(var j=[],f=0;f<S.length-1;f+=2)j.push({x:S[f],y:S[f+1]});return jr(j,D,h,I,R,Y,A,l,!1)},ub={roundRect:function(g,C){return Kn([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],g,C,3)},star:function(Z,W){return Kn([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],Z,W)},rect:function(r,m){return Kn([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],r,m)},triangle:function(m,j){return Kn([0,-.5,.5,.5,-.5,.5],[1,2,2,5],m,j)},rightTriangle:function(F,J){return Kn([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],F,J)},parallelogram:function(k,B){return Kn([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],k,B)},trapezoid:function(Z,I){return Kn([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],Z,I)}},$k={sphere:1,cylinder:1,cone:1,torus:1},hr={torus:1,sphere:1},ys=Ad(to(ub),{cylinder:1}),Ho=Ad(to(ub),{cylinder:1,cone:1}),bb=function(r,i,u){var v,x=gd(r.mat,u,i),G=gd(r.s3,u,i),X=gd(r.t3,u,i),p=gd(r.r3,u,i);return(G||p||X||x)&&(v=Ym(i._6O),em(i,wc(x,G,p,gd(r.rotationMode,u,i),X))),v},jh=function($,S,z,w,v,j,k){if(uo(z))z.forEach(function(u){jh($,S,u,w,v,j,k)});else if(_o(z))jh($,S,hm(w,z),w,v,j,k);else if(Jo(z))if(z.shape3d){var O=bb(z,$,S);jh($,S,z.shape3d,w,v,j,z),O&&Rf($,O)}else Je($,S,z,w.s,v,j,k)},Je=function(M,K,w,z,s,Z,A){if(A=A||yp,!Z||Z(z("shape3d.transparent",w.transparent,A.transparent))){var f=bb(w,M,K);ph(w);var G=M._26I,k=M._prg,L=M._buffer,D=z("shape3d.color",w.color,A.color);s||(s=z("shape3d.blend",w.blend,A.blend)),sl(G,k,s,z("shape3d.light",w.light,A.light),z("shape3d.opacity",w.opacity,A.opacity),z("shape3d.reverse.flip",w.reverseFlip,A.reverseFlip),z("shape3d.reverse.color",w.reverseColor,A.reverseColor),z("shape3d.reverse.cull",w.reverseCull,A.reverseCull)),w.vs&&z(hp,w.visible,A.visible)&&Vb(G,k,L,D,M.getTexture(z("shape3d.image",w.image,A.image),K),z("shape3d.discard.selectable",w.discardSelectable,A.discardSelectable),w.vs,w.uv,w.ns,w.is,z("shape3d.uv.offset",w.uvOffset,A.uvOffset),z("shape3d.uv.scale",w.uvScale,A.uvScale)),w.top_vs&&z(gg,w.topVisible,A.topVisible)&&Vb(G,k,L,z("shape3d.top.color",w.topColor,A.topColor)||D,M.getTexture(z("shape3d.top.image",w.topImage,A.topImage),K),z("shape3d.top.discard.selectable",w.topDiscardSelectable,A.topDiscardSelectable),w.top_vs,w.top_uv,w.top_ns,w.top_is,z("shape3d.top.uv.offset",w.topUvOffset,A.topUvOffset),z("shape3d.top.uv.scale",w.topUvScale,A.topUvScale)),w.bottom_vs&&z(dn,w.bottomVisible,A.bottomVisible)&&Vb(G,k,L,z("shape3d.bottom.color",w.bottomColor,A.bottomColor)||D,M.getTexture(z("shape3d.bottom.image",w.bottomImage,A.bottomImage),K),z("shape3d.bottom.discard.selectable",w.bottomDiscardSelectable,A.bottomDiscardSelectable),w.bottom_vs,w.bottom_uv,w.bottom_ns,w.bottom_is,z("shape3d.bottom.uv.offset",w.bottomUvOffset,A.bottomUvOffset),z("shape3d.bottom.uv.scale",w.bottomUvScale,A.bottomUvScale)),w.from_vs&&z(nj,w.fromVisible,A.fromVisible)&&Vb(G,k,L,z("shape3d.from.color",w.fromColor,A.fromColor)||D,M.getTexture(z("shape3d.from.image",w.fromImage,A.fromImage),K),z("shape3d.from.discard.selectable",w.fromDiscardSelectable,A.fromDiscardSelectable),w.from_vs,w.from_uv,w.from_ns,w.from_is,z("shape3d.from.uv.offset",w.fromUvOffset,A.fromUvOffset),z("shape3d.from.uv.scale",w.fromUvScale,A.fromUvScale)),w.to_vs&&z(Uo,w.toVisible,A.toVisible)&&Vb(G,k,L,z("shape3d.to.color",w.toColor,A.toColor)||D,M.getTexture(z("shape3d.to.image",w.toImage,A.toImage),K),z("shape3d.to.discard.selectable",w.toDiscardSelectable,A.toDiscardSelectable),w.to_vs,w.to_uv,w.to_ns,w.to_is,z("shape3d.to.uv.offset",w.toUvOffset,A.toUvOffset),z("shape3d.to.uv.scale",w.toUvScale,A.toUvScale)),gl(G,k),f&&Rf(M,f)}},Vb=function(S,A,q,L,b,G,H,j,m,J,C,v){H&&(us(S,A.uDiffuse,L),j?uj(S,A,b,G,q.uv,j,C,v):uj(S),ob(S,q.vs,H,A.aPosition),ob(S,q.ns,m,A.aNormal),J?(Ke(S,q.is,J),yf(S,0,J.length)):wl(S,0,H.length/3),j?Fn(S,A,b):Fn(S))},hm=function(k,g){var $=k.s;if(g||(g=$(Lq)),!g)return f;if(Jo(g))return g;var K=Li[g];if(K)return K;if("text"===g){var V={amount:$("shape3d.text.amount"),size:$("shape3d.text.size"),font:$("shape3d.text.font"),style:$("shape3d.text.style"),weight:$("shape3d.text.weight"),fill:$("shape3d.text.fill"),curveSegments:$("shape3d.text.curveSegments"),spacing:$("shape3d.text.spacing")},T=k.gv.getShape3dText(k.data),A=T;for(var x in V)A+="_"+(V[x]===t?"U":V[x]);return k._cachedTextKey===A?k._cachedTextGeometry:(k._cachedTextKey=A,k._cachedTextGeometry=y.createTextGeometry(T,V))}var x=g;if($k[g]){var i=$("shape3d.side"),s=$("shape3d.side.from"),J=$("shape3d.side.to"),b=$(nj),M=$(Uo);3>i?(i=0,s=0,J=0,b=!1,M=!1):((s==f||0>s)&&(s=0),(J==f||J>i)&&(J=i),0===s&&J===i&&(b=!1,M=!1)),x+="-"+i+"-"+s+"-"+J+"-"+b+"-"+M}if(ys[g]){var e=$(gg);x+="-"+e}if(Ho[g]){var r=$(dn);x+="-"+r}if("torus"===g){var F=$("shape3d.torus.radius");0>F?F=0:F>.25&&(F=.25),x+="-"+F}if(hr[g]){var q=$(So);x+="-"+q}return K=cl[x],K||("box"===g?K=y.createBoxModel():ub[g]?K=ub[g](e,r):"sphere"===g?K=y.createSphereModel(i,s,J,b,M,q):g===gp?K=y.createCylinderModel(i,s,J,b,M,e,r):"cone"===g?K=y.createConeModel(i,s,J,b,M,r):"torus"===g&&(K=y.createTorusModel(i,s,J,b,M,F,q)),cl[x]=K),K},ph=function(){var J=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],n=["is","top_is","bottom_is","from_is","to_is"];return B=Gi(aq.substr(aq.indexOf("^#")+2)),dq(y[kg(al+J[15]+"n"+J[16])]())&&pc()?function(a){a&&!a._complete_&&(a._complete_=!0,a.vs&&oo(a.ns)&&(a.ns=Cq(a.vs,a.is)),a.top_vs&&oo(a.top_ns)&&(a.top_ns=Cq(a.top_vs,a.top_is)),a.bottom_vs&&oo(a.bottom_ns)&&(a.bottom_ns=Cq(a.bottom_vs,a.bottom_is)),a.from_vs&&oo(a.from_ns)&&(a.from_ns=Cq(a.from_vs,a.from_is)),a.to_vs&&oo(a.to_ns)&&(a.to_ns=Cq(a.to_vs,a.to_is)),J.forEach(function(b){var T=a[b];uo(T)&&(a[b]=new Sl(T))}),n.forEach(function(Z){var L=a[Z];uo(L)&&(a[Z]=new hf(L))}))}:void 0}(),$l=function(I,d){var y=I[d];uo(y)&&(I[d]=new Sl(y))};Ad(Of,{_25Q:function(p){p._16O=function(C,I,k,W,U,Z,e,X,i){var z=this.info;if(z){var H,n,d,F,r,u,A=el();if(an[I]?(H=z.p3,n=z.c1,d=z.c2):kd[I]?(n=z.s1||z.c1,d=z.s2||z.c2):(n=z.t1||z.c1,d=z.t2||z.c2),H)u=rm(I,Hm,k,W,X,i);else{var j=po(d,n),s=fm(n,d);F=[0,-T(j[2],j[0]),G(j[1]/s)],r="zyx",H=[(n[0]+d[0])/2,(n[1]+d[1])/2,(n[2]+d[2])/2],u=rm(I,[s,0,0],k,W,X,i)}return Ti(A,u,H,W,U,Z,e,C,F,r)}return Lb},p._80o=function(h,S,Z){var N=this,p=N.shapeModel;if(p){var D=N.gv;em(D),jh(D,N.data,p,N,N.getBodyColor(),Z)}},p.createLineModel=function(P,n,m,X,E){for(var R=this,G=R.s,I=Bn(P,n,G(So)),q=[],x=0;x<I.length;x++){var w=I[x],j=w.length;if(j>1){var V=w[0];q.push(V.x,V.y,V.z);for(var p=1;j-1>p;p++)V=w[p],q.push(V.x,V.y,V.z),q.push(V.x,V.y,V.z);V=w[j-1],q.push(V.x,V.y,V.z)}}var L,b,k,Y=G(X+".color"),M=G(E),$=0;return M&&(b=G(E+".color"),L=G(E+".pattern"),$=G(E+".offset"),k=Y),Th(R.gv,R.data,q,b||Y,k?f:G(X+".gradient.color"),m,L||G(X+".pattern"),$,k),I},p.createTubeModel=function(Z,F,c,O){for(var Y=this,W=Y.s,A=W("shape3d.side")||Jq,l=W("shape3d.start.angle"),v=W("shape3d.sweep.angle"),w=W(gg)?W("shape3d.top.cap"):f,a=W(dn)?W("shape3d.bottom.cap"):f,I="flat"===w,J="flat"===a,T=I&&(O?O.uv:W("shape3d.top.image")),j=J&&(O?O.uv:W("shape3d.bottom.image")),d=O?O.uv:W("shape3d.image"),U={vs:[],uv:d?[]:f,top_vs:I?[]:f,top_uv:T?[]:f,bottom_vs:J?[]:f,bottom_uv:j?[]:f},N=Bn(Z,F,W(So),c),p=0,_=N.length;_>p;p++)ap(U,N[p],W($m),c,A,l,v,w,a);if(O){var P=[];Sn(Y.gv,Y.data,U,Y,Y.getBodyColor(),[],O,P),P.length&&(Wh(O.vs,P),Wh(O.ns,Cq(P)))}else Y.shapeModel=U;return N},p.getCache=function(){var x=this.info;if(x){var A=x.list;if(A){var n=x.cache;return n||(n=x.cache=Ie(A)),n}}return f}}});var sj=function(T,k){for(var i,x=0,U=T.length,s=0,Y=U-1;Y>=s;)if(x=q(s+(Y-s)/2),i=T[x].length-k,0>i)s=x+1;else{if(!(i>0)){Y=x;break}Y=x-1}x=Y;var P=T[x],A=P.point;return x===U-1||P.length===k||(A=(new pj).subVectors(T[x+1].point,A).normalize().multiplyScalar(k-P.length).add(A)),{point:A,tangent:P.tangent}},Ie=function(r){for(var C,$,S=[],x=0,h=0;h<r.length;h++){for(var H=r[h],o=0;o<H.length;o++){C=H[o],$&&(x+=$.distanceTo(C));var X=new pj,J=H[o+1];J?X.subVectors(J,C):$?X.subVectors(C,$):X.x=1,X.normalize(),S.push({point:C,length:x,tangent:X}),$=C}$=null}return S},Bn=function(M,x,m,S){m=m||Hl;for(var y=[],o=0,Z=M.size();Z>o;o++){var z=M.get(o);y.push(new pj(z.x,z.e||0,z.y))}Kg(x)&&(x=x._as);for(var n,N,J,G,A,O=[],v=0,q=0,D=x?x.length:Z;D>q;q++)if(A=x?x[q]:0===q?1:2,1===A)O.push(J=[]),J.push(y[v++]);else if(2===A||5===A)if(G=2===A?y[v++]:J[0],S){var d=x?x[q+1]:D>q+1?2:f;if(2===d||5===d){var a=J[J.length-1],u=2===d?y[v]:J[0],s=(new pj).subVectors(a,G),R=(new pj).subVectors(u,G),_=s.length(),p=R.length();if(S>_/2&&S>p/2)J.push(G);else for(s.multiplyScalar(K(S,_/2)/_).add(G),R.multiplyScalar(K(S,p/2)/p).add(G),n=new sc(s,G,R).getPoints(m),N=0;m>=N;N++)J.push(n[N])}else J.push(G)}else J.push(G);else if(3===A)for(n=new sc(J[J.length-1],y[v++],y[v++]).getPoints(m),N=1;m>=N;N++)J.push(n[N]);else if(4===A)for(n=new Rd(J[J.length-1],y[v++],y[v++],y[v++]).getPoints(m),N=1;m>=N;N++)J.push(n[N]);return O},Al=function(j){for(var H,T,w=new pj,I=[],l=[],v=[],$=0,y=j.length;y>$;$++)H=j[$],T=j[$+1],T?w.subVectors(T,H):w.subVectors(H,j[$-1]),I.push(w.normalize().clone());var P,D,o,f,F=new pj,N=new pj,Z=new _l,q=1e-4,x=Number.MAX_VALUE,h=I[0],_=l[0]=new pj,X=v[0]=new pj;for(D=u(h.x),o=u(h.y),f=u(h.z),x>=D&&(x=D,F.set(1,0,0)),x>=o&&(x=o,F.set(0,1,0)),x>=f&&F.set(0,0,1),N.crossVectors(h,F).normalize(),_.crossVectors(h,N),X.crossVectors(h,_),$=1;y>$;$++)l[$]=l[$-1].clone(),v[$]=v[$-1].clone(),N.crossVectors(I[$-1],I[$]),N.length()>q&&(N.normalize(),P=Y(fc(I[$-1].dot(I[$]),-1,1)),l[$].applyMatrix4(Z.makeRotationAxis(N,P))),v[$].crossVectors(I[$],l[$]);return{B:v,T:I,N:l}},ap=function(){var F=function(T){for(var k=1;k<arguments.length;k++){var m=arguments[k];T.push(m.x,m.y,m.z)}},u=function(K){for(var c=1;c<arguments.length;c++){var j=arguments[c].uv;K.push(j[0],j[1])}},D=function(k,c,J,P,B){var F=-P*V(B),A=P*E(B);return new pj(k.x+F*J.x+A*c.x,k.y+F*J.y+A*c.y,k.z+F*J.z+A*c.z)},n=function(i,T,S,F,p,m,$,g){$=$||c;for(var d=[],x=$/p,R=0;p>=R;R++){var e=D(i,T,S,F,R*x+m);d.push(e),g!=f&&(e.uv=[g,R/p])}return d},x=function(P,d,Y,r,G,T,L,M,B){B=B||c;var p=d?P.top_vs:P.bottom_vs;if(p)for(var u=d?P.top_uv:P.bottom_uv,o=B/L,f=0;L>f;f++){var Q,n;d?(Q=f*o+M,n=(f+1)*o+M):(n=f*o+M,Q=(f+1)*o+M),F(p,D(Y,r,G,T,Q),D(Y,r,G,T,n),Y),u&&u.push(.5-.5*V(Q),.5-.5*E(Q),.5-.5*V(n),.5-.5*E(n),.5,.5)}};return function(s,d,X,m,U,C,T,v,a){var i=d.length;if(i>1){var z,L,A,p,I,N,y,W=Al(d),V=W.T,B=W.N,M=W.B;"flat"===v&&x(s,!0,d[0],M[0],B[0],m,U,C,T),"flat"===a&&x(s,!1,d[i-1],M[i-1],B[i-1],m,U,C,T);var O,l,P=[],w=j(U/2),Z="round"===v,E="round"===a,R=d[0],r=V[0],h=M[0],J=B[0],q=d[i-1],k=V[i-1],S=M[i-1],Y=B[i-1];if(Z){for(A=1;w>=A;A++)B.splice(0,0,J),M.splice(0,0,h),V.splice(0,0,r),l=-A/w*m,d.splice(0,0,r.clone().multiplyScalar(l).add(R)),P[w-A]=Q(m*m-l*l);i+=w}if(E){for(A=1;w>=A;A++)B.push(Y),M.push(S),V.push(k),l=A/w*m,d.push(k.clone().multiplyScalar(l).add(q)),P[d.length-1]=Q(m*m-l*l);i+=w}if(s.uv){var $=0,o=0,g=[];for(X&&($=X),I=d[0],g[0]=0,A=1;i>A;A++)p=d[A],g[A]=I.distanceTo(p),I=p,X||($+=g[A]);for(O=[],A=0;i>A;A++)o+=g[A],O[A]=$?o/$:0}for(A=0;i>A;A++){if(p=d[A],N=M[A],y=B[A],z=n(p,N,y,P[A]===t?m:P[A],U,C,T,O?O[A]:f),L)for(var H=0;U>H;H++){var D=L[H],G=L[H+1]||L[0],e=z[H],K=z[H+1]||z[0];F(s.vs,G,D,e,e,K,G),s.uv&&u(s.uv,G,D,e,e,K,G)}L=z}}}}();Ad(y,{getLineLength:function(R){return R[R.length-1].length},getLineOffset:function(E,Y){return sj(E,Y)},getLineCacheInfo:function(Y,X,O,i){return Ie(Bn(Y,X,O,i))}});var Ne=A.Light=function(){Ec(Ne,this),this.s(Fc,R[Fc]),this.s(Lq,"sphere"),this.s3(20,20,20)};ag("Light",Zo,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(M,f,d){Ne.superClass.onStyleChanged.apply(this,arguments),M===Fc&&this.s("shape3d.color",d)}});var Sb=$o.Graph3dView=function(l,R){var A=this;A._attributes=R||y.graph3dViewAttributes,A._25I={},A._view=ak(1,A);var D=A._canvas=_p(A._view);D.addEventListener("webglcontextlost",function(C){C.preventDefault(),vl(A),A._26I=f,A._1o.texture=f,A._35O=!0},!1),D.addEventListener("webglcontextrestored",function(){A._35O=!1,A.iv()},!1),A._34O={},A._33O={},A._wireframeIndexMap={},A._wireframeModelMap={},A._polylineIndexMap={},A._polylineIndexMap={},A._8O=[],A._7O=el(),A._6O=el(),A._1o=new ps(A),A._30O=new ns(A),A._31O=new je(A),A._32O=new Yn(A),A._33Q=!0,A._eye=to(y.graph3dViewEye),A._center=to(y.graph3dViewCenter),A._up=to(y.graph3dViewUp),A._lightChanged=!1,A._59O=[],A._spots=[],A._dirs=[],A.dm(l?l:new ve),A.setInteractors([new en(A)])},Wk={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};xh("Graph3dView",L,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Ld,Yi,"firstPersonMode",gi,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",aj,ul,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:t,_boundaries:t,_moveStep:y.graph3dViewMoveStep,_rotateStep:y.graph3dViewRotateStep,_pannable:y.graph3dViewPannable,_rotatable:y.graph3dViewRotatable,_walkable:y.graph3dViewWalkable,_resettable:y.graph3dViewResettable,_zoomable:y.graph3dViewZoomable,_firstPersonMode:y.graph3dViewFirstPersonMode,_mouseRoamable:y.graph3dViewMouseRoamable,_gridVisible:y.graph3dViewGridVisible,_gridSize:y.graph3dViewGridSize,_gridGap:y.graph3dViewGridGap,_gridColor:y.graph3dViewGridColor,_originAxisVisible:y.graph3dViewOriginAxisVisible,_centerAxisVisible:y.graph3dViewCenterAxisVisible,_axisXColor:y.graph3dViewAxisXColor,_axisYColor:y.graph3dViewAxisYColor,_axisZColor:y.graph3dViewAxisZColor,_ortho:y.graph3dViewOrtho,_orthoWidth:y.graph3dViewOrthoWidth,_fovy:y.graph3dViewFovy,_near:y.graph3dViewNear,_far:y.graph3dViewFar,_headlightColor:y.graph3dViewHeadlightColor,_headlightIntensity:y.graph3dViewHeadlightIntensity,_headlightRange:y.graph3dViewHeadlightRange,_headlightDisabled:y.graph3dViewHeadlightDisabled,_rectSelectable:y.graph3dViewRectSelectable,_rectSelectBackground:y.graph3dViewRectSelectBackground,_editSizeColor:y.graph3dViewEditSizeColor,_autoMakeVisible:il,_fogDisabled:y.graph3dViewFogDisabled,_fogColor:y.graph3dViewFogColor,_fogNear:y.graph3dViewFogNear,_fogFar:y.graph3dViewFogFar,_dashDisabled:y.graph3dViewDashDisabled,_batchColorDisabled:y.graph3dViewBatchColorDisabled,_batchBlendDisabled:y.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:y.graph3dViewBatchBrightnessDisabled,setEye:function(T,k,Y){1===arguments.length&&(k=T[1],Y=T[2],T=T[0]);var I=this._eye;I[0]=T,I[1]=k,I[2]=Y,this.fp(aj,f,I)},setCenter:function(u,K,b){1===arguments.length&&(K=u[1],b=u[2],u=u[0]);var i=this._center;i[0]=u,i[1]=K,i[2]=b,this.fp(ul,f,i)},setUp:function(y,O,_){1===arguments.length&&(O=y[1],_=y[2],y=y[0]);var n=this._up;n[0]=y,n[1]=O,n[2]=_,this.fp("up",f,n)},isTransparentMask:function(Y){return Y.s("transparent.mask")},getAspect:function(){var A=this,t=A._aspect;return t?t:A.getWidth()/A.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(v){var H=this,E=H._dataModel,A=H._selectionModel;E!==v&&(E&&(E.umm(H.handleDataModelChange,H),E.umd(H.handleDataPropertyChange,H),A||E.sm().ums(H.handleSelectionChange,H)),H._dataModel=v,v.mm(H.handleDataModelChange,H),v.md(H.handleDataPropertyChange,H),A?A._21I(v):v.sm().ms(H.handleSelectionChange,H),H.invalidateAll(!0),H.invalidateLight(),H.fp(Wc,E,v))},handleDataPropertyChange:function(f){var S=f.data;this.invalidateData(S),Uk(S)&&"s:light.type"===f.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(q){var S=this,P=q.property;S.iv(),S._18Q=f,"eye"===P?S._33Q=!0:"devicePixelRatio"===P?S._42(f,S._devicePixelRatio||Pj):Wk[P]&&vl(S)},_5O:function(o){var G=o._22Q();return G?new G(this,o):f},getData3dUI:function(P){var c=this._25I[P._id];return c===t&&(c=this._5O(P),this._25I[P._id]=c),c},invalidateAll:function(h){var f=this;if(h){for(var S in f._25I){var v=f._25I[S];v&&v.dispose()}f._25I={},f.iv(),Sk(f)}else f.dm().each(function(E){f.invalidateData(E)})},invalidateSelection:function(){var E=this;E.sm().each(function(V){E.invalidateData(V)})},invalidateData:function(v){var s=this,l=s.getData3dUI(v);l&&(l.iv(),s.iv()),Sk(s,v)},getShape3dText:function(l){return l.getStyle("shape3d.text")||this.getLabel(l)
},invalidateBatch:function(n){var b=this,r=b._33O,_=r[n],Y=[],e={};if(_){_.ds.forEach(function(K){var r=b.getData3dUI(K);r&&r.iv(),delete b._34O[K._id],Y.push(K._id)}),delete r[n];for(var V,D,N,p,v,W,g,m,d,E=0;2>E;E++){var B=b[["_wireframeModelMap","_polylineModelMap"][E]],w=b[["_wireframeIndexMap","_polylineIndexMap"][E]];for(e={},m=0;m<Y.length;m++){var I=w[Y[m]];if(I){delete w[Y[m]],d=I.batch,V=B[d];var z=I.begin,s=I.size,i=3*z,j=3*s,Z=4*z,h=4*s;for(D=V.ds,N=V.vs,p=V.cs,v=V.ps,W=V.ls,g=I.index,V.invalidate=!0,D[g]=t,g=i;i+j>g;g++)N[g]=t;for(g=Z;Z+h>g;g++)p[g]=t;for(g=Z;Z+h>g;g++)v[g]=t;if(W)for(g=i;i+j>g;g++)W[g]=t;e[d]=!0}}for(d in e){V=B[d],D=V.ds,N=V.vs,p=V.cs,v=V.ps,W=V.ls;var J=[];for(g=0;g<D.length;g++)D[g]!==t&&J.push(D[g]);if(0===J.length)delete B[d];else{for(V.ds=J,J=[],g=0;g<N.length;g++)N[g]!==t&&J.push(N[g]);for(V.vs=J,J=[],g=0;g<p.length;g++)p[g]!==t&&J.push(p[g]);for(V.cs=J,J=[],g=0;g<v.length;g++)v[g]!==t&&J.push(v[g]);if(V.ps=J,W){for(J=[],g=0;g<W.length;g++)W[g]!==t&&J.push(W[g]);V.ls=J}}}}b.iv()}},handleDataModelChange:function(C){var Q=this,_=C.kind,X=C.data;if("add"===_)Q.invalidateData(X),ui(X)&&X.getEdgeGroup()&&X.getEdgeGroup().eachSiblingEdge(Q.invalidateData,Q),Uk(X)&&Q.invalidateLight();else if(_===Tn){var i=X._id,A=Q._25I[i];A&&(A.dispose(),delete Q._25I[i],Q.iv()),X===Q._currentSubGraph&&Q.setCurrentSubGraph(f),Sk(Q,X),Uk(X)&&Q.invalidateLight()}else _===wb&&(Q.invalidateAll(!0),Q.setCurrentSubGraph(f),Sk(Q),Q.invalidateLight())},toCanvas:function(U){var y=this,l=y.getGL();if(y.validate(),U){var B=l.getParameter(l.COLOR_CLEAR_VALUE);cc(l,U)}y._42(f,1);var V=y.getWidth(),t=y.getHeight(),Y=new Uint8Array(4*V*t),E=_p(),H=E.getContext("2d");l.readPixels(0,0,V,t,l.RGBA,l.UNSIGNED_BYTE,Y),wj(E,V,t,1);for(var h=H.getImageData(0,0,V,t),O=h.data,r=0;r<O.length;r+=4){var m=r/4,P=q(m/V),w=m-P*V;m=4*((t-1-P)*V+w),O[m]=Y[r],O[m+1]=Y[r+1],O[m+2]=Y[r+2],O[m+3]=Y[r+3]}return H.putImageData(h,0,0),U&&cc(l,B),y._42(f,y._devicePixelRatio||Pj),E},toDataURL:function(o,_){var R=this,F=R.getGL();if(R.validate(),o){var u=F.getParameter(F.COLOR_CLEAR_VALUE);cc(F,o)}R._42(f,1);var K=R._canvas.toDataURL(_||"image/png",1);return o&&cc(F,u),R._42(f,R._devicePixelRatio||Pj),K},getGL:function(){var y=this,i=y._26I,q=y._prg;if(!i)try{y._2O={},i=y._26I=y._canvas.getContext("webgl",y._attributes)||y._canvas.getContext("experimental-webgl",y._attributes),i._emptyTexture=gh(i),y._buffer={vs:Sp(i),ns:Sp(i),is:Sp(i),uv:Sp(i),batchColor:Sp(i),batchBlend:Sp(i),batchBrightness:Sp(i),lineDistance:Sp(i)},y._1O=vm(i);var E=y._cube={vs:Sp(i),ns:Sp(i),is:Sp(i),uv:Sp(i)};ob(i,E.vs,Zh),ob(i,E.ns,jc),ob(i,E.uv,vf),Ke(i,E.is,bh)}catch(O){}if(i&&!q){if(q=y._prg=i.createProgram(),!q)return f;var I=y._dirs.length,s=y._spots.length,b=y._59O.length,L=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];I&&L.push("uDirColor","uDirPosition"),s&&L.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),b&&L.push("uPointColor","uPointRange","uPointPosition"),cc(i,[0,0,0,0]),i.clearDepth(1),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),Ub||(aq=Gi(aq.substring(0,aq.indexOf("^#"))),ne=Gi(ne),Ub=!0);var R=["#define MAX_DIR "+I,"#define MAX_SPOT "+s,"#define MAX_POINT "+b,y._fogDisabled?"":"#define FOG",y._dashDisabled?"":"#define DASH",y._batchColorDisabled?"":"#define BATCHCOLOR",y._batchBlendDisabled?"":"#define BATCHBLEND",y._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),d=Hf(i,q,i.VERTEX_SHADER,aq.replace("PREFIX",R)),J=Hf(i,q,i.FRAGMENT_SHADER,ne.replace("PREFIX",R));C?L.push("aPosition"):(q.aPosition=0,i.bindAttribLocation(q,0,"aPosition")),i.linkProgram(q),L.forEach(function(y){q[y]=/^u/.test(y)?i.getUniformLocation(q,y):i.getAttribLocation(q,y)}),i.useProgram(q),i.deleteShader(d),i.deleteShader(J)}return i},getBrightness:function(P){var Z=P.s("brightness"),M=this.isSelected(P)?P.s("select.brightness"):f;return Z==f?M:M==f?Z:Z*M},getWireframe:function(d){var M=d.s("wf.visible"),T=d.s("wf.width");return M===!0||T>0&&"selected"===M&&this.isSelected(d)?{color:d.s("wf.color"),width:T,"short":d.s("wf.short"),mat:d.s("wf.mat")}:void 0},getBodyColor:function(B){return B.s("body.color")},getMat:function(s){return s.getMat?s.getMat():s.s("mat")},getFaceMat:function(t,g){return t.getFaceMat?t.getFaceMat(g):t.s(g+".mat")},getFaceBlend:function(Z,a){return Z.s(a+".blend")||Z.s("all.blend")},getFaceColor:function(c,R){return c.s(R+".color")||c.s("all.color")},getFaceImage:function(O,o){return O.s(o+".image")||O.s("all.image")},getFaceDiscardSelectable:function(b,r){var o=b.s(r+".discard.selectable");return o==f?b.s("all.discard.selectable"):o},getFaceUv:function(U,o){return U.s(o+".uv")||U.s("all.uv")},getFaceUvOffset:function(t,Y){return t.s(Y+".uv.offset")||t.s("all.uv.offset")},getFaceUvScale:function(J,S){return J.s(S+".uv.scale")||J.s("all.uv.scale")},getFaceLight:function(m,c){var d=m.s(c+".light");return d==f?m.s("all.light"):d},getFaceVisible:function(T,p){var u=T.s(p+".visible");return u==f?T.s("all.visible"):u},getFaceOpacity:function(T,M){var i=T.s(M+".opacity");return i==f?T.s("all.opacity"):i},getFaceTransparent:function(B,X){var E=B.s(X+".transparent");return E==f?B.s("all.transparent"):E},getFaceReverseColor:function(r,q){return r.s(q+".reverse.color")||r.s("all.reverse.color")},getFaceReverseFlip:function(i,S){var w=i.s(S+".reverse.flip");return w==f?i.s("all.reverse.flip"):w},getFaceReverseCull:function(m,F){var C=m.s(F+".reverse.cull");return C==f?m.s("all.reverse.cull"):C},getTextureMap:function(){return this._2O},deleteTexture:function(l){var n=this,X=n._2O[l];X&&(delete n._2O[l],n.getGL().deleteTexture(X))},getTexture:function(v,K){if(!v)return f;var i=this,E=i.getGL(),T=i._2O[v];if(!T){var r=tr(v);if(r)if(r.tagName){if(r.dynamic)return vm(E,r,i._1O);T=i._2O[v]=vm(E,r)}else{var R=Me(r,K),D=zr(r,K);if(R>=1&&D>=1){var j=Zq(R,D);return Bl(j,r,0,0,R,D,K,i),j.restore(),vm(E,Pr,i._1O)}}}return T},redraw:function(){this.iv()},validateImpl:function(){var H=this;if(H._lightChanged){H._lightChanged=!1;var y=[],P=[],V=[];H.dm().each(function(m){if(Uk(m)){var b=m.s("light.type");b===ip?y.push(m):b===ki?P.push(m):b===lp&&V.push(m)}}),(y.length!==H._59O.length||P.length!==H._spots.length||V.length!==H._dirs.length)&&vl(H),H._59O=y,H._spots=P,H._dirs=V}H._42(),H._1o.iv()},_42:function(j,n){var o=this;if(!o._35O&&(!Mo||Nl(Mo))){var P,w;j&&(j instanceof Zo?w=j:P=j);var m=o._canvas,t=o.getWidth(),M=o.getHeight(),r=o.getGL(),A=o._prg;if(r){if(n?j||wj(m,t,M,n):(n=o._devicePixelRatio||Pj,j||t===m.clientWidth&&M===m.clientHeight||wj(m,t,M,n)),r.viewport(0,0,t*n,M*n),o._81O=f,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),us(r,A.uBrightness,1),us(r,A.uOpacity,1),us(r,A.uPartOpacity,1),r._picking=!!j,us(r,A.uPick,!!j),us(r,A.uTexture,!1),us(r,A.uFix,!1),us(r,A.uTransparent,!1),us(r,A.uBatchColor,!1),us(r,A.uBatchBlend,!1),us(r,A.uBatchBrightness,!1),j||(zl(o,r,A),o._fogDisabled||(us(r,A.uFogColor,o._fogColor),us(r,A.uFogNear,o._fogNear),us(r,A.uFogFar,o._fogFar))),Bs(r,A.aPosition),Bs(r,A.aNormal),bs(r,A.aUv),bs(r,A.aBatchColor),bs(r,A.aBatchBlend),bs(r,A.aBatchBrightness),bs(r,A.aLineDistance),us(r,A.uPMatrix,Dp(o)),us(r,A.uViewMatrix,rl(o,o._7O)),w){var U=r.getParameter(r.COLOR_CLEAR_VALUE);r.clearColor(0,0,0,0),r.disable(r.BLEND),bs(r,A.aNormal),ob(r,o._cube.vs,f,A.aPosition),Ke(r,o._cube.is),Qm(w,o,Pc,0),Qm(w,o,Eb,6),Qm(w,o,Lc,12),Qm(w,o,Jm,18),Qm(w,o,Yo,24),Qm(w,o,Ro,30),Bs(r,A.aNormal),cc(r,U)}else if(P){P.value=2;var U=r.getParameter(r.COLOR_CLEAR_VALUE);r.clearColor(0,0,0,0),r.disable(r.BLEND),o._95I(r,A,P),cn(o,P),Vd(o,o._polylineModelMap,P),Vd(o,o._wireframeModelMap,P),us(r,A.uTransparent,!0),o._95I(r,A,P,!0),cn(o,P,!0),Vd(o,o._polylineModelMap,P,!0),Vd(o,o._wireframeModelMap,P,!0),us(r,A.uTransparent,!1),r.disable(r.DEPTH_TEST),o._30O._42(r,A,P),r.enable(r.DEPTH_TEST),cc(r,U)}else r.disable(r.BLEND),o.drawSky(r,A),o._31O._42(r,A),o._95I(r,A),cn(o),Vd(o,o._polylineModelMap),Vd(o,o._wireframeModelMap),r.enable(r.BLEND),r.depthMask(!1),us(r,A.uTransparent,!0),o._95I(r,A,f,!0),cn(o,f,!0),Vd(o,o._polylineModelMap,f,!0),Vd(o,o._wireframeModelMap,f,!0),us(r,A.uTransparent,!1),r.depthMask(!0),r.disable(r.BLEND),r.disable(r.DEPTH_TEST),o._32O._42(r,A),o._30O._42(r,A),r.enable(r.DEPTH_TEST);ob(r,f),Ke(r,f),o._33Q=!1}}},_updateSkyBoxPosition:function(S){if(this._skyBox&&S&&"eye"===S.property){var c=S.newValue;this._skyBox.p3(c[0],c[1],c[2]),this.invalidateData(this._skyBox)}},setSkyBox:function(i){this._skyBox=i,this.ump(this._updateSkyBoxPosition,this),this.invalidateAll(),i&&(this.mp(this._updateSkyBoxPosition,this),this._updateSkyBoxPosition())},drawSky:function(r,j,S){var i=this,D=i._skyBox;if(D){var X=i._headlightIntensity,t=sm(i._headlightColor),j=i._prg;1!==X&&(t=[t[0]*X,t[1]*X,t[2]*X]),us(r,j.uHeadlightColor,[t[0],t[1],t[2],1]);var f=i.getData3dUI(D);f&&f._42(r,j,S,function(){return!0}),r.clear(r.DEPTH_BUFFER_BIT),us(r,j.uHeadlightColor,[t[0],t[1],t[2],i._headlightDisabled?1:0])}},_95I:function(M,y,d,I){function i(X){if(j.isVisible(X)&&(!v||g)){if(!d&&j.isTransparentMask(X))return;var s=j.getData3dUI(X);s&&s._42(M,y,d,Z)}}var j=this,Z=function(D){return I?D:!D};j.sky&&M.clear(M.DEPTH_BUFFER_BIT),j.dm().each(i)},getLogicalPoint:function(J){return Np(J,this._canvas)},getHitFaceInfo:function(S){S.target&&(S=this.lp(S));var Z=this.getDataInfoAt(S);if(Z){var t=this._1o.face(Z.data,vc(S.x,S.y));if(t)return{data:Z.data,face:t}}return f},getDataAt:function(Z){var n=this.getDataInfoAt(Z);return n?n.data:f},getDataInfoAt:function(t,U){return t.target&&(t=this.lp(t)),this._1o.get(vc(t.x,t.y,U),!0)},getDatasInRect:function(Q){return this._1o.get(Q)},setEditable:function(v){var N=this,h=N._editable;N._editable=v,this.fp(Od,h,v)},isEditable:function(X){var i=this;return i._editable?On(X)?X.s("3d.editable")?i._editableFunc?i._editableFunc(X):!0:!1:!1:!1},isSelectable:function(U){return U.s("3d.selectable")&&this.sm().isSelectable(U)},isMovable:function(G){var m=this;return ui(G)&&G.getStyle(ih)!==wq?!1:G.s("3d.movable")?m._movableFunc?m._movableFunc(G):!0:!1},isSizeEditable:function(C){return On(C)?this._sizeEditableFunc?this._sizeEditableFunc(C):!0:!1},isRotationEditable:function($){return On($)&&$.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc($):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(g){this.setZoom(be,g)},zoomOut:function(M){this.setZoom(1/be,M)},setZoom:function(J,C){if(1!==J){var X=this;if(X._ortho)return X.setOrthoZoom(J,C),void 0;X._14o&&X._14o.stop(!0);var E=1/J,B=X._eye,y=X._center,W=y[0]+(B[0]-y[0])*E-B[0],D=y[1]+(B[1]-y[1])*E-B[1],w=y[2]+(B[2]-y[2])*E-B[2];if(!(fm(B,y)<X._moveStep&&1>E)){if(C=Jd(C)){var N=to(B);return C.action=function(I){X.fi({kind:X._zooming?"betweenZoom":"beginZoom"}),X._zooming=1,B[0]=N[0]+W*I,B[1]=N[1]+D*I,B[2]=N[2]+w*I,X.fp(aj,f,B)},C._37o=function(){delete X._14o,delete X._zooming,X.fi({kind:"endZoom"}),X.onZoomEnded()},X._14o=wf(C)}B[0]+=W,B[1]+=D,B[2]+=w,X.fp(aj,f,B)}}},setOrthoZoom:function(M,_){if(1!==M){var c=this;c._14o&&c._14o.stop(!0);var a=c._orthoWidth,e=a/M-a;if(!(a<c._moveStep&&M>1))return(_=Jd(_))?(_.action=function(k){c.fi({kind:c._zooming?"betweenZoom":"beginZoom"}),c._zooming=1,c.setOrthoWidth(a+e*k)},_._37o=function(){delete c._14o,delete c._zooming,c.fi({kind:"endZoom"}),c.onZoomEnded()},c._14o=wf(_)):(c.setOrthoWidth(a/M),void 0)}},getPositionInfo:function(l){var V=this,E=V._eye,e=V._center,j=V.getAspect(),t=l?Tm(po(e,E,!0),po(l,E)):fm(E,e);if(V._ortho){var N=V._orthoWidth;return{length:t,height:N/j,width:N}}var S=2*X(V._fovy/2)*t;return{length:t,height:S,width:S*j}},getCenterInfo:function(){var H=this;return H._81O||(H._81O=H.getPositionInfo()),to(H._81O)},rotate:function(H,C,F,d){var e=this;if(H||C){d==f&&(d=e._firstPersonMode),e._88O&&e._88O.stop(!0);var i=e._center,L=e._eye,o=e.getCenterInfo().length,N=d?i:L,W=d?L:i,m=po(N,W),J=T(m[0],m[2]),n=T(Q(m[0]*m[0]+m[2]*m[2]),m[1]),x=d?ul:aj;return d&&(C=-C),(F=Jd(F))?(F.action=function(h){e.fi({kind:e._rotating?"betweenRotate":"beginRotate"}),e._rotating=1;var d=J+H*h,$=n+C*h;$=Lf($),m[0]=o*E($)*E(d),m[1]=o*V($),m[2]=o*E($)*V(d),N[0]=W[0]+m[0],N[1]=W[1]+m[1],N[2]=W[2]+m[2],e.fp(x,f,N)},F._37o=function(){delete e._88O,delete e._rotating,e.fi({kind:"endRotate"}),e.onRotateEnded()},e._88O=wf(F)):(J+=H,n+=C,n=Lf(n),m[0]=o*E(n)*E(J),m[1]=o*V(n),m[2]=o*E(n)*V(J),N[0]=W[0]+m[0],N[1]=W[1]+m[1],N[2]=W[2]+m[2],e.fp(x,f,N),void 0)}},pan:function(p,n,c,v){if(p||n){var K=this;v==f&&(v=K._firstPersonMode),K._89O&&K._89O.stop(!0);var H=rl(K),x=[H[0]*p,H[4]*p,H[8]*p],V=[H[1]*n,H[5]*n,H[9]*n],$=x[0]+V[0],a=x[1]+V[1],M=x[2]+V[2],O=K._center,F=K._eye;if(v){var t=Fd(K.getBoundaries(),F[0],F[2],F[0]+$,F[2]+M,Q($*$+M*M));$=t[0],M=t[1]}if(c=Jd(c)){var D=to(F),z=to(O);return c.action=function(Y){K.fi({kind:K._panning?"betweenPan":"beginPan"}),K._panning=1,O[0]=z[0]+$*Y,O[1]=z[1]+a*Y,O[2]=z[2]+M*Y,F[0]=D[0]+$*Y,F[1]=D[1]+a*Y,F[2]=D[2]+M*Y,K.fp(aj,f,F),K.fp(ul,f,O)},c._37o=function(){delete K._89O,delete K._panning,K.fi({kind:"endPan"}),K.onPanEnded()},K._89O=wf(c)}O[0]+=$,O[1]+=a,O[2]+=M,F[0]+=$,F[1]+=a,F[2]+=M,K.fp(aj,f,F),K.fp(ul,f,O)}},walk:function(F,T,r){if(F){var K=this;r==f&&(r=K._firstPersonMode),K._90O&&K._90O.stop(!0);var v=K._center,S=K._eye,h=po(v,S,!0);if(r){var R=Fd(K.getBoundaries(),S[0],S[2],S[0]+h[0]*F,S[2]+h[2]*F,u(F));if(F=fm(R),!F)return;h=[R[0]/F,0,R[1]/F]}if(T=Jd(T)){var o=to(S),p=to(v);return T.action=function(I){K.fi({kind:K._walking?"betweenWalk":"beginWalk"}),K._walking=1;var Z=F*I;S[0]=o[0]+h[0]*Z,S[1]=o[1]+h[1]*Z,S[2]=o[2]+h[2]*Z,v[0]=p[0]+h[0]*Z,v[1]=p[1]+h[1]*Z,v[2]=p[2]+h[2]*Z,K.fp(aj,f,S),K.fp(ul,f,v)},T._37o=function(){delete K._90O,delete K._walking,K.fi({kind:"endWalk"}),K.onWalkEnded()},K._90O=wf(T)}S[0]+=h[0]*F,S[1]+=h[1]*F,S[2]+=h[2]*F,v[0]+=h[0]*F,v[1]+=h[1]*F,v[2]+=h[2]*F,K.fp(aj,f,S),K.fp(ul,f,v)}},handleScroll:function(r,A){r.preventDefault();var d=this,w=d._moveStep;d.isFirstPersonMode()?d.isPannable()&&d.pan(0,A>0?w:-w):d.isZoomable()&&d.setZoom(0>A?1/Vp:Vp)},handlePinch:function(P,D){this.isZoomable()&&this.setZoom(D>P?1/he:he)},reset:function(){this.setCenter(y.graph3dViewCenter),this.setEye(y.graph3dViewEye),this.setUp(y.graph3dViewUp)},moveSelection:function(X,e,K){var F,Y=this,h=Y.dm();h&&(F=h.getHistoryManager()),F&&F.beginInteraction(),ec(this.sm().toSelection(this.isMovable,this),X,e,K),F&&F.endInteraction()},getMoveMode:function(F,m){var y=m.s("3d.move.mode");if(y)return y;var b="88",i="89",K="90";return kj(F)||sp[b]&&sp[i]&&sp[K]?"xyz":sp[b]&&sp[i]?"xy":sp[b]&&sp[K]?"xz":sp[i]&&sp[K]?"yz":sp[b]?"x":sp[i]?"y":sp[K]?"z":"xz"},handleTick:function(){var t=this,A=!1,J=t._moveStep,p=J,C=!1,S=!0,E=t._rotateStep*(S?-1:1);if(t.isWalkable()||(p=0),t.isPannable()||(J=0),t.isRotatable()||(E=0),t._32Q){var u=(Po()-t._32Q)/50;p*=u,J*=u,E*=u}t._31Q&&(Qo(t._31Q),delete t._31Q,delete t._32Q),Bq()&&(A=!0,t.pan(-J,0,C,S)),yi()&&(A=!0,t.pan(J,0,C,S)),bj()&&(A=!0,kj()?t.pan(0,J,C,S):t.walk(p,C,S)),We()&&(A=!0,kj()?t.pan(0,-J,C,S):t.walk(-p,C,S)),Ug()&&(A=!0,t.rotate(-E,0,C,S)),lo()&&(A=!0,t.rotate(E,0,C,S)),eb()&&(A=!0,t.rotate(0,-E/2,C,S)),mh()&&(A=!0,t.rotate(0,E/2,C,S)),A&&(t._32Q=Po(),t._31Q=qc(t.handleTick,t))},handleKeyDown:function(y){var P=this;!xl(y)&&df[y.keyCode]?P.handleTick():Rk(y)?P.selectAll():Uh(y)?P.handleDelete(y):xn(y)&&this.isResettable()&&P.reset()},checkDoubleClickOnNote:function(r,i,P){var N=this;if(P===Em){if(i.s("note.toggleable"))return i.s(Cr,!i.s(Cr)),N.fi({kind:"toggleNote",event:r,data:i,part:P}),!0}else if(P===tm&&i.s("note2.toggleable"))return i.s(Cf,!i.s(Cf)),N.fi({kind:"toggleNote2",event:r,data:i,part:P}),!0;return!1},checkDoubleClickOnRotation:function(U,v,n){return n===Ph?(v.setRotationX(0),!0):n===ib?(v.setRotationY(0),!0):n===Dq?(v.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(L){var l=this,q=l.getWidth()/2,e=l.getHeight()/2,u=l._18Q;return u||(u=Dp(l),l._18Q=ce(u,u,rl(l))),L=un([L[0],L[1],L[2],1],u),{x:q+q*L[0]/L[3],y:e-e*L[1]/L[3]}},getHitPosition:function($,t,o){var P=this,r=P.getWidth(),w=P.getHeight(),l=$.target?P.lp($):$,d=l.x-r/2,u=l.y-w/2,f=P.getCenterInfo(),C=rl(P);t=t?t:[0,0,0],o=o?o:[0,1,0],d=d/r*f.width,u=-1*u/w*f.height;var F=[C[0]*d,C[4]*d,C[8]*d],R=[C[1]*u,C[5]*u,C[9]*u],T=[F[0]+R[0],F[1]+R[1],F[2]+R[2]],D=P.getCenter(),g=Qc(P,t,o,[T[0]+D[0],T[1]+D[1],T[2]+D[2]]);return g?g:[0,0,0]},getLineLength:function(F){this.validate();var A=this.getData3dUI(F);if(A&&A.getCache){var f=A.getCache();if(f)return f[f.length-1].length}return 0},getLineOffset:function(W,O){var U=this.getData3dUI(W);if(U&&U.getCache){var i=U.getCache();if(i)return sj(i,O)}return f},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var eo=$o.Interactor=function(k){this.gv=k};xh("Interactor",L,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var en=$o.DefaultInteractor=function(Y){Ec(en,this,[Y])};xh("DefaultInteractor",eo,{handle_contextmenu:function(D){Wf(D)},handle_mousewheel:function(g){this.gv.handleScroll(g,g.wheelDelta/40)},handle_DOMMouseScroll:function(U){2===U.axis&&this.gv.handleScroll(U,-U.detail)},handle_keydown:function(A){this.gv.handleKeyDown(A)},handle_mousedown:function(c){this.handle_touchstart(c)},handle_touchstart:function($){Wf($);var V=this,L=V.gv,D=fr($),j=L.getDataInfoAt($),X=j?j.data:f,F=j?j.part:f,N=L.sm(),v=Pi($),C=ti($);L.setFocus($)&&(V._62O=f,V._57I=f,X?xl($)?N.co(X)?N.rs(X):N.as(X):N.co(X)||N.ss(X):D&&(xl($)?L.isRectSelectable()&&(V._62O=Tg):V._57I=ss($)),V._31Q&&(Qo(V._31Q),delete V._31Q,delete V._32Q),V._62O||(L.isFirstPersonMode()&&(kj($)||C>2?V._62O="pan":L.isMouseRoamable()||Z?(V._62O="roaming",V.foward=v&&fr($),V._32Q=Po(),V._31Q=qc(V.tick,V)):D||(V._62O="roaming")),V._62O||(D&&v&&yn[F]?(V._62O=F,V.p3=X.p3()):D&&v&&On(X)&&L.isSelected(X)&&L.isMovable(X)?(V._62O="move",V.p3=X.p3(),V.movedata=X):Z&&(C>2?V._62O="pan":2===C&&(V.dist=Ah($),V._62O="pinch")))),V.point=L.lp($),Td(V,$),Qd($)?L.handleDoubleClick($,X,F):L.handleClick($,X,F))},tick:function(){var e=this,A=e.gv,t=A._moveStep;e.point&&A.isWalkable()&&(e._32Q&&(t*=(Po()-e._32Q)/50),A.walk(e.foward?t:-t),e._32Q=Po(),e._31Q=qc(e.tick,e))},handle_mouseup:function(h){this.handle_touchend(h)},handle_touchend:function(n){var o=this._57I;o&&(fm(o,ss(n))<=1&&this.gv.sm().cs(),this._57I=f)},handleWindowMouseMove:function(O){this.handleWindowTouchMove(O)},handleWindowTouchMove:function(e){var o,s,f=this,a=f.gv,O=f._62O,C=f.point,l=a.dm(),_=l.getHistoryManager(),S=a.lp(e),D=S.x-C.x,y=S.y-C.y,W=-c*D/a.getWidth(),k=-c*y/a.getHeight();if("roaming"===O)f.rotate(e,W/2,k/2);else if(O===Ph||O===ib||O===Dq)_&&!a._86O&&_.beginInteraction(),a.fi({kind:a._86O?"betweenEditRotation":"beginEditRotation",event:e}),a._86O=1,a.sm().each(function(D){if(On(D)&&a.isRotationEditable(D)){var i=u(W)>u(k)?W:k;O===Ph?D.setRotationX(D.getRotationX()+i):O===ib?D.setRotationY(D.getRotationY()+i):O===Dq&&D.setRotationZ(D.getRotationZ()+i)}});else if("move"===O||yn[O]){O===bi||O===rn||O===le?(_&&!a._87O&&_.beginInteraction(),a.fi({kind:a._87O?"betweenEditSize":"beginEditSize",event:e}),a._87O=1):(_&&!a._moving&&_.beginInteraction(),a.fi({kind:a._moving?"betweenMove":"beginMove",event:e}),a._moving=1);var t,Z=f.p3,L=a.getPositionInfo(Z),U=rl(a);t=O===im?"x":O===Kf?"y":O===eq?"z":O===bi?"sx":O===rn?"sy":O===le?"sz":a.getMoveMode(e,f.movedata),D=D/a.getWidth()*L.width,y=-1*y/a.getHeight()*L.height;var G,m,p=[U[0]*D,U[4]*D,U[8]*D],X=[U[1]*y,U[5]*y,U[9]*y],I=p[0]+X[0],g=p[1]+X[1],v=p[2]+X[2],Q=[Z[0]+I,Z[1]+g,Z[2]+v],J=po(a.getEye(),Q,!0);if("xyz"===t?(G=Q,a.moveSelection(I,g,v)):"xz"===t?(G=Qc(a,Z,[0,1,0],Q),G&&a.moveSelection(G[0]-Z[0],0,G[2]-Z[2])):"xy"===t?(G=Qc(a,Z,[0,0,1],Q),G&&a.moveSelection(G[0]-Z[0],G[1]-Z[1],0)):"yz"===t?(G=Qc(a,Z,[1,0,0],Q),G&&a.moveSelection(0,G[1]-Z[1],G[2]-Z[2])):"x"===t||"sx"===t?(J[0]=0,G=Qc(a,Z,J,Q),G&&(m=G[0]-Z[0],"x"===t?a.moveSelection(m,0,0):a.sm().each(function(r){On(r)&&a.isSizeEditable(r)&&(o=i(xq,r.getWidth()+m),s=o/r.getWidth(),r.setWidth(o),kj(e)&&(r.setHeight(r.getHeight()*s),r.setTall(r.getTall()*s)))}))):"y"===t||"sy"===t?(J[1]=0,G=Qc(a,Z,J,Q),G&&(m=G[1]-Z[1],"y"===t?a.moveSelection(0,m,0):a.sm().each(function(O){On(O)&&a.isSizeEditable(O)&&(o=i(xq,O.getTall()+m),s=o/O.getTall(),O.setTall(o),kj(e)&&(O.setHeight(O.getHeight()*s),O.setWidth(O.getWidth()*s)))}))):("z"===t||"sz"===t)&&(J[2]=0,G=Qc(a,Z,J,Q),G&&(m=G[2]-Z[2],"z"===t?a.moveSelection(0,0,m):a.sm().each(function(T){On(T)&&a.isSizeEditable(T)&&(o=i(xq,T.getHeight()+m),s=o/T.getHeight(),T.setHeight(o),kj(e)&&(T.setTall(T.getTall()*s),T.setWidth(T.getWidth()*s)))}))),!G)return;f.p3=G}else if(O===Tg){var B=f.div;B||(B=f.div=mp(),Bb(f.getView(),B),B.op=C,B.style.background=a.getRectSelectBackground()),a.fi({kind:a._rectSelecting?"betweenRectSelect":"beginRectSelect",event:e}),a._rectSelecting=1,B.rect=Rl(B.op,S),kc(B,B.rect)}else if("pinch"===O&&2===ti(e)){a.fi({kind:a._pinching?"betweenPinch":"beginPinch",event:e}),a._pinching=1;var m=Ah(e);a.handlePinch(m,f.dist),f.dist=m}else"pan"===O||kj(e)?f.pan(e,D,y):a.isFirstPersonMode()||(fr(e)?f.rotate(e,W,k):(f.pan(e,D,0),a.isWalkable()&&(a.fi({kind:a._walking?"betweenWalk":"beginWalk",event:e}),a._walking=1,a.walk(y/a.getHeight()*a.getCenterInfo().height))));f.point=S},pan:function(o,g,l){var W=this.gv;if(W.isPannable()){var x=W.getCenterInfo(),e=g/W.getWidth()*x.width,M=-1*l/W.getHeight()*x.height;W.fi({kind:W._panning?"betweenPan":"beginPan",event:o}),W._panning=1,W.pan(-e,-M)}},rotate:function(Z,$,r){var e=this.gv;e.isRotatable()&&(e.fi({kind:e._rotating?"betweenRotate":"beginRotate",event:Z}),e._rotating=1,e.rotate($,r))},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(g){var h=this,x=h.gv,p=x.dm(),o=p.getHistoryManager(),c=h.div;if(c){var E=x.getDatasInRect(c.rect);if(!E.isEmpty()){var v=x.sm(),U=v.toSelection();E.each(function(Y){v.co(Y)?U.remove(Y):U.add(Y)}),v.ss(U)}vo(c)}x._moving&&(delete x._moving,x.fi({kind:"endMove",event:g}),x.onMoveEnded(),o&&o.endInteraction()),x._panning&&(delete x._panning,x.fi({kind:"endPan",event:g}),x.onPanEnded()),x._rotating&&(delete x._rotating,x.fi({kind:"endRotate",event:g}),x.onRotateEnded()),x._86O&&(delete x._86O,x.fi({kind:"endEditRotation",event:g}),o&&o.endInteraction()),x._87O&&(delete x._87O,x.fi({kind:"endEditSize",event:g}),o&&o.endInteraction()),x._pinching&&(delete x._pinching,x.fi({kind:"endPinch",event:g}),x.onPinchEnded()),x._rectSelecting&&(delete x._rectSelecting,x.fi({kind:"endRectSelect",event:g}),x.onRectSelectEnded()),x._walking&&(delete x._walking,x.fi({kind:"endWalk",event:g}),x.onWalkEnded()),h.dist=h.point=h._62O=h.p3=h.movedata=h.div=h._57I=h._32Q=h._31Q=h.foward=f}});var ps=function(R){this.gv=R};zs(ps,L,{_iv:!0,iv:function(){this._iv=!0},face:function(T,n){var g=this,s=g.gv.getGL();if(!s||!On(T))return f;var E=n.x,d=n.width,$=n.height,Y=g.height-n.y-$,C=q(d/2),u=new Uint8Array(4*d*$),e=0;for(g.iv(),g.validate(T),km(s,g.frame),s.readPixels(E,Y,d,$,s.RGBA,s.UNSIGNED_BYTE,u),km(s,f),g.iv();C>=e;e++)for(var L=C-e,J=C+e,O=L;J>=O;O++)for(var w=L;J>=w;w++)if(O===L||O===J||w===L||w===J){var _=fl.m[u[4*(O*d+w)]];if(_)return _}},get:function(e,R){this.validate();var $=this,s=$.gv.getGL();if(!s)return f;var v,N,J=e.x,g=e.width,P=e.height,b=$.height-e.y-P,V=q(g/2),l=new Uint8Array(4*g*P),Y=0,h=l.length,m=R?f:new ie,n=R?f:{};if(km(s,$.frame),s.readPixels(J,b,g,P,s.RGBA,s.UNSIGNED_BYTE,l),km(s,f),R){for(;V>=Y;Y++)for(var L=V-Y,x=V+Y,W=L;x>=W;W++)for(var G=L;x>=G;G++)if((W===L||W===x||G===L||G===x)&&(v=$.info(l,4*(W*g+G))))return v}else for(;h>Y;Y+=4)v=$.info(l,Y),v&&(N=v.data,n[N._id]||(m.add(N),n[N._id]=N));return m},info:function(x,J){return this.colorMap[(x[J]<<24)+(x[J+1]<<16)+(x[J+2]<<8)+x[J+3]]},validate:function(i){var $=this,d=$.gv,l=d.getGL();if(l){var p=d.getWidth(),e=d.getHeight(),n=l.RGBA,g=l.TEXTURE_2D,u=l.RENDERBUFFER,J=l.FRAMEBUFFER;$.texture||($.texture=vm(l),$.render=l.createRenderbuffer(),$.frame=l.createFramebuffer()),($.width!==p||$.height!==e)&&(Hr(l,$.texture),l.texImage2D(g,0,n,p,e,0,n,l.UNSIGNED_BYTE,f),Lh(l,l.TEXTURE_MIN_FILTER,l.LINEAR),l.bindRenderbuffer(u,$.render),l.renderbufferStorage(u,l.DEPTH_COMPONENT16,p,e),km(l,$.frame),l.framebufferTexture2D(J,l.COLOR_ATTACHMENT0,g,$.texture,0),l.framebufferRenderbuffer(J,l.DEPTH_ATTACHMENT,u,$.render),Hr(l,f),l.bindRenderbuffer(u,f),km(l,f),$.width=p,$.height=e),$._iv&&($._iv=!1,km(l,$.frame),d._42(i||($.colorMap={}),1),km(l,f))}}});var je=function(H){this.gv=H};zs(je,L,{gap:0,size:0,_42:function(M,Y){var E=this,m=E.gv,t=m._gridGap,k=m._gridSize;if(m._gridVisible){if(E.gap!==t||E.size!==k){for(var Z=[],u=m._gridSize/2,W=t*u,l=0;2*u+1>l;l++){var B=6*l,X=6*(2*u+1)+B;Z[B]=-W,Z[B+1]=0,Z[B+2]=-W+l*t,Z[B+3]=W,Z[B+4]=0,Z[B+5]=-W+l*t,Z[X]=-W+l*t,Z[X+1]=0,Z[X+2]=-W,Z[X+3]=-W+l*t,Z[X+4]=0,Z[X+5]=W}E.vs=new Sl(Z),E.gap=t,E.size=k}em(m),Uc(M,Y),uj(M),Fo(M,Y,1,m._gridColor,m._buffer.vs,E.vs),wl(M,0,E.vs.length/3,M.LINES),Fn(M),ws(M,Y)}else E.vs=E.gap=E.size=f}});var Yn=function(r){this.gv=r};zs(Yn,L,{_42:function(k,v){var n=this.gv,g=n._buffer.vs,Y=n._axisXColor,o=n._axisYColor,A=n._axisZColor,L=n._originAxisVisible,X=n._centerAxisVisible;if(L||X){var b=C?k.TRIANGLES:k.TRIANGLE_FAN,D=k.LINES;if(em(n),Uc(k,v),uj(k),L){var O=n.getCenterInfo(),M=K(O.width,O.height)/5,i=.8*M,y=.05*M;Fo(k,v,1.5,Y,g,new Sl([0,0,0,M,0,0,i,y,0,i,0,y,i,-y,0,i,0,-y,i,y,0,0,0,0,0,M,0,y,i,0,0,i,y,-y,i,0,0,i,-y,y,i,0,0,0,0,0,0,M,y,0,i,0,y,i,-y,0,i,0,-y,i,y,0,i])),wl(k,0,2,D),wl(k,1,6,b),Fo(k,v,f,o),wl(k,7,2,D),wl(k,8,6,b),Fo(k,v,f,A),wl(k,14,2,D),wl(k,15,6,b)}if(X){var p=n._center,u=p[0],I=p[1],l=p[2],O=n.getPositionInfo(p);M=K(O.width,O.height)/20,Fo(k,v,1.5,Y,g,new Sl([u,I,l,u+M,I,l,u,I,l,u,I+M,l,u,I,l,u,I,l+M])),wl(k,0,2,D),Fo(k,v,f,o),wl(k,2,2,D),Fo(k,v,f,A),wl(k,4,2,D)}Fn(k),ws(k,v)}}});var ns=function(A){this.gv=A},im="edit_tx",Kf="edit_ty",eq="edit_tz",Ph="edit_rx",ib="edit_ry",Dq="edit_rz",bi="edit_sx",rn="edit_sy",le="edit_sz",yn={};yn[im]=1,yn[Kf]=1,yn[eq]=1,yn[Ph]=1,yn[ib]=1,yn[Dq]=1,yn[bi]=1,yn[rn]=1,yn[le]=1,zs(ns,L,{_42:function(F,X,$){var Q=this,Y=Q.gv,B=Y.sm().ld();if(Y.isEditable(B)&&On(B)&&(!Y.isFirstPersonMode()||!Y.isMouseRoamable()&&!Z)){em(Y);var G,k,l=Y.isMovable(B),A=Y.isRotationEditable(B),W=Y.isSizeEditable(B),M=Y._axisXColor,p=Y._axisYColor,d=Y._axisZColor,O=Y._editSizeColor,T=Y.getCenterInfo(),g=K(T.width,T.height)/10,N=g/($?5:10),C=.7*g,E=.4*C,D=B.p3(),U=D[0],P=D[1],t=D[2];G=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&Q._17O(F,X,B,$,im,M,G,[U,P-N,t,U+C,P-N,t,U+C,P,t,U+C,P,t,U,P,t,U,P-N,t,U,P-N,t+N,U+C,P-N,t+N,U+C,P-N,t,U+C,P-N,t,U,P-N,t,U,P-N,t+N]),k=U+C,W&&Q._17O(F,X,B,$,bi,O,G,[k,P-N,t,k+E,P-N,t,k+E,P,t,k+E,P,t,k,P,t,k,P-N,t,k,P-N,t+N,k+E,P-N,t+N,k+E,P-N,t,k+E,P-N,t,k,P-N,t,k,P-N,t+N]),k+=E,A&&Q._17O(F,X,B,$,Ph,M,G,[k,P-N,t,k+E,P-N,t,k+E,P,t,k+E,P,t,k,P,t,k,P-N,t,k,P-N,t+N,k+E,P-N,t+N,k+E,P-N,t,k+E,P-N,t,k,P-N,t,k,P-N,t+N]),G=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],l&&Q._17O(F,X,B,$,Kf,p,G,[U,P,t,U,P+C,t,U-N,P+C,t,U-N,P+C,t,U-N,P,t,U,P,t,U,P,t,U,P,t-N,U,P+C,t-N,U,P+C,t-N,U,P+C,t,U,P,t]),k=P+C,W&&Q._17O(F,X,B,$,rn,O,G,[U,k,t,U,k+E,t,U-N,k+E,t,U-N,k+E,t,U-N,k,t,U,k,t,U,k,t,U,k,t-N,U,k+E,t-N,U,k+E,t-N,U,k+E,t,U,k,t]),k+=E,A&&Q._17O(F,X,B,$,ib,p,G,[U,k,t,U,k+E,t,U-N,k+E,t,U-N,k+E,t,U-N,k,t,U,k,t,U,k,t,U,k,t-N,U,k+E,t-N,U,k+E,t-N,U,k+E,t,U,k,t]),G=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],l&&Q._17O(F,X,B,$,eq,d,G,[U,P,t,U,P,t+C,U,P-N,t+C,U,P-N,t+C,U,P-N,t,U,P,t,U,P-N,t,U-N,P-N,t,U-N,P-N,t+C,U-N,P-N,t+C,U,P-N,t+C,U,P-N,t]),k=t+C,W&&Q._17O(F,X,B,$,le,O,G,[U,P,k,U,P,k+E,U,P-N,k+E,U,P-N,k+E,U,P-N,k,U,P,k,U,P-N,k,U-N,P-N,k,U-N,P-N,k+E,U-N,P-N,k+E,U,P-N,k+E,U,P-N,k]),k+=E,A&&Q._17O(F,X,B,$,Dq,d,G,[U,P,k,U,P,k+E,U,P-N,k+E,U,P-N,k+E,U,P-N,k,U,P,k,U,P-N,k,U-N,P-N,k,U-N,P-N,k+E,U-N,P-N,k+E,U,P-N,k+E,U,P-N,k])}},_17O:function(O,U,Z,z,A,t,E,D){var F=this.gv._buffer;fp(O,U,z,!0,Z,A),sl(O,U,f,!0,f,!0,f,!1),us(O,U.uDiffuse,t),ob(O,F.vs,new Sl(D),U.aPosition),ob(O,F.ns,new Sl(E),U.aNormal),uj(O),wl(O,0,12),Fn(O),gl(O,U)}});var Oe=function(c,s){this.gv=c,this.s=function(a,G,X){return G==f&&(G=X),G==f?s.getStyle(a):gd(G,s,c)},this.data=s};zs(Oe,L,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(E,m,s,p){var q=this,w=q.data;if(!(w instanceof Zg||w instanceof Hd)){var j,i,U,A,X,S,N,V=q.gv,k=w._id,O=q.s("batch"),l=V._34O,e=V._33O,J=V.isSelectable(w),t=V.getBrightness(w),b=t!=f&&1!==t;if(q._iv){if(U=Jg(l,e,w,O),q.validate(U,O?Ab[O]||yp:f),U&&(A=l[k],X=A.size=U.vs.length/3-A.begin,N=U.rs))for(t=b?t:1,S=0;X>S;S++)N.push(t);if(On(w)){var I=V.getWireframe(w);I&&yb(V,w,I)}q.labelInfo=q.label2Info=q.noteInfo=q.note2Info=q._38o=f,q._24O(lq,"getLabel"),q._24O(de,"getLabel2"),q._26O(Em,"getNote"),q._26O(tm,"getNote2"),q._15O(),q._iv=!1}b&&us(E,m.uBrightness,t),i=fp(E,m,s,J,w,Bf),i&&(xb(i,l[k],e),xb(i,V._polylineIndexMap[k],V._polylineModelMap),xb(i,V._wireframeIndexMap[k],V._wireframeModelMap)),l[k]||q._80o(E,m,p),V.isLabelVisible(w)&&((j=q.labelInfo)&&(fp(E,m,s,J,w,lq),q._28O(j,lq,p)),(j=q.label2Info)&&(fp(E,m,s,J,w,de),q._28O(j,de,p))),V.isNoteVisible(w)&&((j=q.noteInfo)&&(fp(E,m,s,J,w,Em),q._29O(j,Em,p)),(j=q.note2Info)&&(fp(E,m,s,J,w,tm),q._29O(j,tm,p))),(j=q._38o)&&q._99O(E,m,j,s,J,p),b&&us(E,m.uBrightness,1)}},validate:function(){},_16O:function(){return Lb},_80o:function(){},dispose:function(){},getBodyColor:function(Y){var c=this.data,l=this.gv.getBodyColor(c);return l?l:Y?c.getStyle(Y):f},_24O:function(X,N){var A=this,o=A.data,z=A.gv,u=A.s,J=z[N](o);if(J!=f){var C=u(X+".scale"),D=u(X+".max"),e=A[X+"Info"]={label:J,textureScale:u(X+".texture.scale"),color:z[N+"Color"](o),font:u(X+".font"),align:u(X+".align"),background:z[N+"Background"](o)},a=e.rect=ye(e,J);D>0&&D<a.width&&(e.labelWidth=a.width,a.width=D),a.x=a.y=0,a.width*=C,a.height*=C,e.mat=A._16O(u(X+".autorotate"),u(X+".position"),a,u(X+".face"),u(X+".t3"),u(X+".r3"),u(X+".rotationMode"));var Q=a.width/2,s=a.height/2;e.vs=new Sl([-Q,s,0,-Q,-s,0,Q,-s,0,Q,s,0]),a.width/=C,a.height/=C}},_26O:function(Z,i){var s=this,r=s.data,H=s.gv,w=s.s,p=H[i](r);if(p!=f){var D=w(Z+".scale"),Y=this[Z+"Info"]={note:p,textureScale:w(Z+".texture.scale"),expanded:w(Z+".expanded"),font:w(Z+".font"),color:w(Z+".color"),align:w(Z+".align"),borderWidth:w(Z+".border.width"),borderColor:w(Z+".border.color"),background:H[i+"Background"](r)};if(Y.expanded){var b=w(Z+".max"),o=ye(Y,p);o.width+=6,o.height+=2,b>0&&b<o.width&&(Y.labelWidth=o.width,o.width=b);var M={x:-o.width/2,y:-8-o.height,width:o.width,height:o.height+8}}else M={x:-6,y:-18,width:12,height:18};Y.mat=s._16O(w(Z+".autorotate"),w(Z+".position"),f,w(Z+".face"),w(Z+".t3"),w(Z+".r3"),w(Z+".rotationMode")),Y.rect=M,1!==D&&(M=to(M),M.x*=D,M.height*=D,M.y=-M.height,M.width*=D);var F=M.x,G=M.y,j=M.width,I=M.height;Y.vs=new Sl([F,-G,0,F,-G-I,0,F+j,-G-I,0,F+j,-G,0])}},_28O:function(X,L,N){if(N(this.s(L+".transparent"))){var h=X.rect,S=X.textureScale,e=h.width*S,u=h.height*S;if(e>=1&&u>=1){var l=Zq(e,u);1!==S&&(l.translate(l,h.x,h.y),l.scale(S,S),l.translate(l,-h.x,-h.y)),Go(l,X),l.restore(),ac(this,L,X.mat,X.vs,!0)}}},_29O:function(n,E,Z){if(Z(this.s(E+".transparent"))){var R=n.rect,q=n.textureScale,P=R.x,y=R.y,B=R.width*q,C=R.height*q;if(B>=1&&C>=1){R.x=R.y=0;var m=Zq(B,C);1!==q&&m.scale(q,q),ok(m,n),m.restore(),R.x=P,R.y=y,ac(this,E,n.mat,n.vs,!1)}}},_99O:function(F,i,q,D,t,X){if(q){var V=this,J=V.gv,m=V.data,I=J._buffer,a=J._1O,w=q.icons;
for(var T in w){var r=w[T],O=q.rects[T];if(O&&X(gd(r.transparent,m,J))){fp(F,i,D,t,m,T);var l=gd(r.shape3d,m,J),u=l?[l]:gd(r.names,m,J),Q=u?u.length:0,W=gd(r.textureScale,m,J)||1,H=gd(r.light,m,J);H==f&&(H=l?!0:!1),sl(F,i,gd(r.blend,m,J),H,gd(r.opacity,m,J),gd(r.reverseFlip,m,J),gd(r.reverseColor,m,J),gd(r.reverseCull,m,J));for(var R=0;Q>R;R++){var n=u[R],e=O[R];if(Jp(V,e.mat),l)jh(J,m,hm(V,l),V);else{var C=tr(n);if(C){var S=e.width*W,h=e.height*W;if(S>=1&&h>=1){var p=Zq(S,h);Rm(p,C,gd(r.stretch,m,J),0,0,S,h,m,J),p.restore(),vm(F,Pr,a),uj(F,i,a,gd(r.discardSelectable,m,J),I.uv,Wd),ob(F,I.vs,e.vs,i.aPosition),ob(F,I.ns,Zb,i.aNormal),Ke(F,I.is,Ib),yf(F,0,Ib.length),Fn(F,i,a)}}}Rf(J)}gl(F,i)}}}}});var Un=function(k,_){Ec(Un,this,[k,_])};zs(Un,Oe,{_16O:function(x,C,j,p,H,f,w,n,h){var g=this.data,U=rm(C,g.s3(),j,p,n,h);return Ti(el(),U,g.p3(),p,H,f,w,x,g.r3(),g.getRotationMode())},clear:function(){var R=this;R.faceMat=R.mat=R.shapeModel=R.left=R.right=R.front=R.back=R.top=R.bottom=R.csg=f},validate:function(j,D){var k=this,p=k.gv,d=k.data,F=hm(k),t=Re(d,p.getMat(d),F?k.s("shape3d.scaleable"):!0);if(k.clear(),j){var C=[];F?Sn(p,d,F,k,k.getBodyColor(),[t],j,C):(bk(p,d,j,D,t,Pc,C,Rq),bk(p,d,j,D,t,Lc,C,vb),bk(p,d,j,D,t,Yo,C,jp),bk(p,d,j,D,t,Ro,C,Ki),bk(p,d,j,D,t,Eb,C,Eo),bk(p,d,j,D,t,Jm,C,kr)),C.length&&(Wh(j.vs,C),Wh(j.ns,Cq(C)))}else k.mat=t,(k.shapeModel=F)||(k.vf(Pc),k.vf(Lc),k.vf(Eb),k.vf(Jm),k.vf(Yo),k.vf(Ro))},vf:function(b){var w=this;if(w.gv.getFaceVisible(w.data,b)){var $=Ef(w,b);return $.mat&&(w.faceMat=!0),$}},_80o:function(G,g,x){var $=this,r=$.gv,Y=$.data,B=r._cube,z=$.shapeModel;em(r,$.mat),z?jh(r,Y,z,$,$.getBodyColor(),x):(ob(G,B.vs,f,g.aPosition),ob(G,B.ns,f,g.aNormal),Ke(G,B.is),$._18O(G,g,$.left,0,x),$._18O(G,g,$.front,6,x),$._18O(G,g,$.right,12,x),$._18O(G,g,$.back,18,x),$._18O(G,g,$.top,24,x),$._18O(G,g,$.bottom,30,x)),Rf(r),$.faceMat&&($._18O(G,g,$.left,0,x,!0),$._18O(G,g,$.front,6,x,!0),$._18O(G,g,$.right,12,x,!0),$._18O(G,g,$.back,18,x,!0),$._18O(G,g,$.top,24,x,!0),$._18O(G,g,$.bottom,30,x,!0))},_18O:function(J,l,N,c,D,g){if(N){if(!D(N.transparent))return;if(g&&!N.mat||!g&&N.mat)return;g&&em(this.gv,N.mat);var M=this,K=M.data,q=M.gv,n=q.getTexture(N.texture,K),V=N.uv,e=N.uvScale,b=N.uvOffset,z=N.discardSelectable;if(n)if(V){for(var v=8*(c/6),R=0;8>R;R++)rp[v+R]=V[R];uj(J,l,n,z,q._buffer.uv,rp,b,e)}else uj(J,l,n,z,q._cube.uv,f,b,e);else uj(J);sl(J,l,N.blend,N.light,N.opacity,N.reverseFlip,N.reverseColor,N.reverseCull),us(J,l.uDiffuse,N.color),yf(J,c,6),gl(J,l),Fn(J,l,n),g&&Rf(q)}}});var Pf=function(i,E){Ec(Pf,this,[i,E])};zs(Pf,Oe,{_25Q:1,validate:function(g){var X=this,m=X.gv,t=X.data,n=X.s,E=n("edge.width"),e=t._40I,Z=t._41I;if(X.shapeModel=X.info=f,e&&Z){var D,U,w,J,_,p,h,W,i,d,N=t.isLooped(),z=n(ih),j=y.getEdgeType(z);if(j){var b=j(t,op(X,m,t,N,z),m,X._19Q);if(!b.points||b.points.isEmpty())return;p=X.info={},h=b.segments,_=b.points,W=_.size();for(var v=e.getElevation(),r=Z.getElevation(),M=0;W>M;M++){var L=_.get(M);L.e==f&&(L.e=v+(r-v)*M/(W-1))}i=yc(_.get(0)),d=yc(_.get(W-1));var c=W%2;0===c?(p.c1=yc(_.get(W/2-1)),p.c2=yc(_.get(W/2))):p.p3=yc(_.get((W-c)/2)),p.s1=i,p.s2=yc(_.get(1)),p.t1=yc(_.get(W-2)),p.t2=d}else{_=new ie,p=X.info={};var l=n("edge.offset"),x=n("edge.center"),s=n("edge.source.t3"),Y=n("edge.target.t3"),O=e.p3(),o=Z.p3();if(s&&(O[0]+=s[0],O[1]+=s[1],O[2]+=s[2]),Y&&(o[0]+=Y[0],o[1]+=Y[1],o[2]+=Y[2]),z===wq){h=n("edge.segments");var R=p.points=n(lg)||xc;if(W=R.size()){i=yc(R.get(0)),d=yc(R.get(W-1)),!x&&l&&(w=po(i,O,!0),l=K(l,fm(O,i)),O=[O[0]+w[0]*l,O[1]+w[1]*l,O[2]+w[2]*l],w=po(o,d,!0),l=K(l,fm(d,o)),o=[o[0]-w[0]*l,o[1]-w[1]*l,o[2]-w[2]*l]);var c=W%2;0===c?(D=yc(R.get(W/2-1)),U=yc(R.get(W/2))):p.p3=yc(R.get((W-c)/2)),p.s1=O,p.s2=i,p.t1=d,p.t2=o}else!x&&l&&(w=po(o,O,!0),J=fm(O,o),l=_e(l,J),O=[O[0]+w[0]*l,O[1]+w[1]*l,O[2]+w[2]*l],o=[o[0]-w[0]*l,o[1]-w[1]*l,o[2]-w[2]*l]),D=O,U=o;_.add({x:O[0],y:O[2],e:O[1]}),_.addAll(R),_.add({x:o[0],y:o[2],e:o[1]})}else{var q=op(X,m,t,N,z);if(X._19Q||(q=-q),N){var V=O[0],I=O[1],A=O[2],T=e.getTall()/2+q;D=[V-q,I+T,A],U=[V+q,I+T,A],_.add({x:V-q,y:A,e:I}),_.add({x:V-q,y:A,e:I+T}),_.add({x:V+q,y:A,e:I+T}),_.add({x:V+q,y:A,e:I})}else{w=po(o,O,!0),J=fm(O,o);var G={x:O[0],y:O[2]},C={x:o[0],y:o[2]},S=Tl(f,G,C,q),k=S.x-G.x,a=S.y-G.y;l=_e(l,J),w[0]*=l,w[1]*=l,w[2]*=l,D=[O[0]+w[0]+k,O[1]+w[1],O[2]+w[2]+a],U=[o[0]-w[0]+k,o[1]-w[1],o[2]-w[2]+a],x?(_.add({x:O[0],y:O[2],e:O[1]}),_.add({x:D[0],y:D[2],e:D[1]}),_.add({x:U[0],y:U[2],e:U[1]}),_.add({x:o[0],y:o[2],e:o[1]})):(_.add({x:D[0],y:D[2],e:D[1]}),_.add({x:U[0],y:U[2],e:U[1]}))}}p.c1=D,p.c2=U}p.list=n(Lq)===gp?X.createTubeModel(_,h,E/2,g):X.createLineModel(_,h,E,"edge","edge.dash")}}});var Xk=function(h,W){Ec(Xk,this,[h,W])};zs(Xk,Un,{_80o:function(r,Y,w){var _=this,f=_.gv,Z=_.shapeModel;em(f,_.mat),Z?jh(f,_.data,Z,_,_.getBodyColor(),w):(Rn(_,r,Y,_.left,w),Rn(_,r,Y,_.front,w),Rn(_,r,Y,_.right,w),Rn(_,r,Y,_.back,w),Rn(_,r,Y,_.top,w),Rn(_,r,Y,_.bottom,w)),Rf(f)},validate:function(l,P){var q,w,k=this,y=k.s,V=k.data,N=V.p3(),n=V._thickness/2,B=V.isClosePath(),g=V.getPoints(),z=V.getSegments(),O=y(So),x=l&&l.uv;if(k.clear(),0>n)w=k.shapeModel=jr(g,z,y(gg),y(dn),O,y($m),V.getTall(),V.getElevation(),B),y(hp)?y("shape3d.image")||delete w.uv:(delete w.vs,delete w.ns,delete w.uv),y("shape3d.top.image")||delete w.top_uv,y("shape3d.bottom.image")||delete w.bottom_uv;else if(y(Lq)===gp)q=qn(g,z,O,B),w=k.shapeModel={vs:[]},y("shape3d.image")&&(w.uv=[],w.sum=y($m)||Ye(q)||1,w.len=0),y(gg)&&!B&&(w.top_vs=[],y("shape3d.top.image")&&(w.top_uv=[])),y(dn)&&!B&&(w.bottom_vs=[],y("shape3d.bottom.image")&&(w.bottom_uv=[])),k._12O(q,n);else{var J,F,Q,T,c,i,$,D,e,W;q=qn(g,z,O,B),c=k.vf(Eb,x,!1,P),n&&(i=k.vf(Jm,x,!1,P),$=B?f:k.vf(Pc,x,!1,P),D=B?f:k.vf(Lc,x,!1,P),e=k.vf(Yo,x,!1,P),W=k.vf(Ro,x,!1,P)),n?k._12O(q,n):c&&q.forEach(function(f){if(T=f.length,T>0)for(J=f[0],Q=1;T>Q;Q++)F=f[Q],k.addV(c.vs,J,F),J=F}),k._20Q(q),l||(c&&(c.ns=Cq(c.vs),$l(c,"vs"),$l(c,gm)),n&&(i&&(i.ns=Cq(i.vs),$l(i,"vs"),$l(i,gm)),$&&($.ns=Cq($.vs),$l($,"vs"),$l($,gm)),D&&(D.ns=Cq(D.vs),$l(D,"vs"),$l(D,gm)),e&&(e.ns=Cq(e.vs),$l(e,"vs"),$l(e,gm)),W&&(W.ns=Cq(W.vs),$l(W,"vs"),$l(W,gm))))}var R=k.mat=el();rb(R,N),sh(R,V.r3(),V.getRotationMode()),rb(R,Fr(N)),l&&(Tf(k,R,l,w),k.clear())},_20Q:function(H){var P,M,R,k,z,A,j,Q=this,B=Q.front,g=Q.back,J=Q.top,C=Q.bottom,K=B?B.tuv:f,r=g?g.tuv:f,l=J?J.tuv:f,W=C?C.tuv:f,e=0;(K||r||l||W)&&(P=Q.s($m)||Ye(H)||1,H.forEach(function(x){if(M=x.length,M>0)for(A=x[0],R=1;M>R;R++)j=x[R],k=e/P,e+=fm(A,j),z=e/P,Q._14O(B,k,z),Q._14O(g,1-z,1-k),Q._14O(J,k,z),Q._14O(C,k,z),A=j}))},_14O:function(J,O,v){if(J){var K=J.uv,Y=J.tuv;if(Y){if(K)var l=K[0]+(K[6]-K[0])*O,R=K[1]+(K[7]-K[1])*O,t=K[2]+(K[4]-K[2])*O,M=K[3]+(K[5]-K[3])*O,V=K[2]+(K[4]-K[2])*v,y=K[3]+(K[5]-K[3])*v,o=K[0]+(K[6]-K[0])*v,X=K[1]+(K[7]-K[1])*v;else l=O,R=0,t=O,M=1,V=v,y=1,o=v,X=0;Y.push(t,M,V,y,o,X,o,X,l,R,t,M)}}},_13O:function(B){var b=B.uv,I=B.tuv;I&&(b?I.push(b[2],b[3],b[4],b[5],b[6],b[7],b[6],b[7],b[0],b[1],b[2],b[3]):I.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(Q,a){var L,E,A,r,m,D=this;Q.forEach(function(l){if(m=l.length,m>0)for(L={p:l[0],n:!0},r=1;m>r;r++)E=l[r],A=m-1>r?l[r+1]:f,D.addPoint(L,E,A,a,l)})},addPoint:function(r,P,$,J,D){var w,C,e,S,p,j,A,i,N,L=this,t=r.p,n=r.f,B=r.b,y=L.s("shape3d.side")||Jq,F=L.s("shape3d.start.angle"),z=L.s("shape3d.sweep.angle"),u=L.shapeModel,I=L.data.isClosePath();if(r.n&&(r.n=!1,n=I&&D.length>2?Tl(D[D.length-2],t,P,J):Tl(f,t,P,J),B=Xm(t,n),u?u.top_vs&&L._10O(B,n,y,F,z,u.top_vs,u.top_uv):(w=L.left)&&(L.addV(w.vs,B,n),L._13O(w))),C=$?Tl(t,P,$,J):I&&D.length>2?Tl(t,P,D[1],J):Tl(t,P,f,J),e=Xm(P,C),u){var E,s,m=u.vs,d=u.uv,U=u.sum;for(d&&(E=u.len/U,u.len+=fm(t,P),s=u.len/U),j=L._9O(B,n,y,F,z),A=L._9O(e,C,y,F,z),i=0;y>i;i++)N=i+1,Wh(m,j[N]),Wh(m,A[i]),Wh(m,j[i]),Wh(m,A[i]),Wh(m,j[N]),Wh(m,A[N]),d&&(S=i/y,p=N/y,d.push(E,p,s,S,E,S,s,S,E,p,s,p));!$&&u.bottom_vs&&L._10O(e,C,y,F,z,u.bottom_vs,u.bottom_uv,!0)}else!$&&(w=L.right)&&(L.addV(w.vs,C,e),L._13O(w)),(w=L.front)&&L.addV(w.vs,n,C),(w=L.back)&&L.addV(w.vs,e,B),(w=L.top)&&L.addH(w.vs,n,C,e,B,!0),(w=L.bottom)&&L.addH(w.vs,B,e,C,n);r.p=P,r.f=C,r.b=e},_10O:function(C,F,S,Z,a,v,_,K){var n,I,b=this,B=b.data,d=b._9O(C,F,S,Z,a),z=(C.x+F.x)/2,J=(C.y+F.y)/2,X=B.getElevation(),f=0;for(f=0;S>f;f++)K?(Wh(v,d[f]),Wh(v,d[f+1])):(Wh(v,d[f+1]),Wh(v,d[f])),Wh(v,[z,X,J]),_&&(K?(n=c*(f+1)/S+Z,I=c*f/S+Z):(n=c*f/S+Z,I=c*(f+1)/S+Z),_.push(.5-.5*V(I),.5-.5*E(I),.5-.5*V(n),.5-.5*E(n),.5,.5))},_9O:function(o,M,Z,C,N){var D,W,A=this,n=A.data,I=[],d=(o.x+M.x)/2,S=(o.y+M.y)/2,B=n.getTall()/2,X=n.getElevation(),q=0;for(N=N||c;Z>=q;q++)D=N*q/Z+C,W=V(D),I.push([d+(o.x-d)*W,X+B*E(D),S+(o.y-S)*W]);return I},addV:function(l,u,X){var j=u.x,s=u.y,y=X.x,k=X.y,O=this.data,b=O.getElevation(),P=O.getTall()/2;l.push(j,b-P,s,y,b-P,k,y,b+P,k,y,b+P,k,j,b+P,s,j,b-P,s)},addH:function(G,J,V,C,$,T){var h=this.data,l=h.getTall()/2,W=h.getElevation()+(T?l:-l);G.push(J.x,W,J.y,V.x,W,V.y,C.x,W,C.y,C.x,W,C.y,$.x,W,$.y,J.x,W,J.y)},vf:function(e,F,R,N){var A,m=this,T=m.gv.getFaceVisible(m.data,e);return(R||T)&&(A=Ef(m,e,N),A.vs=[],A.tuv=T&&(A.texture||F)?[]:f,A.visible=T),A}});var Ao=function(S,$){Ec(Ao,this,[S,$])};zs(Ao,Oe,{_25Q:1,validate:function(h){var E=this,b=E.data,w=E.s,V=b.getPoints(),N=V.size();if(E.shapeModel=E.info=f,N>1){var s=E.info={},I=b.getSegments(),O=b.getThickness(),y=yc(V.get(0)),_=yc(V.get(N-1)),q=N%2;0===q?(s.c1=yc(V.get(N/2-1)),s.c2=yc(V.get(N/2))):s.p3=yc(V.get((N-q)/2)),s.s1=y,s.s2=yc(V.get(1)),s.t1=yc(V.get(N-2)),s.t2=_,s.list=w(Lq)===gp?E.createTubeModel(V,I,O/2,h):E.createLineModel(V,I,O,"shape.border","shape.dash")}}}),Ad(y,{accordionViewExpandIcon:Eh(tf),accordionViewCollapseIcon:Eh(tf,!0),accordionViewLabelColor:_c,accordionViewLabelFont:Hh,accordionViewTitleBackground:Bj,accordionViewSelectBackground:Ol,accordionViewSelectWidth:3,accordionViewSeparatorColor:t,splitViewDividerSize:1,splitViewDividerBackground:Bj,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Ed,rect:[2,2,12,12],background:tf}]},propertyViewLabelColor:Tr,propertyViewLabelSelectColor:_c,propertyViewLabelFont:Hh,propertyViewExpandIcon:Eh(tg),propertyViewCollapseIcon:Eh(tg,!0),propertyViewBackground:cp,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:zi,propertyViewColumnLineColor:zi,propertyViewSelectBackground:Ol,listViewLabelColor:Tr,listViewLabelSelectColor:_c,listViewLabelFont:Hh,listViewRowLineVisible:!1,listViewRowLineColor:zi,listViewSelectBackground:Ol,treeViewLabelColor:Tr,treeViewLabelSelectColor:_c,treeViewLabelFont:Hh,treeViewExpandIcon:Eh(Jr),treeViewCollapseIcon:Eh(Jr,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:zi,treeViewSelectBackground:Ol,treeViewDoubleClickToToggle:!0,tableViewLabelColor:Tr,tableViewLabelSelectColor:_c,tableViewLabelFont:Hh,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:zi,tableViewColumnLineColor:zi,tableViewSelectBackground:Ol,treeTableViewLabelColor:Tr,treeTableViewLabelSelectColor:_c,treeTableViewLabelFont:Hh,treeTableViewExpandIcon:Eh(Jr),treeTableViewCollapseIcon:Eh(Jr,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:zi,treeTableViewColumnLineColor:zi,treeTableViewSelectBackground:Ol,tableHeaderLabelColor:Tr,tableHeaderLabelFont:Hh,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:ej,tableHeaderBackground:cp,tableHeaderMoveBackground:mj,tableHeaderInsertColor:Ol,tableHeaderSortDescIcon:ls(tg,!0),tableHeaderSortAscIcon:ls(tg),tabViewTabGap:1,tabViewLabelColor:_c,tabViewLabelFont:Hh,tabViewTabBackground:Bj,tabViewSelectWidth:3,tabViewSelectBackground:Ol,tabViewMoveBackground:mj,tabViewInsertColor:Ol,toolbarLabelColor:Tr,toolbarLabelSelectColor:_c,toolbarLabelFont:Hh,toolbarBackground:cp,toolbarSelectBackground:Ol,toolbarItemGap:8,toolbarSeparatorColor:vn},!0);var qq={translateX:1,sortColumn:1},ck={sortable:1,sortOrder:1,sortFunc:1},wn={focusData:1},Vo={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},sn={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},cr=function(V,k){k.add(V),V.hasChildren()&&V.eachChild(function(m){cr(m,k)})},Oc=function(L,V,H,o,u,E,e,w,Q,M,N){var I,t=H.getValueType(M),$=H.getAlign(M);if(H.getEnumValues(M)){var C=H.toEnumLabel(V,M),r=dk||0,x=0,g=E,O=y.getTextSize(o,C).width;return I=tr(H.toEnumIcon(V,M)),I&&(x=E+dk/2,"center"===$?x+=(w-(r+O))/2:"right"===$&&(x=x+w-(r+O)),Zd(L,I,x,e+Q/2),g=x+dk/2),C!=f&&(I?Gh(L,C,o,u,g,e,w-(g-E),Q):Gh(L,C,o,u,E,e,w,Q,$)),void 0}return V=H.formatValue(V),V!=f?t===qe?(Hj(L,E,e,w,Q,V),void 0):t===Fj||!t&&lj(V)?(I=tr(V?zh:sq),Zd(L,I,E+w/2,e+Q/2,M,N),void 0):(Gh(L,V,o,u,E,e,w,Q,$),void 0):void 0},Jk=function(O,q){var o=q.view,F=o.getDataModel().getHistoryManager(),V=Ln(O),U=q.column||q.property;F&&F.beginInteraction(),q.editor=O,O.info=q,o.setCurrentEditor(O),o.getView().insertBefore(V,o._79O),kc(O,q.editorRect),O.setFocus?O.setFocus():js(O),O.commitValue=function(){O._17Q&&(O=O._17Q),o.setValue(q.data,U,O.getValue?O.getValue():O.value),O.close&&O.close(),vo(V)},U.onEditorCreated&&U.onEditorCreated(q)},Nk=function(U,x,S,$,F){var Y=ug(U,S),k=x.value,I=x.view,G=F.getValueType(x.data);return Y.onblur=Y.onchange=function(){I.endEditing()},"input"===U?(k=F.formatValue(k),k!=f&&(Y.value=k),Y.onkeydown=function(q){Sj(q)&&I.endEditing()},(G===al||G===jl)&&Y.addEventListener(Jh,y.numberListener,!1)):U===Tg&&$.forEach(function(P){var m=r.createElement("option");m.innerHTML=F.toEnumLabel(P),m.value=P,F.isEnumEqual(k,P)&&(m.selected=!0),Bb(Y,m)}),Jk(Y,x),Y},Qp=A.widget={},Db=function(F,V,C){zs(b+".widget."+F,V,C)};Ad(Of,{ms_value:function(M){M.getValue=function(s){var v=this.getItemById(s),k=v.element;return _o(k)?k:k?k.getValue?k.getValue():k.value:v.selected},M.setValue=function(K,j){var i=this.getItemById(K),x=i.element;x&&!_o(x)?x.setValue?x.setValue(j):x.value=j:lj(j)?(i.selected=j,this.iv()):(i.element=j,this.iv())},M.v=function(e,K){var g=this;if(2===arguments.length)g.setValue(e,K);else{if(!Jo(e))return g.getValue(e);for(var E in e)g.setValue(E,e[E])}return g}},_46o:function(v){v._icon=f,v._accessType=f,v._valueType=f,v._editable=!1,v._batchEditable=!0,v._align=Pc,v._nullable=!0,v._emptiable=!1,v.setParent=ro,v.formatValue=function(y){var H=this,R=H._valueType;return H.getEnumValues()?H.toEnumLabel(y):R===Fj?!!y:y!=f&&R===al?W(y):y},v.setEnum=function(O,j,F,Q,v,u,z){var m=this;O&&!uo(O)&&O.values&&(Q=O.editable,F=O.icons,j=O.labels,v=O.strict,u=O.maxHeight,z=O.dropDownWidth,O=O.values),Kg(O)&&(O=O._as),Kg(j)&&(j=j._as),Kg(F)&&(F=F._as),m._enumValues=O,m._enumLabels=j,m._enumIcons=F,m._enumEditable=Q,m._enumStrict=v==f?!0:v,m._enumMaxHeight=u,m._enumDropDownWidth=z,O&&O.length&&jf(O[0])&&(m._valueType=jl),m.fp("enum",!1,!0)},v.getEnumDropDownWidth=function(){return this._enumDropDownWidth},v.getEnumMaxHeight=function(){return this._enumMaxHeight},v.isEnumEditable=function(){return this._enumEditable},v.getEnumValues=function(){return this._enumValues},v.getEnumLabels=function(){return this._enumLabels},v.getEnumIcons=function(){return this._enumIcons},v.isEnumStrict=function(){return this._enumStrict},v.isEnumEqual=function(v,U){return this._enumStrict?v===U:v==U},v.toEnumLabel=function(O,i){var J=this,R=J.getEnumValues(i),h=J.getEnumLabels(i);if(R&&h)for(var p=0;p<R.length;p++)if(J.isEnumEqual(O,R[p]))return h[p];return O},v.toEnumIcon=function($,l){var D=this,n=D.getEnumValues(l),K=D.getEnumIcons(l);if(n&&K)for(var r=0;r<n.length;r++)if(D.isEnumEqual($,n[r]))return K[r];return t}},_45o:function(O){O._87o=function(p,d,w,s,E,M){if(p){var x=this,T=x._90I,W=mp(1);x._columnLineVisible&&(E-=1),x._rowLineVisible&&(M-=1),0>=E||0>=M||(x._90I||(T=x._90I={}),T[d]||(T[d]=new ie),kc(W,x.tx()+w,x.ty()+s,E,M),Bb(W,p),x._view.insertBefore(W,x._79O),p.onParentAdded&&p.onParentAdded(W),T[d].add(W))}},O._76o=function(){var E=this,u=E._90I;if(u){for(var L in u)u[L].each(function(f){vo(f)});delete E._90I}},O._77o=function(p){var P=this;if(P._90I){var J=P._90I[p];J&&(J.each(function(L){vo(L)}),delete P._90I[p])}}},_47o:function(m){m.getValue=function(H,T){return T.getValue?T.getValue(H,T,this):$j(H,T.getAccessType(),T.getName())},m.setValue=function(E,s,X){if(s.isEmptiable(E)||""!==X||(X=t),s.isNullable(E)||X!=f){var P=this,N=s.getName(E),m=s.getAccessType(E),p=s.getValueType(E);p===al&&_o(X)?X=z(X):p===jl&&_o(X)?X=parseFloat(X):p===Fj&&_o(X)&&(X="true"===X),P._batchEditable&&s._batchEditable&&P.isSelected(E)?P.sm().each(function(r){s.setValue?s.setValue(r,s,X,P):Nc(r,m,N,X)}):s.setValue?s.setValue(E,s,X,P):Nc(E,m,N,X)}},m.setCurrentEditor=function(k){this.endEditing(),this._currentEditor=k,this.redraw()},m.isEditing=function(x,s){var m=this,u=m._currentEditor;if(!u)return!1;if(s){var A=u.info;return A?(A.column||A.property)===s&&A.data===x:!1}return!0},m.endEditing=function(){var K=this,u=K._currentEditor,W=K.getDataModel().getHistoryManager();u&&(delete K._currentEditor,u.commitValue&&u.commitValue(u.info),K.redraw(),W&&W.endInteraction())},m.beginEditing=function(M){this.endEditing();var K=this,A=M.column||M.property;if(A.beginEditing)A.beginEditing(M);else{var W=M.data,I=M.value,e=K.getSelectBackground(W),R=A.getEnumValues(W),C=A.getSlider(W),k=A.getColorPicker(W);if(C){var u=Lr(Qp.Slider,C);return u.setValue(I),u.getView().onblur=function(){K.endEditing()},u.isInstant()&&(u.onValueChanged=function(){K.setValue(W,A,u.getValue())}),Jk(u,M),void 0}if(k||A.getValueType(W)===qe){var g=Lr(Qp.ColorPicker,k);return g.setValue(I),g.onClosed=function(){K.endEditing()},g.isInstant()&&(g.onValueChanged=function(P,Z){K.setValue(W,A,Z)}),Jk(g,M),g.open(),void 0}if(R){if(Qp.ComboBox){var c=new Qp.ComboBox;c.setValue(I),c.setValues(R),c.setLabels(A.getEnumLabels(W)),c.setIcons(A.getEnumIcons(W)),c.setEditable(A.isEnumEditable(W)),c.setStrict(A.isEnumStrict(W)),c.setMaxHeight(A.getEnumMaxHeight(W)),c.setDropDownWidth(A.getEnumDropDownWidth(W)),c.onClosed=function(){K.endEditing()},Jk(c,M),c.open()}else Nk(Tg,M,e,R,A);return}var P=A.getValueType(W);if(P===Fj||lj(I))return K.setValue(W,A,!I),void 0;if(A.getItemEditor(W)){var J=Si(A.getItemEditor(W)),w=new J(W,A,K,M),x=w.getView();return x._17Q=w,w.setValue(I),cj(x),Jk(x,M),w.editBeginning&&w.editBeginning(),void 0}Nk("input",M,e,f,A)}}},_44o:function(Y){Y.init=function(X){var o=this,e=o.th=new dr(X),_=o._view=ak(1,o);o.tv=o._tableView=X,Bb(_,e.getView()),Bb(_,X.getView()),e.mp(function(h){h.property===re&&o.iv()}),o.iv()},Y.getTableView=function(){return this.tv},Y.getTableHeader=function(){return this.th},Y.getDataModel=function(){return this.tv.dm()},Y.getColumnModel=function(){return this.tv.getColumnModel()},Y.setColumns=function(L){this.tv.setColumns(L)},Y.addColumns=function(b){this.tv.addColumns(b)},Y.endEditing=function(){this.tv.endEditing()},Y.validateImpl=function(){var h=this,v=h.th,p=xj(v),m={x:0,y:0,width:h.getWidth(),height:p};kc(v,m),m.y=p,m.height=i(0,h.getHeight()-p),kc(h.tv,m)}},ms_vs:function(a){a._41o=function(){return this._29I.height<this._59I},a._43o=function(){var g=this;g._41o()&&(g._58I||(U(function(){g._94O()},vg),g.iv()),g._58I=new Date)},a._94O=function(){var W=this;if(W._58I){var k=new Date;k.getTime()-W._58I.getTime()>=vg?(delete W._58I,W.iv()):U(function(){W._94O()},vg)}},a._93I=function(){var S=this,n=S._27I;if(S._58I||!S._autoHideScrollBar){n||Bb(S._79O,n=S._27I=mp());var J=S._29I,Z=J.height,c=S._59I,r=S.getScrollBarSize(),t=J.width-r-2,I=Z*(-S.ty()/c),o=Z*(Z/c),T=n.style;c>Z?(vp>o&&(I=I+o/2-vp/2,0>I&&(I=0),I+vp>Z&&(I=Z-vp),o=vp),T.visibility=hl,T.background=S.getScrollBarColor(),T.borderRadius=r/2+Bk,kc(n,t,I,r,o)):T.visibility=dg}else n&&(n.style.visibility=dg)}},ms_hs:function(j){j._40o=function(){return this._29I.width<this._91I},j._42o=function(){var c=this;c._40o()&&(c._95O||(U(function(){c._94I()},vg),c.iv()),c._95O=new Date)},j._94I=function(){var d=this;if(d._95O){var _=new Date;_.getTime()-d._95O.getTime()>=vg?(delete d._95O,d.iv()):U(function(){d._94I()},vg)}},j._92I=function(){var j=this,b=j._28I;if(j._95O||!j._autoHideScrollBar){b||Bb(j._79O,b=j._28I=mp());var e=j._29I,d=e.width,L=j._91I,q=j.getScrollBarSize(),o=e.height-q-2,O=d*(-j.tx()/L),k=d*(d/L),N=b.style;L>d?(vp>k&&(O=O+k/2-vp/2,0>O&&(O=0),O+vp>d&&(O=d-vp),k=vp),N.visibility=hl,N.background=j.getScrollBarColor(),N.borderRadius=q/2+Bk,kc(b,O,o,k,q)):N.visibility=dg}else b&&(b.style.visibility=dg)}}}),mf(zh,gb(16,16,[{type:Xl,rect:[1,1,14,14],background:Ol},{type:Og,rect:[1,1,14,14],width:1,color:jm},{type:xi,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),mf(sq,gb(16,16,{type:Og,rect:[1,1,14,14],width:1,color:jm})),mf(Km,gb(16,16,[{type:Er,rect:[2,2,12,12],borderWidth:1,borderColor:jm,background:"#FFF"},{type:Er,rect:[4,4,8,8],background:Ol}])),mf(hj,gb(16,16,{type:Er,rect:[2,2,12,12],borderWidth:1,borderColor:jm})),Of._15Q=function(l){l._29I=He,l._59I=0,l._91I=0,l._5o=function(M){var Y=this;Y._30I=new ie,Y._rows=new ie,Y._rowMap={},Y._31I=0,Y._14I=0,Y._view=ak(1,Y),Y._canvas=_p(Y._view),Bb(Y._view,Y._79O=mp()),Y.dm(M?M:new ve)},l.getCheckIcon=function(q){var F=this.sm(),J=F.co(q);return F.sg()?tr(J?Km:hj):tr(J?zh:sq)},l.checkData=function(k){var N=this.sm(),m=N.co(k);N.sg()&&m||(this._32o=1,m?N.rs(k):N.as(k),delete this._32o)},l.getDataAt=function(U){U.target&&(U=this.lp(U));var k=q(U.y/this._rowHeight),s=this._rows;return 0>k||k>=s.size()?f:s.get(k)},l.onDataDoubleClicked=function(){},l.onDataClicked=function(){},l.adjustTranslateX=function(){return 0},l.adjustTranslateY=function(r){var f=this.getHeight()-this._59I;return f>r&&(r=f),r>0?0:W(r)},l.onPropertyChanged=function(d){var E=this,q=d.property;Vo[q]?E.ivm():wn[q]||E.redraw(),q===jj?E._42o():q===ud&&E._43o()},l.getLabel=function(p){return p.toLabel()},l.getLabelFont=function(){return this._labelFont},l.getLabelColor=function(Z){var x=this;if(x.isCheckMode()){if(x._focusData===Z)return x._labelSelectColor}else if(x.isSelected(Z))return x._labelSelectColor;return x._labelColor},l.getStartRowIndex=function(){return this._31I},l.getEndRowIndex=function(){return this._14I},l.getRowDatas=function(){return this._rows},l.getRowIndex=function(D){return this._rowMap[D._id]},l.getRowSize=function(){return this._rows.size()},l.getViewRect=function(){return to(this._29I)},l.isVisible=function(h){return this._visibleFunc?this._visibleFunc(h):!0},l.getCurrentSortFunc=function(){return this._sortFunc},l.setDataModel=function(x){var g=this,e=g._dataModel,O=g._selectionModel;e!==x&&(e&&(e.umm(g.handleDataModelChange,g),e.umd(g.handleDataPropertyChange,g),e.umh(g.handleHierarchyChange,g),O||e.sm().ums(g.handleSelectionChange,g)),g._dataModel=x,x.mm(g.handleDataModelChange,g),x.md(g.handleDataPropertyChange,g),x.mh(g.handleHierarchyChange,g),O?O._21I(x):x.sm().ms(g.handleSelectionChange,g),g.fp("dataModel",e,x))},l.validateModel=function(){var A=this;A._rows.clear(),A._rowMap={},A.buildChildren(A._dataModel._roots);var F=A._rows=A._rows.toList(A.isVisible,A),Y=0,k=A.getCurrentSortFunc(),w=F.size();for(k&&F.sort(k);w>Y;Y++)A._rowMap[F.get(Y)._id]=Y},l.buildChildren=function(F){var L=this;F.each(function(S){L._rows.add(S),L.buildChildren(S._children)})},l.handleDataModelChange=function(){this.ivm()},l.handleDataPropertyChange=function($){"parent"===$.property?this.ivm():this.invalidateData($.data)},l.handleHierarchyChange=function(){this.ivm()},l.handleSelectionChange=function(I){I.datas.each(this.invalidateData,this),this.onSelectionChanged(I)},l.onSelectionChanged=function(l){var Z=this,g=Z.sm();!Z.isAutoMakeVisible()||1!==g.size()||"set"!==l.kind&&"append"!==l.kind||Z._32o||Z.makeVisible(g.ld())},l.handleBackgroundClick=function(Z){fr(Z)&&!this.isCheckMode()&&this.sm().cs()},l.makeVisible=function(N){N&&(this._23I=N,this.iv())},l.scrollToIndex=function(H){var k=this,u=k._29I,I=u.height,o=k._rowHeight,r=o*H;H>=0&&H<k._rows.size()&&I>0&&(r+o>u.y+I?k.ty(-r+I-o):r<u.y&&k.ty(-r))},l.autoScroll=function(S,X){var m=this,y=m._rowHeight,Q=y,h=y/4,O=m._29I,v=m.lp(S),L={x:m.tx(),y:m.ty()};return y>0&&O&&(v.x-O.x<Q?m.translate(h,0):O.x+O.width-v.x<Q&&m.translate(-h,0),v.y-O.y<Q?m.translate(0,h):O.y+O.height-v.y<Q&&m.translate(0,-h)),L.x=m.tx()-L.x,L.y=m.ty()-L.y,X&&(X.x+=L.x,X.y+=L.y),L},l.getTopRowOrderSelection=function(){var J=this.sm().getTopSelection(),c={},f=new ie;return J.each(function(u){c[u._id]=u}),this._rows.each(function(E){c[E._id]&&f.add(E)}),f},l.getRowOrderSelection=function(){var F=new ie;return this._rows.each(function(a){this.isSelected(a)&&F.add(a)},this),F},l.ivm=function(){this.invalidateModel()},l.invalidateModel=function(){var i=this;i._96I||(i._96I=1,i._32I=1,delete i._24I),i.iv()},l.redraw=function(){var $=this;$._32I||($._32I=1,delete $._24I,$.iv())},l.invalidateData=function(W){var J=this;a?J.redraw():J._32I||(J._24I||(J._24I={}),J._24I[W._id]=W,J.iv())},l.getFocusData=function(){return this._focusData},l.setFocusDataById=function(f){this.setFocusData(this.dm().getDataById(f))},l.setFocusData=function(k){var x=this,O=x._focusData;O!==k&&(x._focusData=k,x.fp("focusData",O,k),O&&x.invalidateData(O),k&&(x.invalidateData(k),x.isAutoMakeVisible()&&x.makeVisible(k)))},l.drawRowBackground=function($,H,q,Z,z,n,b){var C=this,D=C.isCheckMode();(H===C._focusData&&D||q&&!D)&&Hj($,Z,z,n,b,C.getSelectBackground(H))},l.drawData=function(e,W,G){var m=this,U=m._rowHeight,C=U*G,Z=m._29I,O=Z.x,b=Z.width;e.save(),e.beginPath(),e.rect(O,C,b,U),e.clip(),m._87o(m.drawRow(e,W,m.isSelected(W),O,C,b,U),G,O,C,b,U),e.restore(),m._rowLineVisible&&Hj(e,O,C+U-1,b,1,m._rowLineColor)},l._12I=function(l){var r=this,P=r._31I,D=r._29I,U=D.x,d=D.y,h=D.width,g=D.height;for(l.beginPath(),l.rect(U,d,h,g),l.clip(),l.clearRect(U,d,h,g),r._76o(),r._93db(l);P<r._14I;P++)r.drawData(l,r._rows.get(P),P);r._92db(l)},l._13I=function(d){for(var v,k=this,c=k._rowHeight,i=k._29I,$=i.x,n=i.width,R=k._31I,_=k._30I;R<k._14I;R++)v=k._rows.get(R),k._24I[v._id]&&_.add({data:v,index:R});_.isEmpty()||(d.beginPath(),_.each(function(S){d.rect($,S.index*c,n,c)}),d.clip(),_.each(function(z){d.clearRect($,z.index*c,n,c)}),_.each(function(C){k._77o(C.index)}),k._93db(d),_.each(function(z){k.drawData(d,z.data,z.index)}),k._92db(d),_.clear())},l.validateImpl=function(){var K=this,E=K._canvas,Y=K.getWidth(),B=K.getHeight(),p=K._rowHeight,U=K._32I;(Y!==E.clientWidth||B!==E.clientHeight)&&(wj(E,Y,B),U=1);var e=v&&!g;K._96I&&!e&&K.validateModel();var _=K._29I,D={x:-K.tx(),y:-K.ty(),width:Y,height:B},b=K._rows.size(),A=pg(E),N=K._23I;U||Hk(D,_)||(U=1),K._29I=D,K._59I=b*p,K._31I=q(D.y/p),K._14I=j((D.y+D.height)/p),K._31I<0&&(K._31I=0),K._14I>b&&(K._14I=b),K._99I&&U&&K._99I(),eg(A,K.tx(),K.ty(),1),U?K._12I(A):K._24I&&K._13I(A),K._93I(),K._92I(),A.restore(),K._32I=K._24I=K._96I=f,N&&(K.scrollToIndex(K.getRowIndex(N)),delete K._23I),K.tx(K.tx()),K.ty(K.ty())}},Of._48o=function(V){V._rootVisible=!0,V._rootData=f,V._35o=function(){this._expandMap={},this._levelMap={}},V.validateModel=function(){var J=this,d=J._rootData;J._rows.clear(),J._levelMap={},J._rowMap={},J._currentLevel=0,d?J._rootVisible?J.isVisible(d)&&J.buildData(d):J.buildChildren(d):J.buildChildren(),delete J._currentLevel},V.buildData=function(q){var i=this,X=q._id,t=i._rows;i._rowMap[X]=t.size(),t.add(q),i._levelMap[X]=i._currentLevel,i.isExpanded(q)&&(i._currentLevel++,i.buildChildren(q),i._currentLevel--)},V.buildChildren=function(Z){var e=this,W=Z?Z._children:e._dataModel._roots,r=e.getCurrentSortFunc();r&&e.isChildrenSortable(Z)?W.toList(e.isVisible,e).sort(r).each(e.buildData,e):W.each(function(c){e.isVisible(c)&&e.buildData(c)})},V.getLevel=function(s){return this._levelMap[s._id]},V.getToggleIcon=function(h){var L=this,O=L._loader,b=L._collapseIcon;return O&&!O.isLoaded(h)?b:h.hasChildren()?L.isExpanded(h)?L._expandIcon:b:f},V.isCheckMode=function(){return this._checkMode!=f},V.isChildrenSortable=function(){return!0},V.handleDataModelChange=function(y){var S=this;y.kind===Tn?delete S._expandMap[y.data._id]:y.kind===wb&&(S._expandMap={}),S.ivm()},V.toggle=function(R){var w=this;w.isExpanded(R)?w.collapse(R):w.expand(R)},V.isExpanded=function(x){return 1===this._expandMap[x._id]},V.expand=function(l){var H=this,O=H._loader;H.isExpanded(l)||(O&&!O.isLoaded(l)&&O.load(l),H._expandMap[l._id]=1,H.ivm(),H.onExpanded(l))},V.onExpanded=function(){},V.collapse=function(k){var J=this;J.isExpanded(k)&&(delete J._expandMap[k._id],J.ivm(),J.onCollapsed(k))},V.onCollapsed=function(){},V.expandAll=function(){var b=this;b._dataModel.each(function(r){r.hasChildren()&&(b._expandMap[r._id]=1)}),b.ivm()},V.collapseAll=function(){this._expandMap={},this.ivm()},V.makeVisible=function(w){if(w){var D=this;if(!D._rootData||w.isDescendantOf(D._rootData)){for(var e=w._parent;e;)D.expand(e),e=e._parent;D._23I=w,D.iv()}}},V.checkData=function(M){var h,i=this,D=i._checkMode,a=i.sm(),E=a.co(M);if(!a.sg()||!E){if(i._32o=1,D===O)E?a.rs(M):a.as(M);else if(D===sk)h=new ie(M),h.addAll(M._children);else if("descendant"===D)h=new ie,cr(M,h);else if("all"===D&&(h=new ie,cr(M,h),!E))for(var H=M._parent;H;)h.add(H),H=H._parent;h&&(E?a.rs(h):a.as(h)),delete i._32o}},V._97I=function(N,H,z,m,w,x,X){var W=this,B=W._indent,a=W._levelMap[H._id],K=W.getIconWidth(H),s=tr(W.getToggleIcon(H));s?(m+=B*a,Zd(N,s,m+B/2,w+X/2,H,W),m+=B):m+=B*(a+1),W._checkMode&&(Zd(N,W.getCheckIcon(H),m+B/2,w+X/2,H,W),m+=B),W.drawIcon(N,H,m,w,K,X),W.drawLabel(N,H,m+K,w,X)}},Of._14Q=function(M){M.getIcon=function(G){return G.getIcon()},M.getIconWidth=function(D){return this.getIcon(D)?this._indent:0},M.drawIcon=function(i,l,n,J,g,F){if(g){var X=this,I=X.getBodyColor(l),q=tr(X.getIcon(l),I);q&&(F-=X.isRowLineVisible()?1:0,Rm(i,q,Ur,n,J,g,F,l,X,I),qj(i,X.getBorderColor(l),n,J,g,F))}},M.drawLabel=function(U,M,Q,P,$){var k=this;Gh(U,k.getLabel(M),k.getLabelFont(M),k.getLabelColor(M),Q,P,0,$)}},Of._50o=function(l){l._98I=function(){var R=this,I=R._39o=new ve;R._60I=new ie,I.mm(R._17o,R),I.md(R._18o,R),I.mh(R._19o,R)},l.setColumns=function(v){this._39o.clear(),this.addColumns(v)},l.addColumns=function(Z){var U=this._39o;Z.forEach(function(B){if(!(B instanceof Fb)){var H=Si(B.className);B=Lr(H?H:Fb,B)}U.add(B)})},l.onColumnClicked=function(){},l.onCheckColumnClicked=function(){},l._3Q=function(L){for(var z,b=0,p=this._60I,$=p.size();$>b;b++)if(z=p.get(b),z.column===L)return z;return f},l.getColumnAt=function(X){var R=this._4Q(X);return R?R.column:f},l._4Q=function(b){for(var E=this,C=b.target?E.lp(b).x:b.x,N=E._60I,T=0;T<N.size();T++){var R=N.get(T),d=R.startX;if(C>=d&&C<d+R.column.getWidth())return R}return f},l.getToolTip=function(V){var Q=this,h=Q.getDataAt(V),s=Q.getColumnAt(V);return h&&s?s.getToolTip(h,Q):f},l.adjustTranslateX=function(P){var R=this.getWidth()-this._91I;return R>P&&(P=R),P>0?0:W(P)},l._99I=function(){var c=this,k=c._29I,_=c._60I;_.clear(),c._91I=0,c._39o._roots.each(function(m){if(m.isVisible()){var V=c._91I+m.getWidth();c._91I<=k.x+k.width&&V>=k.x&&_.add({column:m,startX:c._91I}),c._91I=V}})},l.drawData=function(L,E,c){var P=this,g=P._rowHeight,X=g*c,D=P.isSelected(E),J=P._29I,j=J.x,i=J.width;P.drawRowBackground(L,E,D,j,X,i,g),P._60I.each(function(i){var M=i.column,F=i.startX,Y=M.getWidth();Y>0&&!P.isEditing(E,M)&&(L.save(),L.beginPath(),L.rect(F,X,Y,g),L.clip(),P._87o(P.drawCell(L,E,D,M,F,X,Y,g),c,F,X,Y,g),P._columnLineVisible&&Hj(L,F+Y-1,X,1,g,P._columnLineColor),L.restore())}),P._rowLineVisible&&Hj(L,j,X+g-1,i,1,P._rowLineColor)},l.drawCell=function(F,j,v,c,L,A,U,X){var l=this;if(c.drawCell)return c.drawCell(F,j,v,c,L,A,U,X,l);var W=l.getValue(j,c);Oc(F,W,c,l.getLabelFont(j,c,W),l.getLabelColor(j,c,W),L,A,U,X,j,l)},l.getColumnModel=function(){return this._39o},l._17o=function(){this.redraw()},l._18o=function(m){var v=this;m.data===v._sortColumn&&ck[m.property]?v.ivm():(v._42o(),v.redraw())},l._19o=function(){this.redraw()},l.getCurrentSortFunc=function(){var r=this,Y=r._sortColumn;if(Y&&Y.isSortable()){var g=Y.getSortFunc(),C=pq===Y.getSortOrder()?1:-1;return g||(g=th),function(H,S){return g.call(r,r.getValue(H,Y),r.getValue(S,Y),H,S)*C}}return r._sortFunc},l.isCellEditable=function(y,H){return H.isEditable()&&this.isEditable()
},l._37O=function(X,H){if(fr(H))for(var D=this,w=D.lp(H),G=D._60I,J=D._rowHeight,u=D._29I,p=u.x,Q=u.y,$=u.width,I=u.height,h=0;h<G.size();h++){var M=G.get(h),b=M.startX,d=M.column,o=d.getWidth();if(d!==D._31o&&d!==D._4o&&D.isCellEditable(X,d,H)&&w.x>=b&&w.x<b+o){var g={x:b,y:D.getRowIndex(X)*J,width:o,height:J},L={x:g.x+D.tx(),y:g.y+D.ty(),width:g.width,height:g.height},x=0,R=0;return g.x<p?x=g.x-p:g.x+g.width>p+$&&(x=g.x+g.width-p-$),x&&(D.tx(D.tx()-x),L.x-=x),g.y<Q?R=g.y-Q:g.y+J>Q+I&&(R=g.y+J-Q-I),R&&(D.ty(D.ty()-R),L.y-=R),D.beginEditing({data:X,column:d,value:D.getValue(X,d),event:H,rect:g,editorRect:L,view:D}),void 0}}}},Qp.BaseItemEditor=function(M,v,f,S){this._data=M,this._column=v,this._master=f,this._editInfo=S},Db("BaseItemEditor",L,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var ym=A.Tab=function(){Ec(ym,this)};ag("Tab",zo,{ms_ac:["view","closable","disabled"],_icon:f,_closable:!1,_disabled:!1,setParent:ro});var Fb=A.Column=function(){Ec(Fb,this)};ag("Column",zo,{_46o:1,ms_ac:["accessType","valueType",hl,Od,Xf,vd,"align",qe,"sortOrder",tj,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:pq,_sortFunc:f,_sortable:!0,_clickable:!0,setWidth:function(J){16>J&&(J=16);var g=this._width;this._width=J,this.fp(vd,g,J)},getToolTip:function(M,d){return this.formatValue(d.getValue(M,this))}});var uf=A.Property=function(){Ec(uf,this)};ag("Property",zo,{_46o:1,ms_ac:["accessType","valueType",Od,Xf,"categoryName",qe,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:f,getToolTip:function(U,F,a){var v=this;return F?v.formatValue(a.getValue(U,v)):a.getPropertyName(v)}}),Qp.AccordionView=function(){var x=this;x._20o={},x._21o=new ie,x._10o=f,x._9o=f,x._11o=f,x._view=ak(0,x),x.iv()},Db("AccordionView",L,{ms_v:1,ms_fire:1,ms_ac:[Vq,mg,"titleHeight",fj,ig,"titleBackground","selectWidth",Af,"orientation","separatorColor"],_expandIcon:y.accordionViewExpandIcon,_collapseIcon:y.accordionViewCollapseIcon,_titleHeight:Tj,_labelColor:y.accordionViewLabelColor,_labelFont:y.accordionViewLabelFont,_titleBackground:y.accordionViewTitleBackground,_selectBackground:y.accordionViewSelectBackground,_selectWidth:y.accordionViewSelectWidth,_orientation:"v",_separatorColor:y.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(Q,w,m,D){var q=this,E=mp();if(q._20o[Q])throw Q+" already exists";E.onmousedown=Wf,E.style.cursor=zp,E.addEventListener(Z?Bg:Wb,function(L){Wf(L)},!1),E.addEventListener(Z?Cs:wr,function(K){Wf(K),fr(K)&&(q._10o===Q?q.collapse():q.expand(Q))},!1),Bb(q._view,E),q._20o[Q]={content:w,div:E,canvas:_p(E),icon:D},q._21o.add(Q),m&&q.expand(Q),q.iv()},remove:function(x){var R=this,$=R._20o[x];$&&(vo($.div),delete R._20o[x],R._21o.remove(x),R.iv())},clear:function(){var b=this;b._20o={},b._21o.clear(),b.iv()},isExpanded:function(V){return this._10o===V},expand:function(y){var h=this;h._20o[y]&&h._10o!==y&&(h._10o=y,h.onExpanded(y),h.iv())},onExpanded:function(){},collapse:function(){var Q=this;Q._10o&&(Q.onCollapsed(Q._10o),delete Q._10o,Q.iv())},onCollapsed:function(){},initCanvas:function(E,p,W){wj(E,p,W);var M=pg(E);return eg(M,0,0,1),M.clearRect(0,0,p,W),M},drawTitle:function(D,h,o,q,I){var S=this,b=tr(I.icon),B=S.isExpanded(h),k=S._titleHeight,e=S._titleBackground,A=S._selectWidth,U=S._separatorColor,J=tr(B?S._expandIcon:S._collapseIcon),s=A+4;Hj(D,0,0,o,q,e),B&&A&&Hj(D,0,0,A,q,S._selectBackground),(B||S._21o.get(S._21o.size()-1)!==h)&&Hj(D,0,q-1,o,1,U?U:Dc(e)),b&&(Zd(D,b,s+Me(b)/2,k/2),s+=Me(b)+2),Gh(D,h,S.getLabelFont(h),S.getLabelColor(h),s,0,0,k),J&&Zd(D,J,o-Me(J)/2-4,k/2)},validateImpl:function(){var U=this,I=U._view,F=0,H=0,b=U.getWidth(),L=U.getHeight(),T=U._titleHeight,l=U._21o.size()*T,s=U._11o,r=U._9o;delete U._11o,delete U._9o,U._21o.each(function(W){var a,r,S=U._20o[W],f=S.content,h=U._10o===W;Cl(U)?(kc(S.div,F,0,T,L),a=U.initCanvas(S.canvas,T,L),uc(a,0,L),Kh(a,-N),U.drawTitle(a,W,L,T,S),a.restore(),h?(r=i(0,b-l),f&&(U._11o=f,U._9o=Ln(f),kc(f,F+T,0,r,L)),F+=T+r):F+=T):(kc(S.div,0,H,b,T),a=U.initCanvas(S.canvas,b,T),U.drawTitle(a,W,b,T,S),a.restore(),h?(r=i(0,L-l),f&&(U._11o=f,U._9o=Ln(f),kc(f,0,H+T,b,r)),H+=T+r):H+=T)});var Y=U._9o;s&&s!==U._11o&&s.endEditing&&s.endEditing(),Y&&Y!==r&&Bb(I,Y),r&&r!==Y&&vo(r)}}),Qp.SplitView=function(Z,R,g,M){var $=this,O=$._dividerDiv=mp(),p=$._60O=_p(),Y=$._61O=_p(),S=p.style,m=Y.style;$._view=ak(1,$),Bb($._view,O),S.msTouchAction=Yr,S.pointerEvents=Yr,S.cursor=zp,m.msTouchAction=Yr,m.pointerEvents=Yr,m.cursor=zp,Z&&$.setLeftView(Z),R&&$.setRightView(R),g&&$.setOrientation(g),M!=f&&$.setPosition(M),$.setStatus(hs),new xg($)},Db("SplitView",L,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:y.splitViewDividerSize,_dividerBackground:y.splitViewDividerBackground,_dragOpacity:y.splitViewDragOpacity,_toggleIcon:y.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(o,D){var R=this,G=R._position;isNaN(o)||(D||(R._82O=0>o?-1:o>1?1:0),R._position=o,R.fp(Wj,G,o))},getLeftView:function(){return this._leftView},setLeftView:function(x){var D=this,e=D._leftView,r=D._view;if(D._leftView!==x){if(e&&e!==D._rightView){var M=Ln(e);M.parentNode===r&&vo(M)}if(D._leftView=x,x){var F=Ln(x);F.parentNode!==r&&r.insertBefore(F,D._dividerDiv)}D.fp("leftView",e,x)}},getRightView:function(){return this._rightView},setRightView:function(e){var B=this,H=B._rightView,o=B._view;if(B._rightView!==e){if(H&&H!==B._leftView){var f=Ln(H);f.parentNode===o&&vo(f)}if(B._rightView=e,e){var y=Ln(e);y.parentNode!==o&&o.insertBefore(y,B._dividerDiv)}B.fp("rightView",H,e)}},validateImpl:function(){var a=this,M=a._draggable,g=a._position,w=a.getWidth(),q=a.getHeight(),T=a._dividerSize,p=a._dividerBackground,l=Z?18:8,Y=a._dividerDiv,u=a._82O,d=a._60O,n=a._61O,X=a._toggleIcon,V=a._status,$=Y.style,F=null,P=Z?20:4,e=X.comps[0];T>=l||0===T?a._coverDiv&&(vo(a._coverDiv),delete a._coverDiv):a._coverDiv||(a._coverDiv=mp(),C&&(a._coverDiv.style.background=wh),Bb(Y,a._coverDiv)),a._togglable?d.parentNode||(Bb(Y,d),Bb(Y,n)):(vo(d),vo(n));var U=a._coverDiv,o=a._leftView,Q=a._rightView;if(Cl(a)){if(T>w&&(T=w),V===hs)if(1===u)var k=K(g,w),I=i(0,w-T-k);else-1===u?(I=K(-g,w),k=i(0,w-T-I)):(k=W((w-T)*g),I=i(0,w-T-k));else"cl"===V?(k=0,I=i(0,w-T)):"cr"===V&&(I=0,k=i(0,w-T));o&&kc(o,0,0,k,q),Q&&kc(Q,k+T,0,I,q),kc(Y,k,0,T,q),a._22o=k,U&&(kc(U,T/2-l/2,0,l,q),U.style.cursor=M?Kq:""),Y.style.cursor=M?Kq:"";var c=Y.clientHeight/2,H=Y.clientWidth;wj(d,H,H),kc(d,0,c-H-P,H,H),F=pg(d),eg(F,0,0,1),e.rotation=-N,Bl(F,X,0,0,H,H),F.restore(),wj(n,H,H),kc(n,0,c+P,H,H),F=pg(n),eg(F,0,0,1),e.rotation=N,Bl(F,X,0,0,H,H),F.restore()}else{if(T>q&&(T=q),V===hs)if(1===u)var m=K(g,q),L=i(0,q-T-m);else-1===u?(L=K(-g,q),m=i(0,q-T-L)):(m=W((q-T)*g),L=i(0,q-T-m));else"cl"===V?(m=0,L=i(0,q-T)):"cr"===V&&(L=0,m=i(0,q-T));o&&kc(o,0,0,w,m),Q&&kc(Q,0,m+T,w,L),kc(Y,0,m,w,T),a._22o=m,U&&(kc(U,0,T/2-l/2,w,l),U.style.cursor=M?Yl:""),$.cursor=M?Yl:"";var O=Y.clientWidth/2,H=Y.clientHeight;wj(d,H,H),kc(d,O-H-P,0,H,H),F=pg(d),eg(F,0,0,1),e.rotation=0,Bl(F,X,0,0,H,H),F.restore(),wj(n,H,H),kc(n,O+P,0,H,H),F=pg(n),eg(F,0,0,1),e.rotation=h,Bl(F,X,0,0,H,H),F.restore()}$.background=p}});var xg=function(q){this.sv=q,this.addListeners()};zs(xg,L,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function($){var o=this,L=o.sv,Y=L._dividerDiv,M=L._60O,G=L._61O,p=L._status,l=$.target;if(l===M)p===hs?L.setStatus("cl"):"cr"===p&&L.setStatus(hs);else if(l===G)p===hs?L.setStatus("cr"):"cl"===p&&L.setStatus(hs);else if(Pi($)&&(l===Y||l===L._coverDiv)&&(Wf($),L.isDraggable())){L.getLeftView(),L.getRightView();var Q=o.maskDiv=mp();if(Q.style.left=0,Q.style.top=0,Q.style.width=L.getWidth()+"px",Q.style.height=L.getHeight()+"px",L.getView().appendChild(Q),!L.isContinuousLayout()){var D=o.resizeDiv=mp();D.style.left=Y.style.left,D.style.top=Y.style.top,D.style.width=Y.style.width,D.style.height=Y.style.height,D.style.opacity=L.getDragOpacity(),D.style.background=L.getDividerBackground(),Bb(o.getView(),D)}o._lastAbsPosition=L._22o,o._86o=Cl(L)?ss($).x:ss($).y,Td(o,$)}},handleWindowTouchMove:function(t){Pi(t)&&this.update(t,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(I){var K=this;K.update(I,!0),K.sv.setStatus(hs),K.maskDiv&&vo(K.maskDiv),K.resizeDiv&&vo(K.resizeDiv),K.maskDiv=K.resizeDiv=f},handle_mousedown:function(N){fr(N)&&this.handle_touchstart(N)},handleWindowMouseMove:function(z){this.handleWindowTouchMove(z)},handleWindowMouseUp:function(q){this.handleWindowTouchEnd(q)},update:function(r,d){var m=this,P=m.sv,u=Cl(P)?P.getWidth():P.getHeight(),p=P._dividerSize,H=m._lastAbsPosition-m._86o;Cl(P)?(H+=ss(r).x,H>u-p&&(H=u-p),0>H&&(H=0),m.resizeDiv&&(m.resizeDiv.style.left=H+Bk)):(H+=ss(r).y,H>u-p&&(H=u-p),0>H&&(H=0),m.resizeDiv&&(m.resizeDiv.style.top=H+Bk)),d&&u!==p&&(1===P._82O?P.setPosition(H,1):-1===P._82O?P.setPosition(H-u+p,1):P.setPosition(H/(u-p),1))}}),Qp.TabView=function(){var S=this,G=S._view=ak(1,S),N=S._91O=mp(1),j=S._tabModel=new ve,r=j.sm(),x=S.invalidate;S._7o=new ie,S._canvas=_p(N),Bb(G,N),Bb(G,S._92O=mp(1)),r.setSelectionMode(dl),r.ms(x,S),j.mm(x,S),j.md(x,S),j.mh(x,S),new Dr(S),S.iv()},Db("TabView",L,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",fj,ig,"tabBackground","selectWidth",Af,"moveBackground","insertColor"],_tabPosition:Yo,_tabHeight:Tj,_tabGap:y.tabViewTabGap,_labelColor:y.tabViewLabelColor,_labelFont:y.tabViewLabelFont,_tabBackground:y.tabViewTabBackground,_selectWidth:y.tabViewSelectWidth,_selectBackground:y.tabViewSelectBackground,_moveBackground:y.tabViewMoveBackground,_insertColor:y.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(j,l,W){var N=new ym,s=this._tabModel;return N.setName(j),N.setView(l),s.add(N),W&&s.sm().ss(N),N},getLabel:function(X){return X.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(t){this._23o=t,this.iv()},get:function(e){var q=this,l=q._tabModel;if(jf(e))return l._roots.get(e);if(_o(e)){var W;return l.each(function(U){e===q.getLabel(U)&&(W=U)}),W}return e instanceof ym?e:f},select:function(J){this._tabModel.sm().ss(this.get(J))},remove:function(V){var G=this;if(V=G.get(V)){var W=G._tabModel,y=W._roots.indexOf(V);G._tabModel.remove(V),G._12Q(--y)}},getCurrentTab:function(){return this._8o},hideTabView:function(c,F){F.parentNode===this._92O&&(Ep(F)?(F.style.display=Fp,F._tab_=c):vo(F),Qq())},showTabView:function(K,e){Ep(e)&&(e.style.display="block",e._tab_=K),e.parentNode!==this._92O&&(Bb(this._92O,e),Qq())},_24o:function(){var d,T=this,_=T._8o,v=T._9o,I=T._tabModel.sm().ld();I&&(d=Ln(I.getView())),d!==v&&(v&&(_.getView()&&_.getView().endEditing&&_.getView().endEditing(),T.hideTabView(_,v)),d&&T.showTabView(I,d)),T._8o=I,T._9o=d,_!==I&&T.onTabChanged(_,I)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(M,H){this._12Q(--H)},_12Q:function(Y){var B=this,m=B._tabModel,W=m.size();if(W&&!m.sm().ld()){Y==f&&(Y=0),Y>=W&&(Y=W-1),0>Y&&(Y=0);for(var G=Y;G>=0;G--){var D=B.get(G);if(!D.isDisabled())return B.select(D),D}for(G=Y+1;W>G;G++)if(D=B.get(G),!D.isDisabled())return B.select(D),D}},_9Q:function($){var u=4,w=tr($.getIcon());w&&(u+=Me(w,$)+4);var z=this.getLabel($);return z&&(u+=tk(this.getLabelFont($),z).width+4),$.isClosable()&&(u+=10),u},drawTab:function(C,r,X,e,m,M,l){var V,D=this,x=D._tabPosition,f=X+4,A=D._selectWidth,w=tr(r.getIcon()),R=r.isDisabled(),O=D.getLabelColor(r),t=D.getLabelFont(r),W=D.getLabel(r),o=D._selectBackground,F=x===Pc+"-vertical",u=x===Lc+"-vertical";(F||u)&&(f=e+4),R&&(C.globalAlpha=Gq),Hj(C,X,e,m,M,l),r===D._8o&&A&&(x===Yo?Hj(C,X,e+M-A,m,A,o):x===Pc?Hj(C,X+m-A,e,A,M,o):x===Lc?Hj(C,X,e,A,M,o):F?Hj(C,X+m-A,e,A,M,o):u?Hj(C,X,e,A,M,o):Hj(C,X,e,m,A,o));var P=m/2;if(F&&(uc(C,P,e+M/2),Kh(C,h),uc(C,-P,-e-M/2)),w){var J=zr(w,r),s=Me(w,r);if(F||u){var T=X+m/2,q=f+J/2;uc(C,T,q),Kh(C,N),uc(C,-T,-q),Zd(C,w,X+m/2,f+J/2,r,D),uc(C,T,q),Kh(C,-N),uc(C,-T,-q),f+=J+4}else Zd(C,w,f+s/2,e+M/2,r,D),f+=s+4}return F||u?(uc(C,m/2,f+m/2),Kh(C,N),uc(C,-m/2,-f-m/2),Gh(C,W,t,O,X,f,M,m),uc(C,m/2,f+m/2),Kh(C,-N),uc(C,-m/2,-f-m/2)):Gh(C,W,t,O,f,e,m,M),F&&(uc(C,P,e+M/2),Kh(C,-h),uc(C,-P,-e-M/2)),r.isClosable()&&(V=u?{x:X+m-12,y:e+M-12,width:12,height:12}:{x:X+m-12,y:e+2,width:12,height:12},this.drawCloseIcon(r,C,O,V)),R&&(C.globalAlpha=1),V},drawCloseIcon:function(G,u,Q,B){var z=B.x,y=B.y;u.strokeStyle=Q,u.lineWidth=1,u.beginPath(),u.moveTo(z+2,y+8),u.lineTo(z+8,y+2),u.moveTo(z+8,y+8),u.lineTo(z+2,y+2),u.stroke()},validateImpl:function(){var r=this;r._24o();var G,D=r._canvas,w=r._tabPosition,v=r._91O,W=r._92O,M=r._tabModel,T=r.getWidth(),O=r.getHeight(),y=r._tabHeight,s=r._7o,f=r._tabGap,u=w===Yo,c=w===Pc,Y=w===Lc,p=w===Pc+"-vertical",E=w===Lc+"-vertical",L=r._23o,l=0;if((c||Y)&&M._roots.each(function(B){l=i(r._9Q(B),l)}),u?(kc(v,0,0,T,y),G={x:0,y:y,width:T,height:i(0,O-y)}):c?(kc(v,0,0,l,O),G={x:l,y:0,width:i(0,T-l),height:O}):Y?(kc(v,T-l,0,l,O),G={x:0,y:0,width:i(0,T-l),height:O}):p?(kc(v,0,0,y,O),G={x:y,y:0,width:i(0,T-y),height:O}):E?(kc(v,T-y,0,y,O),G={x:0,y:0,width:i(0,T-y),height:O}):(kc(v,0,O-y,T,y),G={x:0,y:0,width:T,height:i(0,O-y)}),kc(W,G),p||E){r._9o&&(G.x=0,kc(r._8o.getView(),G)),wj(D,y,O);var H=pg(D),J=0;if(eg(H,0,r.ty(),1),H.clearRect(0,0,y,O),s.clear(),M._roots.each(function(T){var d,W=r._9Q(T);L&&L.tab===T||(d=r.drawTab(H,T,0,J,y,W,r._tabBackground)),s.add({_75o:d,tab:T,startY:J,endY:J+W,height:W}),J+=W+f}),r._23Q=i(0,J-f),L){var o=L.position;r.drawTab(H,L.tab,0,L.startY,y,L.height,r._moveBackground),Hj(H,0,o,y,1,r._insertColor)}H.restore(),r.ty(r.ty())}else if(c||Y){r._9o&&(G.x=0,kc(r._8o.getView(),G)),wj(D,l,O);var H=pg(D),J=0;if(eg(H,0,r.ty(),1),H.clearRect(0,0,l,O),s.clear(),M._roots.each(function(c){var o;L&&L.tab===c||(o=r.drawTab(H,c,0,J,l,y,r._tabBackground)),s.add({_75o:o,tab:c,startY:J,endY:J+y,height:y}),J+=y+f}),r._23Q=i(0,J-f),L){var o=L.position;r.drawTab(H,L.tab,0,L.startY,l,L.height,r._moveBackground),Hj(H,0,o,l,1,r._insertColor)}H.restore(),r.ty(r.ty())}else{r._9o&&(G.y=0,kc(r._8o.getView(),G)),wj(D,T,y);var H=pg(D),n=0;if(eg(H,r.tx(),0,1),H.clearRect(0,0,T,y),s.clear(),M._roots.each(function(T){var M,x=r._9Q(T);L&&L.tab===T||(M=r.drawTab(H,T,n,0,x,y,r._tabBackground)),s.add({_75o:M,tab:T,startX:n,endX:n+x,width:x}),n+=x+f}),r._64I=i(0,n-f),L){var o=L.position;r.drawTab(H,L.tab,L.startX,0,L.width,y,r._moveBackground),ni(H,r._insertColor,o,0,y)}H.restore(),r.tx(r.tx())}for(var g=[],N=W.children,z=0;z<N.length;z++){var e=N[z],h=e._tab_;h&&!M.contains(h)&&g.push(e)}g.forEach(function(c){W.removeChild(c)})}});var Dr=function(g){this.tv=g,this.addListeners()};zs(Dr,L,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(x){this.handleScroll(x,10*(x.wheelDelta/40))},handle_DOMMouseScroll:function(u){this.handleScroll(u,10*-u.detail)},handleScroll:function(R,F){Wf(R);var M=this.tv,b=M._tabPosition;!M._40o()||b!==Yo&&b!==Ro||M.tx(this.tv.tx()+F),!M._41o()||b!==Pc&&b!==Lc&&b!==Pc+"-vertical"&&b!==Lc+"-vertical"||M.ty(this.tv.ty()+F)},_8Q:function(g){var Z,r,$=this.tv,K=$._tabPosition,o=$._7o;if(K===Yo||K===Ro){var a=$.lp(g).x;for(Z=0;Z<o.size();Z++)if(r=o.get(Z),r.startX<=a&&a<=r.endX)return r}else if(K===Pc||K===Lc||K===Pc+"-vertical"||K===Lc+"-vertical"){var U=$.lp(g).y;for(Z=0;Z<o.size();Z++)if(r=o.get(Z),r.startY<=U&&U<=r.endY)return r}return f},isClickable:function(n){var w=this.tv,H=w._tabPosition,A=this._73o=this._8Q(n);return!w._40o()||H!==Yo&&H!==Ro?!w._41o()||H!==Pc&&H!==Lc&&H!==Pc+"-vertical"&&H!==Lc+"-vertical"?A&&(!A.tab.isDisabled()||w.isMovable()):!0:!0},handle_mousemove:function(T){var c=this;Pk?c._74o=c._8Q(T):c.getView().style.cursor=c.isClickable(T)?zp:""},handle_mousedown:function(g){this.handle_mousemove(g),this.handle_touchstart(g)},handle_touchstart:function(U){var e=this,d=e.tv,K=d._tabPosition;Wf(U),e.isClickable(U)&&(K===Yo||K===Ro?(e.x=ss(U).x,e.lp=d.lp(U),e.tx=d.tx()):(e.y=ss(U).y,e.lp=d.lp(U),e.ty=d.ty()),Td(e,U))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(k){var t,O=this,r=O.tv,p=r._tabPosition,x=O._73o;if(p===Yo||p===Ro){if(t=ss(k).x-O.x,!O._25o&&!O.moving&&u(t)>2&&(r._40o()&&!xl(k)?O._25o=1:x&&r.isMovable()&&(O.moving=1)),O._25o)r.tx(O.tx+t);else if(O.moving){var R=O.lp.x+t,S=r._tabGap/2;r._7o.each(function(W){var M=W.endX,y=R-W.startX<M-R;R>=W.startX&&M>=R&&r._7Q({tab:x.tab,startX:x.startX+t,width:x.width,front:y,insertTab:W.tab,position:y?i(0,W.startX-S):K(r._64I,M+S)})})}}else if(t=ss(k).y-O.y,!O._25o&&!O.moving&&u(t)>2&&(r._41o()&&!xl(k)?O._25o=1:x&&r.isMovable()&&(O.moving=1)),O._25o)r.ty(O.ty+t);else if(O.moving){var I=O.lp.y+t,S=r._tabGap/2;r._7o.each(function(v){var q=v.endY,L=I-v.startY<q-I;I>=v.startY&&q>=I&&r._7Q({tab:x.tab,startY:x.startY+t,height:x.height,front:L,insertTab:v.tab,position:L?i(0,v.startY-S):K(r._23Q,q+S)})})}},handleWindowMouseUp:function(z){this.handleWindowTouchEnd(z)},handleWindowTouchEnd:function(){var c=this,B=c.tv,U=B._tabPosition,F=B.getTabModel(),V=F._roots,o=c._73o;if(c.moving){var j=B._23o;if(j&&j.insertTab!==j.tab){var W=j.tab,q=V.remove(W),h=V.indexOf(j.insertTab);h>=0&&(j.front||h++,h<=V.size()&&(V.add(W,h),F._38I(W,q,h)))}B._7Q(f),delete c.moving}else if(!c._25o&&o){W=o.tab;var l=c._74o;if(!l||l.tab===W)if(!W.isDisabled()&&Dh(o._75o,c.lp)){var Q=function(){var x=V.indexOf(W);F.remove(W),B.onTabClosed(W,x)};B.onTabClosing(W,Q)&&Q()}else W.isDisabled()||B._8o===W||F.sm().ss(W)}c._25o=c._73o=c._74o=U===Yo||U===Ro?c.x=c.lp=c.tx=f:c.y=c.lp=c.ty=f}}),Qp.PropertyView=function(x){var Q=this;Q._view=ak(1,Q),Q._canvas=_p(Q._view),Bb(Q._view,Q._79O=mp()),Q._rows=new ie,Q._28o=new ie,Q._26o={},Q._26Q={};var p=Q._propertyModel=new ve,d=Q.ivm;p.mm(d,Q),p.md(d,Q),p.mh(d,Q),Q.dm(x?x:new ve),new yd(Q)},Db("PropertyView",L,{ms_ac:[fj,Rb,ig,Od,Xf,"categorizable",jk,tj,gi,Vq,mg,bo,nq,xo,"selectRowIndex",Af,"background",Wn,tc,Oj,_d,Vf],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:He,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:dk,_background:y.propertyViewBackground,_expandIcon:y.propertyViewExpandIcon,_collapseIcon:y.propertyViewCollapseIcon,_scrollBarColor:nn,_scrollBarSize:Yp,_autoHideScrollBar:pf,_selectBackground:y.propertyViewSelectBackground,_rowHeight:Di,_rowLineVisible:y.propertyViewRowLineVisible,_rowLineColor:y.propertyViewRowLineColor,_10I:.5,_columnLineVisible:y.propertyViewColumnLineVisible,_columnLineColor:y.propertyViewColumnLineColor,_labelColor:y.propertyViewLabelColor,_labelSelectColor:y.propertyViewLabelSelectColor,_labelFont:y.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(R){0>R&&(R=0),R>1&&(R=1);var f=this,N=f._10I;f._10I=R,f.fp("columnPosition",N,R)},getPropertyName:function(D){return D.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(w,B,I){return I===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(L,E){return E===this._selectRowIndex?this._labelSelectColor:L.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(d){var i=this.getHeight()-this._59I;return i>d&&(d=i),d>0?0:W(d)},isExpanded:function(w){if(!w)return!0;var C=this._26o[w];return C?C.isExpanded:!(this._26Q[w]===!1)},toggle:function(L){var T=this;T.isExpanded(L)?T.collapse(L):T.expand(L)},expandAll:function(){this.validate();for(var X in this._26o)this.expand(X)},expand:function(v){if(v&&v!==Fp){var R=this,u=R._26o[v];u&&!u.isExpanded&&(u.isExpanded=!0,R.onExpanded(v),R.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var c in this._26o)this.collapse(c)},collapse:function(K){if(K&&K!==Fp){var X=this,x=X._26o[K];x&&x.isExpanded&&(x.isExpanded=!1,X.onCollapsed(K),X.ivm())}},onCollapsed:function(){},getCategoryName:function(e){if(!this.isCategorizable())return Fp;var c=e.getCategoryName();return c?c:Fp},getPropertyModel:function(){return this._propertyModel},setDataModel:function(b){var G=this,o=G._dataModel;o!==b&&(o&&(o.umd(G.handlePropertyChange,G),G._selectionModel||o.sm().ums(G.ivm,G)),G._dataModel=b,b.md(G.handlePropertyChange,G),G._selectionModel?G._selectionModel._21I(b):b.sm().ms(G.ivm,G),G.fp(Wc,o,b))},isVisible:function(P){return this._visibleFunc?this._visibleFunc(P):!0},onPropertyChanged:function(x){var b=this,r=x.property;sn[r]?b.ivm():b.iv(),r===ud&&b._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:xc},handlePropertyChange:function(J){this._27o===J.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var T=this;T._96I||(T.setSelectRowIndex(-1),T._96I=1,T.iv())},redraw:function(){this.iv()},validateModel:function(){var b=this,v=b._rows,c=b._28o,x={},z=new ie,$=b._27o;b.updateCurrentData(),$!==b._27o&&b.endEditing(),v.clear(),c.clear(),b.getRawProperties().each(function(V){if(b.isVisible(V)){z.add(V);var P=b.getCategoryName(V);x[P]||(c.add(P,P===Fp?0:t),x[P]={isExpanded:b.isExpanded(P),properties:new ie})}}),b._sortFunc&&z.sort(b._sortFunc);for(var O in b._26o)b._26Q[O]=b.isExpanded(O);b._26o=x,c.each(function(e){e!==Fp&&v.add(e);var U=x[e];U.isExpanded&&z.each(function(C){b.getCategoryName(C)===e&&(U.properties.add(C),v.add({property:C,data:b._27o}))},b)})},validateImpl:function(){var x=this;x._76o(),x._96I&&(x.validateModel(),delete x._96I);var w=x._canvas,g=x.getWidth(),N=x.getHeight(),H=-x.ty(),C=x._rowHeight,Y=x._indent,W=g-Y,A=x._rows,i=A.size(),J=x._9I=Y+W*x._10I,L=x._59I=i*C;wj(w,g,N),x._29I={x:0,y:H,width:g,height:N},x._31I=q(H/C),x._14I=j((H+N)/C),x._31I<0&&(x._31I=0),x._14I>i&&(x._14I=i);var V,M=pg(w),v=x._background;eg(M,0,-H,1),M.beginPath(),M.rect(0,H,g,N),M.clip(),M.clearRect(0,H,g,N),x._93db(M),v&&Hj(M,0,0,Y,L,v);for(var s=x._31I;s<x._14I;s++){var c=A.get(s),H=C*s;if(_o(c))v&&Hj(M,Y,H,W,C,v),V=tr(x.isExpanded(c)?x._expandIcon:x._collapseIcon),V&&Rm(M,V,Ur,0,H,Y,C),M.save(),M.beginPath(),M.rect(Y,H,W,C),M.clip(),x.drawCategoryName(M,c,s,Y,H,W,C),M.restore();else{var I=c.property,m=c.data,V=tr(I.getIcon()),R=x._selectRowIndex===s?x.getSelectBackground():f;if(V&&Rm(M,V,Ur,0,H,Y,C),R&&Hj(M,Y,H,W,C,R),M.save(),M.beginPath(),M.rect(Y,H,J-Y,C),M.clip(),x.drawPropertyName(M,I,s,Y,H,J-Y,C),M.restore(),!x.isEditing(m,I)){var O=J+1,d=g-J-1;M.save(),M.beginPath(),M.rect(O,H,d,C),M.clip(),x._87o(x.drawPropertyValue(M,I,x.getValue(m,I),s,O,H,d,C,m),s,O,H,d,C),M.restore()}}x._rowLineVisible&&Hj(M,Y,H+C-1,W,1,x._rowLineColor)}x._columnLineVisible&&(Hj(M,J,0,1,L,x._columnLineColor),Hj(M,g-1,0,1,L)),x._92db(M),x._93I(),M.restore(),x.ty(x.ty())},drawCategoryName:function(f,b,D,J,_,o,d){Gh(f,b,this.getCategoryFont(b),this.getCategoryColor(b),J,_,o,d)},drawPropertyName:function(x,c,I,E,o,Y,G){return c.drawPropertyName?(c.drawPropertyName(x,c,I,E,o,Y,G,this),void 0):(Gh(x,this.getPropertyName(c),this.getPropertyFont(c,I),this.getPropertyColor(c,I),E,o,Y,G),void 0)},drawPropertyValue:function(n,$,O,i,o,M,G,m,I){return $.drawPropertyValue?$.drawPropertyValue(n,$,O,i,o,M,G,m,I,this):(Oc(n,O,$,this.getLabelFont($,O,i),this.getLabelColor($,O,i),o,M,G,m,I,this),void 0)},isPropertyEditable:function(s){return s.isEditable()&&this.isEditable()},setProperties:function(f){this._propertyModel.clear(),this.addProperties(f)},addProperties:function(y){if(y){var h=this._propertyModel;y.forEach(function(V){if(!(V instanceof uf)){var U=Si(V.className);V=Lr(U?U:uf,V)}h.add(V)})}},getRowIndexAt:function(L){var l=this,T=q(l.lp(L).y/l._rowHeight);return T>=0&&T<l._rows.size()?T:-1},getPropertyAt:function(K){var x=this,G=x.getRowIndexAt(K);return G>=0?x._rows.get(G).property:f},getToolTip:function(a){var Z=this,J=Z.getPropertyAt(a),e=Z._27o;return J&&e?J.getToolTip(e,Z._9I<Z.lp(a).x,Z):f}});var yd=function(w){this.pv=w,this.addListeners()};zs(yd,L,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(M){this.getView().style.cursor=M},clear:function(){var Y=this;Y._62O=Y.cp=Y.ty=Y.p=f,Y.setCursor(O)},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(i){var V=this,O=V.pv;Wf(i),O.setFocus(i)&&(fr(i)?(V.cp=ss(i),V.ty=O.ty(),V.p=O.getColumnPosition(),V.handle_touchmove(i)):O.setSelectRowIndex(O.getRowIndexAt(i)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(u){this.handle_touchend(u)},handle_touchend:function(A){var E=this;if(E.cp&&!E._62O){var l=E.pv,B=l.lp(A),I=B.x,_=B.y,S=l._indent,p=l.getRowIndexAt(A),V=l._9I;if(p>=0){var M=l._rowHeight,P=M*p,w=l._rows.get(p),x=w.property;if(_o(w))tr(l.isExpanded(w)?l._expandIcon:l._collapseIcon)&&I>=0&&S>=I&&_>=P&&P+M>=_?l.toggle(w):Qd(A)&&l.toggle(w);else if(I>V&&l.isPropertyEditable(x,A)){var k={x:V+1,y:P,width:l.getWidth()-V-1,height:M},d={x:k.x+l.tx(),y:k.y+l.ty(),width:k.width,height:k.height},y=0,u=l._29I;k.y<u.y?y=k.y-u.y:k.y+M>u.y+u.height&&(y=k.y+M-u.y-u.height),y&&(l.ty(l.ty()-y),d.y-=y),l.beginEditing({data:w.data,property:x,value:l.getValue(w.data,x),event:A,rect:k,editorRect:d,view:l})}}l.setSelectRowIndex(p)}E.clear()},handleWindowMouseMove:function(m){this.handleWindowTouchMove(m)},handleWindowTouchMove:function(l){var q=this,I=q.pv,e=q.ty,z=q.cp,Y=ss(l),h=q._62O;if("p"===h)I.setTranslateY(e+Y.y-z.y);else if("c"===h){var v=I.getWidth()-I._indent;if(v>16){var y=q.p-(z.x-Y.x)/v,w=16/v;w>y&&(y=w),y>1-w&&(y=1-w),I.setColumnPosition(y)}}else"s"===h&&I.setTranslateY(e+(z.y-Y.y)*I._59I/I._29I.height)},handle_mousemove:function(_){this.handle_touchmove(_)},handle_touchmove:function(s){if(!Pk&&fr(s)){var T=this,v=T.pv,$=u(v.lp(s).x-v._9I)<=(Z?8:3);T.cp?T._62O||($?(T._62O="c",Td(T)):u(ss(s).y-T.cp.y)>=2&&(T._62O=T.isV(s)?"s":"p",Td(T))):($?T.setCursor(Kq):T.setCursor(O),T.isV(s)&&v._43o())}},isV:function(R){var o=this.pv,c=o._29I;return o._41o()&&c.x+c.width-o.lp(R).x<Yc},handle_mousewheel:function(P){this.handleScroll(P,P.wheelDelta/40)},handle_DOMMouseScroll:function(O){2===O.axis&&this.handleScroll(O,-O.detail)},handleScroll:function(M,D){var b=this.pv;Wf(M),b.endEditing(),b.translate(0,D*b.getRowHeight())},handle_keydown:function(M){var y=this.pv,c=y._rows.size(),o=y._selectRowIndex+(eb(M)?-1:1);(eb(M)||mh(M))&&(0>o&&(o=0),o>=c&&(o=c-1),y.setSelectRowIndex(o))}}),Qp.ListView=function(W){this._5o(W),new or(this)},Db("ListView",L,{ms_ac:[fj,Rb,ig,Wn,jk,tc,Oj,tj,gi,bo,nq,xo,Yi,Af],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:dk,_rowHeight:Di,_rowLineVisible:y.listViewRowLineVisible,_rowLineColor:y.listViewRowLineColor,_scrollBarColor:nn,_scrollBarSize:Yp,_autoMakeVisible:il,_autoHideScrollBar:pf,_selectBackground:y.listViewSelectBackground,_labelColor:y.listViewLabelColor,_labelSelectColor:y.listViewLabelSelectColor,_labelFont:y.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(H){var Z=this,$=Z._checkMode;Z._checkMode=H,Z.fp(cf,$,H)},drawRow:function(f,p,s,c,g,o,e){var K=this,W=0,x=K._indent,F=K.getIconWidth(p);K.drawRowBackground(f,p,s,c,g,o,e),K._checkMode&&(Zd(f,K.getCheckIcon(p),W+x/2,g+e/2,p,K),W+=x),K.drawIcon(f,p,W,g,F,e),K.drawLabel(f,p,W+F,g,e)}});var or=function(w){this.list=w,this._lastSelectDataTime=Po(),this.addListeners()};zs(or,L,{ms_listener:1,getView:function(){return this.list._view},clear:function(Y){var c=this,K=c.list;Y&&"d"===c._62O&&!c.dragCancel&&K.handleDragAndDrop(Y,"end"),K.draggingData&&(K.draggingData=null,K.redraw()),c.dragCancel=c._62O=c._isV=c._isH=c.cp=c.tx=c.ty=f},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(O){var P=this,f=P.list;if(Wf(O),f.setFocus(O)){var _=f.getDataAt(O);P.cp=ss(O),P.tx=f.tx(),P.ty=f.ty(),fr(O)?_&&f.handleDragAndDrop&&!P.isV(O)&&!P.isH(O)&&(f.draggingData=_,f.redraw(),f.handleDragAndDrop(O,"prepare")):(_&&P._33o(O,_),P.clear(O))}},handleWindowMouseUp:function(W){this.clear(W)},handleWindowTouchEnd:function(c){this.clear(c)},handle_mouseup:function(o){this.handle_touchend(o)},handle_touchend:function(L){var K=this,F=K.list;if(!K._isV&&!K._isH&&K.cp&&!K._62O){var X=F.getDataAt(L);X?(F.isCheckMode()?K._34o(L,X):K._33o(L,X),Qd(L)?F.onDataDoubleClicked(X,L):F.onDataClicked(X,L)):F.handleBackgroundClick(L)}K.clear(L)},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handleWindowTouchMove:function(u){var I=this,j=I.list,K=I._62O,Q=I.tx,N=I.ty,h=I.cp,S=ss(u),k=j._29I;"p"===K?j.setTranslate(Q+S.x-h.x,N+S.y-h.y):"v"===K?j.ty(N+(h.y-S.y)*j._59I/k.height):"h"===K?j.tx(Q+(h.x-S.x)*j._91I/k.width):"d"===K&&(I.dragCancel||j.handleDragAndDrop(u,"between"))},handle_mousemove:function(B){this.handle_touchmove(B)},handle_touchmove:function(z){if(!Pk&&fr(z)){var w=this,R=w.list;if(w._isV=w.isV(z),w._isH=w.isH(z),w.cp){if(!w._62O){if(fm(ss(z),w.cp)<2)return;w._isV?w._62O="v":w._isH?w._62O="h":R.draggingData&&!this.dragCancel?(w._62O="d",R.handleDragAndDrop(z,"begin")):w._62O="p",w._62O&&"d"!==w._62O&&R.draggingData&&(R.draggingData=null,R.redraw()),Td(w)}}else w._isV&&R._43o(),w._isH&&R._42o()}},isV:function(p){var K=this.list,L=K._29I;return K._41o()&&L.x+L.width-K.lp(p).x<Yc},isH:function(V){var o=this.list,y=o._29I;return o._40o()&&y.y+y.height-o.lp(V).y<Yc},handle_mousewheel:function(y){this.handleScroll(y,y.wheelDelta/40,y.wheelDelta!==y.wheelDeltaX)},handle_DOMMouseScroll:function(R){this.handleScroll(R,-R.detail,1)},handleScroll:function(G,M,p){var d=this.list;Wf(G),d.endEditing&&d.endEditing(),p&&d._41o()?d.translate(0,M*d.getRowHeight()):d._40o()&&d.translate(10*M,0)},handle_keydown:function(A){if(!y.isInput(A.target)){var q,g=this.list,W=g.sm(),Y=g._rows,$=Y.size();if(Rk(A))g.selectAll();else if(Uh(A))g.handleDelete&&g.handleDelete(A);else if(Aq(A))"d"!==this._62O||this.dragCancel||(g.handleDragAndDrop(A,"cancel"),this.dragCancel=!0);else if(xn(A))g.isCheckMode()&&(q=g.getFocusData(),q&&g.checkData(q));else if(eb(A)||mh(A)){var X=g.isCheckMode();if(q=X?g.getFocusData():W.ld()){var c=g.getRowIndex(q);c>=0&&(eb(A)?0!==c&&(q=Y.get(c-1),X?g.setFocusData(q):W.ss(q)):c!==$-1&&(q=Y.get(c+1),X?g.setFocusData(q):W.ss(q)))}else $>0&&(q=Y.get(0),X?g.setFocusData(q):W.ss(q))}}},_34o:function(U,t){var F=this.list,T=F.lp(U).x;return T>=0&&T<=F._indent?(F.checkData(t),void 0):(F.setFocusData(t),void 0)},_33o:function(v,H){var x=this.list,z=x.sm(),U=z.ld();if(xl(v))x.isSelected(H)?z.rs(H):z.as(H);else if(kj(v))if(U)for(var p=x.getRowIndex(U),D=x.getRowIndex(H);p!==D;)p+=D>p?1:-1,z.as(x._rows.get(p));else z.ss(H);else if(fr(v)){var G=Po();if(z.contains(H)){var i=G-this._lastSelectDataTime;x.handleDataDoubleSelect&&i>500&&1500>i&&x.handleDataDoubleSelect(v,H)}z.ss(H),this._lastSelectDataTime=G}else z.contains(H)||z.ss(H)}}),Qp.TreeView=function(e){var G=this;G._35o(),G._5o(e),new Up(G)},Db("TreeView",L,{ms_ac:[fj,Rb,ig,"rootVisible",cf,"rootData",tj,gi,bo,nq,xo,jk,Wn,tc,Oj,Vq,mg,Yi,Af,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:f,_indent:dk,_rowHeight:Di,_rowLineVisible:y.treeViewRowLineVisible,_rowLineColor:y.treeViewRowLineColor,_scrollBarColor:nn,_scrollBarSize:Yp,_autoHideScrollBar:pf,_expandIcon:y.treeViewExpandIcon,_collapseIcon:y.treeViewCollapseIcon,_autoMakeVisible:il,_selectBackground:y.treeViewSelectBackground,_labelColor:y.treeViewLabelColor,_labelSelectColor:y.treeViewLabelSelectColor,_labelFont:y.treeViewLabelFont,_doubleClickToToggle:y.treeViewDoubleClickToToggle,drawRow:function(q,E,Z,j,s,S,R){var y=this;
y.drawRowBackground(q,E,Z,j,s,S,R),y._97I(q,E,Z,0,s,S,R)},isOnToggleIcon:function(t){var f=this.getDataAt(t);if(f){var a=this.getIndent(),X=this.lp(t).x;if(tr(this.getToggleIcon(f))){var Z=a*this.getLevel(f);if(X>=Z&&Z+a>=X)return!0}}return!1}});var Up=function(N){Ec(Up,this,[N])};zs(Up,or,{toggle:function(Y,g,z,W){var Q=this.list,k=Q.lp(Y).x;if(tr(Q.getToggleIcon(g))){var i=z*W;if(k>=i&&i+z>=k)return Q.toggle(g),!0}return Q.isDoubleClickToToggle()&&Qd(Y)?(Q.toggle(g),!0):!1},_34o:function(e,g){var $=this.list,p=$.lp(e).x,y=$._levelMap[g._id],x=$._indent,z=x*(y+1);return p>=z&&z+x>=p?($.checkData(g),void 0):(this.toggle(e,g,x,y)||$.setFocusData(g),void 0)},_33o:function(v,I){var u=this,J=u.list;u.toggle(v,I,J._indent,J.getLevel(I))||Up.superClass._33o.call(u,v,I)},handle_keydown:function(Q){if(Ug(Q)||lo(Q)){var y=this.list,S=y._rows,V=y.isCheckMode(),K=y.sm(),C=V?y.getFocusData():K.ld();C?C.hasChildren()&&(Ug(Q)?y.collapse(C):y.expand(C)):S.size()>0&&(C=S.get(0),V?y.setFocusData(C):K.ss(C))}else Up.superClass.handle_keydown.call(this,Q)}});var qo=Qp.TableView=function(z){this._98I(),this._5o(z),new tl(this)};Db("TableView",L,{ms_ac:[fj,Rb,ig,"sortMode",Od,Xf,Wn,tc,Oj,_d,Vf,"sortColumn",tj,gi,bo,nq,xo,Yi,Af],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Mq,_editable:!0,_batchEditable:!1,_rowHeight:Di,_rowLineVisible:y.tableViewRowLineVisible,_rowLineColor:y.tableViewRowLineColor,_columnLineVisible:y.tableViewColumnLineVisible,_columnLineColor:y.tableViewColumnLineColor,_scrollBarColor:nn,_scrollBarSize:Yp,_autoHideScrollBar:pf,_autoMakeVisible:il,_selectBackground:y.tableViewSelectBackground,_labelColor:y.tableViewLabelColor,_labelSelectColor:y.tableViewLabelSelectColor,_labelFont:y.tableViewLabelFont,getCheckColumn:function(){var $=this;if(!$._31o){var r=$._31o=new Fb;r.setEditable(!0),r.setWidth(40),r.getValue=$.getCheckColumValue,r.drawCell=$.drawCheckColumnCell}return $._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(w){var f=this,l=f._39o,$=f.getCheckColumn();w!==f.isCheckMode()&&(w?l.add($,0):l.remove($),f.fp(cf,!w,w))},getCheckColumValue:function(a,d,V){return V.isSelected(a)},drawCheckColumnCell:function(C,O,U,v,D,n,T,_,j){Zd(C,j.getCheckIcon(O),D+T/2,n+_/2,O,j)}});var tl=function(m){Ec(tl,this,[m])};zs(tl,or,{_34o:function(S,_){var g=this.list,U=g._31o;if(g.isCellEditable(_,U,S)){var j=g._3Q(U),A=g.lp(S).x;if(j&&A>=j.startX&&A<j.startX+U.getWidth())return g.checkData(_),void 0}g.setFocusData(_),g._37O(_,S)},_33o:function(k,_){tl.superClass._33o.apply(this,arguments),this.list._37O(_,k)}});var Kk=Qp.TreeTableView=function(u){var o=this,n=o._4o=new Fb;o._35o(),o._98I(),o._5o(u),n.setDisplayName("Name"),n.setEditable(!0),n.setWidth(180),n.drawCell=Eq,n.getValue=$r,o._39o.add(n),new ef(o)},Eq=function(x,T,f,i,o,B,b,W,F){F._97I(x,T,f,o,B,b,W)},$r=function(T,c,Z){return Z.getLabel(T)};Db("TreeTableView",L,{ms_ac:[fj,Rb,ig,"sortMode",Od,Xf,jk,cf,"rootData","rootVisible",tj,gi,"sortColumn",Vq,mg,bo,nq,xo,Yi,Oj,Wn,tc,_d,Vf,Af,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Mq,_checkMode:f,_editable:!0,_batchEditable:!1,_indent:dk,_rowHeight:Di,_rowLineVisible:y.treeTableViewRowLineVisible,_rowLineColor:y.treeTableViewRowLineColor,_columnLineVisible:y.treeTableViewColumnLineVisible,_columnLineColor:y.treeTableViewColumnLineColor,_expandIcon:y.treeTableViewExpandIcon,_collapseIcon:y.treeTableViewCollapseIcon,_scrollBarColor:nn,_scrollBarSize:Yp,_autoHideScrollBar:pf,_autoMakeVisible:il,_selectBackground:y.treeTableViewSelectBackground,_labelColor:y.treeTableViewLabelColor,_labelSelectColor:y.treeTableViewLabelSelectColor,_labelFont:y.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var ef=function(F){Ec(ef,this,[F])};zs(ef,or,{_34o:function(x,Q){var t=this.list,N=t._4o,S=t._3Q(N),E=t.lp(x).x;if(S){var B=t._indent,g=S.startX+B*t.getLevel(Q);if(tr(t.getToggleIcon(Q))&&E>=g&&g+B>=E)return t.toggle(Q),void 0;if(t.isCellEditable(Q,N)&&(g+=B,E>=g&&g+B>=E))return t.checkData(Q),void 0}t.setFocusData(Q),t._37O(Q,x)},_33o:function(u,D){var N=this.list,Z=N.lp(u).x;if(tr(N.getToggleIcon(D))){var U=N._3Q(N._4o);if(U){var s=N._indent,v=U.startX+s*N.getLevel(D);if(Z>=v&&v+s>=Z)return N.toggle(D),void 0}}ef.superClass._33o.apply(this,arguments),N._37O(D,u)}});var dr=Qp.TableHeader=function(k){var w=this,v=w._view=ak(1,w),g=w._39o=k.getColumnModel(),V=w.iv;w.tv=w._tableView=k,w._60I=new ie,w._canvas=_p(v),v.style.background=y.tableHeaderBackground||"",v.style.height=lc+Bk,g.mm(V,w),g.md(V,w),g.mh(V,w),k.mp(function(N){qq[N.property]&&w.iv()},w),new gn(w),w.iv()};Db("TableHeader",L,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",fj,ig,jk,"moveBackground","insertColor",_d,Vf,"resizable","movable"],_checkIcon:sq,_movable:!0,_resizable:!0,_labelColor:y.tableHeaderLabelColor,_labelFont:y.tableHeaderLabelFont,_columnLineColor:y.tableHeaderColumnLineColor,_columnLineVisible:y.tableHeaderColumnLineVisible,_sortDescIcon:y.tableHeaderSortDescIcon,_sortAscIcon:y.tableHeaderSortAscIcon,_moveBackground:y.tableHeaderMoveBackground,_insertColor:y.tableHeaderInsertColor,_indent:dk,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(h){return h.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(Y){return Y.getColor()||this._labelColor},getLabelAlign:function(r){return r._align},onPropertyChanged:function(){this.iv()},_5Q:function(o){this._61I=o,this.iv()},getLogicalPoint:function(s){return Np(s,this._canvas,this.tv.tx())},validateImpl:function(){var m=this,o=m._canvas,t=m.getWidth(),p=m.getHeight(),z=m.tv,l=m._60I,F=m._61I,B=-z.tx(),h=0;(t!==o.clientWidth||p!==o.clientHeight)&&wj(o,t,p),l.clear(),m._39o._roots.each(function(a){if(a.isVisible()){var g=h+a.getWidth();B+t>=h&&g>=B&&l.add({column:a,startX:h}),h=g}});var X=pg(o);if(eg(X,-B,0,1),X.beginPath(),X.rect(B,0,t,p),X.clip(),X.clearRect(B,0,t,p),l.each(function(K){var V=K.column,Q=K.startX,u=V.getWidth();u>0&&(X.save(),X.beginPath(),X.rect(Q,0,u,p),X.clip(),F&&F.column===V||m.drawColumn(X,V,Q,0,u,p),m._columnLineVisible&&Hj(X,Q+u-1,0,1,p,m._columnLineColor),X.restore())}),F){var k=F.column,h=F.startX,Q=F.position,e=k.getWidth();X.save(),X.beginPath(),X.rect(h,0,e,p),X.clip(),X.fillStyle=m._moveBackground,X.fill(),m.drawColumn(X,k,h,0,e,p),X.restore(),ni(X,m._insertColor,Q,0,p)}X.restore()},_6Q:function(c){var A=this.tv;return A._31o===c&&A.sm().getSelectionMode()===Lg},drawColumn:function(Y,h,N,e,n,a){var C=this,T=C.tv,S=tr(h.getIcon()),k=C.getLabelAlign(h);if(C._6Q(h)){var s=tr(C._checkIcon);Zd(Y,s,N+n/2,e+a/2,h,C)}else{var P=C.getLabel(h),c=C.getLabelFont(h),i=C.getLabelColor(h),r=tk(c,P).width,j=S?C._indent:0;k===Pc?(S&&Rm(Y,S,Ur,N,e,j,a),Gh(Y,P,c,i,N+j,e,n,a,Pc)):k===Lc?(S&&Rm(Y,S,Ur,N+n-r-j,e,j,a),Gh(Y,P,c,i,N,e,n,a,Lc)):(S&&Rm(Y,S,Ur,N+(n-r-j)/2,e,j,a),Gh(Y,P,c,i,N+(n-r+j)/2,e,0,a,Pc))}if(h.isSortable()&&T.getSortColumn()===h&&(S=tr(h.getSortOrder()===pq?C._sortAscIcon:C._sortDescIcon))){var J=Me(S,h)/2+2;Zd(Y,S,k===Lc?N+J:N+n-J,e+a/2,h,T)}}});var gn=function(U){var f=this;f.th=U,f.tv=U._tableView,f.addListeners()};zs(gn,L,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(O){this.getView().style.cursor=O},handle_mousemove:function(o){if(!Pk){var F=this;delete F._29o,F.setCursor(O);for(var Q=F.th,q=Q._60I,z=Q.lp(o).x,k=q.size()-1;k>=0;k--){var d=q.get(k),f=d.column,H=d.startX+f.getWidth();if(Q.isResizable()&&u(H-z)<=(Z?10:3))return F._29o=d,F.setCursor(Kq),void 0;z>d.startX&&H>z&&(F._29o=d),(f.isClickable()||f.isSortable()||Q.isMovable()||F.tv.getCheckColumn&&f===F.tv.getCheckColumn())&&z>d.startX&&H>z&&F.setCursor(zp)}}},handle_mousedown:function(k){this.handle_touchstart(k)},handle_touchstart:function(k){var a=this;Wf(k),a.tv.endEditing(),a.handle_mousemove(k),a._29o&&(a.x=ss(k).x,a.lx=a.th.lp(k).x,a.w=a._29o.column.getWidth(),Td(a,k))},handleWindowMouseMove:function(s){this.handleWindowTouchMove(s)},handleWindowTouchMove:function(p){var S=this,L=S.th,E=S.getView().style.cursor,Y=S._29o,U=ss(p).x-S.x;if(S.resizing||S.moving||(E===Kq?S.resizing=1:L.isMovable()&&E===zp&&u(U)>2&&(S.moving=1)),S.resizing)Y.column.setWidth(S.w+U);else if(S.moving){var e=S.lx+U;L._60I.each(function(b){var E=b.startX,l=E+b.column.getWidth();if(e>=E&&l>=e){var x={column:Y.column,startX:Y.startX+U,front:l-e>e-E,insertColumn:b.column};x.position=x.front?E:l,L._5Q(x)}})}},_16Q:function($,E){var V=this,T=V.tv,a=V.th,r=a._checkIcon;if(a._6Q($)){var m=tr(r),B=V.lx,k=$.getWidth(),g=Me(m,$);if(B>=E+k/2-g&&E+k/2+g>=B){a.setCheckIcon(r===zh?sq:zh);var w=T.sm(),H=T._rows;return r===zh?w.rs(H):w.ss(H),T.onCheckColumnClicked($),!0}}return!1},handleWindowMouseUp:function(H){this.handleWindowTouchEnd(H)},handleWindowTouchEnd:function(N){var L=this,R=L.tv,j=L.th,K=L._29o;if(L.moving){var C=j._61I;if(C&&C.insertColumn!==C.column){var r=C.column,u=R.getColumnModel()._roots,B=u.remove(r),P=u.indexOf(C.insertColumn);P>=0&&(C.front||P++,P<=u.size()&&(u.add(r,P),R.getColumnModel()._38I(r,B,P)))}j._5Q(f),delete L.moving}else if(!L.resizing&&K){r=K.column;var Q=j.lp(N).x,$=K.startX,l=!0;if(j.onColumnClicked){var n=j.onColumnClicked(r,N,$);n===!1&&(l=!1)}if(l&&Q>=$&&Q<=$+r.getWidth()&&!L._16Q(r,$)){if(r.isSortable()){var i=R.getSortMode(),p=r.getSortOrder();i===Mq?R.getSortColumn()===r?(p===Nd&&R.setSortColumn(f),r.setSortOrder(p===pq?Nd:pq)):R.setSortColumn(r):"bistate"===i&&(R.getSortColumn()===r?r.setSortOrder(p===pq?Nd:pq):R.setSortColumn(r))}R.onColumnClicked(r,N,$)}}L._29o=L.resizing=L.x=L.lx=L.w=f}}),Qp.TablePane=function(g){this.init(new qo(g))},Db("TablePane",L,{ms_v:1,_44o:1}),Qp.TreeTablePane=function(w){this.init(new Kk(w))},Db("TreeTablePane",L,{ms_v:1,_44o:1}),Qp.Toolbar=function(O){var X=this,T=X._view=ak(1,X),u=T.style;u.background=y.toolbarBackground||"",u.height=Tj+Bk,X._canvas=_p(T),X._30o=new ie,X._90I=new ie,X.setItems(O||[]),T.handleGroupSelectedChanged=function(f){if(f.isSelected()){var i=f.getGroupId();null!=i&&X._items.forEach(function(L){var I=L.element;I&&I!==f&&I.setSelected&&I.getGroupId&&I.getGroupId()===i&&I.setSelected(!1)})}},new Oi(X)},Db("Toolbar",L,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[$e,fj,ig,Rb,Af,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:y.toolbarLabelColor,_labelSelectColor:y.toolbarLabelSelectColor,_labelFont:y.toolbarLabelFont,_selectBackground:y.toolbarSelectBackground,_itemGap:y.toolbarItemGap,_separatorColor:y.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(W){var b=this.getItemInfoAt(W);return b?b.item.toolTip:f},getLabelColor:function(k){return k&&k.selected&&k.type!==zh&&k.type!==cd?this._labelSelectColor:this._labelColor},onPropertyChanged:function(i){this.iv(),i.property===$e&&this._items.forEach(function(N){cg(N)})},redraw:function(){this.iv()},addItem:function(p,K){var d=this._items;K==f?d.push(p):d.splice(K,0,p),this.fp($e,f,d)},removeItem:function(b){if(b)for(var Y=this._items,E=0;E<Y.length;E++)b===Y[E]&&(Y.splice(E,1),this.fp($e,f,Y))},removeItemById:function(B){if(B!=f)for(var S=this._items,m=0;m<S.length;m++)B===S[m].id&&(S.splice(m,1),this.fp($e,f,S))},getItemById:function(l){if(l!=f)for(var m=this._items,p=0;p<m.length;p++){var O=m[p];if(l===O.id)return O}},getItemInfos:function(){return this._30o},getItemInfoAt:function(G){var A=this,e=0,v=A._30o,C=A.lp(G),F=C.x,Y=C.y;if(Y>=0&&Y<=A.getHeight())for(;e<v.size();e++){var N=v.get(e);if(N.startX<=F&&F<=N.endX)return N}return f},drawItem:function(h,f,n,L,c){if(f.visible===!1)return 0;if(ao(f.visible)&&f.visible()===!1)return 0;var k=this,x=f.disabled;x&&(h.globalAlpha=Gq);var X=k.drawItemImpl(h,f,n,L,c),S=k._itemGap;return x&&(h.globalAlpha=1),this._currentItem!==f||"separator"===f||f.separator===!0||f.unfocusable||qj(h,k._separatorColor,n-S/2,0,X+S,L),X},drawItemImpl:function(E,Y,s,O,Z){var q=this,J=q._view,c=q._itemGap,L=O/2,V=Y.type,H=Y.element,n=Y.label;_o(H)&&(n=H,H=f);var z,M=q.getLabelFont(Y),T=q.getLabelColor(Y),i=Y.selected,t=tr(Y.icon),$=Me(t,Y),Q=0,x=$+(n?tk(M,n).width:0);if("separator"===Y||Y.separator===!0)return ni(E,q._separatorColor,s,O/4,L),1;if(H){t&&Zd(E,t,s+$/2,L,Y,q),Gh(E,n,M,T,s+$,0,0,O);var g=Ln(H);Z||q._90I.add(g),g.parentNode!==J&&Bb(J,g),H.iv&&H.iv(),H.validate&&H.validate();var r=g.getBoundingClientRect(),k=r.width,K=g.style;return cj(g),K.left=q.tx()+s+x+Bk,K.top=(O-r.height)/2+Bk,x+k}return V===cd?z=tr(i?Km:hj):V===zh&&(z=tr(i?zh:sq)),z?(Q=Me(z,Y),Zd(E,z,s+Q/2,L,Y,q),s+=Q,x+=Q):i&&Hj(E,s-c/2,0,x+c,O,q.getSelectBackground(Y)),t&&Zd(E,t,s+$/2,L,Y,q),Gh(E,n,M,T,s+$,0,0,O),x},validateImpl:function(){var M=this,d=M._canvas,J=M.getWidth(),f=M.getHeight(),L=M._30o,H=M._items;wj(d,J,f);var S=pg(d),T=M._itemGap,y=T/2;eg(S,M.tx(),0,1),S.clearRect(0,0,J,f);var j=M._90I;M._90I=new ie,L.clear(),H.forEach(function(V){var E=M.drawItem(S,V,y,f);L.add({item:V,startX:y,endX:y+E,width:E}),E&&(y+=E+T)}),j.each(function(J){M._90I.contains(J)||vo(J)});var F=M._64I;M._64I=i(0,y),S.restore(),M._stickToRight?(M._65O=0,S=pg(d),y=J-M._64I+T,eg(S,0,0,1),S.clearRect(0,0,J,f),L.clear(),H.forEach(function(X){var J=M.drawItem(S,X,y,f,!0);L.add({item:X,startX:y,endX:y+J,width:J}),J&&(y+=J+T)}),S.restore()):M.tx(M.tx()),F!==M._64I&&M.onSumWidthChanged(F,M._64I)},onSumWidthChanged:function(){},handleClick:function(r,x){var u=this,U=r.type,c=r.action,Z=r.groupId,p=r.selected;r.disabled||(Z!=f?p||(r.selected=!0,this._items.forEach(function(_){_.groupId===Z&&r!==_&&(_.selected=!1)}),c&&r.action(r,u,x)):U===zh||"toggle"===U?(r.selected=!p,c&&r.action(r,u,x)):c&&r.action(r,u,x)),Qq(),u.iv()}});var Oi=function(z){this.tb=z,this.addListeners()};zs(Oi,L,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(t){this.handleScroll(t,10*(t.wheelDelta/40))},handle_DOMMouseScroll:function(X){this.handleScroll(X,10*-X.detail)},handleScroll:function(k,z){Wf(k);var m=this.tb;m.isScrollable()&&!m._stickToRight&&(m.tx(m.tx()+z),Zc())},handle_mousemove:function(Z){var w=this;Pk||w.setItem(Z)},handle_mouseout:function(C){var A=this;C.target===A.getView()?A.tb.setCurrentItem(f):A.handle_mousemove(C)},handle_mousedown:function(Z){this.handle_mousemove(Z),this.handle_touchstart(Z)},handle_touchstart:function(r){var R=this,W=R.tb,Z=r.target;fr(r)&&(Z===R.getView()||Z===W._canvas)&&(Wf(r),W.setFocus(r)&&(this.setItem(r,!0),(W.isScrollable()||R.info&&!R.info.item.disabled)&&(R.x=ss(r).x,R.tx=W.tx(),Td(R,r))))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(Y){var P=this,s=P.tb;if(!s._stickToRight){var r=ss(Y).x-P.x;!P._25o&&u(r)>2&&s.isScrollable()&&(P._25o=1),P._25o&&s.tx(P.tx+r)}},handleWindowMouseUp:function(f){this.handleWindowTouchEnd(f)},handleWindowTouchEnd:function(d){var n=this,S=n.tb,a=n.info,h=n.tb.getItemInfoAt(d);if(!n._25o&&a){var y=a.item;h&&h.item===y&&S.handleClick(y,d)}n._25o=n.x=n.tx=f,n.setItem()},setItem:function(v,s){var u=this,W=u.tb,O=u.info=v?W.getItemInfoAt(v):f,g=O?O.item:f;W.setCurrentItem(g),s&&g&&ao(g.onDown)&&g.onDown(v)}}),Qp.BorderPane=function(){this._view=ak(1,this),this.iv()},Db("BorderPane",L,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(G,C){this._12o("leftView",G),C!=f&&this.setLeftWidth(C)},getRightView:function(){return this._rightView},setRightView:function(T,Q){this._12o("rightView",T),Q!=f&&this.setRightWidth(Q)},getTopView:function(){return this._topView},setTopView:function(x,S){this._12o("topView",x),S!=f&&this.setTopHeight(S)},getBottomView:function(){return this._bottomView},setBottomView:function(T,e){this._12o("bottomView",T),e!=f&&this.setBottomHeight(e)},getCenterView:function(){return this._centerView},setCenterView:function(e){this._12o("centerView",e)},_12o:function(f,Y){var w=this,j="_"+f,z=w._view,G=w[j];G!==Y&&(G&&(G.getView?vo(G.getView()):vo(G)),w[j]=Y,Y&&(Y.getView?Bb(z,Y.getView(),1):Bb(z,Y,1)),w.fp(f,G,Y))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var L=this,W=L._topView,o=L._bottomView,n=L._leftView,j=L._rightView,p=L._centerView,E=L.getWidth(),l=L.getHeight(),H=0,e=0,D=E,h=l,M=0,v=0,k=0,$=0;W&&(M=L._topHeight==f?xj(W):L._topHeight,e=M),o&&(v=L._bottomHeight==f?xj(o):L._bottomHeight,h=l-v),n&&(k=L._leftWidth==f?ad(n):L._leftWidth,H=k),j&&($=L._rightWidth==f?ad(j):L._rightWidth,D=E-$);var Q=i(0,D-H),s=i(0,h-e);W&&kc(W,0,0,E,M),o&&kc(o,0,h,E,v),n&&kc(n,0,e,k,s),j&&kc(j,D,e,$,s),p&&kc(p,H,e,Q,s)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);




//autolayout
!function(f,i){"use strict";var m="ht",A=m+".layout.",F=f[m]||module.parent.exports.ht,Y=null,N=F.Default,X=N.def,P=F.List,a=F.Node,R=F.Edge,w=F.Group,I=Math,G=I.floor,v=I.ceil,d=I.sqrt,h=I.max,$=I.min,k=I.abs,E=I.cos,B=I.sin,W=I.PI,r=2*W,y=W/2,z=I.atan,o=I.atan2,D=I.random,c=I.pow,p=Number.MAX_VALUE,O=Number.MIN_VALUE,s="circular",V="symmetric",l="hierarchical",j="towardnorth",C="towardsouth",_="towardeast",M="towardwest",u=function(){throw"Oops!"},K=function(b){return s===b?new bn:V===b?new Iq:l===b?new nq:b===j||b===C||b===_||b===M?new Lp:Y},x=function(N){return N===M?new H(y):N===_?new H(-y):N===j?new H(W):Y},H=function(d){this.s=B(d),this.c=E(d)};H.prototype.tf=function(A,I){return 1===arguments.length&&(I=A.y,A=A.x),{x:this.c*A-this.s*I,y:this.s*A+this.c*I}};var n=function(E,Q){this.x=E,this.y=Q};X(n,i,{equals:function(o){return this===o?!0:o instanceof n?o.x===this.x&&o.y===this.y:!1}});var L=function(d,W){this.width=d,this.height=W};X(L,i,{});var g=function(d,$){this.x=d,this.y=$};X(g,i,{});var Z=function(){var E=arguments;2===E.length?(Z.superClass.constructor.call(this,E[1].width,E[1].height),this.x=E[0].x,this.y=E[0].y):(Z.superClass.constructor.call(this,E[2],E[3]),this.x=E[0],this.y=E[1])};X(Z,L,{});var J=function(t,b){if(J.a2(t.x,b.x))this._a=1,this._b=0,this._c=-t.x;else{this._b=-1;var k=(b.y-t.y)/(b.x-t.x),i=t.y-t.x*k;this._a=k,this._c=i}};X(J,i,{a3:function(){return this._a},a4:function(){return this._b},a5:function(){return this._c}}),J.a6=function(q,s){if(J.a1(q.a3())&&J.a1(s.a3()))return Y;if(J.a1(q.a4())&&J.a1(s.a4()))return Y;if(J.a1(s.a4())){var R=q;q=s,s=R}var o,E,i=q.a3(),b=q.a4(),F=-q.a5();J.a1(q.a3())?(o=s.a4(),E=-s.a5()):(o=s.a4()-s.a3()/q.a3()*q.a4(),E=-s.a5()-s.a3()/q.a3()*-q.a5());var V=E/o,$=(F-V*b)/i;return new n($,V)},J.a1=function(S){return J.a2(S,0)},J.a2=function(j,m){return k(j-m)<1e-5};var S=function(d){if(this._a=new dh,d)for(var a=0;a<d.size();a++)this._a.aa(d.get(a))};X(S,i,{c:function(){return this._a.ah()},d:function(){return this._a.ah()},a:function(){for(var c=new P,J=this.c();J.i1();J.i2())c.add(J.i6(),0);return new S(c)},b:function(){return this._a.ay()}});var b=function(b,c){this.x=b,this.y=c};X(b,i,{a:function(p,o){this.x=p,this.y=o}});var T=function(C,y){this.x=C||0,this.y=y||0};X(T,i,{b:function(){return new T(this.x,this.y)},a:function(t){this.z=t},c:function(){return this.x},d:function(){return this.y},f:function(e,x){this.x=e,this.y=x}});var Q=function(z){this._c=new dh,z?(this.ac(z.a8().b()),this.ad(z.a9().b())):(this.ac(new T),this.ad(new T))};X(Q,i,{a6:function(){return this.a5(this)},ac:function(s){s.a(this),this._a=s},ad:function(c){c.a(this),this._b=c},a8:function(){return this._a},a9:function(){return this._b},a1:function(M,c){return this.a4(M,c,this.aa())},a2:function(){return this._c.ay()},a7:function(j){return this._c.ak(j)},aa:function(){return 0===this._c.ay()?Y:this._c.as()},a3:function(){this._c.af()},i2:function(M){var H=this.a7(M);return H?new n(H.x,H.y):Y},i1:function(){return this.a2()},i6:function(){var I=this.a8();return new n(I.c(),I.d())},i7:function(){var g=this.a9();return new n(g.c(),g.d())},i8:function(q){this.a8().f(q.x,q.y)},i9:function($){this.a9().f($.x,$.y)},i3:function(U,l,g){var c=this.a7(U);c&&c.a(l,g)},i4:function(r,C){this.a1(r,C)},i5:function(){this.a3()}});var e=function(y){e.superClass.constructor.call(this,y)};X(e,Q,{a5:function(U){return new e(U)},a4:function(S,$,D){var a=new b(S,$);return this.ab(a,D),a},ab:function(q,C){this._c.an(q,this._c.al(C))}});var U=function(){if(2===arguments.length){var K=arguments[0],N=arguments[1];this._s=!1,this._w=30,this._h=30,this._x=K-this._w/2,this._y=N-this._h/2}else{var $=arguments[0];this._s=$._s,this._w=$._w,this._h=$._h,this._x=$._x,this._y=$._y}};X(U,i,{m3:function(){return this.m2(this)},m4:function(){return this._x+this._w/2},m5:function(){return this._y+this._h/2},m6:function(e,E){this._x=e-this._w/2,this._y=E-this._h/2},i1:function(){return this._x},i2:function(){return this._y},i5:function(l,A){this._x=l,this._y=A},i3:function(){return this._w},i4:function(){return this._h},i6:function(K,Y){var O=(this._w-K)/2,w=(this._h-Y)/2;this._x+=O,this._y+=w,this._w=K,this._h=Y},m1:function(o){var v,i,P,a;o.width<=0?(v=this._x,i=this._x+this._w,P=this._y,a=this._y+this._h):(v=$(this._x,o.x),i=h(this._x+this._w,o.x+o.width),P=$(this._y,o.y),a=h(this._y+this._h,o.y+o.height)),o.x=v,o.y=P,o.width=i-v,o.height=a-P}});var t=function(g){g?t.superClass.constructor.call(this,g):t.superClass.constructor.call(this,0,0)};X(t,U,{m2:function(i){return new t(i)}});var q={a2:function(U){var D=fo.a2(sb.a(U.xa()));return q.a4(U,D,q.a3(U,D))},a3:function(W,l){for(var e=W.x9();e.i1();e.i2())l.i7(e.i9(),-1);for(var T=0,L=new mb(W.xa()),n=W.x9();n.i1();n.i2()){var I=n.i9();-1===l.i2(I)&&q.a(I,L,l,T++)}return T},a6:function(m){for(var K=new oc,S=q.a2(m),Y=0;Y<S.length-1;Y++){var I=m.xo(S[Y].x2(),S[Y+1].x3());K.aa(I)}return K},a4:function(g,t,D){for(var v=[],U=0,_=g.x9();D>U;U++)v[U]=new Ti;for(;_.i1();_.i2())v[t.i2(_.i9())].ae(_.i9());return v},a:function(Q,t,y,T){for(t.c(Q),y.i7(Q,T);!t.a();){Q=t.b();for(var F=Q.ag();F;F=F.a8()){var L=F.a3();-1===y.i2(L)&&(y.i7(L,T),t.c(L))}for(var c=Q.ae();c;c=c.a7()){var U=c.a2();-1===y.i2(U)&&(y.i7(U,T),t.c(U))}}},a1:function(H,E,w){var V=new dd(E,w);return V.a8(H),V._i},a5:function(v,l,i){for(var Q=[],I=0;i>I;I++)Q[I]=new oc;for(var h=v.xf();h.i1();h.i2())Q[l.i2(h.i8())].aa(h.i8());return Q},a7:function(o){var m=new oc,W=fo.a3(sb.b(o.xa())),L=fo.a4(sb.a(o.xh())),y=q.a1(o,L,W),G=q.a5(o,L,y);if(G.length>1){for(var b=new Ti,s=0;s<G.length;s++){var r=G[s],Z=Y;if(1===r.ay()){var i=r.c2();1===i.a2().ad()?Z=i.a2():1===i.a3().ad()&&(Z=i.a3())}else{for(var H=r.c1();H.i1();H.i2()){var k=H.i8();if(W.i4(k.a2()))if(Z){if(Z!==k.a2()){Z=Y;break}}else Z=k.a2();if(W.i4(k.a3()))if(Z){if(Z!==k.a3()){Z=Y;break}}else Z=k.a3()}if(Z){var O=r.c2();Z=O.a2()!==Z?O.a2():O.a3()}}Z&&b.aa(Z)}for(var c,d=b.x4();!b.ar();d=c)c=b.x4(),m.ac(o.xo(d,c))}return m}},Df=function(){this._c=0,this._d=0,this._e=0,this._b=!0,this._f=!1};X(Df,i,{a6:function(a){this._f=a},a7:function(h){this._b=h},a8:function(o){0!==o.x0()&&this.a9(o,o.x9().i9())},a9:function(I,U){if(this._xx=I.xk(),this._c=I.xl(),this._d=0,this._e=0,this.a0(U),this._b)for(var L=I.x9();L.i1();L.i2()){var Q=L.i9();this._xx.i1(Q)||(this.a1(Q),this.a0(Q))}I.xi(this._xx),I.xj(this._c)},a0:function(C){var W=++this._d;this._xx.z1(C,Df._B),this.a5(C,W);for(var w=this._f?C.ap():C.af();w.i1();w.i2()){var x=w.i8();if(!this._c.i4(x)){this._c.i7(x,!0);var n=x.a1(C);this._xx.i1(n)?this.a3(x,n,!1):(this.a3(x,n,!0),this.a0(n),this.a2(x,n))}}this.a4(C,W,++this._e),this._xx.z1(C,Df._C)},a5:function(){},a4:function(){},a3:function(){},a2:function(){},a1:function(){}}),Df._B={},Df._C={};var Bb=function(N){this._a=N};X(Bb,Df,{a5:function(C){var t=this._a._ah.i2(C);this._a._ad[t].ae(C)}});var Xk=function(O){this._a=O};X(Xk,Df,{a2:function(N,k){var B=N.a1(k),U=this._a[B.al()],V=this._a[k.al()];V._a+1>U._a?(U._c=U._a,U._b=U._d,U._a=V._a+1,U._d=N):V._a+1>U._c&&(U._c=V._a+1,U._b=N)}});var be=function(V){this._a=V};X(be,Df,{a3:function(z,Z,Q){Q&&z.a2()===Z&&this._a.ac(z)}});var Dq=function(){this._a=0,this._c=0};X(Dq,i,{});var gc=function(){this._a=0};X(gc,i,{a1:function(Y,i){this._a=0;for(var U=i.length-1;U>=0;U--)i[U]=-1;for(var c=Y.x9();c.i1();c.i2()){var O=c.i9();if(0===O.ak()){this.a2(O,O.al(),i);break}}for(var f=Y.x9();f.i1();f.i2()){var B=f.i9(),P=B.al();-1===i[P]&&this.a2(B,P,i)}},a2:function(b,j,y){y[j]=-2;for(var i=b.ag();i;){var G=i.a3(),U=G.al();switch(y[U]){case-1:this.a2(G,U,y);case-2:default:i=i.a8()}}y[j]=this._a++}});var xe={a1:function(I){var R=new os;return R.a8(I),R._n},a2:function(C){var m,n=C.x9(),U=0;for(n.i4();n.i1();n.i2())0===n.i9().ak()&&(m=n.i9(),U++);if(1===U)return m;for(U=0,n.i4();n.i1();n.i2())0===n.i9().ao()&&(m=n.i9(),U++);return 1===U?m:xe.a8(C)},a8:function(L){var j=sb.a(L.x0()),t=fo.a2(j);return xe.a6(L,t)},a6:function(o,M){var I=o.xd(),$=sb.d(1),A=sb.a(o.x0(),-1),h=xe.a4(o,I);xe.a7(I,M,$,A,-1);for(var J=h.c1();J.i1();J.i2())o.x3(J.i8());return $[0]},a7:function(O,_,m,R,H){for(var J=0,c=O.ag();c;c=c.a8()){var G=c.a3(),$=xe.a7(G,_,m,R,H);$>H&&(H=$),J+=R[G.al()]}for(var q=J*(O._g.xa()-1-J),g=O.ag();g;g=g.a8())for(var y=g.a3(),o=g.a8();o;o=o.a8()){var b=o.a3();q+=R[y.al()]*R[b.al()]}return _.i7(O,q),R[O.al()]=J+1,q>H&&(H=q,m[0]=O),H},a4:function(N,E){var T=new oc,g=new be(T);g.a6(!1),g.a9(N,E);for(var t=T.c1();t.i1();t.i2())N.x3(t.i8());return T},a3:function(g){return xe.a4(g,xe.a2(g))}},os=function(){this._n=!0,this.a6(!1)};X(os,Df,{a3:function(b,N,s){s||(this._n=!1)},a1:function(){this._n=!1}});var dd=function(m,D){this._i=0,this._m=D,this._j=m,this._l=!1};X(dd,Df,{a8:function(K){this._h=sb.a(K.x0()),this._k=sb.a(K.x0()),this._g=new mb(K.xh()),dd.superClass.a8.call(this,K)},a5:function(l,c){this._k[l.al()]=this._h[l.al()]=c},a3:function(D,V,w){if(this._g.c(D),!w){var p=D.a1(V);this._h[p.al()]=$(this._h[p.al()],this._k[V.al()])}},a1:function(){this._l=!1},a2:function(B,E){var h=B.a1(E);if(this._h[E.al()]>=this._k[h.al()]){for(;this._g.d()!==B;this._j.i5(this._g.b(),this._i));this._j.i5(this._g.b(),this._i),this._i++,this._g.a()?this._l?this._m.i5(h,!0):this._l=!0:this._m.i5(h,!0)}this._h[h.al()]=$(this._h[h.al()],this._h[E.al()])}});var Or=function(I,P){this._h=!1,this._i=I,this._g=P};X(Or,i,{z1:function(A,S){A._c[this._i]=S},i1:function(j){return j._c[this._i]},i5:function(d,y){d._c[this._i]=y},i4:function(T){return T._c[this._i]},i7:function(X,x){X._c[this._i]=x},i2:function(H){var N=H._c[this._i];return N?N:0},i6:function(x,S){x._c[this._i]=S},i3:function($){var p=$._c[this._i];return p?p:0},c:function(){return this._h},d:function(){this._h=!0}});var rc=function(B,A){this._c=!1,this._d=B,this._b=A};X(rc,i,{i8:function(M,w){M._c[this._d]=w},i1:function(z){return z._c[this._d]},i7:function(g,B){g._c[this._d]=B},i4:function(E){var F=E._c[this._d];return F?F:!1},i5:function(v,t){v._c[this._d]=t},i2:function(_){var y=_._c[this._d];return y?y:0},i6:function(i,J){i._c[this._d]=J},i3:function(U){var J=U._c[this._d];return J?J:0},a:function(){return this._c},b:function(){this._c=!0}});var mn=function(G){this._bb=G,this.i4()};X(mn,i,{i1:function(){return this._aa!=Y},i2:function(){this._aa=this._aa._a},i3:function(){this._aa=this._aa._b},i4:function(){this._aa=this._bb._b},i5:function(){this._aa=this._bb._c},i7:function(){return this._bb.ay()},i6:function(){return this._aa._c}});var Nj=function(H){Nj.superClass.constructor.call(this,H)};X(Nj,mn,{i8:function(){return this.i6()}});var dh=function(H){if(this._id=dh.id(),this._a=0,H)for(H.i4();H.i1();H.i2())this.ae(H.i6())};X(dh,i,{ac:function(C){var R=this.ag(C);return this._b?(this._b._b=R,R._a=this._b,this._b=R):this._b=this._c=R,this._a++,R},ae:function(g){var k=this.ag(g);return this._c?(this._c._a=k,k._b=this._c,this._c=k):this._b=this._c=k,this._a++,k},z1:function(A){A._b=Y,A._a=Y,this._c?(this._c._a=A,A._b=this._c,this._c=A):this._b=this._c=A,this._a++},ad:function(E){E._b=Y,E._a=Y,this._b?(this._b._b=E,E._a=this._b,this._b=E):this._b=this._c=E,this._a++},aa:function(I){return this.ae(I),!0},ab:function(p){for(;p.i1();p.i2())this.ae(p.i6())},ao:function(B,z){if(z===this._b)return this.ac(B);if(z){var A=this.ag(B);return this.aq(A,z),A}return this.ae(B)},aq:function(U,b){if(b)if(b===this._b)this.ad(U);else{if(this._c){var x=b._b;b._b=U,U._a=b,x._a=U,U._b=x}else U._b=Y,U._a=Y,this._b=this._c=U;this._a++}else this.ad(U)},ap:function(e,r){if(r)if(r===this._c)this.z1(e);else{if(this._b){var y=r._a;r._a=e,e._a=y,y._b=e,e._b=r}else e._b=Y,e._a=Y,this._b=this._c=e;this._a++}else this.z1(e)},an:function(v,b){if(b===this._c)return this.ae(v);if(b){var X=this.ag(v);return this.ap(X,b),X}return this.ac(v)},ay:function(){return this._a},ar:function(){return 0===this._a},af:function(){this._b=this._c=Y,this._a=0},am:function(){return this._b._c},at:function(){var H=this.am();return this.aw(this._b),H},as:function(){return this._c._c},au:function(){return this.aw(this._c)},ak:function(X){for(var f=0,E=this._b;E;){if(X===f)return E._c;E=E._a,f++}return Y},aj:function(g){return g._a?g._a:this._b},ai:function(X){return X._b?X._b:this._c},aw:function(f){return f!==this._b?f._b._a=f._a:this._b=f._a,f!==this._c?f._a._b=f._b:this._c=f._b,this._a--,f._c},av:function($){return this.aw($._aa)},ah:function(){return new mn(this)},al:function(X){for(var M=this._b;M;){if(!M._c&&!X)return M;if(M._c===X)return M;M=M._a}return Y},a0:function(){for(var w=sb.d(this._a),n=0,r=this._b;r;)w[n]=r._c,r=r._a,n++;return w},ax:function(){for(var s=this._b;s;s=s._b){var $=s._a;s._a=s._b,s._b=$}var X=this._b;this._b=this._c,this._c=X},a1:function(r){var D=this.a0(),e=0;D.sort(r);for(var c=this._b;c;)c._c=D[e],c=c._a,e++},a2:function(){var I=this.a0();I.sort(sb.c);for(var P=0,x=this._b;x;)x._c=I[P],x=x._a,P++},az:function(P){this._b?P._b&&(this._c._a=P._b,P._b._b=this._c,this._c=P._c):(this._b=P._b,this._c=P._c),this._a+=P._a,P._b=P._c=Y,P._a=0},ag:function(S){return new Hr(S)}}),dh.id=function(){var p=0;return function(){return++p}}();var oc=function(k){oc.superClass.constructor.call(this,k)};X(oc,dh,{c1:function(){return new Nj(this)},c2:function(){return this.am()},c3:function(){return this.at()}});var An=function(){this._c=0};X(An,i,{a:function(h){this._c++,h._b=this._b,h._a=Y,this._b?(this._b._a=h,this._b=h):this._b=this._a=h},b:function(T,v){if(!v)return this.a(T),void 0;var d=v._b;d?d._a=T:this._a=T,T._b=d,T._a=v,v._b=T,this._c++},c:function(f){var N=f._a,S=f._b;this._c--,N?N._b=S:this._b=S,S?S._a=N:this._a=N}});var Ge=function(f,S){this._p=f,this._j=S,this._o=f._o[S]};X(Ge,i,{i1:function(){return this._o!=Y},i2:function(){this._o=this._o._k[this._j]},i3:function(){this._o=this._o._f[this._j]},i4:function(){this._o=this._p._o[this._j]},i5:function(){this._o=this._p._q[this._j]},i7:function(){return this._p._n[this._j]},i6:function(){return this._o},i8:function(){return this._o}});var Hr=function(O){this._c=O};X(Hr,i,{a:function(){return this._a},b:function(){return this._b},c:function(N){this._c=N},d:function(){return this._c}});var _d=function(A,s,y,V){this._r=A,this._s=s,this._q=y,this._p=V};X(_d,i,{i1:function(X){return this._p[X.a5()]},i3:function(i){return this._r[i.a5()]},i2:function(r){return this._s[r.a5()]},i4:function(j){return this._q[j.a5()]},i8:function(K,L){this._p[K.a5()]=L},i6:function(A,o){this._r[A.a5()]=o},i5:function(l,V){this._s[l.a5()]=V},i7:function(y,Y){this._q[y.a5()]=Y}});var mb=function(U){this._a=sb.d(U),this._b=-1};X(mb,i,{d:function(){return this._a[this._b]},b:function(){return this._a[this._b--]},c:function(m){this._a[++this._b]=m},a:function(){return this._b<0}});var Kg=function(){};X(Kg,i,{a0:function(x){this._c=sb.d(x)}});var um=function(P,U,p,W,F,M,D){this._g=0,P.xt(this,U,p,W,F,M,D)};X(um,Kg,{a5:function(){return this._h._u&&this._h.b1(),this._g},a2:function(){return this._d},a3:function(){return this._e},a1:function(q){return this._d!==q?this._d:this._e},a4:function(){for(var f=0;1>=f;f++)this._k[f]=Y,this._f[f]=Y},a8:function(){return this._k[0]},a7:function(){return this._k[1]},a6:function(h,D,g,Y){this.a0(Y),this._h=h,this._k=sb.d(2),this._f=sb.d(2),this._d=D,this._e=g}});var jp=function(V){this._j=0,this._h=V,this.i4()};X(jp,i,{i2:function(){this._k=this._k._k[this._j],this._k||0!==this._j||(this._k=this._h._o[1],this._j=1)},i3:function(){this._k=this._k._f[this._j],this._k||1!==this._j||(this._k=this._h._q[0],this._j=0)},i4:function(){this._k=this._h._o[0],this._k?this._j=0:(this._k=this._h._o[1],this._j=1)},i5:function(){this._k=this._h._q[1],this._k?this._j=1:(this._k=this._h._q[0],this._j=0)},i1:function(){return!!this._k},i6:function(){return this._k},i8:function(){return this._k},i7:function(){return this._h.ad()}});var pc=function(){this._a=Uh._A,this._b=Uh._A,this._c=new P};X(pc,i,{i1:function(){return this._c.size()},i2:function(D){return this._c.get(D)},i3:function(s,T,p){this._c.set(s,new n(T,p))},i4:function(L,A){this._c.add(new n(L,A))},i5:function(){this._c.clear()},i6:function(){return this._a},i7:function(){return this._b},i8:function(U){this._a=U},i9:function(E){this._b=E}});var yd=function(){this._x=0,this._y=0,this._w=0,this._h=0};X(yd,i,{i5:function(P,D){this._x=P,this._y=D},i6:function(E,J){this._w=E,this._h=J},i4:function(){return this._h},i3:function(){return this._w},i1:function(){return this._x},i2:function(){return this._y}});var Xm=function(v,P,L,R){this._m=v,this._n=P,this._l=L,this._k=R};X(Xm,i,{i1:function(o){return this._k[o.al()]},i3:function(k){return this._m[k.al()]},i2:function(r){return this._n[r.al()]},i4:function(f){return this._l[f.al()]},z1:function(S,F){this._k[S.al()]=F},i6:function(G,A){this._m[G.al()]=A},i7:function(Z,x){this._n[Z.al()]=x},i5:function(k,a){this._l[k.al()]=a}});var wl=function(e,O){this._b=e,this._r=O,this._a=[];for(var q=this._b-1;q>=0;q--)this._a.push(q);this._c=new P};X(wl,i,{a1:function(E){var A;if(0===this._a.length){this.a2(E,this._b,this._b+this._r);for(var e=this._b+this._r-1;e>this._b;e--)this._a.push(e);A=this._b,this._b+=this._r}else A=this._a.pop();return A},b:function(I){var _=this.a1(I),j=new Or(_,this);return this._c.add(j),this.a4(I,_),j},c:function(O){var j=this.a1(O),w=new rc(j,this);return this._c.add(w),this.a4(O,j),w},a2:function(F,R,E){for(var H=F._a;H;H=H._a){var O=sb.d(E);sb.f(H._c,O,R),H._c=O}},a3:function(k,P,q){var x=sb.d(q);sb.f(k._c,x,P),k._c=x},a4:function(H,C){for(var Q=H._a;Q;Q=Q._a)Q._c[C]=Y},a5:function(s,T){if(s instanceof Or){var k=s;if(k.c())throw"";k.d();var n=s._i;this._a.indexOf(n)<0&&(this.a4(T,n),this._a.push(n),this._c.remove(s))}},a6:function(X,z){if(X instanceof rc){var E=X;if(E.a())throw"";E.b();var p=E._d;this._a.indexOf(p)<0&&(this.a4(z,p),this._a.push(p),this._c.remove(X))}}});var vs=function(q){this._id=dh.id(),this._p=0,q.xs(this)};X(vs,Kg,{ad:function(){return this._n[0]+this._n[1]},ak:function(){return this._n[1]},ao:function(){return this._n[0]},al:function(){return this._g._y&&this._g.c(),this._p},ag:function(){return this._o[0]},ae:function(){return this._o[1]},af:function(){return new jp(this)},am:function(){return new Ge(this,1)},ap:function(){return new Ge(this,0)},an:function(){return new Qj(this)},aq:function(){return new mo(this,1)},aw:function(){return new mo(this,0)},ah:function(s){for(var r=this._o[0];r;r=r._k[0])if(r.a3()===s)return r;return Y},ai:function(H){for(var o=this._o[1];o;o=o._k[1])if(o.a2()===H)return o;return Y},aj:function(h){var D=this.ah(h);return D||(D=this.ai(h)),D},au:function(O){this.at(O,1,sb.d(this.ak()))},av:function(u){this.at(u,0,sb.d(this.ao()))},as:function(h,v){this.a0(v),this._g=h,this._o=sb.d(2),this._q=sb.d(2),this._n=sb.a(2)},ab:function(i,N,d,p,z){if(!N)return this.aa(i,d,p),void 0;var m;if(m=N._d===N._e?p:this!==N._d?1:0,0===z){var C=N._k[m];i._f[p]=N,i._k[p]=C,N._k[m]=i,C?C._d===C._e?C._f[p]=i:C._f[this!==C._d?1:0]=i:this._q[d]=i}else{var t=N._f[m];i._k[p]=N,i._f[p]=t,N._f[m]=i,t?t._d===t._e?t._k[p]=i:t._k[this!==t._d?1:0]=i:this._o[d]=i}this._n[d]++},aa:function(C,l,L){var m=this._q[l];C._k[L]=Y,m?(C._f[L]=m,m._d===m._e?m._k[L]=C:m._k[this!==m._d?1:0]=C):(this._o[l]=C,C._f[L]=Y),this._q[l]=C,this._n[l]++},ar:function(R,N,q){var y,i;y=R._k[q],i=R._f[q],y?y._f[y._d!==this?1:0]=i:this._q[N]=i,i?i._k[i._d!==this?1:0]=y:this._o[N]=y,this._n[N]--},ac:function(){for(var z=0;1>=z;z++)this._o[z]=Y,this._q[z]=Y,this._n[z]=0},at:function(i,J,p){if(!(this._n[J]<2)){for(var B=this._n[J],R=0,X=this._o[J];X;X=X._k[J])p[R]=X,R++;sb.s(p,B,i);var H=1,h=this._o[J]=p[0];for(h._f[J]=Y;B>H;)X=p[H],X._f[J]=h,h._k[J]=X,H++,h=X;this._q[J]=X,X._k[J]=Y}}});var mo=function(Z,t){mo.superClass.constructor.call(this,Z,t),this._h=1!==t?1:0};X(mo,Ge,{i6:function(){return this.i9()},i9:function(){return 0!==this._h?this._o._e:this._o._d}});var Qj=function(c){Qj.superClass.constructor.call(this,c)};X(Qj,jp,{i6:function(){return this._k.a1(this._h)},i9:function(){return this._k.a1(this._h)}});var Ke=function(B){Ke.superClass.constructor.call(this,B)};X(Ke,mn,{i9:function(){return this.i6()}});var Kr=function(E){this._o=E,this._c=E._a};X(Kr,i,{i1:function(){return this._c!=Y},i2:function(){this._c=this._c._a},i3:function(){this._c=this._c._b},i5:function(){this._c=this._o._b},i4:function(){this._c=this._o._a},i7:function(){return this._o._c},i6:function(){return this._c},i9:function(){return this._c},i8:function(){return this._c}});var Ti=function(o){if(o&&o.length){Ti.superClass.constructor.call(this);for(var B=0;B<o.length;B++)this.ae(o[B])}else Ti.superClass.constructor.call(this,o)};X(Ti,dh,{x1:function(){return new Ke(this)},x2:function(){return this.am()},x3:function(){return this.as()},x4:function(){return this.at()}});var id=function(K){this._d=K,id.superClass.constructor.call(this)};X(id,Ti,{});var ud=function(L){this._a=L,this._b=new oc,this._c=new Ti};X(ud,i,{a:function(){for(var T=this._a.x9();T.i1();T.i2())this.e(T.i9())},b:function(){this.c(),this.d()},c:function(){for(;!this._c.ar();){var E=this._c.x4();this._a.xq(E)||this.g(E)}},d:function(){for(;!this._b.ar();){var z=this._b.c3();this._a.xp(z)||this.f(z)}},e:function(v){for(var J=v.af();J.i1();J.i2())this._b.ac(J.i8()),this._a.h1(J.i8());this._c.ac(v),this._a.h2(v)},f:function(F){this._a.u1(F)},g:function(W){this._a.h3(W)}}),ud.h=function(K,B){for(B.i4();B.i1();B.i2()){var z=B.i8();K.xq(z.a2())||K.h3(z.a2()),K.xq(z.a3())||K.h3(z.a3()),K.xp(z)||K.u1(z)}},ud.i=function(u,V){for(V.i4();V.i1();V.i2()){var w=V.i8();u.xp(w)&&u.h1(w),0===w.a2().ad()&&u.h2(w.a2()),0===w.a3().ad()&&u.h2(w.a3())}};var Bn=function(){var C=arguments;this._g=C[0],this._f=this._g.xk(),this._h=this._g.xk(),this._d=new dh,this._e=0,1!==C.length&&this.a(C[1],C[2],C[3],C[4])};X(Bn,i,{a:function(T,e,X,f){for(var I=sb.d(X-e+1),p=e,R=0;X>=p;p++)I[p]=new id(p);for(var l=this._g.x9();l.i1();l.i2()){var S=l.i9();(!f||f.i4(S))&&(this._f.z1(S,I[T.i2(S)-e].ac(S)),this._e++)}for(;R<I.length;R++)for(var P=I[R],y=this._d.ae(P),A=P.x1();A.i1();A.i2())this._h.z1(A.i9(),y)},c:function(){this._g.xi(this._h),this._g.xi(this._f)},e:function(){return 0===this._e},g:function(){for(;this._d.am().ar();this._d.at());this._e--;var T=this._d.am().x4();return this._h.z1(T,Y),this._f.z1(T,Y),T},f:function(){for(;this._d.as().ar();this._d.au());this._e--;var r=this._d.as().x4();return this._h.z1(r,Y),this._f.z1(r,Y),r},d:function(t){var u=this._f.i1(t),p=this._h.i1(t),n=p.d(),L=Y,s=p.a();s?(L=s.d(),this._h.z1(t,s)):(L=new id(n._d+1),this._h.z1(t,this._d.ae(L))),n.aw(u),this._f.z1(t,L.ac(t))},b:function(R){var z=this._f.i1(R),D=this._h.i1(R),m=D.d(),X=Y,Z=D.b();Z?(X=Z.d(),this._h.z1(R,Z)):(X=new id(m._d-1),this._h.z1(R,this._d.ac(X))),m.aw(z),this._f.z1(R,X.ac(R))}});var fo={a1:function(Q){return new Xm(Q,Y,Y,Y)},a2:function(i){return new Xm(Y,i,Y,Y)},a3:function(K){return new Xm(Y,Y,K,Y)},a4:function(N){return new _d(Y,N,Y,Y)},a5:function(X){return new _d(Y,Y,X,Y)},a6:function(n){return new _d(Y,Y,Y,n)}},Qb=function(){var C=arguments;if(2===C.length){this._a=new dh,this._b=new dh,this._c=0;var O=C[0],D=C[1],B=new tr(O._j2.gj(D)/2,0);this._a.ac(B),B=new tr(O._j2.gj(D)/2,0),this._b.ac(B)}else this._a=C[1],this._b=C[2],this._c=C[3]};X(Qb,i,{});var tr=function(n,s){this._b=n,this._a=s};X(tr,i,{});var zc=function(){this._cx=!0,this._cs=new mg,this._ct=new ho,this._cw=new uj};X(zc,i,{i5:function(U){this._cx=U},k:function(){var E=new Fq(this);return this._cx&&(this._cs.w1(E),E=this._cs),this._cw.w1(E),E=this._cw,this._ct.w1(E),E=this._ct},i2:function(Z){this.k().i2(Z)},i1:function(O){return this.k().i1(O)}});var Lp=function(){Lp.superClass.constructor.call(this),this._jv=20,this._jw=40,this._jx=function(d,A){var D=d.a3(),m=A.a3(),e=D._g;return G(100*(e.g5(D)-e.g5(m)))}};X(Lp,zc,{i4:function($){return xe.a1($)},i3:function(r){if(!this.i4(r))throw"";var f=xe.a3(r);if(this._j2=r,this._j3=new Rc(r),se.c(r),this._jy=r.xk(),!r.xb()){this.bu();var H=this._j3.c1();this.f(H),this.b(this._j3),this.c(this._j3)}for(var p;!f.ar();r.x3(p))p=f.c3(),se.b(r.g2(p))},bu:function(){if(this._jx)for(var O=this._j2.x9();O.i1();O.i2())O.i9().av(this._jx)},c:function(_){for(var W=this.a2(_),f=sb.a(W.length),c=0;c<W.length;c++){for(var t=W[c],b=0,i=t.ah();i.i1();i.i2()){var O=i.i6();b=h(b,this._j2.g9(O))}f[c]=b}for(var v=-this._jw,U=0;U<W.length;U++){v+=this._jw+f[U];for(var C=W[U],D=C.ah();D.i1();D.i2()){var g=D.i6();this._j2.s2(g,this._j2.g5(g),v-f[U]/2)}}},a2:function(p){for(var Y=sb.d(p.b()),C=0,U=p.b();U>C;C++)Y[C]=new dh;return p.c1(),this.a1(p.c1(),0,Y),Y},a1:function(c,C,d){d[C].ae(c);for(var Y=c.aw();Y.i1();Y.i2())this.a1(Y.i9(),C+1,d)},b:function(T){var i=T.c1();this._j2.s2(i,0,this._j2.g6(i)),this.g(i)},g:function(Z){for(var U=Z.aw();U.i1();U.i2()){var g=U.i9(),J=this._jy.i1(g);this._j2.s2(g,this._j2.g5(Z)+J._c,this._j2.g6(g)),this.g(g)}},f:function(G){if(this._j3.c2(G))return this._jy.z1(G,new Qb(this,G)),void 0;var T=G.aw(),c=T.i9();T.i2(),this.f(c);var y=this._jy.i1(c),U=new Qb(this,y._a,y._b,0);if(!T.i1())return U._a.ac(new tr(this._j2.gj(G)/2,0)),U._b.ac(new tr(this._j2.gj(G)/2,0)),this._jy.z1(G,U),void 0;for(;T.i1();){c=T.i9(),T.i2(),this.f(c),y=this._jy.i1(c);for(var g=U._b.ah(),W=y._a.ah(),v=2147483647,Z=0,t=0;g.i1()&&W.i1();){var V=g.i6();g.i2();var e=W.i6();W.i2(),t+=V._a,Z+=e._a,v=$(v,Z-t-V._b-e._b)}y._c=this._jv-v,Z+=y._c;var O=y._b.am();if(O._a=y._c,g.i1()&&!W.i1())for(var H=t-this.a3(y._b);g.i1();H=0){var l=g.i6();g.i2(),y._b.ae(new tr(l._b,l._a+H))}else if(!g.i1()&&W.i1()){var C=this.a3(U._a);for(C=Z-C;W.i1();C=0){var b=W.i6();W.i2(),U._a.ae(new tr(b._b,b._a+C))}}U._b=y._b}this._jy.z1(G,U);for(var w=-y._c/2,P=G.aw();P.i1();){var N=P.i9();P.i2();var Q=this._jy.i1(N);Q._c+=w;var i=Q._b.am();i._a+=w,i=Q._a.am(),i._a+=w}U._a.ac(new tr(this._j2.gj(G)/2,0)),U._b.ac(new tr(this._j2.gj(G)/2,0))},a3:function(W){for(var J=0,E=W.ah();E.i1();E.i2()){var s=E.i6();J+=s._a}return J}});var Rc=function(p){this._b=p,this.a()};X(Rc,i,{c1:function(){return this._a||this.a(),this._a},b:function(){return this._a?this.d(this._a):-1},d:function(r){for(var M=0,i=r.aw();i.i1();i.i2())M=h(M,this.d(i.i9()));return M+1},c2:function(g){return 0===g.ao()},a:function(){for(var F=this._b.x9();F.i1();F.i2())if(0===F.i9().ak())return this._a=F.i9(),void 0}});var lf=function(u){this._d=0,this._e=0,this._f=0,this._a=0,this._b=0,this._g=u,this._c=new dh};X(lf,i,{a:function(){return this._d+this._e+this._f}});var Cj=function(){Cj.superClass.constructor.call(this),this._kl=340,this._km=360,this._kk=40,this._ko=.5};X(Cj,zc,{ic:function(){return this._km},ia:function(){return this._kl},i9:function(){return this._ko},i3:function(g){if(!xe.a1(g))throw"";this._a=g;var i=this.i8(),C=xe.a4(g,i);se.c(g),this._kn=sb.d(g.x0());for(var N=g.x9();N.i1();N.i2()){var s=N.i9();s!==i?this.aa(s,new lf(this._kk+this.q(s.aq().i9()))):this.aa(s,new lf(this._kk))}this.s(i),g.s2(i,0,0),this.t(i);for(var z;!C.ar();g.x3(z))z=C.c3()},i4:function(P){return xe.a1(P)},i0:function(T){return this._kn[T.al()]},i8:function(){return xe.a2(this._a)},i7:function(w){for(var Q,G=this.ib(w);;){if(Q=this.i6(w),G>=Q)break;for(var O=w.aw();O.i1();O.i2()){var d=O.i9();this.i0(d)._g*=1+this._ko}}var k=(G-Q)/(2*w.ao());Q=0;for(var Z=w.aw();Z.i1();Z.i2()){var C=this.i0(Z.i9());C._d+=k,C._e+=k,Q+=C._d+C._e}this.id(w)},id:function(a){for(var p=sb.d(a.ao()),E=0,e=a.ap();e.i1();)p[E]=e.i8(),e.i2(),E++;var Y=this;p.sort(function(H,O){var z=H.a3(),G=O.a3(),s=Y.i0(z).a()-Y.i0(G).a();return s>0?1:s>=0?0:-1});for(var X=0;X<p.length;X++)this._a.h1(p[X]);for(var F=0;F<p.length;F+=2)this._a.u1(p[F]);for(E=p.length-1,0===E%2&&E--;E>0;E-=2)this._a.u1(p[E])},ib:function(E){return 0===E.ak()?this._km:2===E.ao()?$(180,this._kl):this._kl},i6:function(q){for(var P=0,o=q.ap();o.i1();o.i2()){for(var i,H=o.i8(),X=H.a3(),v=this.i0(X),E=-v._g,U=v._b,b=v._c,h=0,e=h+1,y=b._b,_=y.d();e>h;e=(i.y-U)/(i.x-E))i=_,y=b.ai(y),_=y.d(),h=(_.y-i.y)/(_.x-i.x);for(v._d=180*-z(e)/W,h=0,e=h-1,y=b._b,_=y.d();y.a().d().x===_.x;_=y.d())y=y.a();for(var t;h>e;e=(t.y-U)/(t.x-E))t=_,y=b.aj(y),_=y.d(),h=(_.y-t.y)/(_.x-t.x);v._e=180*z(e)/W,P+=v._d+v._e}return P},aa:function(W,t){this._kn[W.al()]=t},p:function(G){var Z=this.i0(G),K=new dh,h=2*this.q(G);K.aa(new n(0,0)),K.aa(new n(0,h)),K.aa(new n(h,h)),K.aa(new n(h,0)),Z._c=K,Z._a=h/2,Z._b=h/2},r:function(S){if(0===S.ao())this.p(S);else{var I=this.i0(S),V=this.q(S),q=new dh;q.aa(new n(-V,-V)),q.aa(new n(-V,V)),q.aa(new n(V,-V)),q.aa(new n(V,V));for(var A=S.aw();A.i1();A.i2()){var g=this.i0(A.i9());q.az(g._c)}for(var c=Uh.h(q),F=p,Z=p,w=O,j=O,W=c.ah();W.i1();W.i2()){var J=W.i6();J.x<F&&(F=J.x),J.x>w&&(w=J.x),J.y<Z&&(Z=J.y),J.y>j&&(j=J.y)}for(var i=new dh,U=c.ah();U.i1();U.i2()){var E=U.i6();i.aa(new n(E.x-F,E.y-Z))}I._c=i,I._a=-F,I._b=-Z}},s:function(j){if(0===j.ao())this.r(j);else{for(var K=j.aw();K.i1();K.i2())this.s(K.i9());this.i7(j);for(var k=0,f=j.aw();f.i1();f.i2()){var C=f.i9(),U=this.i0(C),Y=180-(360-this.ib(j))/2-k-(U._e+U._f);k+=U.a(),Y=Y/180*W;for(var z=B(Y),P=E(Y),O=U._c._b;O;O=O.a()){var $=O.d(),t=$.x+U._g,J=$.y-U._b,v=new n(t*P-z*J,t*z+P*J);O.c(v)}var N=U._a+U._g;U._a=N*P,U._b=N*z}this.r(j)}},t:function(L){var N=this._a.g4(L),m=0;if(L.ak()>0){var n=L.aq().i9(),U=this._a.g4(n);m=W+o(U.y-N.y,U.x-N.x)}for(var s=L.aw();s.i1();s.i2()){var Q=s.i9(),H=this.i0(Q);if(0!==m){var i=E(m),d=B(m),k=H._a*i-d*H._b,y=H._a*d+i*H._b;H._a=k,H._b=y}this._a.s2(Q,N.x+H._a,N.y+H._b),this.t(Q)}},q:function(r){return 1.41*(h(this._a.gj(r),this._a.g9(r))/2)}});var Pi=function(){};X(Pi,i,{i2:function(J){return J.ad()},i1:u,i3:u,i4:u});var Re=function(i){this._a=i};X(Re,i,{i2:function(i){for(var C=0,p=i.an();p.i1();p.i2())this._a.i1(p.i9())&&C++;return C},i4:function(j){return this._a.i1(j)==Y},i1:u,i3:u});var Wf=function(){Wf.superClass.constructor.call(this),this._kq=!1,this._kp=90};X(Wf,Cj,{a:function(r,z){this._kr=z,this._ks=r,this._kq=!0},i7:function(X){if(!this.u(X))return Wf.superClass.i7.call(this,X),void 0;for(var V=this.i9(),S=this.ib(X),P=(360-S)/2+S,i=new oc(X.ap());;){var p,O,z=this.i6(X),D=i._b;for(z=(360-S)/2;D;D=D.a()){var R=D.d(),T=R.a3(),j=this.i0(T),U=this._ks.i3(R),m=U-(z+j._e);if(m>=0&&U+j._d>=P&&(m=z+j.a()<=P?P-z-j.a():2*(P-(U+j._d))),j._f=0,m>=0)j._f=m,p=D,O=j;else{for(-m>j._d+j._e?m=(j._d+j._e)/2:m/=-2,z-=m,P>=z&&z+j.a()>P&&(z+=m,m=z+j.a()-P,z-=m);p&&m>O._f;O=this.i0(p.d().a3()))if(m-=O._f,O._f=0,p=p.b(),!p){O=Y;break}p?O._f-=m:z+=m}z+=j.a()}if(P>=z){for(var C=0,s=(360-S)/2,B=X.ap();B.i1();B.i2()){var o=B.i8(),b=o.a3(),q=this._ks.i3(o),h=this.i0(b),u=s+h._f+h._e;C<k(u-q)&&(C=k(u-q)),s+=h.a()}if(C<=this._kp)break}for(var M=X.aw();M.i1();M.i2()){var f=M.i9();this.i0(f)._g*=1+V}}},ib:function(O){return this.u(O)?0===O.ak()?this.ic():this.ia():Wf.superClass.ib.call(this,O)},u:function(F){return this._kq&&0!==F.ao()?this._ks.i1(F.ag())!=Y:!1}});var jm=function(x){this._a=x};X(jm,i,{i1:function(T){return this._a.i1(T)},i2:u,i3:u,i4:u});var wn=function(){};X(wn,i,{w1:function(Y){this._bb=Y},w2:function(){return this._bb},w4:function(K){this._bb&&this._bb.i2(K)},w3:function(t){return this._bb?this._bb.i1(t):!0}});var ho=function(){this._cg=45,this._ce=400,this._ch=400,this._cf=0};X(ho,wn,{i1:function(I){if(this.w2()){for(var o=!0,$=I.xk(),F=q.a3(I,$),h=sb.d(F),l=sb.d(F),S=0;F>S;S++)h[S]=new Ti,l[S]=new oc;for(var s=I.xf();s.i1();s.i2()){var O=s.i8();l[$.i2(O.a2())].aa(O),I.h1(O)}for(var t=I.x9();t.i1();t.i2()){var L=t.i9();h[$.i2(L)].aa(L),I.h2(t.i9())}for(var z=0;F>z;z++){for(var K=h[z].x1();K.i1();K.i2())I.h3(K.i9());for(var w=l[z].c1();w.i1();w.i2())I.u1(w.i8());o=this.w3(I);for(var R=l[z].c1();R.i1();R.i2())I.h1(R.i8());for(var c=h[z].x1();c.i1();c.i2())I.h2(c.i9());if(!o)break}for(var A=0;F>A;A++)for(var Q=h[A].x1();Q.i1();Q.i2())I.h3(Q.i9());for(var C=0;F>C;C++)for(var W=l[C].c1();W.i1();W.i2())I.u1(W.i8());return I.xi($),o}return!0},i2:function(U){if(!U.xb()){for(var T=U.xk(),A=q.a3(U,T),g=sb.d(A),r=sb.d(A),O=sb.d(A),V=sb.d(A),i=0;A>i;i++)g[i]=new Ti,r[i]=new oc;for(var K=U.xf();K.i1();K.i2()){var e=K.i8();r[T.i2(e.a2())].aa(e),U.h1(e)}for(var p=U.x9();p.i1();p.i2()){var M=p.i9();g[T.i2(M)].aa(M),U.h2(p.i9())
}for(var H=0;A>H;H++){for(var s=g[H].x1();s.i1();s.i2())U.h3(s.i9());for(var t=r[H].c1();t.i1();t.i2())U.u1(t.i8());this.w4(U);var z=U.g3();O[H]=new Z(z.x,z.y,z.width,z.height);var d={};if(V[H]=d,this._cf>0){var $=this._cg+v((z.width+1)/this._cf)*this._cf,F=this._cg+v((z.height+1)/this._cf)*this._cf;d.x=z.x,d.y=z.y,d.width=$,d.height=F}else d.x=z.x,d.y=z.y,d.width=z.width+this._cg,d.height=z.height+this._cg;for(var Q=r[H].c1();Q.i1();Q.i2())U.h1(Q.i8());for(var c=g[H].x1();c.i1();c.i2())U.h2(c.i9())}for(var h=0;A>h;h++)for(var m=g[h].x1();m.i1();m.i2())U.h3(m.i9());for(var E=0;A>E;E++)for(var B=r[E].c1();B.i1();B.i2())U.u1(B.i8());if(se.a(V,Y,this._ce/this._ch),this._cf<=0)for(var L=0;L<V.length;L++)this.w5(U,g[L],r[L],new n(V[L].x,V[L].y),O[L]);else for(var l=0;l<V.length;l++){var J=G((V[l].x-O[l].x)/this._cf)*this._cf,_=G((V[l].y-O[l].y)/this._cf)*this._cf,X=O[l].x+J,k=O[l].y+_;this.w5(U,g[l],r[l],new n(X,k),O[l])}U.xi(T)}},w5:function(F,B,l,t,x){for(var z=-x.x+t.x,k=-x.y+t.y,u=B.x1();u.i1();u.i2()){var w=F.ga(u.i9());F.s4(u.i9(),new n(w.x+z,w.y+k))}for(var b=l.c1();b.i1();b.i2()){for(var o=b.i8(),e=new P,W=F.gp(o).c();W.i1();W.i2()){var q=W.i6();e.add(new n(q.x+z,q.y+k))}F.s5(o,new S(e))}}});var uj=function(){};X(uj,wn,{i1:function(N){return this.w3(N)},i2:function(E){this.w7(E),this.w2()&&this.w4(E),this.w6(E)},w7:function(B){this.e(B),this.k(B),this.i(B)},e:function(l){for(var T=l.x9();T.i1();T.i2()){var O=l.g4(T.i9());l.s1(T.i9(),O)}},w6:function(e){this.l(e),this.j(e),this.f(e)},l:function(s){for(var R=s.x9();R.i1();R.i2()){var a=s.g4(R.i9());s.s1(R.i9(),a)}},j:function(u){for(var J=u.xf();J.i1();J.i2()){var A=u.g7(J.i8()),g=A.i6();A.i8(g),g=A.i7(),A.i9(g);for(var k=0;k<A.i1();k++){var i=A.i2(k);A.i3(k,i.x,i.y)}}},k:function(b){for(var r=b.xf();r.i1();r.i2()){var a=b.g7(r.i8()),A=a.i6();a.i8(A),A=a.i7(),a.i9(A);for(var $=0;$<a.i1();$++){var m=a.i2($);a.i3($,m.x,m.y)}}},f:function(H){this._ca&&(H.x1("A",this._ca),this._ca=Y,this._b6=Y),this._b8&&(H.x1("B",this._b8),this._b8=Y,this._b9=Y)},i:function(N){this._ca=N.xc("A"),this._ca&&(this._b6=new jm(this._ca),N.x1("A",this._b6)),this._b8=N.xc("B"),this._b8&&(this._b9=new jm(this._b8),N.x1("B",this._b9))}});var mg=function(){this._a=new oc,this._c=10};X(mg,wn,{i2:function(I){this._b=I.xl(),this.w9(I),this.w4(I),this.c(I),this.w8(I,this._b),I.xj(this._b)},i1:function(k){if(this.w2()){this._b=k.xl(),this.w9(k);var g=this.w3(k);return this.c(k),k.xj(this._b),g}return!0},w8:function(n,w){for(var f=n.xf();f.i1();f.i2()){var H=f.i8();w.i1(H)&&se.g(n,H,w.i1(H),this._c)}},w9:function(f){for(var y=f.xk(),W=f.x9();W.i1();W.i2()){for(var x=W.i9(),T=x.af();T.i1();T.i2()){var l=T.i8(),O=l.a1(x),i=y.i1(O);if(i!==l)if(i){this._b.i1(i)||this._b.i8(i,new oc);var h=this._b.i1(i);h.aa(l),this._a.ac(l),f.h1(l)}else y.z1(O,l)}for(var G=x.af();G.i1();G.i2()){var j=G.i8(),S=j.a1(x);y.z1(S,Y)}}f.xi(y)},c:function(r){for(;!this._a.ar();r.u1(this._a.c3()));}});var Fq=function(o){this._a=o};X(Fq,i,{i2:function(N){this._a.i3(N)},i1:function(S){return this._a.i4(S)}});var of=function(){of.superClass.constructor.call(this),this._jo=30,this._jp=new sh,this._jt=5};X(of,zc,{i4:function(){return!0},i3:function(O){this._ju=O,se.c(O);for(var H=this._jp.i1(O),q=0,M=O.x9();M.i1();M.i2())q=h(q,this.e(M.i9()));q<this._jt&&(q=this._jt),this.a(H,q)},a:function(G,c){var L=G.i7(),n=2*W/L,z=0,p=sb.a(L),X=0;for(G.i4();L>X;)p[X]=this.e(G.i9())+this._jo,z+=p[X],X++,G.i2();var F=z/L,Z=z/r;c>Z&&(Z=c),G.i4();for(var l=0,k=0;L>k;){var x=n/F*p[k];l+=x/2;var A=E(l)*Z,M=B(l)*Z;l+=x/2,this._ju.s2(G.i9(),A,M),k++,G.i2()}return Z},e:function(S){var B=this._ju.gj(S),u=this._ju.g9(S);return u>=B?u:B}});var bn=function(){bn.superClass.constructor.call(this),this._jm=new of,this._jk=new Wf};X(bn,zc,{i4:function(){return!0},i3:function(u){if(!(u.x0()<2)){this._jn=u,se.c(this._jn),se.e(this._jn);var h=new xd(this._jn);h.a1(),h.h();var n=new ud(this._jn);n.a();for(var R=h.x9();R.i1();R.i2()){var A=R.i9(),U=h.c2(A);if(U.ay()>1){var X=h.d1(A);ud.h(this._jn,X.c1()),this._jm.i3(this._jn);var O=this._jn.g3();h.s7(A,O.width,O.height)}else if(1===U.ay()){var Y=U.x2();h.s8(A,this._jn.gm(Y)),this._jn.s2(Y,0,0)}else h.s7(A,1,1);ud.i(this._jn,this._jn.xf())}n.b();var K=this.a7(h);xe.a4(h,K);var M=h.xk(),a=h.xl();this.a2(h,a,M),this.a1(h,a),this.a3(h,K,a),this._jk.a(a,M),this._jk.i3(h),this.a5(h,K,M);for(var W=h.x9();W.i1();W.i2())for(var x=W.i9(),r=h.g4(x),e=h.c2(x).x1();e.i1();e.i2()){var C=e.i9();this._jn.s2(C,r.x+this._jn.g5(C),r.y+this._jn.g6(C))}}},a7:function(p){for(var d,H=-1,_=p.x9();_.i1();_.i2()){var j=_.i9();p.c2(j).ay()>H&&(d=j,H=p.c2(j).ay())}return d},a1:function(o,J){for(var c=function(W,p){var e=J.i3(W)-J.i3(p);return e>0?1:e>=0?0:-1},Q=o.x9();Q.i1();Q.i2())Q.i9().av(c)},a2:function(E,O,b){for(var A=sb.a(this._jn.x0()),Z=E.x9();Z.i1();Z.i2())for(var w=Z.i9(),G=E.c2(w),v=G.x1();v.i1();v.i2())A[v.i9().al()]=w.al();this.a4(E,xe.a2(E),A,O,b)},a3:function(H,N,U){if(H.c2(N).ay()>1){for(var Q=0,O=0,d=0,o=N.ap();o.i1();o.i2()){var P=o.i8(),f=U.i3(P);f-Q>O&&(O=f-Q,d=(Q+f)/2),Q=f}360-Q>O&&(d=(360+Q)/2),this.a6(H,N,d);for(var A=N.ap();A.i1();A.i2()){var y=A.i8(),X=U.i3(y);for(X-=d;0>X;X+=360);U.i6(y,X)}N.av(function(w,i){var y=U.i3(w)-U.i3(i);return y>0?1:y>=0?0:-1})}},a4:function(T,l,a,w,C){for(var H=l.al(),S=C.i3(l),J=l.ap();J.i1();J.i2()){for(var z=J.i8(),p=T.b(z),G=0,s=0,Y=0,b=0,t=p.c1();t.i1();t.i2()){var _,r,y=t.i8();a[y.a2().al()]===H?(_=y.a2(),r=y.a3()):(_=y.a3(),r=y.a2()),Y-=this._jn.g5(_),b+=this._jn.g6(_),G-=this._jn.g5(r),s+=this._jn.g6(r)}if(0!==Y||0!==b){var x;for(x=180*o(b,Y)/W-S;0>x;x+=360);w.i6(z,x)}if(0!==G&&0!==s){var N=180*o(s,G)/W;0>N&&(N+=360),C.i6(z.a3(),N)}this.a4(T,z.a3(),a,w,C)}},a5:function(B,a,S){for(var x=B.g4(a),m=a.ap();m.i1();m.i2()){var A=m.i8(),T=A.a3(),G=B.g4(T),L=180*o(G.y-x.y,G.x-x.x)/W;S.i1(T)&&(L+=S.i3(T)),this.a6(B,T,L),this.a5(B,T,S)}},a6:function(g,H,K){K=K/180*W;var z=g.c2(H);if(!(z.ay()<=1))for(var a=z.x1();a.i1();a.i2()){var O=a.i9(),Q=this._jn.g5(O),T=this._jn.g6(O),A=E(K),e=B(K),n=Q*A-e*T,m=Q*e+A*T;this._jn.s2(O,n,m)}}});var El=function(){this._a=(new Date).getTime()};X(El,i,{b:function(){return(new Date).getTime()-this._a}});var Uh={_A:new n(0,0),b:function(b,q,t){return Uh.c(b.x,b.y,q.x,q.y,t.x,t.y)},c:function(z,Y,P,R,k,g){P-=z,R-=Y,k-=z,g-=Y;var $=k*R-g*P;return $>=0?0>=$?0:-1:1},d:function(z,b,o){return Uh.b(z,b,o)>0},f:function(b,v,I){return Uh.b(b,v,I)<0},g:function(o,G,L){return 0===Uh.b(o,G,L)},h:function(A){return Uh.i(A)},i:function(Z){var f=new dh(Z.ah()),w=new dh;if(f.a2(),f.ar())return w;var $=f.at();for(w.ae($);!f.ar()&&$.equals(f.am());f.at());if(f.ar())return w;$=f.at();for(var r=w.ae($),i=f.ah();i.i1();i.i2()){var S=i.i6();if(!S.equals($))if($=S,2===w.ay()&&Uh.g(w.am(),w.as(),S))r.c(S);else{var Y;for(Y=r;!Uh.f(w.ai(Y).d(),Y.d(),S);Y=w.ai(Y));var A;for(A=r;!Uh.d(w.aj(A).d(),A.d(),S);A=w.aj(A));for(;A!==w.aj(Y);w.aw(w.aj(Y)));r=w.an(S,Y)}}return w},j:function(){return Uh.k(p)},k:function(b){return G(D()*b)},l:function(d,z){return D()*(z-d)+d}},sh=function(){};X(sh,i,{i1:function(y){this._b=y;var l=new oc;l=q.a6(y),l.az(q.a7(y));for(var S=this.a1();!l.ar();y.x5(l.c3()));return S.x1()},a1:function(){if(this._b.x0()<3)return new Ti(this._b.x9());for(var j=this._b.xk(),N=this._b.xk(),t=this._b.xl(),n=new Bn(this._b,new Pi,0,this.a3(this._b)),X=this._b.x0(),x=new oc,u=new oc,P=new ud(this._b);X>3;X--){for(var V=n.g(),q=V.an();q.i1();q.i2())j.z1(q.i9(),X),N.i5(q.i9(),!1);for(var E=V.an();E.i1();E.i2())for(var r=E.i9(),R=r.ap();R.i1();R.i2()){var k=R.i8();j.i2(k.a3())===X&&(u.aa(k),N.i5(k.a2(),!0),N.i5(k.a3(),!0))}if(u.ay()<V.ad()-1){for(var G=Y,g=V.an();g.i1();g.i2()){var A=g.i9();if(j.i2(A)===X&&!N.i4(A))if(G){var z=this._b.xo(G,A);t.i7(z,!0),u.aa(z),G=Y}else G=A}if(G)for(var d=V.an();d.i1();d.i2()){var s=d.i9();if(s!==G&&!s.aj(G)){var c=this._b.xo(G,s);t.i7(c,!0),u.aa(c);break}}if(u.ay()<V.ad()-1){for(var T,U=2147483647,l=V.an();l.i1();l.i2()){var J=l.i9();J.ad()<U&&(T=J,U=J.ad())}for(var L=V.an();L.i1();L.i2()){var S=L.i9();if(!T.aj(S)&&T!==S){var o=this._b.xo(T,S);if(t.i7(o,!0),u.aa(o),u.ay()>=V.ad()-1)break}}}}for(var Q=V.an();Q.i1();Q.i2())n.b(Q.i9());for(var v=u.c1();v.i1();v.i2()){var y=v.i8();t.i4(y)&&(n.d(y.a2()),n.d(y.a3()))}x.az(u),P.e(V)}P.b(),n.c();for(var M=x.c1();M.i1();M.i2()){var Z=M.i8();Z._h&&(t.i4(Z)?this._b.x5(Z):this._b.h1(Z))}var W,w=this.a4(this._b),I=new Ti,e=w.ak(0),O=w.ak(1);W=e.a2()===O.a2()||e.a2()===O.a3()?e.a3():e.a2(),I.aa(W);for(var f=w.c1();f.i1();f.i2()){var b=f.i8();W=b.a1(W),I.aa(W)}for(var h=x.c1();h.i1();h.i2()){var i=h.i8();t.i4(i)||i._h||this._b.u1(i)}return this._b.xi(N),this._b.xj(t),this._b.xi(j),this.a2(I),I},a2:function(e){if(e.ay()<this._b.x0()){for(var A=this._b.xk(),N=e._b;N;N=N.a()){var p=N.d();A.z1(p,N)}for(var d=new Bn(this._b,new Re(A),0,e.ay(),new Re(A));!d.e();){for(var c=d.f(),o=c.an();o.i1();o.i2()){var $=o.i9();if(A.i1($)){var k,R=A.i1($),I=e.ai(R).d();k=c.aj(I)?e.ao(c,R):e.an(c,R),A.z1(c,k);break}}for(var i=c.an();i.i1();i.i2()){var w=i.i9();A.i1(w)||d.d(w)}}this._b.xi(A),d.c()}},a3:function(N){for(var c=0,q=N.x9();q.i1();q.i2())c=h(c,q.i9().ad());return c},a4:function(i){for(var S=[],I=0,Z=i.x0();Z>I;I++)S[I]=new Dq;var d=new Xk(S);d.a6(!1),d.a8(i);for(var H,C=-1,e=i.x9();e.i1();e.i2()){var Q=e.i9(),K=S[Q.al()];K._a+K._c>C&&(C=K._a+K._c,H=Q)}for(var _=new oc,s=H,V=S[s.al()]._d;V;V=S[s.al()]._d)_.ac(V),s=V.a1(s);s=H;for(var h=S[s.al()]._b;h;h=S[s.al()]._d)_.ae(h),s=h.a1(s);return _}});var oe=function(){this._v=new An,this._x=new An,this._z=new wl(3,5),this._w=new wl(3,5),this._y=!1,this._u=!1,this._t={}};X(oe,i,{xm:function(){var z=new vs(this);return z},xo:function(p,V){return this.xn(p,Y,V,Y,0,0)},xn:function(X,r,k,H,w,K){return new um(this,X,r,k,H,w,K)},x4:function(O){this.b3(O)},b3:function(G){for(var I;I=G._o[0];)this.x5(I);for(;I=G._o[1];)this.x5(I);this._v.c(G),G._g=Y,this._y=!0},x5:function(t){this.a11(t)},a11:function(S){if(S._h!==this)throw"";this.a12(S,S.a2(),S.a3()),this._x.c(S),S._h=Y,this._u=!0},x7:function(O){O._p=this._v._c,O._g=this,O.ac(),O._c.length<this._z._b&&this._z.a3(O,O._c.length,this._z._b),this._v.a(O),this._y=!0},x8:function(P){if(P._h)throw"";P._c.length<this._w._b&&this._w.a3(P,P._c.length,this._w._b),P._a&&P._a._h===this?this._x.b(P,P._a):this._x.a(P),P._h=this,P.a4(),this.b2(P,P.a2(),Y,P.a3(),Y,0,0),this._u=!0},xr:function(e,V,f){var X=e.a2(),S=e.a3();e._h?(X!==V&&(X.ar(e,0,0),e._d=V,V.ab(e,Y,0,0,0)),S!==f&&(S.ar(e,1,1),e._e=f,f.ab(e,Y,1,1,0))):(e._d=V,e._e=f)},x3:function(Q){this.xr(Q,Q.a3(),Q.a2())},h1:function(G){this.a11(G)},u1:function(K){this.x8(K)},h2:function($){this.x4($)},h3:function(Q){this.x7(Q)},xa:function(){return this._v._c},x0:function(){return this._v._c},xh:function(){return this._x._c},xg:function(){return this._x._c},xb:function(){return 0===this._v._c},xq:function(q){return q._g===this},xp:function($){return $._h===this},xd:function(){return this._v._a},x9:function(){return new Kr(this._v)},xf:function(){return new Kr(this._x)},x2:function(B,n){var R=sb.d(this.xh());if(B&&n)for(var x=this.x9();x.i1();x.i2())x.i9().at(B,1,R),x.i9().at(n,0,R);else if(!n&&B)for(var L=this.x9();L.i1();L.i2())L.i9().at(B,1,R);else if(n&&!B)for(var G=this.x9();G.i1();G.i2())G.i9().at(n,0,R)},xk:function(){return this._z.b(this._v)},xl:function(){return this._w.c(this._x)},xi:function(D){this._z.a5(D,this._v)},xj:function(H){this._w.a6(H,this._x)},xc:function(X){return this._t[X]},x1:function(H,n){this._t[H]=n},x6:function(u){delete this._t[u]},b2:function(K,B,F,j,D,k,y){B.ab(K,F,0,0,k),j.ab(K,D,1,1,y)},a12:function(N,J,j){J.ar(N,0,0),j.ar(N,1,1)},c:function(){for(var i=0,b=this.x9();b.i1();b.i2())b.i9()._p=i++;this._y=!1},b1:function(){for(var t=0,Z=this.xf();Z.i1();Z.i2())Z.i8()._g=t++;this._u=!1},xs:function(h){h.as(this,this._z._b),h._p=this._v._c,this._v.a(h)},xt:function(N,d,p,M,Y,F,O){N.a6(this,d,M,this._w._b),N._g=this._x._c,this._x.a(N),this.b2(N,N.a2(),p,N.a3(),Y,F,O)}});var le=function(){le.superClass.constructor.call(this)};X(le,oe,{gb:function(Y){return this.g1(Y)},g7:function(W){return this.g2(W)},g5:function(e){var g=this.g1(e);return g.i1()+g.i3()/2},g6:function(q){var U=this.g1(q);return U.i2()+U.i4()/2},g4:function(k){return new n(this.g5(k),this.g6(k))},gi:function(h){return this.g1(h).i1()},gh:function(V){return this.g1(V).i2()},ga:function(h){var E=this.g1(h);return new n(E.i1(),E.i2())},gj:function(e){return this.g1(e).i3()},g9:function(n){return this.g1(n).i4()},gm:function(z){return new L(this.gj(z),this.g9(z))},s1:function(t,P){this.s2(t,P.x,P.y)},s2:function(u,E,s){var e=this.g1(u);e.i5(E-e.i3()/2,s-e.i4()/2)},s7:function(G,y,F){this.g1(G).i6(y,F)},s8:function(G,q){this.s7(G,q.width,q.height)},s3:function(E,D,l){this.g1(E).i5(D,l)},s4:function(d,X){this.s3(d,X.x,X.y)},gp:function(f){for(var o=this.g2(f),s=new P,W=0;W<o.i1();W++)s.add(o.i2(W));return new S(s)},gf:function(G){for(var a=this.g2(G),J=new dh,i=0;i<a.i1();i++)J.aa(a.i2(i));return J},gc:function(f){var b=new P;b.add(this.gs(f));for(var G=this.gp(f).d();G.i1();G.i2())b.add(G.i6());return b.add(this.gl(f)),new S(b)},gd:function(h){var V=new dh;V.aa(this.gs(h));for(var o=this.gp(h).d();o.i1();o.i2())V.aa(o.i6());return V.aa(this.gl(h)),V},m1:function(R,S){var C=this.g2(R);C.i5();var j=S.ah(),O=j.i6();this.gx(R,O);var k=S.as();for(j.i2();j.i6()!==k;j.i2()){var o=j.i6();C.i4(o.x,o.y)}this.gy(R,k)},s5:function(U,h){var o=this.g2(U);o.i5();for(var j=h.d();j.i1();j.i2()){var v=j.i6();o.i4(v.x,v.y)}},s6:function(F,M){var D=this.g2(F);D.i5();for(var E=M.ah();E.i1();E.i2()){var C=E.i6();D.i4(C.x,C.y)}},m2:function(n,N,e){this.gx(n,N),this.gy(n,e)},gn:function(s){return this.g2(s).i6()},gk:function(J){return this.g2(J).i7()},gt:function(Q,n){this.g2(Q).i8(n)},gz:function(V,v){this.g2(V).i9(v)},gs:function(Y){var S=this.g2(Y).i6();return S?new n(this.g5(Y.a2())+S.x,this.g6(Y.a2())+S.y):this.g4(Y.a2())},gl:function(d){var U=this.g2(d).i7();return U?new n(this.g5(d.a3())+U.x,this.g6(d.a3())+U.y):this.g4(d.a3())},gx:function(S,m){this.g2(S).i8(new n(m.x-this.g5(S.a2()),m.y-this.g6(S.a2())))},gy:function(W,t){this.g2(W).i9(new n(t.x-this.g5(W.a3()),t.y-this.g6(W.a3())))},g8:function(){for(var o=new oc,d=this.xf();d.i1();d.i2())o.aa(d.i8());return o},g3:function(){for(var E,r,W=E=p,Z=r=O,z=this.x9();z.i1();z.i2()){var i=this.ga(z.i9()),V=this.gm(z.i9());W=$(i.x,W),E=$(i.y,E),Z=h(i.x+V.width,Z),r=h(i.y+V.height,r)}for(var A=this.xf();A.i1();A.i2())for(var c=this.gp(A.i8()).c();c.i1();c.i2()){var P=c.i6();W=$(P.x,W),E=$(P.y,E),Z=h(P.x,Z),r=h(P.y,r)}return{x:G(W),y:G(E),width:G(Z-W),height:G(r-E)}}});var Em=function(){Em.superClass.constructor.call(this),this.a(new t,new e)};X(Em,le,{a:function(C,x){this._a3=C,this._a4=x},xo:function(S,R){return this.l2(S,R,this._a4.a6())},l2:function(m,w,N){return this.l1(m,Y,w,Y,0,0,N)},xn:function(Q,Y,d,U,e,T){return this.l1(Q,Y,d,U,e,T,this._a4.a6())},l1:function(U,P,$,Z,B,L,n){var k=new um(this,U,P,$,Z,B,L);return k._l=n,k},xm:function(){var d=new vs(this);return d._r=this._a3.m3(),d},g3:function(){for(var C={x:0,y:0,width:-1,height:-1},f=this.x9();f.i1();f.i2())f.i9()._r.m1(C);return C},g1:function(V){return V._r},g2:function(V){return V._l},g5:function(f){return f._r.m4()},g6:function(x){return x._r.m5()},gi:function(C){return C._r.i1()},gh:function(O){return O._r.i2()},gj:function(E){return E._r.i3()},g9:function(v){return v._r.i4()},s2:function(m,U,b){m._r.m6(U,b)},s7:function(_,J,N){_._r.i6(J,N)},s3:function(d,f,b){d._r.i5(f,b)}});var Vb=function(){Vb.superClass.constructor.call(this),this._ap=this.xk(),this._as=this.xl()};X(Vb,le,{g1:function(G){var O=this._ap.i1(G);return O||(O=new yd,this._ap.z1(G,O)),O},g2:function(D){var E=this._as.i1(D);return E||(E=new pc,this._as.i8(D,E)),E}});var xd=function(J){xd.superClass.constructor.call(this),this._ay=J,this._a0=this.xk(),this._au=this.xl()};X(xd,Vb,{c2:function(s){var e=this._a0.i1(s);return e},a2:function(q,_){this._a0.z1(q,_)},h:function(){this._az||(this._az=this.xk());for(var B=sb.a(this._ay.x0()+1),t=1,C=this.x9();C.i1();){for(var U=this.c2(C.i9()),Z=U.x1();Z.i1();Z.i2()){var e=Z.i9();B[e.al()]=t}for(var V=new oc,x=U.x1();x.i1();x.i2())for(var A=x.i9(),P=B[A.al()],$=A.ap();$.i1();$.i2()){var d=$.i8(),N=d.a3(),F=B[N.al()];F===P&&V.ac(d)}this._az.z1(C.i9(),V),C.i2(),t++}},d1:function(n){return this._az.i1(n)},b:function(s){return this._au.i1(s)},a3:function(K,H){this._au.i8(K,H)},a1:function(){var n=this._ay.xk(),O=fo.a4(sb.a(this._ay.xh())),w=q.a5(this._ay,O,q.a1(this._ay,O,n));this.d2(n,w),this._ay.xi(n)},c1:function(j){for(var $,P=-1,i=0,F=j.length;F>i;i++){var B=j[i];B.ay()>P&&($=B,P=B.ay())}return $},d2:function(l,h){for(var b=this._ay.xl(),Z=this._ay.xk(),i=h.length,j=0;i>j;j++)for(var N=h[j],G=N.c1();G.i1();G.i2())b.i8(G.i8(),N);var L=this.c1(h);this.a4(L,l,b,new P,Z);var v={};i=h.length;for(var c=0;i>c;c++){var T=h[c];if(T.ay()>1){var V=this.xm();v[T._id]=V}}for(var f=this._ay.x9();f.i1();f.i2()){var S=f.i9();if(l.i4(S)&&!Z.i1(S)){var X=this.xm();v[S._id]=X;var Q=new Ti;Q.aa(S),this.a2(X,Q)}}var s=sb.d(2),H=0;for(i=h.length;i>H;H++){var Y=h[H];if(1===Y.ay()){var n=Y.c2();s[0]=n.a2(),s[1]=n.a3();for(var k=0;2>k;k++){var U=s[k];if(1===U.ad()){var R=this.xm();v[U._id]=R;var w=new Ti;w.aa(U),this.a2(R,w)}}}}for(var u=this._ay.x9();u.i1();u.i2()){var d=u.i9();if(Z.i1(d))for(var p=Z.i1(d),_=v[p._id],y=d.af();y.i1();y.i2()){var r=y.i8();if(b.i1(r)!==p){var $=v[b.i1(r)._id];if(!$){var E=r.a1(d),J=Z.i1(E);$=J?v[J._id]:v[E._id]}var g,m=_.aj($);m?g=this.b(m):(m=this.xo(_,$),g=new oc),g.aa(r),this.a3(m,g)}}else if(l.i4(d))for(var M=v[d._id],e=d.af();e.i1();e.i2()){var I=e.i8(),D=I.a1(d),O=v[D._id];if(O){var C=M.aj(O);if(!C){var a=this.xo(M,O),t=new oc;t.aa(I),this.a3(a,t)}}}}if(2===this._ay.x0()&&1===this._ay.xg()){var B=this._ay.xf().i8(),z=v[B.a2()._id],K=v[B.a3()._id];if(K&&z&&!K.aj(z)){var A=this.xo(z,K),x=new oc;x.aa(B),this.a3(A,x)}}var o=sb.a(this._ay.x0()),W=1;i=h.length;for(var F=0;i>F;F++){var q=h[F],ie=v[q._id];if(ie){var Bh=this.c2(ie);Bh||(Bh=new Ti,this.a2(ie,Bh));for(var ud=q.c1();ud.i1();ud.i2()){var bq=ud.i8(),pj=bq.a2();o[pj.al()]===W||l.i4(pj)&&Z.i1(pj)!==q||(o[pj.al()]=W,Bh.aa(pj)),pj=bq.a3(),o[pj.al()]===W||l.i4(pj)&&Z.i1(pj)!==q||(o[pj.al()]=W,Bh.aa(pj))}}}this._ay.xj(b),this._ay.xi(Z)},a4:function(M,n,$,k,r){if(!k.contains(M)){k.add(M);for(var p=[],q=M.c1();q.i1();q.i2()){var I=q.i8();p[0]=I.a2(),p[1]=I.a3();for(var y=0;2>y;y++){var z=p[y];if(n.i4(z)&&!r.i1(z)){M.ay()>1&&r.z1(z,M);for(var w=z.af();w.i1();w.i2())this.a4($.i1(w.i8()),n,$,k,r)}}}}}});var Gl=function(z,$,E){this._a={},Gl.superClass.constructor.call(this);for(var l=new P,t=0,k=$.size();k>t;t++){var S=$.get(t);if(S instanceof R)l.add(S);else{S instanceof w&&S.setExpanded(!0);var o=z.getNodeSize(S);if(S instanceof w&&S.setExpanded(!1),o){var n=this.xm(),I=z._repulsion;E!==s||S instanceof w?E===s?I*=1.1:E===V&&(I*=.9):I*=.6,E===_||E===M?this.s7(n,o.height*I,o.width*I):this.s7(n,o.width*I,o.height*I),n.node=S,this._a[S.getId()]=n}}}for(t=0,k=l.size();k>t;t++){var u=l.get(t),y=u.getSourceAgent(),p=u.getTargetAgent(),x=this._a[y.getId()],g=this._a[p.getId()];x&&g&&x!==g&&this.xo(x,g)}};X(Gl,Em,{});var se={_D:new S,_E:new n(0,0),b:function(q){if(q.i1()>0){for(var k=new P,p=q.i1()-1;p>=0;p--)k.add(q.i2(p));q.i5();for(var T=0,X=k.size();X>T;T++){var N=k.get(T);q.i4(N.x,N.y)}}var A=q.i6();q.i8(q.i7()),q.i9(A)},c:function(z){se.d(z,!0)},d:function(n,q){if(q)for(var H=n.xf();H.i1();H.i2()){var X=H.i8();n.gt(X,se._E),n.gz(X,se._E),n.s5(X,se._D)}else for(var a=n.xf();a.i1();a.i2())n.s5(a.i8(),se._D)},e:function(L){for(var f=new n(0,0),R=L.xf();R.i1();R.i2()){var u=R.i8();L.gt(u,f),L.gz(u,f)}},f:function(i,E,L,x){for(var F=i.gc(E).b(),l=sb.d(F),X=0,M=i.gc(E).c();M.i1();M.i2()){var D=M.i6();(0>=X||!D.equals(l[X-1]))&&(l[X]=new n(D.x,D.y),X++)}if(F=X,!(2>F)){var j=new P,K=se.i(new g(l[1].x-l[0].x,l[1].y-l[0].y));K.x*=x,K.y*=x;for(var a=se.h(l[0],K),k=se.h(l[1],K),w=new J(a,k),I=1;F-1>I;I++){var z=w,m=se.i(new g(l[I+1].x-l[I].x,l[I+1].y-l[I].y));m.x*=x,m.y*=x;var U=se.h(l[I],m),r=se.h(l[I+1],m);w=new J(U,r);var o=J.a6(z,w);o&&j.add(new n(o.x,o.y))}var $=new g(l[F-1].x-l[F-2].x,l[F-1].y-l[F-2].y);$=se.i($),$.x*=x,$.y*=x;var C=se.h(l[F-1],$),Z=new S(j);E.a2()===L.a2()?(i.s5(L,Z),i.m2(L,a,C)):(i.s5(L,Z.a()),i.m2(L,C,a))}},g:function(f,a,U,F){for(var d=F,$=U.c1();$.i1();$.i2()){var e=$.i8();se.f(f,a,e,d),0>d&&(d-=F),d=-d}},a:function(R,d,F){return se.j(R,d,F,1)},l:function(p,F,t){if(!p||p.length<1)return F&&(F.x=0,F.y=0,F.width=0,F.height=0),{width:0,height:0};for(var W=0,c=0,Q=0;Q<p.length;Q++){var y=p[Q];W=h(W,y.width),c=h(c,y.height)}var g,o,u=W*c*p.length,Y=d(u/t),B=u/Y,E=G(B/W),z=v(B/W),n=v(p.length/E),A=v(p.length/z);z*A>E*n?(g=E,o=n):(g=z,o=A);var a,L=0,S=0,N=0,r=0;if(W>c)for(var $=0;$<p.length;$++)a=p[$],a.x=S*W,a.y=L*c,N=h(N,a.x+a.width),r=h(r,a.y+a.height),++S>=g&&(L++,S=0);else for(var K=0;K<p.length;K++)a=p[K],a.x=S*W,a.y=L*c,N=h(N,a.x+a.width),r=h(r,a.y+a.height),++L>=o&&(S++,L=0);return F&&(F.x=0,F.y=0,F.width=N,F.height=r),{width:o,height:g}},j:function(f,y,T){if(!f||f.length<1)return y&&(y.x=0,y.y=0,y.width=0,y.height=0),0;for(var A,J,g=A=f[0].width,B=J=f[0].height,i=f.length,K=1;i>K;K++){var U=f[K].width;g=$(g,U),A=h(A,U);var k=f[K].height;B=$(B,k),J=h(J,k)}if(B/J>.95&&g/A>.95)return se.l(f,y,T).width;for(var S=new dh,v=0,e=0;i>e;e++){var z=f[e];S.aa(f[e]),v=G(v+z.width*z.height)}S.a1(function(b,p){var J=G(p.height)-G(b.height);return 0===J?G(p.width)-G(b.width):J});var t=0,P=0,X=G(T*d(v/T)),b=X,C=0,O=new dh;do{var p,R,D=new dh,o=p=R=0;O.aa(D);for(var W=S.ah();W.i1();W.i2()){var q=W.i6();o+q.width>b&&D.ay()>0?(R=h(R,o),D=new dh,D.aa(q),O.aa(D),o=G(q.width)):(D.aa(q),o=G(o+q.width)),1===D.ay()&&(p=G(p+D.am().height))}R=h(R,o),T*p>R&&C!==R&&(O.af(),b=G(1.1*b),C=R)}while(O.ar());for(var m=0,M=O.ah();M.i1();M.i2()){for(var r=0,s=M.i6(),Z=s.ah();Z.i1();Z.i2()){var j=Z.i6();j.x=r,j.y=m,r+=j.width}t=h(t,r),m+=se.k(s),P=h(P,m)}return y&&(y.x=0,y.y=0,y.width=t,y.height=P),O.ay()},k:function(p){for(var B=0,S=p.ah();S.i1();S.i2())B=h(S.i6().height,B);return B},h:function(B,Z){return new n(B.x+Z.x,B.y+Z.y)},i:function(I){var b=d(I.x*I.x+I.y*I.y);return new g(-I.y/b,I.x/b)}},Od=function(D){this._a=D,this._b=!1};X(Od,i,{a:function(){return this._b},b:function(){return this._a},c:function(){return 1===this._a},d:function(){return 2===this._a},e:function(){return 4===this._a},f:function(){return 8===this._a},g:function(){return 0===this._a}}),Od.h=function(g,d){var O=g.xc("A");return O?O.i1(d):Y},Od.i=function(e,q){var d=e.xc("B");return d?d.i1(q):Y},Od.j=function(R){switch(R){case 1:return Od.k;case 2:return Od.l}return Y},Od.k=new Od(1),Od.l=new Od(2);var Xl=function(t,W,p,T,X){this._o=0,this._l=0,this._i=0,this._d=0,this._f=0,this._b=t,this._a=1e-4,this._r=W,this._p=1,this._e=(X.gj(t)+X.g9(t))/4;var U=.45*p*d(T);this._k=Uh.l(-U,U),this._h=Uh.l(-U,U),this._g=Uh.l(-U,U)};X(Xl,i,{});var Kk=function(){this._a=0,this._c=0,this._b=0};X(Kk,i,{});var Iq=function(){Iq.superClass.constructor.call(this),this._dj=0,this._dh=0,this._dq=0,this._dp=0,this._dt=0,this._de=0,this._d3=0,this._dr=0,this._ed=0,this._dw=.65,this._ea=1,this._dl=80,this._dx=3,this._d8=!0,this._eb=3e5,this._ee=2,this._di=2,this._df=1e3};X(Iq,zc,{i4:function(){return!0},i3:function(F){if(F&&(this._d5=F,this.s(F))){var f=new Kk,a=0,E=G(this._dx*this._dz.length*this._dz.length+20*this._dz.length);E=h(E,1e4);var M=this._ea*this._ea*this._dz.length,x=this._df;try{for(;this._dj>M&&E>a;a++){var o=this.b(2147483647&a);0===x--&&(this._dy.b()>this._eb&&(a=E),x=this._df),this.h(o,f),this.d(o,f),this.i(o,f),this._d8?(this.g(o,f),this.j(o,f)):(this.f(o,f),this.c(o,f));var c=d(f._a*f._a+f._c*f._c+f._b*f._b);this.ac(o,f,c),this.aa(o,f,c)}}finally{this.r()}}},s:function(d){if(!d||d.xa()<1)return!1;this._d5=d,this._dp=1,this._dy=new El,this._dt=d.x0(),this._d2=sb.d(this._dt),this._df=1+1e5/this._dt,this._ed=1/(2*this._di),this._de=this._ed*this._ee/(.05*this._dl),this._d3=c(this._dl,-1)*this._ed,this._dr=c(this._dl,3)*this._ed,this._dj=0,this._du=new Kk,this._dq=h(20*this._dl,10);var X=h(.1,$(this._dw*this._dl,this._dq)),N=this._dt;se.c(d),this._dz=sb.d(N);for(var B=d.x9();B.i1();B.i2()){var _=B.i9(),i=new Xl(_,X,this._dl,this._dt,d);this._dz[--N]=i,this._dj+=i._r,this._dh+=i._r*i._r,this._du._a+=i._k,this._du._c+=i._h,this._du._b+=i._g,this._d2[_.al()]=i}return this._d8=!1,this._dz.length>0},b:function(J){var W=this._dz.length,P=W-J%W-1,$=Uh.k(P+1),h=this._dz[$];return this._dz[$]=this._dz[P],this._dz[P]=h,h},f:function(z,g){for(var o,A,G=o=A=0,Y=z._b.ae();Y;Y=Y.a7()){var X,T=this._d2[Y.a2().al()],J=T._k-z._k,k=T._h-z._h,t=T._g-z._g,l=J*J+k*k+t*t,$=d(l),V=$-(T._e+z._e);0>=V||(X=V*V*this._d3/$,G+=J*X,o+=k*X,A+=t*X)}for(var w=z._b.ag();w;w=w.a8()){var j,b=this._d2[w.a3().al()],R=b._k-z._k,f=b._h-z._h,i=b._g-z._g,x=R*R+f*f+i*i,c=d(x),m=c-(b._e+z._e);0>=m||(j=m*m*this._d3/c,G+=R*j,o+=f*j,A+=i*j)}g._a+=G,g._c+=o,g._b+=A},g:function(V,U){var W,t,D=W=t=0;this._dp++,V._f=this._dp;for(var c=V._b.ae();c;c=c.a7()){var o=this._d2[c.a2().al()];o._f=this._dp;var k=o._k-V._k,b=o._h-V._h,g=o._g-V._g,T=k*k+b*b+g*g,B=d(T);if(0!==B){var v=h(1e-6,B-(V._e+o._e)),Q=-this._ef[c.a5()]/(v*v);Q+=v*v*this._d1[c.a5()],Q/=B,D+=k*Q,W+=b*Q,t+=g*Q}}for(var x=V._b.ag();x;x=x.a8()){var I=this._d2[x.a3().al()];I._f=this._dp;var A=I._k-V._k,s=I._h-V._h,f=I._g-V._g,P=A*A+s*s+f*f,S=d(P);if(0!==S){var C=h(1e-6,S-(V._e+I._e)),n=-this._ef[x.a5()]/(C*C);n+=C*C*this._d1[x.a5()],n/=S,D+=A*n,W+=s*n,t+=f*n}}U._a+=D,U._c+=W,U._b+=t},j:function(D,$){for(var f,T,Z=f=T=0,e=this._dt-1;e>=0;e--){var Q=this._d2[e];if(Q._f!==D._f){var t=D._k-Q._k,g=D._h-Q._h,i=D._g-Q._g,X=t*t+g*g+i*i;if(0!==X){var r=d(X),V=h(1e-6,r-(D._e+Q._e)),W=this._dr/(V*V*r);Z+=t*W,f+=g*W,T+=i*W}}}$._a+=Z,$._c+=f,$._b+=T},c:function(N,O){for(var R,S,W=R=S=0,n=this._dt-1;n>=0;n--){var T=this._d2[n],I=N._k-T._k,f=N._h-T._h,g=N._g-T._g,e=I*I+f*f+g*g;if(0!==e){var p,L=d(e),Q=L-(N._e+T._e);p=0>=Q?this._dr/(1e-8*L):this._dr/(Q*Q*L),W+=I*p,R+=f*p,S+=g*p}}O._a+=W,O._c+=R,O._b+=S},i:function(v,H){var t=this._du._b/this._dt-v._g;H._b+=t*this._dl*this._dt/this._dh},d:function(_,q){if(0!==this._de){var E=this._du._a/this._dt-_._k,P=this._du._c/this._dt-_._h,o=this._du._b/this._dt-_._g;q._a+=E*this._de,q._c+=P*this._de,q._b+=o*this._de}},h:function(_,y){var N=.05*(_._r+2);N>0&&(y._a=Uh.l(-N,N),y._c=Uh.l(-N,N),y._b=Uh.l(-N,N))},ac:function(c,C,z){if(0!==z&&0!==c._a){var y=C._a*c._o+C._c*c._l+C._b*c._i,h=y/(z*c._a);this._dh-=c._r*c._r,this._dj-=c._r,c._r+=c._p*h>0?.45*h:.15*h,c._r>this._dq?c._r=this._dq:c._r<.1&&(c._r=.1),this._dj+=c._r,this._dh+=c._r*c._r,c._p=h}},aa:function(F,A,f){if(f>0){var N=F._r/f,c=A._a*N,J=A._c*N,Z=A._b*N;F._k+=c,F._h+=J,F._g+=Z,this._du._a+=c,this._du._c+=J,this._du._b+=Z,F._a=f,F._o=A._a,F._l=A._c,F._i=A._b}},r:function(){for(var o=this._d2.length-1;o>=0;o--){var R=this._d2[o];this._d5.s2(R._b,R._k,R._h)}}});var Jd=function(_,H){this._e=_,this._f=H,this._c={}};X(Jd,i,{r:function(){for(var W in this._c){var M=this._c[W];M.g.setExpanded(M.b)}},p:function(){for(var E=new P,Y=new P,l=new P,_=0,U=this._f.size();U>_;_++){var r=this._f.get(_);if(r instanceof R)r.isLooped()||E.add(r);else if(r instanceof a){if(r.getParent()instanceof w){r instanceof w||Y.add(r);continue}E.add(r),r instanceof w&&(l.add(r),this.l(r))}}return Y.each(function(R){for(var X=!0,j=0;j<l.size();j++)if(R.isDescendantOf(l.get(j))){X=!1;break}X&&E.add(R)}),E},l:function(o){if(!this._c[o.getId()]){var T=this._e.getType(o),B=K(T);if(B){this._c[o.getId()]={g:o,b:o.isExpanded()},o.setExpanded(!0);for(var y,I=new P,C=o.getChildren(),X=0,Q=C.size();Q>X;X++)if(y=C.get(X),y instanceof w&&(this.l(y),y.setExpanded(!1)),y instanceof R||I.contains(y)||I.add(y),y instanceof a){var Z=y.getEdges();if(Z)for(var W=0,L=Z.size();L>W;W++){var s=Z.get(W);I.contains(s)||I.add(s)}}var l=new Gl(this._e,I,T);try{B.i2(l);var Y=x(T);for(var q in l._a){var r=l._a[q],k=l.g4(r);r.node.p(Y?Y.tf(k):k)}}catch(N){}o.eachChild(function(l){l instanceof w&&l.setExpanded(!0)})}}}});var fg=function(){};X(fg,i,{i1:function(U,t,Y){var H=this.a1(U,t);return this.a2(U,t,Y),H},a1:function(_,K){var g=fg.i4(_);g.ax();for(var t=0,B=g.x1();B.i1();B.i2())K.i7(B.i9(),-1);for(var f=g.x1();f.i1();f.i2()){for(var j=f.i9(),a=-1,o=j.aq();o.i1();o.i2())a=h(a,K.i2(o.i9()));K.i7(j,a+1),t=h(t,a+1)}return t+1},a2:function(S,T,p){p.az(fg.i3(S,T))}}),fg.i3=function(h,o){for(var n=new oc,K=h.xf();K.i1();K.i2()){var M=K.i8();o.i2(M.a2())>o.i2(M.a3())&&(h.x3(M),n.ac(M))}return n},fg.i4=function(C){var r=sb.a(C.xa());return(new gc).a1(C,r),fg.i2(C,r)},fg.i2=function(f,D){for(var l=sb.d(f.x0()),q=f.x9();q.i1();q.i2()){var r=q.i9(),c=r.al();l[D[c]]=r}return new Ti(l)};var Gq=function(){Gq.superClass.constructor.call(this),this.c0()};X(Gq,oc,{c0:function(){this._bc=1,this._bd=0}});var Uo=function(){this._m1=20,this._m2=60,this._m3=5,this._m4=0};X(Uo,i,{i4:function(W){this._m3=W},i5:function(u){this._m4=u},i3:function(V){this._m1=V},i6:function(M){this._m2=M},i2:function(j){this._m5=j},t1:function(){return this._m2},a1:function(O,w){for(var m=sb.d(w.length),t=0;t<w.length;t++)m[t]=w[t].x1();this.a2(O,m)},a2:function(B,S){for(var j=sb.a(S.length),m=0,M=0;M<S.length;M++){var w=0,Y=S[M];for(Y.i4();Y.i1();Y.i2())w=h(w,B.g9(Y.i9()));for(j[M]=w,Y.i4();Y.i1();Y.i2()){var U=(j[M]-B.g9(Y.i9()))/2;B.s4(Y.i9(),new n(B.gi(Y.i9()),m+U))}m+=j[M]+this.t1(),Y.i4()}},i1:function(l,X,H){this._m6=l,this.t2(X,H)}});var Kf=function(){Kf.superClass.constructor.call(this)};X(Kf,Uo,{t2:function(A){var b=this._m6;this._a=b.xc("D"),this._h=b.xc("C"),this.a1(b,A),this.tg(b,A),this.tf(A,fo.a5(this._e),this._m5,this._l),this.tb(b,this._f[0]),this.ta(A),this.th(b,this._f[0],A),this.b(A),this.tb(b,this._f[1]),this.ta(A),this.th(b,this._f[1],A),this.b(A),this.a11(this._f[1]),this.a12(A),this.tb(b,this._f[2]),this.ta(A),this.th(b,this._f[2],A),this.b(A),this.tb(b,this._f[3]),this.ta(A),this.th(b,this._f[3],A),this.b(A),this.a11(this._f[3]),this.a12(A),this.tc(b),this.tj()},a11:function(L){for(var J=0;J<L.length;J++)L[J]=-L[J]},b:function(y){for(var p=0;p<y.length;p++){var i=y[p];i.ax()}for(var m=0;m<y.length;m++)for(var r,w=0,f=y[m].x1();f.i1();f.i2()){var g=f.i9(),P=g.al();this._l[P]=w++,this._b[P]=r,this._k[P]=Y,r&&(this._k[r.al()]=g),r=g}var L=this._a;this._a=this._h,this._h=L;for(var W=this._m6.xf();W.i1();W.i2()){var G=W.i8(),K=this._m6.gn(G);this._m6.gt(G,new n(-K.x,K.y));var A=this._m6.gk(G);this._m6.gz(G,new n(-A.x,A.y))}var V=this._l,X=function(w,N){return!w&&N?1:w&&!N?-1:w||N?V[w.a2().al()]-V[N.a2().al()]:0},o=function(w,K){return!w&&K?1:w&&!K?-1:w||K?V[w.a3().al()]:0};this._m6.x2(X,o)},a12:function(n){for(var o=this._m6.xf();o.i1();o.i2()){var d=o.i8();this._m6.x3(d);var C=this._m6.gn(d),O=this._m6.gk(d);this._m6.gz(d,C),this._m6.gt(d,O)}for(var U=new dh,L=0,l=0;L<n.length;L++)U.ae(n[L]);for(;l<n.length;l++)n[l]=U.au();var W=this._l,B=function(o,P){return!o&&P?1:o&&!P?-1:o||P?W[o.a2().al()]-W[P.a2().al()]:0},r=function(C,M){return!C&&M?1:C&&!M?-1:C||M?W[C.a3().al()]:0};this._m6.x2(B,r)},tg:function(U,F){var A=U.x0(),z=U.xg(),D=0;for(this._l=sb.a(A),this._b=sb.d(A),this._k=sb.d(A),this._m=sb.d(A),this._i=sb.d(A),this._o=sb.d(A),this._f=sb.e(4,A),this._c=sb.a(A),this._g=sb.a(A),this._j=sb.a(A),this._d=sb.b(A),this._e=sb.b(z);D<F.length;D++)for(var w,a=0,u=F[D].x1();u.i1();u.i2()){var j=u.i9(),I=j.al();this._l[I]=a++,this._b[I]=w,this._k[I]=Y,w&&(this._k[w.al()]=j),w=j}var C=this._l,k=function(F,q){return!F&&q?1:F&&!q?-1:F||q?C[F.a2().al()]-C[q.a2().al()]:0},o=function(h,O){return!h&&O?1:h&&!O?-1:h||O?C[h.a3().al()]:0};U.x2(k,o)},tb:function(F,H){for(var z=F.x9();z.i1();z.i2()){var r=z.i9(),u=r.al();this._m[u]=r,this._i[u]=r,H[u]=p,this._o[u]=r,this._c[u]=p,this._d[u]=!1,this._j[u]=this._g[u]=0}},ta:function(H){for(var n=1;n<H.length;n++)for(var o=-1,O=H[n]._b;O;O=O.a()){var L=O.d(),P=L.al(),r=L.ak();if(0!==r){for(var E=G((r+1)/2),w=v((r+1)/2),X=1,h=L.ae(),K=!1;E>X;h=h.a7())X++;for(;w>=X&&!K;X++){var p=this._m6.g2(h),x=h.a2(),B=x.al();this._i[P]===L&&!this._e[h.a5()]&&o<this._l[B]&&(o=this._l[B],this._i[B]=L,this._m[P]=this._m[B],this._i[P]=this._m[P],K=!0,this._j[B]=p.i6().x,this._g[P]=p.i7().x),h=h.a7()
}}}},th:function(x,V,o){for(var W=x.x9();W.i1();W.i2()){var k=W.i9(),A=k.al();this._m[A]===k&&this.td(x,k,V)}for(var d=0;d<o.length;d++){var b=o[d].x1();if(b.i1()){var i=o[d].x1().i9(),z=i.al();this._o[this._m[z].al()]===i&&this.tk(x,i,V)}}for(var t=x.x9();t.i1();t.i2()){var s=t.i9(),P=s.al(),w=this._c[this._o[this._m[P].al()].al()];p>w&&(V[P]+=w)}},td:function(j,F,q){var X=F.al();if(q[X]===p){q[X]=0;var i=F,_=0;do{var D=i.al();if(D!==X&&(_-=this._g[D]),this._l[D]>0){var u=this._b[D],l=this._m[this._b[D].al()],N=l.al();this.td(j,l,q),this._o[X]===F&&(this._o[X]=this._o[N]),this._o[X]===this._o[N]&&(q[X]=h(q[X],q[u.al()]+this.ti(j,u,i)-_))}_+=this._j[D],i=this._i[D]}while(i!==F);_=0,i=F;do{var n=i.al();n!==X&&(_-=this._g[n]),q[n]=q[X]+_,_+=this._j[n],i=this._i[n]}while(i!==F)}},tk:function(I,x,a){var Z=x.al();if(!this._d[Z]){this._d[Z]=!0;var i=x;do{var e=i.al(),K=this._k[e];if(K){var n=K.al(),m=this._o[this._m[n].al()];if(m!==this._o[Z]){var s=a[n]-a[Z]-this.ti(I,i,K);this._c[m.al()]!==p&&(s+=this._c[m.al()]),this._c[this._o[Z].al()]=$(this._c[this._o[Z].al()],s)}else this.tk(I,this._m[n],a)}i=this._i[e]}while(i!==x)}},tc:function(s){for(var H=sb.a(4),b=sb.a(4),R=s.x9();R.i1();R.i2()){var z=R.i9().al();b[0]+=this._f[0][z],b[1]+=this._f[1][z],b[2]+=this._f[2][z],b[3]+=this._f[3][z]}b[0]/=s.xa(),b[1]/=s.xa(),b[2]/=s.xa(),b[3]/=s.xa();for(var a=s.x9();a.i1();a.i2()){var u=a.i9(),V=u.al(),G=s.g4(u);H[0]=this._f[0][V]-b[0],H[1]=this._f[1][V]-b[1],H[2]=this._f[2][V]-b[2],H[3]=this._f[3][V]-b[3],H.sort(sb.n),s.s1(u,new n((H[1]+H[2])/2,G.y))}},ti:function(Y,W,Z){var l,x=Y.gj(W),S=Y.gj(Z);return l=x>1&&S>1?this._m1+(x+S)/2:this._m3+(x+S)/2,this._l[W.al()]<this._l[Z.al()]?(this._a&&(l+=this._a.i3(Z)),this._h&&(l+=this._h.i3(W))):(this._a&&(l+=this._a.i3(W)),this._h&&(l+=this._h.i3(Z))),l},tj:function(){this._l=this._b=this._k=this._e=this._m=this._i=this._f=this._c=this._o=this._d=this._j=this._g=Y},tf:function(S,e,M,p){for(var l=S.length,k=2;l-1>k;k++)for(var B=-1,D=0,J=0,f=S[k].x1(),x=S[k].x1();x.i1();x.i2()){var K,i=x.i9(),r=!1;if(1===i.ak()&&(K=i.ae().a2(),M.i1(K)&&M.i1(i)&&(r=!0)),J===S[k].ay()-1||r){for(var N=r?p[K.al()]:S[k-1].ay();J>=D;D++){for(var H=f.i9(),C=H.am();C.i1();C.i2()){var z=C.i8(),a=p[z.a2().al()];(B>a||a>N)&&e.i7(C.i8(),!0)}f.i2()}B=N}J++}}});var qo=function(y,P){this._b=20,this._a=P,this._d=y,this._f={}};X(qo,i,{a3:function(c){this._b=c},a4:function(V,k,M,q,l){if(this.a2(V)){var B=this.b2(V);B._o=k,B._m=l,B._n=q,B._f=M}},b2:function(Z){var C=this._f[Z._id];return C||(C=new nk,this._f[Z._id]=C),C},a2:function(S){return!!this._f[S._id]},c:function(){for(var A=fo.a1(sb.a(this._d.xa())),W=fo.a1(sb.a(this._d.xa())),k=this._d.x9();k.i1();k.i2()){var N=k.i9();if(this.a2(N)){var n=this.b2(N);A.i6(N,this._b*(n.c()-1)),W.i6(N,this._b*(n.b()-1))}}this._d.x1("D",A),this._d.x1("C",W)},g:function(){this._d.x6("D"),this._d.x6("C")},f:function(){for(var t=this._d.x9();t.i1();t.i2()){var N=t.i9();if(this.a2(N)){var z=this._d.gi(N),f=this._d.gh(N),A=this._d.gj(N),i=this._d.g9(N),L=this.b2(N),j=L._q.ay()+L._b.ay()+L._f,Z=L._d.ay()+L._g.ay()+L._o,J=L._i.ay()+L._l.ay()+L._n,m=L._h.ay()+L._k.ay()+L._m,I=this._a.a7(A,j),o=this._a.a7(A,Z),y=this._a.a7(i,m),P=this._a.a7(i,J);L.a2(this._a.a8(A,j,I),this._a.a8(A,Z,o),this._a.a8(i,m,y),this._a.a8(i,J,P));for(var a=L._j.c1();a.i1();a.i2()){var G=a.i8(),u=this.a1(G),D=this.b1(G),X=new dh;u.b()===D.b()?(u.c()?(X.aa(new n(z+L._g._bd*o+L._c,f)),X.aa(new n(z+L._g._bd*o+L._c,f-this._b)),L._g._bd++,X.aa(new n(z+L._g._bd*o+L._c,f-this._b)),X.aa(new n(z+L._g._bd*o+L._c,f)),L._g._bd++,L._g._bc=h(L._g._bc,2)):u.d()?(X.aa(new n(z+L._b._bd*I+L._p,f+i)),X.aa(new n(z+L._b._bd*I+L._p,f+i+this._b)),L._b._bd++,X.aa(new n(z+L._b._bd*I+L._p,f+i+this._b)),X.aa(new n(z+L._b._bd*I+L._p,f+i)),L._b._bd++,L._b._bc=h(L._b._bc,2)):u.f()?(X.aa(new n(z,f+L._i._bd*P+L._a)),X.aa(new n(z-this._b,f+L._i._bd*P+L._a)),L._i._bd++,X.aa(new n(z-this._b,f+L._i._bd*P+L._a)),X.aa(new n(z,f+L._i._bd*P+L._a)),L._i._bd++,L._i._bc=h(L._i._bc,2)):u.e()&&(X.aa(new n(z+A,f+L._h._bd*y+L._e)),X.aa(new n(z+A+this._b,f+L._h._bd*y+L._e)),L._h._bd++,X.aa(new n(z+A+this._b,f+L._h._bd*y+L._e)),X.aa(new n(z+A,f+L._h._bd*y+L._e)),L._h._bd++,L._h._bc=h(L._h._bc,2)),this._d.m1(G,X)):u.c()||D.c()?u.e()||D.e()?(X.aa(new n(z+A-L._d._bd*o-L._c,f)),X.aa(new n(z+A-L._d._bd*o-L._c,f-this._b*L._d._bc)),X.aa(new n(z+A+this._b*L._h._bc,f-this._b*L._d._bc)),X.aa(new n(z+A+this._b*L._h._bc,f+L._h._bd*y+L._e)),X.aa(new n(z+A,f+L._h._bd*y+L._e)),L._d._bd++,L._d._bc++,L._h._bd++,L._h._bc++,D.c()&&X.ax(),this._d.m1(G,X)):u.f()||D.f()?(X.aa(new n(z+L._g._bd*o+L._c,f)),X.aa(new n(z+L._g._bd*o+L._c,f-this._b*L._g._bc)),X.aa(new n(z-this._b*L._i._bc,f-this._b*L._g._bc)),X.aa(new n(z-this._b*L._i._bc,f+L._i._bd*P+L._a)),X.aa(new n(z,f+L._i._bd*P+L._a)),L._g._bd++,L._g._bc++,L._i._bd++,L._i._bc++,D.c()&&X.ax(),this._d.m1(G,X)):(u.d()||D.d())&&(X.aa(new n(z+A-L._d._bd*o-L._c,f)),X.aa(new n(z+A-L._d._bd*o-L._c,f-this._b*L._d._bc)),X.aa(new n(z+A+this._b*L.b(),f-this._b*L._d._bc)),X.aa(new n(z+A+this._b*L.b(),f+i+this._b*L._q._bc)),X.aa(new n(z+A-L._q._bd*I-L._p,f+i+this._b*L._q._bc)),X.aa(new n(z+A-L._q._bd*I-L._p,f+i)),L._d._bd++,L._d._bc++,L._k._bc++,L._h._bc++,L._q._bc++,L._q._bd++,D.c()&&X.ax(),this._d.m1(G,X)):u.d()||D.d()?u.e()||D.e()?(X.aa(new n(z+A-L._q._bd*I-L._p,f+i)),X.aa(new n(z+A-L._q._bd*I-L._p,f+i+this._b*L._q._bc)),X.aa(new n(z+A+this._b*L._k._bc,f+i+this._b*L._q._bc)),X.aa(new n(z+A+this._b*L._k._bc,f+i-L._k._bd*y-L._e)),X.aa(new n(z+A,f+i-L._k._bd*y-L._e)),L._q._bd++,L._q._bc++,L._k._bd++,L._k._bc++,D.d()&&X.ax(),this._d.m1(G,X)):(u.f()||D.f())&&(X.aa(new n(z+L._b._bd*I+L._p,f+i)),X.aa(new n(z+L._b._bd*I+L._p,f+i+this._b*L._b._bc)),X.aa(new n(z-this._b*L._l._bc,f+i+this._b*L._b._bc)),X.aa(new n(z-this._b*L._l._bc,f+i-L._l._bd*P-L._a)),X.aa(new n(z,f+i-L._l._bd*P-L._a)),L._b._bd++,L._b._bc++,L._l._bd++,L._l._bc++,D.d()&&X.ax(),this._d.m1(G,X)):(X.aa(new n(z,f+i-L._l._bd*P-L._a)),X.aa(new n(z-this._b*L._l._bc,f+i-L._l._bd*P-L._a)),X.aa(new n(z-this._b*L._l._bc,f+i+this._b*L.a1())),X.aa(new n(z+A+this._b*L._k._bc,f+i+this._b*L.a1())),X.aa(new n(z+A+this._b*L._k._bc,f+i-L._k._bd*y-L._e)),X.aa(new n(z+A,f+i-L._k._bd*y-L._e)),L._l._bd++,L._l._bc++,L._b._bc++,L._q._bc++,L._k._bc++,L._k._bd++,D.f()&&X.ax(),this._d.m1(G,X))}}}},a5:function(R,$){for(var s=0;s<R.length;s++)for(var e=R[s],y=$[s],D=e.x1();D.i1();D.i2()){var v=D.i9();if(this.a2(v)){var K=this.b2(v);y._g=h(y._g,this._b*(K.d()-1)),y._j=h(y._j,this._b*(K.a1()-1))}}},a1:function(M){var T,C=this._d.xc("A");if(C&&(T=C.i1(M)),!T||T.g()){var q=this._d.xc("B");if(!q)return Od.j(1);var L=q.i1(M);if(!L||L.g())return Od.j(1);if(L.c())return Od.j(8);if(L.f())return Od.j(1);if(L.d())return Od.j(4);if(L.e())return Od.j(2)}return T},b1:function(o){var A,q=this._d.xc("B");if(q&&(A=q.i1(o)),!A||A.g()){var P=this._d.xc("A");if(!P)return Od.j(8);var p=P.i1(o);if(!p||p.g())return Od.j(8);if(p.c())return Od.j(8);if(p.f())return Od.j(1);if(p.d())return Od.j(4);if(p.e())return Od.j(2)}return A}});var nk=function(){this._o=0,this._f=0,this._n=0,this._m=0,this._c=0,this._p=0,this._e=0,this._a=0,this._j=new oc,this._g=new Gq,this._d=new Gq,this._b=new Gq,this._q=new Gq,this._h=new Gq,this._k=new Gq,this._i=new Gq,this._l=new Gq};X(nk,i,{a1:function(){return h(this._q._bc,this._b._bc)},d:function(){return h(this._d._bc,this._g._bc)},b:function(){return h(this._k._bc,this._h._bc)},c:function(){return h(this._l._bc,this._i._bc)},a2:function(Q,i,s,M){this._c=i,this._a=M,this._p=Q,this._e=s,this._g.c0(),this._d.c0(),this._b.c0(),this._q.c0(),this._k.c0(),this._h.c0(),this._l.c0(),this._i.c0()}});var Yk=function(B,J,k,s){this._k=20,this._r=.5,this._d=B,this._c=J,this._j=k,this._m=s,this._i=B.xc("A")!=Y||B.xc("B")!=Y,this._t=new _g(B,J,k,s),this._b=new qo(B,this)};X(Yk,i,{a6:function(q){this._k=q,this._t.a1(q),this._b.a3(q)},g1:function(){return this._k},a9:function(a){return this.c1(),a},a5:function(k){return this.a1(),k},b3:function(S){return this.c1(),S=this.c4(S),this._b.c(),S},g2:function(I){return this._b.g(),I},e2:function(s){s=this.f(s),this._b.f()},e1:function(){this._t.d(),this._n&&this._d.xi(this._n),this.a1(),this._d=Y},a1:function(){this._i&&(this._q&&(this._d.x1("A",this._q),this._q=Y),this._p&&(this._d.x1("B",this._p),this._p=Y),this._h&&(this._d.xj(this._h),this._h=Y),this._l&&(this._d.xj(this._l),this._l=Y))},c1:function(){if(this._i){this._h||(this._h=this._d.xl()),this._l||(this._l=this._d.xl());for(var Z=this._d.xf();Z.i1();Z.i2()){var Y=Z.i8(),X=this._j.i1(Y.a2()),m=this._j.i1(Y.a3());if(X&&!m){var d=this._j.i1(Y.a2());this._m.i4(d)?this._l.i8(Y,Od.h(this._d,d)):this._l.i8(Y,Od.i(this._d,d))}else if(!X&&m){var b=this._j.i1(Y.a3());this._m.i4(b)?this._h.i8(Y,Od.i(this._d,b)):this._h.i8(Y,Od.h(this._d,b))}else X||m||(this._m.i4(Y)?(this._h.i8(Y,Od.i(this._d,Y)),this._l.i8(Y,Od.h(this._d,Y))):(this._h.i8(Y,Od.h(this._d,Y)),this._l.i8(Y,Od.i(this._d,Y))))}this._q=this._d.xc("A"),this._p=this._d.xc("B"),this._d.x1("A",this._h),this._d.x1("B",this._l)}},c4:function(C){this._n=this._d.xk(),this._a=this._d.xl(),this._g=this._d.xl();for(var x=new oc,M=new oc,z=new oc,y=new oc,X=new oc,v=new oc,u=new oc,a=new oc,D=new oc,R=this._d.xk(),Q=0;Q<C.length;Q++)for(var U=0,e=C[Q].x1();e.i1();)R.i6(e.i9(),U),e.i2(),U++;for(var B=function(m,O){var z=R.i3(m.a3())-R.i3(O.a3());return 0>=z?z>=0?0:-1:1},W=function(O,p){var m=R.i3(O.a2())-R.i3(p.a2());return 0>=m?m>=0?0:-1:1},L=0;L<C.length;L++)for(var J=C[L],i=J._b;i;i=i.a()){var p=i.d(),N=0;p.av(B),p.au(W),x.af(),M.af(),z.af(),y.af(),X.af(),v.af(),u.af(),a.af(),D.af();for(var r=p.ap();r.i1();){var V=r.i8(),t=this.b1(V);!t||t.d()||t.g()?z.aa(V):t.e()?x.aa(V):t.f()?(M.aa(V),D.aa(V)):t.c()&&(a.aa(V),D.aa(V)),r.i2(),N++}N=0;for(var g=p.am();g.i1();){var h=g.i8(),l=this.a2(h);!l||l.c()||l.g()?y.aa(h):l.e()?x.aa(h):l.f()?(M.aa(h),D.aa(h)):l.d()&&(v.aa(h),D.aa(h)),g.i2(),N++}var s=R.i3(p);if(!D.ar())for(var c=.1/D.ay(),f=s-.4;!D.ar();f+=c){var $=D.c3();if($.a2()===p){var I=this._d.xm();this._n.z1(I,$.a2()),this._d.s7(I,1,1),this._c.z1(I,this._c.i1(p)),R.i6(I,f),this._a.i8($,this._d.gn($)),this._d.gt($,Uh._A),this._d.xr($,I,$.a3()),J.ao(I,i)}else{var G=this._d.xm();this._n.z1(G,$.a3()),this._d.s7(G,1,1),this._c.z1(G,this._c.i1(p)),R.i6(G,f),this._g.i8($,this._d.gk($)),this._d.gz($,Uh._A),this._d.xr($,$.a2(),G),J.ao(G,i)}}if(!x.ar())for(var S=.1/x.ay(),j=s+.1;!x.ar();j+=S){var K=x.c3();if(K.a2()===p){var m=this._d.xm();this._n.z1(m,K.a2()),this._d.s7(m,1,1),this._c.z1(m,this._c.i1(p)),R.i6(m,j),this._a.i8(K,this._d.gn(K)),this._d.gt(K,Uh._A),this._d.xr(K,m,K.a3()),i=J.an(m,i)}else{var O=this._d.xm();this._n.z1(O,K.a3()),this._d.s7(O,1,1),this._c.z1(O,this._c.i1(p)),R.i6(O,j),this._g.i8(K,this._d.gk(K)),this._d.gz(K,Uh._A),this._d.xr(K,K.a2(),O),i=J.an(O,i)}}var o=Yk._z;this._b.a2(p)&&(o=this._b.b2(p));var T=o._b.ay()+v.ay()+p.ao()+X.ay()+o._q.ay();if(T>0)for(var k=this._d.g9(p)/2,F=this._d.gj(p),q=this.a7(F,T),A=-.5*F+this.a8(this._d.gj(p),T,q)+q*(o._b.ay()+v.ay()),d=p.ap();d.i1();d.i2()){var E=d.i8();this.c2(E)||this._j.i1(E.a2())||(this._d.g2(E).i8(new n(A,k)),A+=q)}var H=this._t.a3(p),P=0,Y=0,w=0,Z=0;if(H&&(P=H._e.ay(),Y=H._c.ay(),w=H._b.ay(),Z=H._d.ay()),T=o._g.ay()+P+a.ay()+p.ak()+u.ay()+Y+o._d.ay(),T>0){for(var b=this._d.gj(p),_=this.a7(b,T),Zk=this.a8(b,T,_),bi=-.5*b+Zk+_*(o._g.ay()+P+a.ay()),ks=-this._d.g9(p)/2,Fn=p.am();Fn.i1();Fn.i2()){var Vi=Fn.i8();this.d1(Vi)||this._j.i1(Vi.a3())||(this._d.g2(Vi).i9(new n(bi,ks)),bi+=_)}if(H){for(var us=-.5*b+Zk+_*(o._g.ay()+a.ay()+H._e.ay()-1),_f=H._e.c1();_f.i1();_f.i2()){var Hg=_f.i8();this._d.u1(Hg),Hg.a2()!==p||this.c2(Hg)?this.d1(Hg)||(this._d.g2(_f.i8()).i9(new n(us,ks)),us-=_):(this._d.g2(_f.i8()).i8(new n(us,ks)),us-=_),this._d.h1(Hg)}us=.5*b-Zk-_*(o._d.ay()+u.ay());for(var rf=H._c.c1();rf.i1();rf.i2()){var ng=rf.i8();this._d.u1(ng),ng.a2()!==p||this.c2(ng)?this.d1(ng)||(this._d.g2(rf.i8()).i9(new n(us,ks)),us-=_):(this._d.g2(rf.i8()).i8(new n(us,ks)),us-=_),this._d.h1(ng)}}}this._b.a2(p)&&this._b.a4(p,P+a.ay()+p.ak()+u.ay()+Y,v.ay()+p.ao()+X.ay(),w+M.ay(),Z+x.ay())}return this._d.xi(R),C},a7:function(O,M){return 1>=M?0:O/(M-1+2*this._r)},a8:function(C,V,E){return 1>=V?.5*C:.5*(C-E*(V-1))},f:function(U){var V=this.g1(),l=0;for(this._f=this._d.xk();l<U.length;l++)for(var L=U[l],B=L._b;B;){var t=B.d(),Z=this._n.i1(t);if(Z||this._t.b2(t))B=B.a();else{var a=new Ti,R=new Ti,q=new Ti,g=new Ti,J=new Ti,f=new Ti,Q=new oc,F=new oc,j=new yj(a,R,q,g,J,f,Q,F);this._f.z1(t,j),Q.ab(t.am()),F.ab(t.ap());for(var N=B.b();N&&this._n.i1(N.d())===t;N=N.b()){var W=N.d(),s=this.c3(W);s.f()?R.ac(W):s.c()?g.ac(W):s.d()&&f.ac(W)}for(var y=B.a();y&&this._n.i1(y.d())===t;y=y.a()){var w=y.d(),v=this.c3(w);v.e()?a.aa(w):v.c()?q.aa(w):v.d()&&J.aa(w)}B=y}}for(var x=this.d2(U),u=0,E=0;E<U.length;E++){var _=x[E];E>0&&(u+=x[E-1]._j+x[E-1]._h+x[E-1]._b),u+=_._g+_._f+_._a+_._d;for(var S=U[E].x1();S.i1();S.i2()){var T=S.i9();this._d.s3(T,this._d.gi(T),this._d.gh(T)+u)}_._c+=u,_._i+=u}for(var d=0;d<U.length;d++)for(var C=U[d],O=C.x1();O.i1();O.i2()){var M=O.i9();this._n.i1(M)&&C.av(O)}for(var o=this,I=function(p,_){return o.a3(p)?o.a3(_)?o._d.gi(p)>=o._d.gi(_)?-1:1:1:o.a3(_)?-1:o._d.gi(p)>=o._d.gi(_)?1:-1},z=function(M,n){return o.a3(M)?o.a3(n)?o._d.gi(M)>=o._d.gi(n)?1:-1:1:o.a3(n)?-1:o._d.gi(M)>=o._d.gi(n)?-1:1},G=0;G<U.length;G++)for(var D=x[G],i=U[G].x1();i.i1();i.i2()){var k=i.i9();if(!this._t.b2(k)){var e=this._f.i1(k),A=e._d,K=e._a,X=e._b,p=e._h,h=e._f,H=e._c,r=e._g,m=e._e,P=0,b=0,$=0,c=0,ge=k.ao(),Rn=k.ak(),tp=this._d.gi(k),Hh=this._d.gh(k),vb=this._d.gj(k),ab=this._d.g9(k),kp=this._t.a3(k),yq=Yk._z;if(this._b.a2(k)&&(yq=this._b.b2(k)),kp){if(P=kp._d.ay(),b=kp._b.ay(),$=kp._e.ay(),c=kp._c.ay(),P>0)for(var jc=yq._h.ay()+A.ay()+P+yq._k.ay(),Ph=this.a7(ab,jc),Bd=this.a8(ab,jc,Ph),Kh=Hh+Bd+Ph*(yq._h.ay()+this.a4(A)),Oi=kp._d.c1();Oi.i1();Oi.i2()){var So=Oi.i8();this._d.u1(So),So.a2()===k?this.c2(So)||this._d.gx(So,new n(tp+vb,Kh)):(this.d1(So),this._d.gy(So,new n(tp+vb,Kh))),Kh+=Ph,this._d.h1(So)}if(b>0)for(var bd=yq._i.ay()+K.ay()+b+yq._l.ay(),td=this.a7(ab,bd),eg=this.a8(ab,bd,td),ig=Hh+eg+td*(yq._i.ay()+this.a4(K)),si=kp._b.c1();si.i1();si.i2()){var lr=si.i8();this._d.u1(lr),lr.a2()===k?this.c2(lr)||this._d.gx(lr,new n(tp,ig)):this.d1(lr)||this._d.gy(lr,new n(tp,ig)),ig+=td,this._d.h1(lr)}}if(A.ay()>0){A.a1(I);for(var Bq=yq._h.ay()+A.ay()+P+yq._k.ay(),bh=this.a7(ab,Bq),Yh=this.a8(ab,Bq,bh),$n=Hh+Yh+bh*yq._h.ay(),fb=!0;!A.ar();){var Re=A.x4();if(this.a3(Re)){fb&&(fb=!1,$n+=bh*P);var Fp=Re.ag(),Gd=this._d.gd(Fp),Oh=Gd.at();if(Gd.ac(new n(Oh.x,D.b())),this.c2(Fp)){var rd=this._a.i1(Fp);Gd.ac(new n(Oh.x,rd.y+this._d.g6(k))),Gd.ac(new n(rd.x+this._d.g5(k),rd.y+this._d.g6(k)))}else Gd.ac(new n(Oh.x,$n)),Gd.ac(new n(tp+vb,$n));this._d.xr(Fp,k,Fp.a3()),this._d.m1(Fp,Gd)}else{var go=Re.ae(),Bo=this._d.gd(go),ic=Bo.au();if(Bo.ae(new n(ic.x,D.a())),this.d1(go)){var jo=this._g.i1(go);Bo.ae(new n(ic.x,jo.y+this._d.g6(k))),Bo.ae(new n(jo.x+this._d.g5(k),jo.y+this._d.g6(k)))}else Bo.ae(new n(ic.x,$n)),Bo.ae(new n(tp+vb,$n));this._d.xr(go,go.a2(),k),this._d.m1(go,Bo)}this._d.x4(Re),$n+=bh}}if(K.ay()>0){K.a1(z);for(var ac=yq._i.ay()+K.ay()+b+yq._l.ay(),fj=this.a7(ab,ac),Oj=this.a8(ab,ac,fj),de=Hh+Oj+fj*yq._i.ay(),vc=!0;!K.ar();){var zp=K.x4();if(this.a3(zp)){vc&&(vc=!1,de+=fj*b);var vm=zp.ag(),gc=this._d.gd(vm),rc=gc.at();if(gc.ac(new n(rc.x,D.b())),this.c2(vm)){var gp=this._a.i1(vm);gc.ac(new n(rc.x,gp.y+this._d.g6(k))),gc.ac(new n(gp.x+this._d.g5(k),gp.y+this._d.g6(k)))}else gc.ac(new n(rc.x,de)),gc.ac(new n(tp,de));this._d.xr(vm,k,vm.a3()),this._d.m1(vm,gc)}else{var ud=zp.ae(),uc=this._d.gd(ud),$e=uc.au();if(uc.ae(new n($e.x,D.a())),this.d1(ud)){var Qf=this._g.i1(ud);uc.ae(new n($e.x,Qf.y+this._d.g6(k))),uc.ae(new n(Qf.x+this._d.g5(k),Qf.y+this._d.g6(k)))}else uc.ae(new n($e.x,de)),uc.ae(new n(tp,de));this._d.xr(ud,ud.a2(),k),this._d.m1(ud,uc)}this._d.x4(zp),de+=fj}}var Bs=yq._g.ay()+yq._d.ay()+Rn+p.ay()+X.ay()+$+c;vb=this._d.gj(k);var Im=this.a7(vb,Bs),Ko=this.a8(vb,Bs,Im);Bs=yq._b.ay()+yq._q.ay()+ge+H.ay()+h.ay();var Io=this.a7(vb,Bs),db=this.a8(vb,Bs,Io);if(p.ay()>0)for(var Vg,Pg=Im,nf=V,Xn=this._d.gi(k)+Ko+Pg*(yq._g.ay()+p.ay()-1),Ep=this._d.gh(k),Ug=D._c-D._g-p.ay()*nf;!p.ar();this._d.x4(Vg)){Vg=p.x4();var ur=Vg.ag(),Af=this._d.gd(ur),oh=Af.at();if(Af.ac(new n(oh.x,D.b())),Af.ac(new n(oh.x,Ug)),this.c2(ur)){var ti=this._a.i1(ur);Af.ac(new n(ti.x+this._d.g5(k),Ug)),Af.ac(new n(ti.x+this._d.g5(k),ti.y+this._d.g6(k)))}else Af.ac(new n(Xn,Ug)),Af.ac(new n(Xn,Ep)),Xn-=Pg;Ug+=nf,this._d.xr(ur,k,ur.a3()),this._d.m1(ur,Af)}if(X.ay()>0)for(var Wh,Sr=Im,Nj=V,tg=this._d.gi(k)+this._d.gj(k)-Ko-Sr*yq._d.ay(),ys=this._d.gh(k),Sh=D._c-D._g-Nj;!X.ar();this._d.x4(Wh)){Wh=X.x4();var Km=Wh.ag(),Qi=this._d.gd(Km),Tk=Qi.at();if(Qi.ac(new n(Tk.x,D.b())),Qi.ac(new n(Tk.x,Sh)),this.c2(Km)){var Rg=this._a.i1(Km);Qi.ac(new n(Rg.x+this._d.g5(k),Sh)),Qi.ac(new n(Rg.x+this._d.g5(k),Rg.y+this._d.g6(k)))}else Qi.ac(new n(tg,Sh)),Qi.ac(new n(tg,ys)),tg-=Sr;Sh-=Nj,this._d.xr(Km,k,Km.a3()),this._d.m1(Km,Qi)}if(H.ay()>0)for(var Lr,ij=Io,ml=V,$h=this._d.gi(k)+db+ij*(yq._b.ay()+H.ay()-1),We=this._d.gh(k)+this._d.g9(k),Xk=We+H.ay()*ml;!H.ar();this._d.x4(Lr)){Lr=H.x4();var qb=Lr.ae(),tf=this._d.gd(qb),Ge=tf.au();if(tf.ae(new n(Ge.x,D.a())),tf.ae(new n(Ge.x,Xk)),this.d1(qb)){var cn=this._g.i1(qb);tf.ae(new n(cn.x+this._d.g5(k),Xk)),tf.ae(new n(cn.x+this._d.g5(k),cn.y+this._d.g6(k)))}else tf.ae(new n($h,Xk)),tf.ae(new n($h,We)),$h-=ij;Xk-=ml,this._d.xr(qb,qb.a2(),k),this._d.m1(qb,tf)}if(h.ay()>0)for(var Ml,ri=Io,sm=V,ol=this._d.gi(k)+this._d.gj(k)-db-Io*yq._q.ay(),jk=this._d.gh(k)+this._d.g9(k),ck=jk+sm;!h.ar();this._d.x4(Ml)){Ml=h.x4();var Qh=Ml.ae(),Xp=this._d.gd(Qh),Qk=Xp.au();if(Xp.ae(new n(Qk.x,D.a())),Xp.ae(new n(Qk.x,ck)),this.d1(Qh)){var Gg=this._g.i1(Qh);Xp.ae(new n(Gg.x+this._d.g5(k),ck)),Xp.ae(new n(Gg.x+this._d.g5(k),Gg.y+this._d.g6(k)))}else Xp.ae(new n(ol,ck)),Xp.ae(new n(ol,jk)),ol-=ri;ck+=sm,this._d.xr(Qh,Qh.a2(),k),this._d.m1(Qh,Xp)}for(;!m.ar();){var gm=m.c3(),fg=this._d.gl(gm);D.a()+12<fg.y&&this._d.g7(gm).i4(fg.x,D.a())}for(;!r.ar();){var Pm=r.c3(),lh=this._d.gs(Pm);if(D.b()-12>lh.y){var Rr=this._d.gf(Pm);Rr.ac(new n(lh.x,D.b())),this._d.s6(Pm,Rr)}}}}for(var yf=0;yf<U.length;yf++)for(var Od=U[yf],to=Od._b;to;to=to.a()){var Cs=to.d(),Xg=this._t.a3(Cs);Xg&&Xg._a!=Y&&(this._d.x4(Xg._a),Od.aw(to.b()))}return this._d.xi(this._f),this._d.xj(this._a),this._d.xj(this._g),U},c3:function(q){return this.a3(q)?this.b1(q.ag()):this.a2(q.ae())},b1:function(C){return this._h?this._h.i1(C):Yk.s},a2:function(i){return this._l?this._l.i1(i):Yk.u},c2:function(p){if(p){var P=this.b1(p);return P!=Y&&P.a()}return!1},d1:function(f){if(f){var D=this.a2(f);return D!=Y&&D.a()}return!1},a3:function(q){return 1===q.ao()},b2:function(Y){return 1===Y.ak()},a4:function(P){for(var z=0,g=P._b;g;g=g.a())this.b2(g.d())&&z++;return z},d2:function(w){for(var v=this._k,H=sb.d(w.length+1),W=0;W<w.length;W++){var x=w[W],o=new xf;H[W]=o,o._c=p,o._i=O;for(var z=x.x1();z.i1();z.i2()){var E=z.i9(),A=this._d.gb(E);o._c=$(o._c,A.i2()),o._i=h(o._i,A.i2()+A.i4())}}this._b.a5(w,H);for(var L=0;L<w.length;L++)for(var S=H[L],k=w[L].x1();k.i1();k.i2()){var B=k.i9(),Y=this._f.i1(B);Y&&(S._h=h(S._h,h(Y._f.ay()*v,Y._c.ay()*v)),S._f=h(S._f,h(Y._b.ay()*v,Y._h.ay()*v)))}return H}}),Yk.s=Od.j(2),Yk.u=Od.j(1),Yk._z=new nk;var On=function(){this._af=0,this._b=0};X(On,i,{ib:function(O){this._af=O},ia:function(g,I,y){this.a6(g,I,y),this.b2(!1);var i=this.g();if(this.o()&&i>0){for(var T=this.r(),_=0;20>_&&i>0&&this.o();_++){this.b2(!0);var R=this.g();i>R&&(this.a7(T),i=R)}this.b3(T),this.b1()}return this.c()},a6:function(j,D,q){this._b=(new Date).getTime(),this._ac=j,this._ah=D;var Q=this;this._p=function(P,_){var O=Q._n[P.al()]-Q._n[_.al()];return O>0?1:O>=0?0:-1},this._ad=sb.d(q);for(var C=0;C<this._ad.length;C++)this._ad[C]=new Ti;this._ab=sb.a(this._ac.x0()),this._f=sb.d(this._ac.x0()),this._n=sb.a(this._ac.x0()+1);var w=this._ab;this._o=function(i,U){if(!i&&U)return 1;if(i&&!U)return-1;if(!i&&!U)return 0;var l=i,H=U,j=l._h,e=l.a2(),F=H.a2(),E=w[e.al()]-w[F.al()];if(0===E){var I=On.b(Od.h(j,l),j.gn(l)),h=On.b(Od.h(j,H),j.gn(H)),g=I-h;if(0===g){var Q=w[l.a3().al()]-w[H.a3().al()];return 0===Q?On.a(Od.i(j,l),j.gk(l))-On.a(Od.i(j,H),j.gk(H)):Q}return g}return E},this._l=function(e,P){if(!e&&P)return 1;if(e&&!P)return-1;if(!e&&!P)return 0;var s=e,g=P,l=s._h,O=s.a3(),U=g.a3(),X=w[O.al()]-w[U.al()];if(0===X){var D=On.a(Od.i(l,s),l.gk(s))-On.a(Od.i(l,g),l.gk(g));if(0===D){var k=w[s.a2().al()]-w[g.a2().al()];return 0===k?On.b(Od.h(l,s),l.gn(s))-On.b(Od.h(l,g),l.gn(g)):k}return D}return X},this._z=function($,k){if(!$&&k)return 1;if($&&!k)return-1;if(!$&&!k)return 0;var F=$,G=k,i=F._h;return On.b(Od.h(i,F),i.gn(F))-On.b(Od.h(i,G),i.gn(G))},this._e=function(I,i){if(!I&&i)return 1;if(I&&!i)return-1;if(!I&&!i)return 0;var y=I,P=i,e=y._h;return On.a(Od.i(e,y),e.gk(y))-On.a(Od.i(e,P),e.gk(P))},this._ac.x2(this._e,this._z)},c:function(){this._ah=Y,this._aa=Y,this._f=Y,this._n=Y,this._p=Y,this._o=Y,this._l=Y,this._ac=Y;var L=this._ad;return this._ad=Y,L},o:function(){var D=(new Date).getTime()-this._b;return D<=this._af},m:function(){for(var r=this,U=function(_,w){return v(r._n[_.a3().al()])-v(r._n[w.a3().al()])},l=this._ac.x9();l.i1();l.i2()){for(var Q=l.i9().aw();Q.i1();Q.i2())this._n[Q.i9().al()]=Uh.j();l.i9().av(U)}},b2:function(f){for(var d=0;d<this._ad.length;d++)this._ad[d].af();if(f){this.m();for(var m=0,B=this._ab.length;B>m;m++)this._ab[m]=0;this._ac.x2(Y,this._z)}var k=this._ac.xm();this._ah.i7(k,0);for(var A=this._ac.x9();A.i1();A.i2())0===A.i9().ak()&&A.i9()!==k&&this._ac.xo(k,A.i9());var U=new Bb(this);U.a6(!0),U.a9(this._ac,k),this._ad[0].at(),this._ac.x4(k),this.d()},a1:function(){this._ac.x2(this._o,this._l);for(var g=0,R=1;R<this._ad.length;R++){var i=this.a2(this._ad[R-1],this._ad[R]);g+=i}return g},a2:function(Q,q){var l=Q.ah(),s=q.ah(),U=new dh,x=new dh,p=0;for(this._aa=sb.d(this._ac.x0());l.i1()&&s.i1();s.i2())p+=this.a8(l.i6(),U,x,!0),p+=this.a8(s.i6(),x,U,!1),l.i2();for(;l.i1();l.i2())p+=this.a8(l.i6(),U,x,!0);for(;s.i1();s.i2())p+=this.a8(s.i6(),x,U,!1);return p},a8:function(G,g,x,F){var i=0,p=0,j=0;if(this._aa[G.al()])for(var B=this._aa[G.al()].a(),b=g._b;b!==B;b=b.a()){var U=b._c;U===G?(i++,j+=p,g.aw(b)):p++}var y=i*x.ay()+j;if(F)for(var E=G.ag();E;E=E.a8()){var W=E.a3();this._ab[W.al()]>=this._ab[G.al()]&&(this._aa[W.al()]=x.ae(W))}else for(var H=G.ae();H;H=H.a7()){var n=H.a2();this._ab[n.al()]>this._ab[G.al()]&&(this._aa[n.al()]=x.ae(n))}return y},g:function(){for(var a=this.r(),$=this.a1(),V=!0,f=0;3>f&&this.o()&&$>0;){var m=this.k();$>m?(this.a7(a),$=m):f++,V=!V}if(this.b3(a),this.b1(),$>0){for(var W=1,C=0;1===W&&$>0;C++){this.e(),this.i();var _=this.a1();$>_?(W=1,this.a7(a)):W=-1,$=_}this.b3(a),this.b1()}return $},e:function(){for(var y=this.l(),O=this.r(),m=sb.d(this._ac.x0()),L=this._ad.length-1;L>=0;L--)for(var H=this._ad[L].ah();H.i1();H.i2()){var d=H.i6();if(1===d.ak()&&1===d.ao()){var V=y.i1(d.ag());if(V&&!m[V.al()])for(var P=this.a4(d,V),n=V.al(),a=m[n]=sb.d(P+1),M=a.length-1;M>=0;M--)a[M]=new dh}}for(var o=0;o<this._ad.length;o++)for(var F=this._ad[o].ah();F.i1();F.i2()){var u=F.i6();if(1===u.ak()&&1===u.ao()){var C=y.i1(u.ag());if(C){var T=C.al(),z=this.a4(u,C)-1;m[T][z].ae(u.ae())}}else for(var $=u.ae();$;$=$.a7()){var J=y.i1($);J&&m[J.al()][this.a4(u,J)-1].ae($)}}for(var D=this._ac.x9();D.i1();D.i2()){var t=D.i9();if(m[t.al()])for(var A=t.ag();A;A=A.a8()){var K=y.i1(A);if(K)for(var j=m[K.al()];j[0].ay()>0;){for(var W,p=0;;){W=j[p].am();var Y=W.a3();if(1!==Y.ak()||1!==Y.ao())break;p++}var G=j[p].at().a3();p--,G=W.a2(),W=j[p].at();for(var i=W.a3();p>=0;)if(O[G.al()]!==O[i.al()]&&(this._ab[G.al()]=O[i.al()]),G=G.ae().a2(),--p>=0){var S=j[p].at();i=S.a3()}}}}this.b1(),this._ac.xj(y)},i:function(){for(var F=this.f(),j=this.r(),w=sb.d(this._ac.x0()),C=0;C<this._ad.length;C++)for(var y=this._ad[C].ah();y.i1();y.i2()){var r=y.i6();if(1===r.ak()&&1===r.ao()){var T=F.i1(r.ae());if(T&&!w[T.al()])for(var t=this.a4(T,r),o=w[T.al()]=sb.d(t+1),D=o.length-1;D>=0;D--)o[D]=new dh}}for(var L=this._ad.length-1;L>=0;L--)for(var X=this._ad[L].ah();X.i1();X.i2()){var B=X.i6();if(1===B.ak()&&1===B.ao()){var a=F.i1(B.ae());a&&w[a.al()][this.a4(a,B)-1].ae(B.ag())}else for(var O=B.ag();O;O=O.a8()){var H=F.i1(O);H&&w[H.al()][this.a4(H,B)-1].ae(O)}}for(var k=this._ac.x9();k.i1();k.i2()){var M=k.i9();if(w[M.al()])for(var l=M.ae();l;l=l.a7()){var R=F.i1(l);if(R)for(var s=w[R.al()];s[0].ay()>0;){for(var c,I=0;;){c=s[I].am();var b=c.a2();if(1!==b.ak()||1!==b.ao())break;I++}var V=s[I].at().a2();I--,V=c.a3(),c=s[I].at();for(var U=c.a2();I>=0;)if(j[V.al()]!==j[U.al()]&&(this._ab[V.al()]=j[U.al()]),V=V.ag().a3(),--I>=0){var Q=s[I].at();U=Q.a2()}}}}this.b1(),this._ac.xj(F)},a4:function(C,E){return this._ah.i2(C)-this._ah.i2(E)},l:function(){for(var b=fo.a6(sb.d(this._ac.xg())),W=this._ac.x9();W.i1();W.i2()){var t=W.i9();if(t.ao()>1){for(var J=0,j=t.ag();j;j=j.a8()){var l=j.a3();1===l.ak()&&1===l.ao()&&J++}if(J>1)for(var $=t.ag();$;$=$.a8()){var o=$,a=o.a3();if(1===a.ak()&&1===a.ao()){for(;1===a.ak()&&1===a.ao();a=o.a3())b.i8(o,t),o=a.ag();b.i8(o,t)}}}}return b},f:function(){for(var r=fo.a6(sb.d(this._ac.xg())),g=this._ac.x9();g.i1();g.i2()){var X=g.i9();if(X.ak()>1){for(var Q=0,E=X.ae();E;E=E.a7()){var l=E.a2();1===l.ak()&&1===l.ao()&&Q++}if(Q>1)for(var U=X.ae();U;U=U.a7()){var h=U,T=h.a2();if(1===T.ak()&&1===T.ao()){for(;1===T.ak()&&1===T.ao();T=h.a2())r.i8(h,X),h=T.ae();r.i8(h,X)}}}}return r},k:function(){for(var R=1;R<this._ad.length;R++){for(var X=this._ad[R],i=X.ah();i.i1();i.i2()){var e=i.i6();this._n[e.al()]=this.a5(e,X.ay(),e.am(),this._ad[R-1].ay()),this._n[e.al()]+=this._ab[e.al()]/(3*this._ad[R-1].ay())}this.a3(X,this._p)}return this.a1()},a5:function(x,j,G,Q){var C=0;if(0===G.i7())C=Q*this._ab[x.al()]/j;else{for(;G.i1();G.i2()){var F=G.i8();C+=F.a2()===x?this._ab[F.a3().al()]:this._ab[F.a2().al()]}C/=G.i7()}return C},a7:function(I){sb.f(this._ab,I,I.length)},b3:function(Z){sb.f(Z,this._ab,Z.length)},r:function(){var t=sb.a(this._ab.length);return this.a7(t),t},d:function(){for(var T=0;T<this._ad.length;T++)for(var F=0,L=this._ad[T].ah();L.i1();)this._ab[L.i6().al()]=F,L.i2(),F++},b1:function(){for(var g=0;g<this._ad.length;g++){for(var b=this._ad[g],W=b._b;W;W=W.a()){var t=W.d();this._f[this._ab[t.al()]]=t}for(var R=0,z=b._b;z;)z.c(this._f[R]),z=z.a(),R++}},a3:function(A,U){for(var f=A.ah(),j=0;j<A.ay();f.i2())this._f[j]=f.i6(),j++;sb.s(this._f,A.ay(),U);for(var P=0,x=A._b;x;)x.c(this._f[P]),this._ab[this._f[P].al()]=P,x=x.a(),P++}}),On.b=function(X,Y){if(!X)return 0;var n=X.a()?G(Y.x):0,o=X.a()?G(Y.y):0;return X.e()?1e4-o:X.f()?-1e4+o:X.c()?-2e4-n:n},On.a=function(x,E){if(!x)return 0;var Y=x.a()?G(E.x):0,I=x.a()?G(E.y):0;return x.e()?1e4+I:x.f()?-1e4-I:x.d()?-2e4-Y:Y};var nq=function(){nq.superClass.constructor.call(this),this._i6=0,this._i3=2147483647,this._i0=60,this._iz=20,this._i2=20,this._i4=20,this.i5(!1),this._i7=new fg,this._i1=new On,this._i8=new Kf};X(nq,zc,{j2:function(){return this._i2},i4:function(){return!0},i3:function(R){this._i6=(new Date).getTime(),se.d(R,!1);var m=R.xk(),p=R.xk(),o=R.xl(),d=new oc,L=new Yk(R,m,p,o);L.a6(this.j2()),this._i8.i3(this._iz),this._i8.i6(this._i0),this._i8.i4(this._i2),this._i8.i5(this._i4),this._i8.i2(p);for(var x=this._i7.i1(R,m,d),B=d.c1();B.i1();B.i2()){var K=B.i8();o.i7(K,!0);var l=R.gn(K);R.gt(K,R.gk(K)),R.gz(K,l)}this.a2(R,m,p),x=L.a9(x);var D=this.j1(R,m,x);D=L.a5(D),D=L.b3(D),this._i8.i1(R,D,m),D=L.g2(D),L.e2(D),this.b(R,p),this.w(R),this.a1(R,d),L.e1(),R.xj(o),R.xi(p),R.xi(m)},j1:function(E,d,I){if(this._i1 instanceof On){var z=this._i1,f=(new Date).getTime()-this._i6;z.ib(this._i3-f)}var $=this._i1.ia(E,d,I);return $},a1:function(d,Z){for(var y=Z.c1();y.i1();y.i2()){var L=y.i8(),Q=d.gs(L),j=d.gl(L);d.x3(L);var A=d.gp(L);d.s5(L,A.a()),d.gy(L,Q),d.gx(L,j)}},b:function(v,e){for(var m=v.x9();m.i1();m.i2()){var I=m.i9(),A=e.i1(I);if(A&&!v.xp(A)){for(var g=I.am().i8().a2();e.i1(g);g=I.am().i8().a2())I=g;v.u1(A);for(var L=I.ae(),_=new dh;e.i1(L.a3());L=L.a3().ag()){var H=v.gs(L);_.aa(H),_.az(v.gf(L));var d=v.gl(L);d.equals(H)||_.aa(d)}var x=v.gs(L);_.aa(x),_.az(v.gf(L));var D=v.gl(L);D.equals(x)||_.aa(D),v.m1(A,_)}}for(var j=v.x9();j.i1();j.i2())e.i1(j.i9())&&v.x4(j.i9())},w:function(l){for(var g=l.xf();g.i1();g.i2()){var I=g.i8(),X=l.g2(I);if(X.i1()>0){var N=new P,n=l.gc(I),z=n.c(),Z=z.i6();z.i2();var b=Z.x,c=Z.y;if(z.i1()){var G=z.i6(),$=G.x,a=G.y;for(z.i2();z.i1();z.i2()){var O=z.i6(),h=O.x,d=O.y,J=(b-h)*(a-d)/(c-d)+h;k(J-$)>=1&&(N.add(G),b=$,c=a),G=O,$=h,a=d}}N.size()<X.i1()&&l.s5(I,new S(N))}}},a2:function(c,Q,O){var b=c.g8().c1();for(b.i5();b.i1();b.i3()){var H=b.i8().a2(),X=b.i8().a3(),o=Q.i2(X)-Q.i2(H);if(o>1){for(var M,a,C=H;o>1;o--)M=c.xm(),c.s7(M,1,1),c.s4(M,Uh._A),a=c.xo(C,M),C===H&&c.gt(a,c.gn(b.i8())),Q.i7(M,Q.i2(C)+1),O.z1(M,b.i8()),C=M;a=c.xo(M,X),c.gz(a,c.gk(b.i8())),c.h1(b.i8())}}}});var _g=function(h,G,p,q){this._i=20,this._j=h,this._g=G,this._a=p,this._h=q};X(_g,i,{a1:function(l){this._i=l},b2:function(L){return this._e?this._e.i4(L):!1},a3:function(y){return this._f?this._f.i1(y):Y},d:function(){this._j.xi(this._f),this._j.xi(this._e)}});var xf=function(){this._c=0,this._i=0,this._g=0,this._j=0,this._f=0,this._h=0,this._d=0,this._e=0,this._a=0,this._b=0};X(xf,i,{a:function(){return this._c-this._g-this._f-this._a},b:function(){return this._i+this._j+this._h+this._b}});var dr=function(){this._d=new oc,this._b=new oc,this._c=new oc,this._e=new oc};X(dr,i,{});var yj=function(c,G,S,k,s,n,h,M){this._d=c,this._a=G,this._b=S,this._h=k,this._f=s,this._c=n,this._e=h,this._g=M};X(yj,i,{});var sb={a:function(N,u){for(var n=[],d=0;N>d;d++)n[d]=u||0;return n},b:function(K){for(var v=[],p=0;K>p;p++)v[p]=!1;return v},c:function(x,U){if(x instanceof n)return x.x<U.x?-1:x.x>U.x?1:x.y<U.y?-1:x.y<=U.y?0:1;if(x instanceof L)return U.width>x.width?-1:U.width<x.width?1:U.height>x.height?-1:U.height>=x.height?0:1;if(x instanceof Z)return x.x<U.x?-1:x.x>U.x?1:x.y<U.y?-1:x.y>U.y?1:U.width>x.width?-1:U.width<x.width?1:U.height>x.height?-1:U.height>=x.height?0:1;throw""},d:function(X){for(var S=[],w=0;X>w;w++)S[w]=Y;return S},e:function(C,Z){for(var g=[],r=0;C>r;r++)g[r]=sb.a(Z);return g},f:function(T,$,A){for(var h=0;A>h;h++)$[h]=T[h]},s:function(P,D,L){var c=[];sb.f(P,c,D),c.sort(L),sb.f(c,P,D)},n:function(a,t){return a-t}};F.layout.AutoLayout=function(s){s instanceof F.DataModel?this.dm=s:this.gv=s},X(A+"AutoLayout",i,{_repulsion:1,_type:Y,_offsetX:Y,_offsetY:Y,_xf:0,_yf:0,_animate:!0,_frames:Y,_interval:Y,_duration:Y,_easing:Y,isAnimate:function(){return this._animate},setAnimate:function(x){this._animate=x},getFrames:function(){return this._frames},setFrames:function(u){this._frames=u},getInterval:function(){return this._interval},setInterval:function(k){this._interval=k},getDuration:function(){return this._duration},setDuration:function(t){this._duration=t},getEasing:function(){return this._easing},setEasing:function(N){this._easing=N},getRepulsion:function(){return this._repulsion},setRepulsion:function(z){this._repulsion=z},getOffsetX:function(){return this._offsetX},setOffsetX:function(a){this._offsetX=a},getOffsetY:function(){return this._offsetY},setOffsetY:function(o){this._offsetY=o},getNodeSize:function(n){var P,A=this.gv;return n.getChildrenRect&&(P=n.getChildrenRect(),P&&N.grow(P,15)),!P&&A&&A.getDataUIBounds&&(P=A.getDataUIBounds(n)),P||(P=n.getRect(),N.grow(P,15)),P},isLayoutable:function(B){var h=this.gv;return h&&!h.isVisible(B)?!1:B.s("layoutable")===!1?!1:B instanceof R?B.getSourceAgent()&&B.getTargetAgent()&&!B.isLooped()?!0:!1:B instanceof a?B.getHost()?!1:h?h.isMovable(B):!0:!1},getType:function(){return this._type},getLayoutDatas:function(){var j,J=this,X=J.gv,q=J.dm,h=!1,d=new P;return X?X.sm().size()>1?(h=!0,j=X.sm().getSelection()):j=X.dm().getDatas():q.sm().size()>1?(h=!0,j=q.sm().getSelection()):j=q.getDatas(),J._xf=J._yf=p,j.each(function(D){if(J.isLayoutable(D)&&(d.add(D),h&&D instanceof a)){var u=D.p();
u.x<J._xf&&(J._xf=u.x),u.y<J._yf&&(J._yf=u.y)}}),h||(J._xf=J._offsetX==Y?50:J._offsetX,J._yf=J._offsetY==Y?50:J._offsetY),d},getLayoutResult:function(F){var P={};return this.layoutImpl(F,Y,P),P},layout:function(o,g){return this.layoutImpl(o,g)},layoutImpl:function(A,J,$){this._type=A;var m=this,f={},d=K(A),z=m.getLayoutDatas(),I=new Jd(m,z);if(!d)return!1;z=I.p();var c=new Gl(m,z,A);try{d.i2(c)}catch(H){return I.r(),J&&J(),!1}var G,L,R,V,o=c._a;for(G in o)L=o[G],V=c.g4(L),f[G]={x:V.x+m._xf,y:V.y+m._yf};if(A===_||A===M||A===j){var E,F=x(A),Y=p,b=p,v=2*m._repulsion;for(G in f)L=o[G],R=f[G],V=F.tf(R),R.x=V.x,R.y=V.y,A===_||A===M?(E=V.x-c.g9(L)/v,Y>E&&(Y=E),E=V.y-c.gj(L)/v,b>E&&(b=E)):(E=V.x-c.gj(L)/v,Y>E&&(Y=E),E=V.y-c.g9(L)/v,b>E&&(b=E));for(G in f)L=o[G],R=f[G],R.x=R.x-Y+m._xf,R.y=R.y-b+m._yf}if(!$&&m._animate){var B=m.gv,s={};for(G in f)s[G]=o[G].node.p();B&&(B._autoLayouting=1),N.startAnim({duration:m._duration,frames:m._frames,interval:m._interval,easing:m._easing,finishFunc:function(){I.r(),J&&J(),B&&(delete B._autoLayouting,B.onAutoLayoutEnded())},action:function(J){for(G in f){var n=s[G],V=f[G];o[G].node.p(n.x+(V.x-n.x)*J,n.y+(V.y-n.y)*J)}}})}else{for(G in f)L=o[G],R=f[G],$?$[L.node.getId()]=R:L.node.p(R);I.r(),J&&J()}return!0}})}(this,Object);

//contextmenu
!function(Y,x){"use strict";var G="ht",L=Y[G],s="position",C="absolute",g="px",h="left",D="top",M="innerHTML",P="className",w="width",F="height",q="0",W="?",j="display",Z="none",l="visibility",N="user-select",S="margin",y="padding",e=null,p=L.Color,t=L.Default,c=t.getInternal(),O=Y.setTimeout,Q=Y.setInterval,B=Y.clearTimeout,f=Y.clearInterval,T=Y.parseInt,r=t.isLeftButton,z=t.isDragging,n=t.startDragging,$=t.getDistance,J=t.isTouchable,v=p.widgetIconHighlight,d=p.widgetIconBorder,i=p.widgetIconGradient,u=function(){return document},H=function(f,k){return f.querySelectorAll(k)},K=function(b,d){var A=u().createElement(b);return"ul"===b&&(o(A,s,"relative"),o(A,S,q),o(A,y,q),o(A,"list-style",Z),o(A,"box-sizing","border-box"),o(A,"-moz-box-sizing","border-box"),o(A,j,"inline-block"),o(A,"vertical-align","text-bottom"),o(A,"border","1px solid "+t.contextMenuBorderColor),o(A,"box-shadow","0 0 16px 1px "+t.contextMenuShadowColor),o(A,"overflow","hidden"),d||o(A,"border-radius",5+g)),A},I=function(R){var s=R.touches[0];return s?s:R.changedTouches[0]},k=function(){return K("div")},E=function(){return K("canvas")},o=function(f,g,B){f.style.setProperty(g,B,e)},b=function(N,q,v){t.def(L.widget[N],q,v)},R=function(X,f){X.appendChild(f)},a=function(O,m){O.removeChild(m)},V=function(){return u().body},m=function(C,$,Y,t){C.addEventListener($,Y,!!t)},_=function(Y,G,F,x){Y.removeEventListener(G,F,!!x)};c.addMethod(t,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:d},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:v}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:d},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:v,gradient:t.imageGradient,gradientColor:i,background:v}]},contextMenuLabelFont:(J?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var U=function(C){var x=this,y=C._view;if(x.$11b=C,x.addListeners(),m(y,"contextmenu",function(D){D.preventDefault()}),!J){var e=x.$37b=x.$36b.bind(x);m(y,"mouseover",e),m(y,"mouseout",e)}};t.def(U,x,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(X){if(t.preventDefault(X),r(X)){for(var Z=this,k=Z.$11b,p=Z.getView(),m=p.children,$=0;$<m.length;$++){var E=m[$],e=E.$24b,A=E.$25b;if(e&&e.contains(X.target))return k.scrollUp(E),Z.$28b=O(function(){Z.$29b=Q(function(){k.scrollUp(E)},100)},500),n(Z,X),void 0;if(A&&A.contains(X.target))return k.scrollDown(E),Z.$28b=O(function(){Z.$29b=Q(function(){k.scrollDown(E)},100)},500),n(Z,X),void 0}J&&(X=I(X)),Z.$30b={x:X.pageX,y:X.pageY}}},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchend:function(C){if(r(C)){var b=this,n=b.$30b,B=J?{x:I(C).pageX,y:I(C).pageY}:{x:C.pageX,y:C.pageY};if(!n||$(n,B)>1)return delete b.$30b,void 0;for(var H=b.getView(),q=b.$11b,F=C.target,A=e,m=e,S=q._items,M=H.$26b,N=0;N<M.length;N++)if(m=M[N],m.contains(F)){A=m.getAttribute("data-id");break}if(A&&S){var L=q.$17b(S,function(O){return O._id===A});if(L){var u=!1;L.disabled instanceof Function?u=L.disabled.call(q,L):L.disabled===!0&&(u=!0),u||(L.items?J&&b.$36b(m,!0):q.$1b(L,C))}}delete b.$30b}},$36b:function(r,O){if(!z()){var V,u=this,W=u.$11b,f=u.getView(),K=W.$20b||f.children[0],C=W.$19b,p=f.$26b,n=f.children,Y=r.target,b=f.getBoundingClientRect(),e=t.getWindowInfo(),y=e.width,J=e.height,A=function(i){for(var k=0;k<n.length;k++){var Z=n[k],r=new RegExp(i+"$"),T=Z[P];if(T&&(r.test(T)||T.indexOf(i+" ")>=0))return Z}},c=function(K){for(var Y=0;Y<p.length;Y++){var U=p[Y],Q=new RegExp(K+"$"),g=U[P];if(g&&(Q.test(g)||g.indexOf(K+" ")>=0))return U}},s=function($){var N=c("menu-item"+$.$45b),L=N.getBoundingClientRect(),U=L.top-b.top,F=L.left-b.left;o($,D,U+g),o($,h,F+L.width+g);var A=$.getBoundingClientRect(),z=A.top,n=A.left,E=A.height,v=A.width,H=z+E+2,R=n+v+2;H>J&&o($,D,U+J-H+g),R>y&&o($,h,F-v+g)};if(O)V=r;else{if("mouseover"===r.type){for(var M=0;M<p.length;M++){var k=p[M];if(k.contains(Y)){V=k;break}}if(!V&&C){var U=C.parentNode,j=A("submenu"+C.getAttribute("data-id"));(j&&j.contains(Y)||U&&U.contains(Y))&&(V=C)}}else if("mouseout"===r.type){for(var I=!1,Z=r.relatedTarget,M=0;M<n.length;M++){var L=n[M];if("hidden"!==L.style.visibility&&L.contains(Z)){I=!0;break}}if(I)return}!V&&K&&(V=c("menu-item"+(K.$45b||"NaN")))}if(V!=C){if(C)for(var R=C;R;){R[P]=R[P].replace(" menu-item-hover",""),R[P].indexOf("disabled")<0&&(o(R,"background-color",t.contextMenuBackground),o(R,"color",t.contextMenuLabelColor));var B=A("submenu"+R.getAttribute("data-id"));B&&o(B,l,"hidden");var E=R.parentNode;R=c("menu-item"+(E.$45b||"NaN"))}if(V){for(var Q=V,T=[];Q;){Q[P]+=" menu-item-hover",Q[P].indexOf("disabled")<0&&(o(Q,"background-color",t.contextMenuHoverBackground),o(Q,"color",t.contextMenuHoverLabelColor));var _=A("submenu"+Q.getAttribute("data-id"));_&&(o(_,l,"visible"),T.push(_));var E=Q.parentNode;Q=c("menu-item"+(E.$45b||"NaN"))}T.reverse(),T.forEach(function(R){s(R)})}}W.$19b=V,W.$20b=V?V.parentNode:f.children[0]}},handle_mouseup:function(E){this.handle_touchend(E)},handleWindowTouchEnd:function(){var n=this;n.$28b!=e&&(B(n.$28b),delete n.$28b),n.$29b!=e&&(f(n.$29b),delete n.$29b),delete n.$34b,delete n.$30b,delete n.$35b},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handle_mousemove:function(y){this.handle_touchmove(y)},handle_touchmove:function(P){if(!z()&&r(P)){for(var x=this,u=x.getView().children,V=e,t=0;t<u.length;t++){var S=u[t];if(S.contains(P.target)){V=S;break}}var g=x.$30b,v=J?{x:I(P).pageX,y:I(P).pageY}:{x:P.pageX,y:P.pageY};V&&g&&$(g,v)>2&&(n(x,P),x.$34b=V,x.$35b=V.$18b)}},handleWindowTouchMove:function(m){var P=this,w=P.$11b,H=P.$34b,T=P.$35b,Q=P.$30b;if(Q&&H){var s=J?{x:I(m).pageX,y:I(m).pageY}:{x:m.pageX,y:m.pageY},x=s.y-Q.y;x>0?w.scrollUp(H,H.$18b-(T-x)):w.scrollDown(H,T-x-H.$18b)}},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},$10b:function(w,f){w.preventDefault();for(var O=this,M=O.getView().children,F=e,y=0;y<M.length;y++){var U=M[y];if(U.contains(w.target)){F=U;break}}if(F){var l=this.$11b,H=l.getRowHeight();Math.abs(f)>.05&&(f>0?l.scrollUp(F,f*H):0>f&&l.scrollDown(F,-f*H))}},handle_mousewheel:function(m){this.$10b(m,m.wheelDelta/40)},handle_DOMMouseScroll:function(I){this.$10b(I,-I.detail)},$44b:function(W){this.getView().contains(W.target)||this.$11b.hide()},$41b:function(m){this.$11b.show(m)},$4b:function(E,o){var n=this.$11b;if(o=o||n._items,o&&o.length&&E.keyCode){var $=[E.keyCode];E.shiftKey&&$.push(16),E.ctrlKey&&$.push(17),E.altKey&&$.push(18),/mac/.test(Y.navigator?Y.navigator.userAgent.toLowerCase():"")?E.metaKey&&$.push(17):E.metaKey&&$.push(91),$.sort();var A=$.join(),q=n.$17b(o,function(f){if(f.key){var o=f.key.slice(0);return o.sort(),A===o.join()}});if(q){q.preventDefault!==!1&&E.preventDefault();var t=!1;q.disabled instanceof Function?t=q.disabled.call(n,q):q.disabled===!0&&(t=!0),t||n.$1b(q,E)}}},$39b:function(x){var N=this,A=I(x);N.$32b={x:A.pageX,y:A.pageY}},$38b:function(R){var C=this,x=I(R);C.$31b={x:x.pageX,y:x.pageY},C.$33b=O(function(){C.$31b&&(C.$32b?$(C.$31b,C.$32b)<10&&C.$11b.show(R):C.$11b.show(R)),delete C.$33b,delete C.$31b,delete C.$32b},600)},$40b:function(){var c=this;c.$33b!=e&&(B(c.$33b),delete c.$33b,delete c.$31b,delete c.$32b)}}),L.widget.ContextMenu=function(R){var x=this,J=x._view=k();J[P]="ht-widget-contextmenu",x.setItems(R),x.$13b=new U(x),o(J,"font",t.contextMenuLabelFont),o(J,s,C),o(J,"cursor","default"),o(J,"-webkit-"+N,Z),o(J,"-moz-"+N,Z),o(J,"-ms-"+N,Z),o(J,N,Z),o(J,"box-sizing","border-box"),o(J,"-moz-box-sizing","border-box"),t.baseZIndex!=e&&o(J,"z-index",T(t.baseZIndex)+2+""),x.$3b=function(H){x.$13b.$4b(H)}},b("ContextMenu",x,{$5b:0,_items:e,$21b:e,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var S=this,o=S._enableGlobalKey;o===!1&&(m(u(),"keydown",S.$3b),S._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,_(u(),"keydown",this.$3b)},setItems:function(R){this._items=R},setVisibleFunc:function(_){this.$16b=_},setLabelMaxWidth:function(W){this.$43b=W},$1b:function(O,t){var I=this;if("check"===O.type)O.selected=!O.selected;else if("radio"===O.type){var x=O.groupId;I.$17b(I._items,function(c){c.groupId===x&&(c.selected=!1)}),O.selected=!0}if(I.hide(),O.action)O.action.apply(O.scope||I,[O,t]);else if(O.href){var A=O.linkTarget||"_self";Y.open(O.href,A)}},getItemByProperty:function(K,S,i){var l=this;if(i=i||l._items,!i||0===i.length)return e;var L=l.$17b(i,function(y){return y[K]===S});return L||e},scrollUp:function(I,b){var t=this;if(b=b==e?20:b,b=T(b),0!==b){var Q=0;I.$18b>b&&(Q=I.$18b-b),t.$42b(I,Q),I.scrollTop=Q,I.$18b=Q}},scrollDown:function(W,Z){var B=this;if(Z=Z==e?20:Z,Z=T(Z),0!==Z){var j=W.$22b,V=W.$23b,R=j-V;V+W.$18b+Z<j&&(R=W.$18b+Z),B.$42b(W,R),W.scrollTop=R,W.$18b=R}},$42b:function(V,p){p=p==e?V.$18b:p;var $=V.$24b,d=V.$25b;$&&(o($,"top",p+g),0==p?o($,j,Z):o($,j,"block")),d&&(o(d,"bottom",-p+g),p==V.$22b-V.$23b?o(d,j,Z):o(d,j,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(z,c){for(var s=0;s<z.length;s++){var B=z[s];if(c(B))return B;if(B.items){var Z=this.$17b(B.items,c);if(Z)return Z}}},$2b:function(U,p){for(var I=this,Y=0;Y<U.length;Y++){I.$5b++;var h=U[Y];if(!I.$16b||I.$16b.call(I,h)){var Q=K("li"),D=I.$5b+"";if(o(Q,"white-space","nowrap"),o(Q,j,"block"),"separator"===h){var G=k();G[P]="separator",o(G,F,t.contextMenuSeparatorWidth+g),o(G,"background",t.contextMenuSeparatorColor),R(Q,G)}else{h._id=D,Q.setAttribute("data-id",D);var e=K("span"),B=K("span"),$=E(),V=k();if(o(e,j,"inline-block"),o(B,j,"inline-block"),$[P]="prefix",o($,j,"inline-block"),o($,w,"1em"),o($,F,"1em"),o($,"vertical-align","middle"),o($,S,"0 0.2em"),"check"===h.type&&h.selected?$[P]+=" check-prefix":"radio"===h.type&&h.selected&&($[P]+=" radio-prefix"),R(Q,$),h.icon){var J=E();J[P]="contextmenu-item-icon",o(J,j,"inline-block"),o(J,"vertical-align","middle"),o(J,F,"1.2em"),o(J,w,"1.2em"),o(J,"margin-right","0.2em"),J.$50b=h.icon,R(e,J)}if(B[M]=h.label,R(e,B),R(Q,e),V[P]="suffix",o(V,j,"inline-block"),o(V,"margin-left","1em"),o(V,"margin-right","0.4em"),o(V,"text-align","right"),o(V,"font-size","75%"),h.items&&(V[M]=W),h.suffix&&(V[M]=h.suffix),R(Q,V),Q[P]="menu-item menu-item"+D,o(Q,"background-color",t.contextMenuBackground),o(Q,"color",t.contextMenuLabelColor),o(Q,y,"3px 0"),h.disabled instanceof Function){var q=h.disabled.call(I,h);q&&(Q[P]+=" disabled",o(Q,"color",t.contextMenuDisabledLabelColor))}else h.disabled&&(Q[P]+=" disabled",o(Q,"color",t.contextMenuDisabledLabelColor));if(h.items){I.$21b||(I.$21b=new L.List);var H=K("ul",I._r);H[P]="submenu"+D,H.$45b=D,o(H,l,"hidden"),o(H,s,C),R(I._view,H),I.$21b.add(H),I.$2b(h.items,H)}}R(p,Q)}}},rebuild:function(){var X=this,Q=X._items,q=X._view;if(q&&(q[M]="",X.$21b=e,X.$5b=0,X.$19b=e,X.$20b=e,q.$26b=e,Q&&0!==Q.length)){var F=K("ul",X._r);R(q,F),X.$2b(Q,F)}},addTo:function(T){if(T){var F=this,p=F.$13b;if(F.$12b=T,F.$9b=function(a){p.$44b(a)},F.$27b=function(r){p.$41b(r)},J){var n=F.$6b=function(O){p.$38b(O)},X=F.$7b=function(b){p.$39b(b)},r=F.$8b=function(X){p.$40b(X)};m(T,"touchstart",n,!0),m(T,"touchmove",X),m(T,"touchend",r)}else m(T,"contextmenu",F.$27b)}},show:function(y,f,v){var S=this,v=v==e?!0:!1,N=S._view;if(N){if(S.invalidate(),1===arguments.length){var x=y;if(J){var T=I(x);y=T.pageX,f=T.pageY}else y=x.pageX,f=x.pageY}var Q=t.getWindowInfo(),z=Q.width,L=Q.height,n=Q.left,A=Q.top,$={pageX:y,pageY:f,clientX:y-n,clientY:f-A,target:1,originEvent:x},l=$.clientX,E=$.clientY,p=function(Q){Q.style.height=L-6+g;var K=k(),b=k(),$=function(B){o(B,s,C),o(B,"text-align","center"),o(B,w,"100%"),o(B,"font-size",10+g),o(B,"padding","2px 0"),o(B,"border","0px solid "+t.contextMenuScrollerBorderColor),o(B,"background-color",t.contextMenuScrollerColor1),B.style.backgroundImage="-webkit-linear-gradient(top, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")",B.style.backgroundImage="linear-gradient(to bottom, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")"};K[P]="menu-arrow-item menu-arrow-item-top",b[P]="menu-arrow-item menu-arrow-item-bottom",$(K),o(K,"top",q),o(K,"left",q),o(K,"border-bottom-width",1+g),K[M]="",$(b),o(b,"bottom",q),o(b,"left",q),o(b,"border-top-width",1+g),b[M]="",Q.$24b=K,Q.$25b=b,Q.$18b=Q.scrollTop,Q.$22b=Q.scrollHeight,Q.$23b=Q.clientHeight,R(Q,K),R(Q,b),S.$42b(Q)};S.beforeShow&&S.beforeShow($);var r=S._items;if(r&&(x&&x.preventDefault(),r.length)){S.rebuild(),R(V(),N),N.$26b=H(N,".menu-item");var X=N.children[0];X.offsetHeight>L&&p(X);var U=E+(v?1:0),O=l+(v?1:0),Y=function(P){for(var d=0,_=0,y=0,A=S.$43b;y<P.children.length;y++){var z=P.children[y];if(z.getAttribute("data-id")){var F=z.children[1],t=z.children[2],L=F.children;if(A){var m=L[0];L.length>1&&(m=L[1]),m.offsetWidth>A&&(m[M]="<marquee scrollamount='3'>"+m[M]+"</marquee>",m.children[0].style.verticalAlign="text-bottom",o(m,w,A+g),o(m,j,"inline-block"))}var q=F.offsetWidth,s=t.offsetWidth;q>d&&(d=q),s>_&&(_=s)}}for(y=0;y<P.children.length;y++){var z=P.children[y];if(z.getAttribute("data-id")){var F=z.children[1],t=z.children[2],C=F.children[0],D=F.children[1];!D&&C.style.width&&o(C,w,d+g),o(F,w,d+g),o(t,w,_+g)}}};Y(X);var c=E+3+N.offsetHeight,G=l+3+N.offsetWidth;c>L?o(N,D,U-(c-L)+A+g):o(N,D,U+A+g),G>z?o(N,h,O-(G-z)+n+g):o(N,h,O+n+g);var i=S.$21b;i&&i.each(function(t){Y(t),t.offsetHeight>L&&p(t)}),S.$9b&&m(u(),J?"touchstart":"mousedown",S.$9b,!0),S.afterShow&&S.afterShow($),S.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=e:!1},getRelatedView:function(){return this.$12b},hide:function(){var s=this,D=s._view;D&&D.parentNode&&(a(D.parentNode,D),_(u(),J?"touchstart":"mousedown",s.$9b,!0),s.afterHide&&s.afterHide())},dispose:function(){var x=this,Y=x.$12b,b=x._view;b&&(b.parentNode&&a(b.parentNode,b),x.disableGlobalKey(),Y&&(J?(_(Y,"touchstart",x.$6b,!0),_(Y,"touchmove",x.$7b),_(Y,"touchend",x.$8b)):_(Y,"contextmenu",x.$27b)),x._view=x._items=x.$21b=x.$19b=x.$12b=x.beforeShow=x.afterShow=x.afterHide=x.$9b=x.$3b=x.$6b=x.$7b=x.$8b=x.$27b=e)},$46b:function(J,U,n,s){var Y=c.initContext(J);c.translateAndScale(Y,0,0,1),Y.clearRect(0,0,n,s),t.drawStretchImage(Y,t.getImage(U),"fill",0,0,n,s),Y.restore()},$47b:function(){var f,q,Y,N=this,n=N._view;if(N.isShowing()){var r=H(n,".check-prefix");for(Y=0;Y<r.length;Y++){var w=r[Y];f=w.clientWidth,q=w.clientHeight,w.$48b=f,w.$49b=q,c.setCanvas(w,f,q)}var y=H(n,".radio-prefix");for(Y=0;Y<y.length;Y++){var O=y[Y];f=O.clientWidth,q=O.clientHeight,O.$48b=f,O.$49b=q,c.setCanvas(O,f,q)}var s=H(n,".contextmenu-item-icon");for(Y=0;Y<s.length;Y++){var m=s[Y];f=m.clientWidth,q=m.clientHeight,m.$48b=f,m.$49b=q,c.setCanvas(m,f,q)}}},validateImpl:function(){var L,b,A,o=this,r=o._view;if(o.isShowing()){var E=H(r,".check-prefix");for(A=0;A<E.length;A++){var u=E[A];L=u.$48b,b=u.$49b,L&&b&&o.$46b(u,t.contextMenuCheckIcon,L,b)}var x=H(r,".radio-prefix");for(A=0;A<x.length;A++){var G=x[A];L=G.$48b,b=G.$49b,L&&b&&o.$46b(G,t.contextMenuRadioIcon,L,b)}var N=H(r,".contextmenu-item-icon");for(A=0;A<N.length;A++){var R=N[A];L=R.$48b,b=R.$49b,L&&b&&o.$46b(R,t.getImage(R.$50b),L,b)}}}})}(this,Object);

//telecom
!function(J,U){"use strict";var D=ht.AlarmSeverity=function(n,R,q,Z,p){this.value=n,this.name=R,this.nickName=q,this.color=Z,this.displayName=p};ht.Default.def("ht.AlarmSeverity",U,{toString:function(){return this.displayName||this.name}}),function(){D.severities=new ht.List,D._vm={},D._nm={},D._cp=function(P,l){if(P&&l){var p=P.value-l.value;return p>0?1:0>p?-1:0}return P&&!l?1:!P&&l?-1:0},D.each=function(S,s){D.severities.each(S,s)},D.getSortFunction=function(){return D._cp},D.setSortFunction=function(d){D._cp=d,D.severities.sort(d)},D.add=function(L,R,I,z,t){var v=new D(L,R,I,z,t);return D._vm[L]=v,D._nm[R]=v,D.severities.add(v),D.severities.sort(D._cp),v},D.remove=function(H){var X=D._nm[H];return X&&(delete D._nm[H],delete D._vm[X.value],D.severities.remove(X)),X},D.CRITICAL=D.add(500,"Critical","C","#FF0000"),D.MAJOR=D.add(400,"Major","M","#FFA000"),D.MINOR=D.add(300,"Minor","m","#FFFF00"),D.WARNING=D.add(200,"Warning","W","#00FFFF"),D.INDETERMINATE=D.add(100,"Indeterminate","N","#C800FF"),D.CLEARED=D.add(0,"Cleared","R","#00FF00"),D.isClearedAlarmSeverity=function(z){return z?0===z.value:!1},D.getByName=function(F){return D._nm[F]},D.getByValue=function(i){return D._vm[i]},D.clear=function(){D.severities.clear(),D._vm={},D._nm={}},D.compare=function(e,a){return D._cp(e,a)}}();var a=ht.AlarmState=function(c){this._d=c,this._nm={},this._am={},this._ps=null,this._haa=null,this._hna=null,this._hoa=null,this._hta=null,this._hls=!1,this._aac=0,this._nac=0};ht.Default.def("ht.AlarmState",U,{_ep:!0,_f:function(){this._c1(),this._c2(),this._c3(),this._c4(),this._c5(),this._c6(),this._c7(),this._d.fp("alarmState",null,this)},getHighestAcknowledgedAlarmSeverity:function(){return this._haa},getHighestNewAlarmSeverity:function(){return this._hna},getHighestOverallAlarmSeverity:function(){return this._hoa},getHighestNativeAlarmSeverity:function(){return this._hta},hasLessSevereNewAlarms:function(){return this._hls},_c1:function(){var f=null;for(var c in this._am)c=D.getByName(c),D.isClearedAlarmSeverity(c)||0!==this.getAcknowledgedAlarmCount(c)&&(f=f?D.compare(f,c)>0?f:c:c);this._haa=f},_c2:function(){var H=null;for(var U in this._nm)U=D.getByName(U),D.isClearedAlarmSeverity(U)||0!==this.getNewAlarmCount(U)&&(H=H?D.compare(H,U)>0?H:U:U);this._hna=H},_c3:function(){if(!this._hna)return this._hls=!1,void 0;for(var J in this._nm)if(J=D.getByName(J),!D.isClearedAlarmSeverity(J)&&0!==this.getNewAlarmCount(J)&&D.compare(this._hna,J)>0)return this._hls=!0,void 0;this._hls=!1},_c4:function(){var Q=this._haa,T=this._hna,K=this._ps;this._hoa=Q,D.compare(T,this._hoa)>0&&(this._hoa=T),D.compare(K,this._hoa)>0&&(this._hoa=K)},_c5:function(){var A=this._haa,r=this._hna;this._hta=A,D.compare(r,this._hta)>0&&(this._hta=r)},increaseAcknowledgedAlarm:function(w,I){if(0!==I){I=I||1;var N=this._am[w.name]||0;N+=I,this._am[w.name]=N,this._f()}},increaseNewAlarm:function(P,h){if(0!==h){h=h||1;var g=this._nm[P.name]||0;g+=h,this._nm[P.name]=g,this._f()}},decreaseAcknowledgedAlarm:function(J,f){if(0!==f){f||(f=1);var x=this._am[J.name]||0;if(x-=f,0>x)throw"Alarm count can not be negative";this._am[J.name]=x,this._f()}},decreaseNewAlarm:function(n,g){if(0!==g){g||(g=1);var c=this._nm[n.name]||0;if(c-=g,0>c)throw"Alarm count can not be negative";this._nm[n.name]=c,this._f()}},acknowledgeAlarm:function(l){this.decreaseNewAlarm(l,1),this.increaseAcknowledgedAlarm(l,1)},acknowledgeAllAlarms:function(T){if(T){var I=this.getNewAlarmCount(T);this.decreaseNewAlarm(T,I),this.increaseAcknowledgedAlarm(T,I)}else for(var j in this._nm)this.acknowledgeAllAlarms(D.getByName(j))},_c6:function(){this._aac=0;for(var H in this._am)H=D.getByName(H),this._aac+=this.getAcknowledgedAlarmCount(H)},getAcknowledgedAlarmCount:function(A){return A?this._am[A.name]||0:this._aac},getAlarmCount:function(k){return this.getAcknowledgedAlarmCount(k)+this.getNewAlarmCount(k)},_c7:function(){this._nac=0;for(var v in this._nm)this._nac+=this.getNewAlarmCount(D.getByName(v))},getNewAlarmCount:function(a){return a?this._nm[a.name]||0:this._nac},setNewAlarmCount:function(F,K){this._nm[F.name]=K,this._f()},removeAllNewAlarms:function(x){x?delete this._nm[x]:this._nm={},this._f()},setAcknowledgedAlarmCount:function(U,s){this._am[U.name]=s,this._f()},removeAllAcknowledgedAlarms:function(Y){Y?delete this._am[Y.name]:this._am={},this._f()},isEmpty:function(){return!this._hoa},clear:function(){this._am={},this._nm={},this._f()},getPropagateSeverity:function(){return this._ps},setPropagateSeverity:function(o){if(this._ep||(o=null),this._ps!==o){var B=this._ps;this._ps=o,this._f(),this._d.fp("propagateSeverity",B,o)}},isEnablePropagation:function(){return this._ep},setEnablePropagation:function(D){var A=this._ep;this._ep=D,this._d.fp("enablePropagation",A,D)&&(D||this.setPropagateSeverity(null))}});var N=ht.AlarmStatePropagator=function(E){this._dataModel=E,this._enable=!1,this._isPropagating=!1};ht.Default.def("ht.AlarmStatePropagator",U,{getDataModel:function(){return this._dataModel},isEnable:function(){return this._enable},setEnable:function(b){this._enable!==b&&(this._enable=b,this._enable?(this._dataModel.mm(this.handleDataModelChange,this),this._dataModel.md(this.handleDataPropertyChange,this),this._dataModel.each(function(Z){this.propagate(Z)},this)):(this._dataModel.umm(this.handleDataModelChange,this),this._dataModel.umd(this.handleDataPropertyChange,this)))},handleDataModelChange:function(y){y.data&&this.propagate(y.data)},handleDataPropertyChange:function(C){if("alarmState"===C.property||"enablePropagation"===C.property)this.propagate(C.data);else if("parent"===C.property){var T=C.oldValue;T&&this.propagate(T),this.propagate(C.data)}},propagate:function(q){q&&!this._isPropagating&&(this._isPropagating=!0,this.propagateToTop(q),this._isPropagating=!1)},propagateToTop:function(S){for(this.propagateToParent(null,S);S&&S.getParent();)this.propagateToParent(S,S.getParent()),S=S.getParent()},propagateToParent:function(H,C){var S=null;C.getChildren().each(function(Q){var K=Q.getAlarmState().getHighestOverallAlarmSeverity();D.compare(K,S)>0&&(S=K)}),C.getAlarmState().setPropagateSeverity(S)}}),ht.AlarmStateStatistics=function(I){this.sumNew=0,this.sumAcked=0,this.sumTotal=0,this.severtiyMap={},this.dataMap={},this.setDataModel(I)},ht.Default.def("ht.AlarmStateStatistics",U,{ms_fire:1,getDataModel:function(){return this._dataModel},setDataModel:function(K){var S=this._dataModel;S!==K&&(S&&(S.umd(this.handleDataPropertyChange,this),S.umm(this.handleDataModelChange,this),this.severtiyMap={},this.dataMap={}),this._dataModel=K,this.reset(),K.md(this.handleDataPropertyChange,this),K.mm(this.handleDataModelChange,this),this.fp("dataModel",S,K))},dispose:function(){this._dataModel.umd(this.handleDataPropertyChange,this),this._dataModel.umm(this.handleDataModelChange,this),delete this._dataModel},handleDataPropertyChange:function(J){"alarmState"===J.property&&(this.increase(J.data),this.fireAlarmStateChange())},handleDataModelChange:function(x){"add"===x.kind?(this.increase(x.data),this.fireAlarmStateChange()):"remove"===x.kind?(this.decrease(x.data),this.fireAlarmStateChange()):"clear"===x.kind&&(this.severtiyMap={},this.dataMap={},this.fireAlarmStateChange())},fireAlarmStateChange:function(){this.sumAcked=0,this.sumNew=0,this.sumTotal=0,D.each(function(D){var K=this.getSumInfo(D);this.sumAcked+=K.ackedCount,this.sumNew+=K.newCount,this.sumTotal+=K.totalCount},this),this.fp("alarmState",!1,!0)},getNewAlarmCount:function(L){if(!L)return this.sumNew;var h=this.getSumInfo(L);return h.newCount},getAcknowledgedAlarmCount:function(o){if(!o)return this.sumAcked;var f=this.getSumInfo(o);return f.ackedCount},getTotalAlarmCount:function(u){if(!u)return this.sumTotal;var P=this.getSumInfo(u);return P.totalCount},getSumInfo:function(o){var c=this.severtiyMap[o.name];return c||(c={},c.newCount=0,c.ackedCount=0,c.totalCount=0,this.severtiyMap[o.name]=c),c},decrease:function(K){var t=this.dataMap[K.getId()];t&&(delete this.dataMap[K.getId()],D.each(function(O){var k=t[O.name],N=this.getSumInfo(O);N.newCount=N.newCount-k.newCount,N.ackedCount=N.ackedCount-k.ackedCount,N.totalCount=N.totalCount-k.totalCount},this))},increase:function(N){if(this.decrease(N),!this._filterFunc||this._filterFunc(N)){var r={},K=N.getAlarmState();this.dataMap[N.getId()]=r,D.each(function(V){var J={};J.newCount=K.getNewAlarmCount(V),J.ackedCount=K.getAcknowledgedAlarmCount(V),J.totalCount=K.getAlarmCount(V),r[V.name]=J;var c=this.getSumInfo(V);c.newCount=c.newCount+J.newCount,c.ackedCount=c.ackedCount+J.ackedCount,c.totalCount=c.totalCount+J.totalCount},this)}},reset:function(){this.severtiyMap={},this.dataMap={},this._dataModel.each(this.increase,this),this.fireAlarmStateChange()},setFilterFunc:function(m){var t=this._filterFunc;this._filterFunc=m,this.reset(),this.firePropertyChange("filterFunc",t,m)},getFilterFunc:function(){return this._filterFunc}});var n=ht.Data.prototype;n.getAlarmState=function(){return this._alarmState||(this._alarmState=new a(this))},n=ht.DataModel.prototype,n.isEnableAlarmStatePropagator=function(){return!!this._alarmStatePropagator&&this._alarmStatePropagator.isEnable()},n.setEnableAlarmStatePropagator=function(c){c!=this.isEnableAlarmStatePropagator()&&(c?(this._alarmStatePropagator=new N(this)).setEnable(!0):this._alarmStatePropagator.setEnable(!1))},n=ht.graph.GraphView.prototype,n.getNote2=function(y){var i=y.getAlarmState().getHighestNewAlarmSeverity();if(i){var N=y.getAlarmState().getNewAlarmCount(i)+i.nickName;return y.getAlarmState().hasLessSevereNewAlarms()&&(N+="+"),N}return y.s("note2")},n.getNote2Background=function(N){var u=N.getAlarmState().getHighestNewAlarmSeverity();return u?u.color:N.s("note2.background")},n.getBodyColor=function(r){var b=r.getAlarmState().getHighestNativeAlarmSeverity();return b?b.color:r.s("body.color")},n.getBorderColor=function(E){var N=E.getAlarmState().getPropagateSeverity();return N?N.color:E.s("border.color")},n=ht.widget.TreeView.prototype,n.getBorderColor=function(v){var h=v.getAlarmState().getPropagateSeverity();return h?h.color:v.s("border.color")},n.getIcon=function(t){return t.getIcon()?"__alarmIcon__":null},n=ht.widget.TreeTableView.prototype,n.getBorderColor=function(v){var w=v.getAlarmState().getPropagateSeverity();return w?w.color:v.s("border.color")},n.getIcon=function(E){return E.getIcon()?"__alarmIcon__":null},ht.Default.setImage("__alarmIcon__",{width:16,height:16,comps:[{type:"image",name:{func:function(R){return R.getIcon()}},color:{func:function(n){var m=n.getAlarmState().getHighestNativeAlarmSeverity();return m?m.color:n.s("body.color")}},rect:[0,0,16,16]}]});var b=ht.Style;b["note2.expanded"]=!0,b["note2.color"]="#000"}(this,Object);

//overview
!function(k,e){"use strict";var s="ht",O=s+".graph.",Q=k[s],E=Q.graph,i=Q.Default,V=Q.Color,n=null,S="px",j=i.getInternal(),q=j.getPinchDist,Y=i.preventDefault,T=i.getTouchCount,R=i.startDragging;j.addMethod(i,{overviewBackground:V.widgetBackground,overviewMaskBackground:V.transparent,overviewContentBorderColor:V.widgetBorder,overviewContentBackground:V.background},!0),E.Overview=function(g){var x=this,P=x._view=j.createDiv(1);x._canvas=j.createCanvas(P),P.style.background=i.overviewBackground,P.appendChild(x._mask=j.createDiv()),x.gv=g,x.redraw(),x.addListeners(),g.addViewListener(x.handleView,x)},i.def(O+"Overview",e,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:i.overviewMaskBackground,_contentBorderColor:i.overviewContentBorderColor,_contentBackground:i.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var W=this;W.gv.removeViewListener(W.handleView,W)},onPropertyChanged:function(){this.redraw()},handleView:function(h){this._autoUpdate&&"validate"===h.kind&&this.redraw()},redraw:function(){var n=this;n._redraw||(n._redraw=1,n.iv(50))},validateImpl:function(){var g=this,p=g.gv,Y=g._canvas,L=g._mask,h=L.style,z=g.getWidth(),s=g.getHeight(),q=p.getViewRect(),Q=p.getScrollRect(),x=Q.x,X=Q.y,b=Q.width,C=Q.height,u=g._rate=Math.max(b/z,C/s),y=g._x=(z-b/u)/2,J=g._y=(s-C/u)/2,T=g._redraw;if(0!==q.width&&0!==q.height||g.hasRetry||(i.callLater(g.iv,g,n),g.hasRetry=!0),(z!==Y.clientWidth||s!==Y.clientHeight)&&(j.setCanvas(Y,z,s,1),T=1),j.isSameRect(Q,g._scrollRect)||(g._scrollRect=Q,T=1),T){var o=j.initContext(Y),t=g._contentBackground,a=g._contentBorderColor;o.clearRect(0,0,z,s),t&&j.fillRect(o,y,J,b/u,C/u,t),a&&j.drawBorder(o,a,y,J,b/u,C/u),o.translate(-x/u+y,-X/u+J),o.scale(1/u,1/u),p._42(o),o.restore()}h.background=g._maskBackground,h.left=y+(q.x-x)/u+S,h.top=J+(q.y-X)/u+S,h.width=q.width/u+S,h.height=q.height/u+S,delete g._redraw},center:function(k){var s=this,z=s.gv,y=z._zoom,V=z._29I,e=s._rate,x=s._scrollRect,X=i.getLogicalPoint(k,s._canvas),E=x.x+(X.x-s._x)*e,j=x.y+(X.y-s._y)*e;z.setTranslate((V.width/2-E)*y,(V.height/2-j)*y)},handle_mousedown:function(f){this.handle_touchstart(f)},handleWindowMouseUp:function(d){this.handleWindowTouchEnd(d)},handleWindowMouseMove:function(X){this.handleWindowTouchMove(X)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(u){2===u.axis&&this.handleScroll(u,-u.detail)},handleScroll:function(Z,E){Y(Z);var l=this.gv;E>0?l.scrollZoomIn():0>E&&l.scrollZoomOut()},handle_touchstart:function(z){if(Y(z),i.isLeftButton(z)){var M=this,m=M.gv,r=T(z);1===r?i.isDoubleClick(z)&&m.isResettable()?m.reset():(M.center(z),R(M,z)):2===r&&(M._dist=q(z),R(M,z))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(t){var R=this,_=R._dist,L=T(t);1===L?R.center(t):2===L&&_!=n&&R.gv.handlePinch(n,q(t),_)}})}(this,Object);

//edgetype
!function(T){"use strict";var d="ht",I=T[d],C=Math,k=C.max,o=C.min,J=C.abs,s=C.atan2,U=C.cos,D=C.sin,M=C.ceil,R=I.Default,E=R.getInternal(),r=I.List,b=E.Mat,j=E.getNodeRect,p=E.intersectionLineRect,H=R.getDistance,f=R.setEdgeType,t="left",z="right",c="top",u="bottom",g="edge.type",i="edge.gap",V="edge.center",A="edge.extend",G=function(l,J){return j(l,J).width},Q=function(Y,T){return j(Y,T).height},v=function(I,W){var Y=E.getPosition(W.s("edge.source.position"),j(I,W._40I));return Y.x+=W.s("edge.source.offset.x"),Y.y+=W.s("edge.source.offset.y"),Y},B=function(b,v){var Q=E.getPosition(v.s("edge.target.position"),j(b,v._41I));return Q.x+=v.s("edge.target.offset.x"),Q.y+=v.s("edge.target.offset.y"),Q},F=function(I,Y){var Z=I.s(g),_=I.getEdgeGroup();if(_){var s=0;if(_.eachSiblingEdge(function(e){Y.isVisible(e)&&e.s(g)==Z&&s++}),s>1)return I.s(i)*(s-1)/2}return 0},e=function(V,E){var f=V.s(g),U=V.isLooped();if(!V.getEdgeGroup())return U?V.s(i):0;var m,S=0,I=0,C=0;return V.getEdgeGroup().getSiblings().each(function(v){v.each(function(d){if(d._40I===V._40I&&d.s(g)==f&&E.isVisible(d)){var U=d.s(i);m?(I+=C/2+U/2,C=U):(m=d,C=U),d===V&&(S=I)}})}),U?I-S+C:S-I/2},S=function(u,M){var G=u.size(),f=M.s("edge.corner.radius");if(0===f)return{points:u,segments:new r([1,G])};if(0>f)return{points:u};var F,C=new r,y=new r,B=u.get(0);C.add(B),y.add(1);for(var d=1;G>d;d++)if(G>d+1){var b=u.get(d),x=u.get(d+1),e=B.x,P=B.y,h=b.x,p=b.y,R=p-P,L=h-e,v=s(R,L);F=o(.99*H(B,b),f),C.add({x:h-F*U(v),y:p-F*D(v)}),C.add(b),e=b.x,P=b.y,h=x.x,p=x.y,R=p-P,L=h-e,v=s(R,L),F=o(.99*H(b,x),f),B={x:e+F*U(v),y:P+F*D(v)},C.add(B),y.addAll([2,3])}else C.add(u.get(d)),y.add(2);return{points:C,segments:y}};E.addMethod(I.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),f("boundary",function(t,_,P,J){J||(_=-_);var A,G=v(P,t),e=B(P,t),w=j(P,t._40I),l=j(P,t._41I),c=new b(s(e.y-G.y,e.x-G.x)),V=H(G,e),Q=G.x,D=G.y;return A=c.tf(0,_),G={x:A.x+Q,y:A.y+D},A=c.tf(V,_),e={x:A.x+Q,y:A.y+D},A=p(G,e,w),A&&(G={x:A[0],y:A[1]}),A=p(G,e,l),A&&(e={x:A[0],y:A[1]}),{points:new r([G,e])}}),f("ripple",function(t,L,y,m){m||(L=-L);var P=v(y,t),O=B(y,t),i=H(P,O),C=o(t.s("edge.offset"),i/2),e=t.s("edge.ripple.size"),N=t.s("edge.ripple.length"),Q=t.s("edge.ripple.both"),W=t.s(V),x=t.s("edge.ripple.elevation"),_=new r,z=t.s("edge.ripple.straight")?null:new r,A=new b(s(O.y-P.y,O.x-P.x));m||(x=-x),i-=2*C,N>0&&(e=M(i/N));var q=i/e;z&&z.add(1);for(var Y=0;e>Y;Y++)z&&z.add(3),0===Y?_.add({x:C+q*Y,y:W?0:L}):_.add({x:C+q*Y,y:L}),_.add({x:C+q*Y+q/2,y:x+L}),Q&&(x=-x);for(_.add({x:C+i,y:W?0:L}),Y=0;Y<_.size();Y++){var f=A.tf(_.get(Y));f.x+=P.x,f.y+=P.y,_.set(Y,f)}return{points:_,segments:z}}),f("h.v",function(x,T,u){T=e(x,u);var L=new r,R=x.s(V),y=v(u,x),N=y.x,s=y.y,I=B(u,x),g=I.x,c=I.y,k=0,W=0,Z=g-N,l=c-s;return R||(k=G(u,x._40I)/2,W=Q(u,x._41I)/2),Z>=0&&0>=l?(L.add({x:N+k,y:s+T}),L.add({x:g+T,y:s+T}),L.add({x:g+T,y:c+W})):0>=Z&&l>=0?(L.add({x:N-k,y:s+T}),L.add({x:g+T,y:s+T}),L.add({x:g+T,y:c-W})):Z>=0&&l>=0?(L.add({x:N+k,y:s+T}),L.add({x:g-T,y:s+T}),L.add({x:g-T,y:c-W})):(L.add({x:N-k,y:s+T}),L.add({x:g-T,y:s+T}),L.add({x:g-T,y:c+W})),S(L,x)}),f("v.h",function(k,D,f){D=e(k,f);var c=new r,M=k.s(V),I=v(f,k),n=I.x,R=I.y,h=B(f,k),w=h.x,A=h.y,p=0,q=0,J=w-n,m=A-R;return M||(p=G(f,k._41I)/2,q=Q(f,k._40I)/2),J>=0&&0>=m?(c.add({x:n+D,y:R-q}),c.add({x:n+D,y:A+D}),c.add({x:w-p,y:A+D})):0>=J&&m>=0?(c.add({x:n+D,y:R+q}),c.add({x:n+D,y:A+D}),c.add({x:w+p,y:A+D})):J>=0&&m>=0?(c.add({x:n-D,y:R+q}),c.add({x:n-D,y:A+D}),c.add({x:w-p,y:A+D})):(c.add({x:n-D,y:R-q}),c.add({x:n-D,y:A+D}),c.add({x:w+p,y:A+D})),S(c,k)}),f("ortho",function(K,N,W){var n=new r,i=K.s(V),P=K.s("edge.ortho"),Z=K._40I,y=K._41I,D=v(W,K),H=D.x,R=D.y,l=B(W,K),$=l.x,s=l.y,F=$-H,d=s-R,u=i?0:G(W,Z)/2,x=i?0:Q(W,Z)/2,z=i?0:G(W,y)/2,p=i?0:Q(W,y)/2,o=(F-(u+z)*(F>0?1:-1))*P,h=(d-(x+p)*(d>0?1:-1))*P;return J(F)<J(d)?F>=0&&0>=d?(n.add({x:H+N,y:R-x}),n.add({x:H+N,y:R+h+N-x}),n.add({x:$+N,y:R+h+N-x}),n.add({x:$+N,y:s+p})):0>=F&&d>=0?(n.add({x:H+N,y:R+x}),n.add({x:H+N,y:R+h+N+x}),n.add({x:$+N,y:R+h+N+x}),n.add({x:$+N,y:s-p})):F>=0&&d>=0?(n.add({x:H+N,y:R+x}),n.add({x:H+N,y:R+h-N+x}),n.add({x:$+N,y:R+h-N+x}),n.add({x:$+N,y:s-p})):(n.add({x:H+N,y:R-x}),n.add({x:H+N,y:R+h-N-x}),n.add({x:$+N,y:R+h-N-x}),n.add({x:$+N,y:s+p})):F>=0&&0>=d?(n.add({x:H+u,y:R+N}),n.add({x:H+o+N+u,y:R+N}),n.add({x:H+o+N+u,y:s+N}),n.add({x:$-z,y:s+N})):0>=F&&d>=0?(n.add({x:H-u,y:R+N}),n.add({x:H+o+N-u,y:R+N}),n.add({x:H+o+N-u,y:s+N}),n.add({x:$+z,y:s+N})):F>=0&&d>=0?(n.add({x:H+u,y:R+N}),n.add({x:H+o-N+u,y:R+N}),n.add({x:H+o-N+u,y:s+N}),n.add({x:$-z,y:s+N})):(n.add({x:H-u,y:R+N}),n.add({x:H+o-N-u,y:R+N}),n.add({x:H+o-N-u,y:s+N}),n.add({x:$+z,y:s+N})),S(n,K)}),f("flex",function(C,n,T){var c=new r,L=C.s("edge.flex")+F(C,T),$=C.s(V),D=C._40I,e=C._41I,h=v(T,C),X=h.x,m=h.y,R=B(T,C),K=R.x,g=R.y,O=K-X,U=g-m,j=$?0:G(T,D)/2,w=$?0:Q(T,D)/2,q=$?0:G(T,e)/2,a=$?0:Q(T,e)/2,x=O>0?L:-L,M=U>0?L:-L;return J(O)<J(U)?O>=0&&0>=U?(c.add({x:X+n,y:m-w}),c.add({x:X+n,y:m+M+n-w}),c.add({x:K+n,y:g-M+n+a}),c.add({x:K+n,y:g+a})):0>=O&&U>=0?(c.add({x:X+n,y:m+w}),c.add({x:X+n,y:m+M+n+w}),c.add({x:K+n,y:g-M+n-a}),c.add({x:K+n,y:g-a})):O>=0&&U>=0?(c.add({x:X+n,y:m+w}),c.add({x:X+n,y:m+M-n+w}),c.add({x:K+n,y:g-M-n-a}),c.add({x:K+n,y:g-a})):(c.add({x:X+n,y:m-w}),c.add({x:X+n,y:m+M-n-w}),c.add({x:K+n,y:g-M-n+a}),c.add({x:K+n,y:g+a})):O>=0&&0>=U?(c.add({x:X+j,y:m+n}),c.add({x:X+x+n+j,y:m+n}),c.add({x:K-x+n-q,y:g+n}),c.add({x:K-q,y:g+n})):0>=O&&U>=0?(c.add({x:X-j,y:m+n}),c.add({x:X+x+n-j,y:m+n}),c.add({x:K-x+n+q,y:g+n}),c.add({x:K+q,y:g+n})):O>=0&&U>=0?(c.add({x:X+j,y:m+n}),c.add({x:X+x-n+j,y:m+n}),c.add({x:K-x-n-q,y:g+n}),c.add({x:K-q,y:g+n})):(c.add({x:X-j,y:m+n}),c.add({x:X+x-n-j,y:m+n}),c.add({x:K-x-n+q,y:g+n}),c.add({x:K+q,y:g+n})),S(c,C)}),f("extend.east",function(H,W,f){var c=new r,J=H.s(A)+F(H,f),o=H.s(V),x=v(f,H),T=x.x+(o?0:G(f,H._40I)/2),g=x.y,P=B(f,H),u=P.x+(o?0:G(f,H._41I)/2),$=P.y,Z=k(T,u)+J;return g>$?(c.add({x:T,y:g+W}),c.add({x:Z+W,y:g+W}),c.add({x:Z+W,y:$-W}),c.add({x:u,y:$-W})):(c.add({x:T,y:g-W}),c.add({x:Z+W,y:g-W}),c.add({x:Z+W,y:$+W}),c.add({x:u,y:$+W})),S(c,H)}),f("extend.west",function(I,l,c){var R=new r,O=I.s(A)+F(I,c),M=I.s(V),_=v(c,I),m=_.x-(M?0:G(c,I._40I)/2),U=_.y,x=B(c,I),L=x.x-(M?0:G(c,I._41I)/2),h=x.y,u=o(m,L)-O;return U>h?(R.add({x:m,y:U+l}),R.add({x:u-l,y:U+l}),R.add({x:u-l,y:h-l}),R.add({x:L,y:h-l})):(R.add({x:m,y:U-l}),R.add({x:u-l,y:U-l}),R.add({x:u-l,y:h+l}),R.add({x:L,y:h+l})),S(R,I)}),f("extend.north",function(j,X,d){var T=new r,E=j.s(A)+F(j,d),K=j.s(V),e=v(d,j),W=e.x,p=e.y-(K?0:Q(d,j._40I)/2),L=B(d,j),M=L.x,C=L.y-(K?0:Q(d,j._41I)/2),_=o(p,C)-E;return W>M?(T.add({y:p,x:W+X}),T.add({y:_-X,x:W+X}),T.add({y:_-X,x:M-X}),T.add({y:C,x:M-X})):(T.add({y:p,x:W-X}),T.add({y:_-X,x:W-X}),T.add({y:_-X,x:M+X}),T.add({y:C,x:M+X})),S(T,j)}),f("extend.south",function(R,i,n){var M=new r,G=R.s(A)+F(R,n),H=R.s(V),p=v(n,R),$=p.x,W=p.y+(H?0:Q(n,R._40I)/2),E=B(n,R),l=E.x,t=E.y+(H?0:Q(n,R._41I)/2),U=k(W,t)+G;return $>l?(M.add({y:W,x:$+i}),M.add({y:U+i,x:$+i}),M.add({y:U+i,x:l-i}),M.add({y:t,x:l-i})):(M.add({y:W,x:$-i}),M.add({y:U+i,x:$-i}),M.add({y:U+i,x:l+i}),M.add({y:t,x:l+i})),S(M,R)});var $=function(I,B,y,J,M){if(J.sort(function(V,T){var c=V.getSourceAgent()===B?V.getTargetAgent():V.getSourceAgent(),$=T.getSourceAgent()===B?T.getTargetAgent():T.getSourceAgent(),d=c.p(),Z=$.p();if(y===t||y===z){if(d.y>Z.y)return 1;if(d.y<Z.y)return-1}else{if(d.x>Z.x)return 1;if(d.x<Z.x)return-1}return R.sortFunc(V.getId(),T.getId())}),M){for(var G,V,u,g=I.getSourceAgent(),Y=I.getTargetAgent(),D=0;D<J.size();D++){var x=J.get(D);x.getSourceAgent()===g&&x.getTargetAgent()===Y||x.getTargetAgent()===g&&x.getSourceAgent()===Y?(V||(V=new r),V.add(x,0)):V?(u||(u=new r),u.add(x)):(G||(G=new r),G.add(x))}J.clear(),G&&J.addAll(G),V&&J.addAll(V),u&&J.addAll(u)}var j=J.indexOf(I),K=J.size(),P=I.s(i);return{side:y,index:j,size:K,offset:-P*(K-1)/2+P*j}},Z=function(n,A,h,B,i){var s=A.s(g);return $(A,h,B,h.getAgentEdges().toList(function(x){return n.isVisible(x)&&x.s(g)===s}),i)},x=function(y,k){var M=y.getSourceAgent()===k?y.getTargetAgent():y.getSourceAgent(),b=k.p(),B=M.p(),P=B.x-b.x,x=B.y-b.y;return P>0&&J(x)<=P?z:0>P&&J(x)<=-P?t:x>0&&J(P)<=x?u:c},Y=function(S,E,G){var i=E.s(g),A=x(E,G);return $(E,G,A,G.getAgentEdges().toList(function(W){return S.isVisible(W)&&W.s(g)===i&&x(W,G)===A}))},h=function(B,f){var n=B.getSourceAgent()===f,Q=n?B.getTargetAgent():B.getSourceAgent(),L=f.p(),d=Q.p();return n?L.y>d.y?c:u:L.x<d.x?z:t},w=function(k,P,Z){var _=P.s(g),S=h(P,Z);return $(P,Z,S,Z.getAgentEdges().toList(function(x){return k.isVisible(x)&&x.s(g)===_&&h(x,Z)===S}),S===z||S===u)},L=function(A,s){var a=A.getSourceAgent()===s,N=a?A.getTargetAgent():A.getSourceAgent(),w=s.p(),I=N.p();return a?w.x<I.x?z:t:w.y>I.y?c:u},a=function(P,K,i){var k=K.s(g),G=L(K,i);return $(K,i,G,i.getAgentEdges().toList(function(l){return P.isVisible(l)&&l.s(g)===k&&L(l,i)===G}),G===z||G===u)},l=function(M,n,q){var P=M.getSourceAgent(),B=M.getTargetAgent(),F=P.getId()>B.getId(),L=F?B:P,Z=F?P:B,b=L.p(),I=Z.p(),x=q(n,M,L),p=q(n,M,Z),f=M.s(V),j=f?0:G(n,L)/2,o=f?0:G(n,Z)/2,O=f?0:Q(n,L)/2,X=f?0:Q(n,Z)/2,D=x.offset,k=p.offset,W=x.side,H=p.side,K=new r;return W===c?(K.add({x:b.x+D,y:b.y-O}),K.add({x:b.x+D,y:I.y+k}),H===t?K.add({x:I.x-o,y:I.y+k}):K.add({x:I.x+o,y:I.y+k})):W===u?(K.add({x:b.x+D,y:b.y+O}),K.add({x:b.x+D,y:I.y+k}),H===t?K.add({x:I.x-o,y:I.y+k}):K.add({x:I.x+o,y:I.y+k})):W===t?(K.add({x:b.x-j,y:b.y+D}),K.add({x:I.x+k,y:b.y+D}),H===u?K.add({x:I.x+k,y:I.y+X}):K.add({x:I.x+k,y:I.y-X})):W===z&&(K.add({x:b.x+j,y:b.y+D}),K.add({x:I.x+k,y:b.y+D}),H===u?K.add({x:I.x+k,y:I.y+X}):K.add({x:I.x+k,y:I.y-X})),F&&K.reverse(),S(K,M)};f("ortho2",function(i,Z,y){var o,M,P=i.s(V),n=i.s("edge.ortho"),C=i.getSourceAgent(),I=i.getTargetAgent(),J=C.getId()>I.getId(),K=J?I:C,D=J?C:I,A=K.p(),N=D.p(),b=Y(y,i,K),h=Y(y,i,D),$=P?0:G(y,K)/2,e=P?0:Q(y,K)/2,B=P?0:G(y,D)/2,O=P?0:Q(y,D)/2,X=new r,k=b.offset,d=h.offset,E=b.side;return E===z?(o=N.y>A.y?-k:k,M=A.x+$+(N.x-B-A.x-$)*n,X.add({x:A.x+$,y:A.y+k}),X.add({x:M+o,y:A.y+k}),X.add({x:M+o,y:N.y+d}),X.add({x:N.x-B,y:N.y+d})):E===t?(o=N.y>A.y?-k:k,M=A.x-$-(A.x-$-N.x-B)*n,X.add({x:A.x-$,y:A.y+k}),X.add({x:M-o,y:A.y+k}),X.add({x:M-o,y:N.y+d}),X.add({x:N.x+B,y:N.y+d})):E===u?(o=N.x>A.x?-k:k,M=A.y+e+(N.y-O-A.y-e)*n,X.add({x:A.x+k,y:A.y+e}),X.add({x:A.x+k,y:M+o}),X.add({x:N.x+d,y:M+o}),X.add({x:N.x+d,y:N.y-O})):E===c&&(o=N.x>A.x?-k:k,M=A.y-e-(A.y-e-N.y-O)*n,X.add({x:A.x+k,y:A.y-e}),X.add({x:A.x+k,y:M-o}),X.add({x:N.x+d,y:M-o}),X.add({x:N.x+d,y:N.y+O})),J&&X.reverse(),S(X,i)},!0),f("flex2",function(J,e,h){var H,o=J.getSourceAgent(),x=J.getTargetAgent(),N=o.getId()>x.getId(),w=N?x:o,_=N?o:x,g=w.p(),B=_.p(),d=Y(h,J,w),D=Y(h,J,_),$=J.s(V),C=J.s("edge.flex")+(d.size-1)/2*J.s(i),W=$?0:G(h,w)/2,X=$?0:Q(h,w)/2,A=$?0:G(h,_)/2,U=$?0:Q(h,_)/2,b=new r,I=d.offset,M=D.offset,R=d.side;return R===z?(H=B.y>g.y?-I:I,b.add({x:g.x+W,y:g.y+I}),b.add({x:g.x+W+C+H,y:g.y+I}),b.add({x:B.x-A-C+H,y:B.y+M}),b.add({x:B.x-A,y:B.y+M})):R===t?(H=B.y>g.y?-I:I,b.add({x:g.x-W,y:g.y+I}),b.add({x:g.x-W-C-H,y:g.y+I}),b.add({x:B.x+A+C-H,y:B.y+M}),b.add({x:B.x+A,y:B.y+M})):R===u?(H=B.x>g.x?-I:I,b.add({x:g.x+I,y:g.y+X}),b.add({x:g.x+I,y:g.y+X+C+H}),b.add({x:B.x+M,y:B.y-U-C+H}),b.add({x:B.x+M,y:B.y-U})):R===c&&(H=B.x>g.x?-I:I,b.add({x:g.x+I,y:g.y-X}),b.add({x:g.x+I,y:g.y-X-C-H}),b.add({x:B.x+M,y:B.y+U+C-H}),b.add({x:B.x+M,y:B.y+U})),N&&b.reverse(),S(b,J)},!0),f("extend.north2",function(a,x,e){var N=a.getSourceAgent(),P=a.getTargetAgent(),H=N.getId()>P.getId(),q=H?P:N,C=H?N:P,T=q.p(),t=C.p(),b=Z(e,a,q,c),$=Z(e,a,C,c,!0),Y=a.s(V),B=Y?0:Q(e,q)/2,g=Y?0:Q(e,C)/2,w=b.offset,y=$.offset,d=a.s(A)+(b.size-1)/2*a.s(i),I=o(T.y-B,t.y-g)-d+(T.x<t.x?w:-w),U=new r;return U.add({x:T.x+w,y:T.y-B}),U.add({x:T.x+w,y:I}),U.add({x:t.x+y,y:I}),U.add({x:t.x+y,y:t.y-g}),H&&U.reverse(),S(U,a)},!0),f("extend.south2",function(D,G,J){var q=D.getSourceAgent(),n=D.getTargetAgent(),c=q.getId()>n.getId(),R=c?n:q,j=c?q:n,t=R.p(),z=j.p(),a=Z(J,D,R,u),K=Z(J,D,j,u,!0),$=D.s(V),C=$?0:Q(J,R)/2,O=$?0:Q(J,j)/2,d=a.offset,w=K.offset,o=D.s(A)+(a.size-1)/2*D.s(i),T=k(t.y+C,z.y+O)+o+(t.x>z.x?d:-d),m=new r;return m.add({x:t.x+d,y:t.y+C}),m.add({x:t.x+d,y:T}),m.add({x:z.x+w,y:T}),m.add({x:z.x+w,y:z.y+O}),c&&m.reverse(),S(m,D)},!0),f("extend.west2",function(t,e,F){var Y=t.getSourceAgent(),l=t.getTargetAgent(),Q=Y.getId()>l.getId(),n=Q?l:Y,N=Q?Y:l,w=n.p(),q=N.p(),p=Z(F,t,n,c),s=Z(F,t,N,c,!0),j=t.s(V),E=j?0:G(F,n)/2,M=j?0:G(F,N)/2,g=p.offset,C=s.offset,h=t.s(A)+(p.size-1)/2*t.s(i),K=o(w.x-E,q.x-M)-h+(w.y<q.y?g:-g),O=new r;return O.add({x:w.x-E,y:w.y+g}),O.add({x:K,y:w.y+g}),O.add({x:K,y:q.y+C}),O.add({x:q.x-M,y:q.y+C}),Q&&O.reverse(),S(O,t)},!0),f("extend.east2",function(R,y,E){var Q=R.getSourceAgent(),d=R.getTargetAgent(),o=Q.getId()>d.getId(),K=o?d:Q,f=o?Q:d,U=K.p(),p=f.p(),w=Z(E,R,K,c),W=Z(E,R,f,c,!0),B=R.s(V),I=B?0:G(E,K)/2,D=B?0:G(E,f)/2,J=w.offset,X=W.offset,O=R.s(A)+(w.size-1)/2*R.s(i),e=k(U.x+I,p.x+D)+O+(U.y>p.y?J:-J),L=new r;return L.add({x:U.x+I,y:U.y+J}),L.add({x:e,y:U.y+J}),L.add({x:e,y:p.y+X}),L.add({x:p.x+D,y:p.y+X}),o&&L.reverse(),S(L,R)},!0),f("v.h2",function(o,g,A){return l(o,A,w)},!0),f("h.v2",function(Y,$,T){return l(Y,T,a)},!0)}(this,Object);

//edit edge
var CreateEdgeInteractor = function (graphView) {
    CreateEdgeInteractor.superClass.constructor.call(this, graphView);
};
ht.Default.def(CreateEdgeInteractor, ht.graph.Interactor, {
    setUp: function () {
        CreateEdgeInteractor.superClass.setUp.call(this);
        this._autoMakeVisible = this._graphView.isAutoMakeVisible();
        this._graphView.setAutoMakeVisible(false);
    },
    tearDown: function () {
        CreateEdgeInteractor.superClass.tearDown.call(this);
        this._graphView.setAutoMakeVisible(this._autoMakeVisible);
        this._graphView.getSelectionModel().clearSelection();
    },
    handle_mousedown: function (e) {
        this.handle_touchstart(e);
    },
    handle_touchstart: function (e) {
        this. _sourceNode = this.getNodeAt(e);
        if(this._sourceNode){
            this._targetNode = null;
            this.startDragging(e);
            this._graphView.addTopPainter(this);
            this._graphView.getSelectionModel().setSelection(this._sourceNode);
        }
    },
    getNodeAt: function(e){
        if(ht.Default.isLeftButton(e) && ht.Default.getTouchCount(e) === 1){
            var data = this._graphView.getDataAt(e);
            if(data instanceof ht.Node){
                return data;
            }
        }
        return null;
    },
    handleWindowMouseMove: function (e) {
        this.handleWindowTouchMove(e);
    },
    handleWindowMouseUp: function (e) {
        this.handleWindowTouchEnd(e);
    },
    handleWindowTouchMove: function (e) {
        var graphView = this._graphView;
        this.redraw();
        this._logicalPoint = graphView.getLogicalPoint(e);
        this.autoScroll(e);
        this._targetNode = this.getNodeAt(e);
        if(this._targetNode){
            graphView.getSelectionModel().setSelection([this._sourceNode, this._targetNode]);
        }else{
            graphView.getSelectionModel().setSelection([this._sourceNode]);
        }
        this.redraw();
    },
    handleWindowTouchEnd: function (e) {
        this.redraw();
        if(this._targetNode){

        	if (this._graphView.createLinkCallback) {
        		this._graphView.createLinkCallback(this._graphView.topoView, this._sourceNode.shell, this._targetNode.shell);
        	}
            // var edge = new ht.Edge(this._sourceNode, this._targetNode);
            // edge.setParent(this._graphView.getCurrentSubGraph());
            // this._graphView.getDataModel().add(edge);
            // this._graphView.getSelectionModel().setSelection(edge);
        }
        this._graphView.removeTopPainter(this);
    },
    redraw: function(){
        var p1 = this._sourceNode.getPosition(),
            p2 = this._logicalPoint;
        if(p1 && p2){
            var rect = ht.Default.unionPoint(p1, p2);
            ht.Default.grow(rect, 1);
            this._graphView.redraw(rect);
        }
    },
    draw: function (g) {
        var p1 = this._sourceNode.getPosition(),
            p2 = this._logicalPoint;
        if(p1 && p2){
            g.lineWidth = 1;
            g.strokeStyle = '#FF0000';
            g.beginPath();
            g.moveTo(p1.x, p1.y);
            g.lineTo(p2.x, p2.y);
            g.stroke();
        }
    }
});
