!function(k,v){"use strict";var S="ht",s=S+".graph.",P=k[S],J=P.graph,E=P.Default,O=P.Color,c=null,D="px",B=E.getInternal(),W=B.getPinchDist,y=E.preventDefault,U=E.getTouchCount,u=E.startDragging;B.addMethod(E,{overviewBackground:O.widgetBackground,overviewMaskBackground:O.transparent,overviewContentBorderColor:O.widgetBorder,overviewContentBackground:O.background},!0),J.Overview=function(v){var n=this,i=n._view=B.createView(1,n);n._canvas=B.createCanvas(i),i.style.background=E.overviewBackground,i.appendChild(n._mask=B.createDiv()),n.setGraphView(v),n.addListeners()},E.def(s+"Overview",v,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:E.overviewMaskBackground,_contentBorderColor:E.overviewContentBorderColor,_contentBackground:E.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(X){var g=this;if(g.gv!==X){var V=g.gv;g.gv=X,V&&(V.removeViewListener(g.handleGraphViewChanged,g),V.ump(g.handleGraphViewPropertyChanged,g)),X&&(X.addViewListener(g.handleGraphViewChanged,g),X.mp(g.handleGraphViewPropertyChanged,g)),g.fp("graphView",V,X),g.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(t){this._autoUpdate&&"validate"===t.kind&&this.redraw()},handleGraphViewPropertyChanged:function(W){("canvasBackground"===W.property||this.getFixToRect()&&("zoom"===W.property||"translateX"===W.property||"translateY"===W.property))&&this.redraw()},redraw:function(){var F=this;F._redraw||(F._redraw=1,F.iv(50))},validateImpl:function(){var l=this,K=l.gv,y=l._canvas,n=l.getWidth(),M=l.getHeight(),q=l._redraw;if(K){var H=l._mask,e=H.style,i=K.getViewRect(),L=this.getFixToRect(),k=L?"boolean"==typeof L?K.getContentRect():L:K.getScrollRect(),o=k.x,N=k.y,G=k.width,O=k.height,f=l._rate=Math.max(G/n,O/M),w=l._x=(n-G/f)/2,v=l._y=(M-O/f)/2;if(0!==i.width&&0!==i.height||l.hasRetry||(E.callLater(l.iv,l,c),l.hasRetry=!0),(n!==y.clientWidth||M!==y.clientHeight)&&(B.setCanvas(y,n,M),q=1),B.isSameRect(k,l._scrollRect)||(l._scrollRect=k,q=1),q){var $=B.initContext(y),P=K.getDataModel(),h=P.getBackground()||l._contentBackground,Z=l._contentBorderColor,Q=E.devicePixelRatio;$.clearRect(0,0,n*Q,M*Q);var u=P.getBackground()&&P.a("width")>0&&P.a("height")>0;h&&!u&&B.fillRect($,w*Q,v*Q,G/f*Q,O/f*Q,h),B.translateAndScale($,-o/f+w,-N/f+v,1/f),K._42($),$.restore(),Z&&B.drawBorder($,Z,w*Q,v*Q,G/f*Q,O/f*Q)}e.background=l._maskBackground,e.left=w+(i.x-o)/f+D,e.top=v+(i.y-N)/f+D,e.width=i.width/f+D,e.height=i.height/f+D,l._redraw=null}else if(q){var $=B.initContext(y);$.clearRect(0,0,n,M),$.restore(),l._redraw=null}},center:function(S){var L=this,D=L.gv;if(D){var G=D._zoom,V=D._29I,H=L._rate,y=L._scrollRect,j=E.getLogicalPoint(S,L._canvas),v=y.x+(j.x-L._x)*H,W=y.y+(j.y-L._y)*H;D.setTranslate((V.width/2-v)*G,(V.height/2-W)*G)}},handle_mousedown:function(J){this.handle_touchstart(J)},handleWindowMouseUp:function(C){this.handleWindowTouchEnd(C)},handleWindowMouseMove:function(q){this.handleWindowTouchMove(q)},handle_mousewheel:function(P){this.handleScroll(P,P.wheelDelta)},handle_DOMMouseScroll:function(A){2===A.axis&&this.handleScroll(A,-A.detail)},handleScroll:function(H,o){if(y(H),this.gv){var z=this.gv;o>0?z.scrollZoomIn():0>o&&z.scrollZoomOut()}},handle_touchstart:function(A){if(y(A),this.gv&&E.isLeftButton(A)){var I=this,J=I.gv,m=U(A);1===m?E.isDoubleClick(A)&&J.isResettable()?J.reset():(I.center(A),u(I,A)):2===m&&(I._dist=W(A),u(I,A))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(C){if(this.gv){var y=this,d=y._dist,G=U(C);1===G?y.center(C):2===G&&d!=c&&y.gv.handlePinch(c,W(C),d)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);